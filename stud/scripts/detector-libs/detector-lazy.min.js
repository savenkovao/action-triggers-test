/*!
 * Version: [Local_version_prod] (2025-07-22)
 * Copyright (c) 2025 Glassbox https://www.glassboxdigital.com
 */
"use strict";(self.webpackChunkdetector=self.webpackChunkdetector||[]).push([[825],{"./src/js/DetectorDomBootstrap.js":(t,i,s)=>{s.r(i),s.d(i,{default:()=>$s});var h=s("./src/js/utils.js"),e=s("./src/js/env.js"),r=s("./src/js/config.js"),n=(s("./node_modules/core-js/modules/es.array.push.js"),s("./node_modules/core-js/modules/esnext.iterator.constructor.js"),s("./node_modules/core-js/modules/esnext.iterator.for-each.js"),{INPUT:!0,SELECT:!0,TEXTAREA:!0,t:!0,A:!0});class o{constructor(t,i,s,e){var r;if(this.q=()=>{clearTimeout(this.ga)},this.by=t=>{var i;if(this.TD&&this.TD.length)for(i=0;i<this.TD.length;++i)if(this.TR.matches(t,this.TD[i]))return!0;return!1},this.MV=t=>{let i;try{i=t.element.closest("a")}catch(t){return!1}return!(!i||"_blank"!=i.target)},this.DV=t=>{let i=4;for(;t&&i--;){if("BUTTON"===t.tagName&&t.disabled)return!0;t=h.default.parentNode(t)}return!1},this.AV=t=>{if(clearTimeout(this.ga),(t.element.disabled||t.element.ariaDisabled||!n[t.element.tagName])&&!h.default.gw(t)&&!this.MV(t)&&!this.by(t.element)&&!this.h.observeRightClick&&t.Of&&!t.Of.button&&2!==t.Of.button){const i=t.id,s=t,h={element:t.element,dataToEncode:{type:"deadClick",PV:i},relatedEvent:s};this.h.struggleCaptureDeadClickOnDisabledElements&&(t.element.disabled||t.element.ariaDisabled)?this.LV(h,"deadClick - disabledElement"):this.DV(t.element)?this.LV(h,"deadClick - disabledButtonParent"):this.ga=setTimeout((()=>{this.LV(h,"deadClick - enabledButtonParent")}),this.OV)}},this.TR=s,this.LV=i,this.ft=t,this.h=e,this.ga=null,this.OV=e.FV,this.TD=e.elementsToIgnoreBySelector,e.additionalTagNamesToIgnore&&e.additionalTagNamesToIgnore.length)for(r=0;r<e.additionalTagNamesToIgnore.length;++r)n[e.additionalTagNamesToIgnore[r]]=!0;this.ft.on("domMutation",this.q),this.ft.on("segmentChanged",this.q),this.ft.on("event:change",this.q),this.ft.on("ajax:send",this.q),this.ft.on("pageError",this.q),this.ft.on("event:unload",this.q),this.ft.on("window:open",this.q),"undefined"!=typeof Element&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var i=this;do{if(i.matches(t))return i;i=i.parentElement||h.default.parentNode(i)}while(null!==i&&1===i.nodeType);return null}))}}s("./node_modules/core-js/modules/esnext.iterator.filter.js");class a{constructor(t,i,s,h,e){this.AV=t=>{if(!this.NV.gw(t)){if(this.BV.length>0)for(var i=0;i<this.BV.length;i++)if(this.TR.matches(t.element,this.BV[i]))return;var s=this.VV.Nt(t.element);if(this.zV[s]){if(this.zV[s].UV.push({time:t.timestamp,HV:t.id}),this.zV[s].UV.length>=this.WV){var h=this;this.zV[s].UV=this.zV[s].UV.filter((function(i){return t.timestamp-i.time<h.GV}))}this.zV[s].UV.length>=this.WV?(t.indexInRage=this.WV+this.zV[s].count,t.rageSequence=this.qV,this.zV[s].YV||this.LV({element:t.element,dataToEncode:{type:"rageClick",startEventRelatedId:this.zV[s].UV[0].HV,endEventRelatedId:t.id,rageSequence:this.qV},relatedEvent:t},"rageClickStruggle"),this.zV[s].YV=!0,this.zV[s].count=this.zV[s].count+1):this.zV[s].YV&&(this.zV={},this.zV[s]={},this.zV[s].UV=[],this.zV[s].UV.push({time:t.timestamp,HV:t.id}),this.zV[s].count=0,++this.qV)}else this.zV[s]={},this.zV[s].UV=[],this.zV[s].UV.push({time:t.timestamp,HV:t.id}),this.zV[s].count=0;this.XV&&this.zV[this.XV]&&this.zV[this.XV].YV&&!this.zV[s].YV&&(this.zV[this.XV].YV=!1,this.zV[this.XV].count=0,++this.qV),this.XV=s}},this.NV=t,this.LV=s,this.VV=i,this.GV=e.GV||3e3,this.WV=e.KV||5,this.BV=e.elementsToIgnoreBySelector||[],this.zV={},this.qV=1,this.XV=null,this.TR=h}}s("./node_modules/core-js/modules/es.regexp.constructor.js"),s("./node_modules/core-js/modules/es.regexp.dot-all.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/esnext.iterator.map.js");class c{constructor(t,i,s){this.ZV=t=>{const i=this.$V.map((t=>{const i=t.toLowerCase().replace(/[-/\\^$+?.()|[\]{}]/g,"\\$&");return new RegExp(`^${i.replace(/\*/g,".*")}`)}));for(let s of i)if(s.test(t.toLowerCase()))return!0;return!1},this.JV=t=>{this.ga&&(t.QV=!1,this.tz.push(t.error),this.iz=!0)},this.AV=t=>{clearTimeout(this.ga);var i=t.id;this.ga=setTimeout((()=>{this.iz&&(this.tz=this.tz.filter(((t,i,s)=>s.indexOf(t)===i)),this.tz=this.tz.filter((t=>!this.ZV(t))),this.tz.length>0&&(this.iz=!1,this.LV({element:t.element,dataToEncode:{PV:i,type:"errorClick"},ig:this.tz,relatedEvent:t},"errorClickStruggle")),this.tz=[]),this.ga=null}),this.sz)},this.LV=i,this.ga=null,this.iz=!1,this.tz=[],this.sz=s.hz,this.$V=s.struggleErrorClickBlacklist,t.on("pageError",this.JV)}}var l=s("./src/js/resolving/ElementResolver.js"),d=s("./src/js/logger.js");class u{constructor(t,i,s,h,e){if(this.ez=()=>{clearTimeout(this.rz)},this.by=t=>{const i=this.h.elementsToIgnoreBySelector;if(i&&i.length)for(let s=0;s<i.length;++s)if(this.nz.matches(t,i[s]))return!0;return!1},this.oz=t=>{let i=this.si.getComputedStyle(t.element).overflow;if(i&&(i=i.toLowerCase()),"scroll"!==i&&"auto"!==i)return!1;try{const i=t.element.getBoundingClientRect(),s=i.right-i.width,h=this.si.getComputedStyle(t.element).direction;if("ltr"===h){if(t.value.Np.x>s+t.element.clientWidth)return!0}else if("rtl"===h&&t.value.Np.x<s+i.width-t.element.clientWidth)return!0;const e=i.bottom-i.height;if(t.value.Np.y>e+t.element.clientHeight)return!0}catch(t){d.default.error("Error while intercepting right click. Error: "+t.message,t)}return!1},this.MV=t=>{try{if(!t.element.closest("a"))return!1}catch(t){return!1}return"_blank"==t.element.closest("a").target},this.AV=t=>{if(2===t.Of.button&&(clearTimeout(this.rz),!this.az[t.element.tagName]&&!this.oz(t)&&!this.MV(t))){const i=t.id,s=t;this.rz=setTimeout((()=>{this.by(t.element)||this.cz({element:t.element,dataToEncode:{type:"rightClick",PV:i},relatedEvent:s},"rightClickStruggle")}),this.lz)}},this.si=t,this.At=i,this.cz=s,this.nz=h,this.h=e,this.rz=void 0,this.lz=e.rightClickTimeout,this.az={INPUT:!0,SELECT:!0,TEXTAREA:!0,t:!0},e.additionalTagNamesToIgnore&&e.additionalTagNamesToIgnore.length)for(let t=0;t<e.additionalTagNamesToIgnore.length;++t)this.az[e.additionalTagNamesToIgnore[t]]=!0;i.on("domMutation",this.ez),i.on("segmentChanged",this.ez),i.on("event:change",this.ez),i.on("ajax:send",this.ez),i.on("pageError",this.ez),i.on("event:unload",this.ez),"undefined"!=typeof Element&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var i=this;do{if(i.matches(t))return i;i=i.parentElement||i.parentNode}while(null!==i&&1===i.nodeType);return null}))}}var f=s("./src/js/utils/hookingUtils.js");class m{constructor(t,i,s,e,r){if(this.dz=()=>{try{f.default.VE(this.si).WE("open",(function(){this.ft.emit("window:open")}))}catch(t){d.default.error("Failed hooking window.open method. "+t.message,t)}},this.AV=t=>{this.uz.forEach((function(i){i(t)}))},this.uz=[],this.nz=new l.default(r.document),this.ft=i,this.si=r,e.struggleCaptureRightClick&&e.domRecordEnabled){const t=new u(r,i,s,this.nz,{rightClickTimeout:e.struggleRightClickInterval||1e3,elementsToIgnoreBySelector:e.struggleRightClickIgnoreBySelector||[],additionalTagNamesToIgnore:e.struggleRightClickIgnoreByTagNames||[]});this.uz.push(t.AV)}if(e.domRecordEnabled&&e.interceptAjax&&e.struggleCaptureDeadClick){this.dz();const t=new o(i,s,this.nz,{FV:e.struggleDeadClickInterval||1e3,elementsToIgnoreBySelector:e.struggleDeadClickIgnoreBySelector||[],additionalTagNamesToIgnore:e.struggleDeadClickIgnoreByTagNames||[],struggleCaptureDeadClickOnDisabledElements:e.struggleCaptureDeadClickOnDisabledElements||!1});this.uz.push(t.AV)}const n=new a(h.default,t,s,this.nz,{GV:e.struggleRageClickInterval,KV:e.struggleRageClickMinCount,elementsToIgnoreBySelector:e.struggleRageClickIgnoreBySelector});if(this.uz.push(n.AV),e.struggleCaptureErrorClick){const t=new c(i,s,{hz:e.struggleErrorClickInterval||1e3,struggleErrorClickBlacklist:e.struggleErrorClickBlacklist||[]});this.uz.push(t.AV)}}}class g{constructor(t,i,s){this.fz=()=>{this.mz=this.Vu(),this.mz&&this.gz&&this.cz({element:document,dataToEncode:{type:"reload"}},"pageStruggle - reload")},this.vz=()=>{var t,i=this.si.performance.getEntriesByType?this.si.performance.getEntriesByType("navigation"):[];if(i.length>0)for(t=0;t<i.length;t++){if("reload"===i[t].type)return this.gz=!0,void this.fz();if("back_forward"===i[t].type)return this.pz=!0,void this.wz()}this.si.performance.navigation&&this.si.PerformanceNavigation&&(this.si.performance.navigation.type===this.si.PerformanceNavigation.TYPE_RELOAD&&(this.gz=!0,this.fz()),this.si.performance.navigation.type===this.si.PerformanceNavigation.TYPE_BACK_FORWARD&&(this.pz=!0,this.wz()))},this.bz=()=>{this.vz()},this.yz=()=>{this.wz(),this.fz()},this.si=t,this.cz=i,this.mz=!1,this.pz=!1,this.Tz=!1,this.Vu=s,this.gz=!1,this.Ez=!1}wz(){this.mz=this.Vu(),this.mz&&this.pz&&!this.Tz&&this.cz({element:document,dataToEncode:{type:"backForward"}},"pageStruggle - backForward")}}s("./node_modules/core-js/modules/esnext.iterator.some.js");class v{constructor(t,i,s){this.Cz=t=>{(0===t.status&&!this.ajaxStruggleIgnoreCancel&&!this.kz(this.ajaxStruggleExcludedUrls,t.url)||t.status>=400)&&this.LV({ng:t.cg,cssSelector:t.lg,dataToEncode:{type:0===t.status?t.aborted?"ajaxAborted":"ajaxCanceled":"ajaxError",xhrStatus:t.status,url:t.url,sn:t.sn}},"ajaxStruggle - checkXhr")},this.LV=t,this.ajaxStruggleIgnoreCancel=i,this.ajaxStruggleExcludedUrls=s,this.kz=(t,i)=>!!t&&t.some((t=>0==i.indexOf(t)))}}class p{constructor(t,i,s,e,r,n){this.Sz=()=>{this.LV({dataToEncode:{type:"blankPage"}},"domStruggle - blankPage")},this.Iz=()=>{try{return this.pw.plugins.domRecordingPlugin.Mz("ShadowRoot",!1)}catch(t){return[]}},this.jz=t=>{for(var i=h.default.childNodes(t.shadowRoot),s=0;s<i.length;s++){if(i[s].nodeType===Node.ELEMENT_NODE&&0!==i[s].innerText.trim().length)return!1;if(i[s].nodeType===Node.TEXT_NODE&&0!==i[s].wholeText.trim().length)return!1}return!0},this.Dz=t=>t.shadowRoot?this.jz(t):0===t.innerText.trim().length,this.xz=()=>{try{var t=this.Iz();t.push(this.window.document);for(var i=0;i<t.length;i++)for(var s=t[i].querySelectorAll(this.options.Rz),h=0;h<s.length;h++)if(this.Dz(s[h]))return void this.Sz()}catch(t){}},this.UI=()=>{this.Az&&this.options.Pz?this.Sz():this.options.Rz&&this.xz()},this.Lz=t=>{if(this.Az&&t.nodeType===this.window.Node.TEXT_NODE){var i=t.textContent;i&&i.trim()&&h.default.isVisible(h.default.parentNode(t))&&(this.Az=!1)}},this.Oz=t=>{this.options.Pz&&this.Lz(t)},this.window=t,this.pw=i,this.options=r.ss(n,{Pz:!0,Rz:""}),this.LV=s,this.Fz=0,this.Az=!0,this.ke=e,this.NV=r,e.on("pageSnapshot:report",this.UI)}}class w{constructor(t,i,s,e,r,n){this.Nz=t=>{let i,s=!1,h=0;for(;!s&&h<this.Bz.length;){const e=document.querySelectorAll(this.Bz[h]);for(i=0;!s&&i<e.length;)t===e[i]&&(s=!0),i++;h++}return s},this._z=t=>{for(;t;){if(this.Nz(t))return h.default.isVisible(t)?t:null;t=h.default.parentNode(t)||t.host}return null},this.Vz=t=>{const i=t.querySelectorAll("input, select, button, textarea");for(let t=0;t<i.length;t++)switch(i[t].type){case"radio":i[t].checked&&(i[t].gbPrepop=!0);break;case"select":case"select-one":i[t].selectedIndex>-1&&(i[t].gbPrepop=!0);break;default:i[t].value&&(i[t].gbPrepop=!0)}t.gbPrepopCheck=!0},this.zz=t=>{if("INPUT"===t.element.tagName||"TEXTAREA"===t.element.tagName){const i=t.element;i.Uz&&!this.Wz[this.Ya.Nt(i)]&&h.default.pE(t.Of)&&(this.Wz[this.Ya.Nt(i)]=!0,this.cz({element:i,dataToEncode:{type:"inputCharsExceeded",PV:t.id},relatedEvent:t},"formStruggle - checkLimit"));const s=parseInt(i.getAttribute("maxLength"));i.Uz=s<=i.value.length}},this.Gz=(t,i)=>{if(!t)return!0;if(this.qz&&(t.gbPrepop||t.getAttribute("value")))return!0;if(this.Yz.length){const t=i?i.outerHTML.toLowerCase():"";for(let i=0;i<this.Yz.length;i++)if(t.indexOf(this.Yz[i].toLowerCase())>=0)return!0}return!1},this.Xz=t=>{const i=this._z(t.element),s=t.element,h=s?parseInt(s.getAttribute("tabindex")):void 0,e=this.Kz?parseInt(this.Kz.getAttribute("tabindex")):void 0;if(this.qz&&i&&!i.gbPrepopCheck&&this.Vz(i),"radio"===s.type){if(s.name===this.Zz)return;this.Zz=s.name}else this.Zz=null;if(this.Kz&&i===this.$z&&!this.Gz(s,i)&&!this.Gz(this.Kz))if(h&&e&&h<e)this.cz({element:s,dataToEncode:{type:"formZigzag",reason:"tabindex",PV:t.id},relatedEvent:t},"formStruggle - zigZag1");else{const i=s.getBoundingClientRect(),h=this.Kz&&this.Kz.getBoundingClientRect(),e=i.top-h.top==0;if(i.top-h.top<0)this.cz({element:s,dataToEncode:{type:"formZigzag",reason:"vertical",PV:t.id},relatedEvent:t},"formStruggle - zigZag2");else{const r="rtl"===this.si.getComputedStyle(s).getPropertyValue("direction")||"rtl"===this.si.getComputedStyle(document.body).getPropertyValue("direction");e&&!r&&i.left-h.left<0?this.cz({element:s,dataToEncode:{type:"formZigzag",reason:"horizontal",PV:t.id},relatedEvent:t},"formStruggle - zigZag3"):e&&r&&i.right-h.right>0&&this.cz({element:s,dataToEncode:{type:"formZigzag",reason:"horizontal-rtl",PV:t.id},relatedEvent:t},"formStruggle - zigZag4")}}this.$z=i,this.Kz=s},this.Jz=t=>{if(h.default.ri())return!1;const i=this._z(t.element);if(!i)return!1;const s=this.Ya.Nt(i);if(i.querySelectorAll("input:not([type]), input[type=text], textarea").length<this.h.struggleUncompletedFormMinFields)return!1;this.Qz[s]||(this.Qz[s]={selector:this.HL.Sf(i),cssSelector:this.ZL.Sf(i),HV:t.id,relatedEvent:t})},this.tH=t=>{const i=this._z(t.element);if(!i)return;const s=this.Ya.Nt(i);i&&this.Qz[s]&&delete this.Qz[s]},this.iH=()=>{for(const t in this.Qz)this.Qz.hasOwnProperty(t)&&this.cz({ng:this.Qz[t].selector,cssSelector:this.Qz[t].cssSelector,dataToEncode:{type:"uncompletedForm",PV:this.Qz[t].HV},relatedEvent:this.Qz[t].relatedEvent},"formStruggle - uncompletedForm")},this.sH=t=>{const i=t.extraInfo&&Math.floor(t.extraInfo.focusTime||0);i>this.hH&&this.cz({element:this.Kz,dataToEncode:{type:"longFocusTime",duration:i,PV:t.id},relatedEvent:this.Ux},"formStruggle - longFocus"),this.Ux=t},this.eH=t=>{const i=this._z(t.element);if(!i)return;const s=this.Ya.Nt(i);this.rH[s]?(this.rH[s].count++,this.rH[s].nH=t.id,this.rH[s].relatedEvent=t):this.rH[s]={count:1,oH:t.id,relatedEvent:t},this.rH[s].count>1&&this.cz({element:i,dataToEncode:{type:"formResubmitted",count:this.rH[s].count,startEventRelatedId:this.rH[s].oH,endEventRelatedId:this.rH[s].nH},relatedEvent:this.rH[s].relatedEvent},"formStruggle - resubmitted")},this.aH=t=>{this.tH(t),this.eH(t)},this.cH=t=>{this.zz(t)},this.lH=t=>{this.Jz(t),this.Xz(t),this.sH(t)},this.dH=()=>{this.iH()},this.si=t,this.Ya=i,this.cz=s,this.HL=e,this.ZL=r,this.h=n,this.rH={},this.Qz={},this.Kz=null,this.$z=null,this.Zz=null,this.Wz={},this.hH=n.uH||3e4,this.Ux=void 0,this.Bz=n.formStruggleZigzagFormSelectors||["form"],this.Yz=n.formStruggleZigzagIgnoreFormsWithText||[],this.qz=n.formStruggleZigzagIgnorePrepopulated}}class b{constructor(t,i,s,e,r,n,o,a,c){this.fH=(t,i)=>{t.dataToEncode?this.mH?this.ke.emit("reportStruggle",t):setTimeout((()=>{this.ke.emit("reportStruggle",t)}),0):this.ke.emit("clsDebug","reportStruggle missing dataToEncode. Came from: "+i)},this.gH=()=>{this.vH.bz.call(this.vH)},this.yz=()=>{this.vH.yz()},this.pH=t=>{this.wH.aH.call(this.wH,t)},this.bH=t=>{this.wH.cH.call(this.wH,t)},this.yH=t=>{this.wH.lH.call(this.wH,t)},this.TH=()=>{this.mH=!0,this.wH.dH.call(this.wH)},this.EH=t=>{this.CH.AV.call(this.CH,t)},this.kH=t=>{this.SH.Cz.call(this.SH,t)},this.initialize=()=>{this.ke.once("domInit:loaded",this.gH),this.ke.on("event:click",this.EH),this.ke.on("rightclick",this.EH),this.ke.once("sessionCookieSet",this.yz),this.ke.once("plugin:sessionCookieSet",this.yz),this.IH.struggleCaptureAjaxErrors&&(this.SH=new v(this.fH,this.IH.ajaxStruggleIgnoreCancel,this.IH.ajaxStruggleExcludedUrls),this.ke.on("ajax:end",this.kH)),this.IH.collectFormStruggles&&(this.wH=new w(this.window,this.VV,this.fH,this.kf,this.xf,{uH:this.IH.struggleMaxLongFocusTime,struggleUncompletedFormMinFields:this.IH.struggleUncompletedFormMinFields,formStruggleZigzagIgnoreFormsWithText:this.IH.formStruggleZigzagIgnoreFormsWithText,formStruggleZigzagIgnorePrepopulated:this.IH.formStruggleZigzagIgnorePrepopulated,formStruggleZigzagFormSelectors:this.IH.formStruggleZigzagFormSelectors}),this.ke.on("event:submit",this.pH),this.ke.on("event:keyup",this.bH),this.ke.on("event:elementChange",this.yH),this.ke.on("event:unload",this.TH))},this.MH=t!==t.top,this.IH=c,this.window=t,this.VV=s,this.ke=i,this.pw=a,this.kf=r,this.xf=n,this.wH={},this.CH=new m(this.VV,this.ke,this.fH,this.IH,this.window),this.vH=new g(this.window,this.fH,this.pw.Vu),this.SH=void 0,this.jH=new p(this.window,this.pw,this.fH,this.ke,h.default,{Pz:!this.MH&&this.IH.struggleCaptureBlankPage,Rz:c.struggleCaptureBlankPageTargetsSelector}),e.Gg(this.jH.Oz),this.mH=!1}}class y{constructor(t,i,e,r,n,o,a,c){this.DH=t=>{this.sx[t.type]&&setTimeout((()=>{this.xH(this.Ho,!1)}),0)},this.RH=()=>!(void 0!==this.AH&&this.AH>-1&&(++this.PH,this.LH&&clearTimeout(this.LH),this.LH=setTimeout((()=>{this.PH=0}),500),this.PH>this.AH)),this.OH=(t,i)=>{this.vk.badRules.push({rule:t,msg:i})},this.FH=t=>{for(var i=0;i<this.NH.length;i++)if(!t[this.NH[i]])return void this.OH(t,"missing mandatory property: "+this.NH[i]);if(this.BH[t.accessorMethod])if(this.nz.Db(t.selector)){var s,e=t.pageUrl;t.pageHash&&(e+=("#"===t.pageHash.charAt(0)?"":"#")+t.pageHash);try{s=new RegExp("^"+e.split("*").join(".*")+"$")}catch(i){return d.default.error("Exception occurred during parsing regular expression. Error: "+i.message,i),void this.OH(t,"Exception occurred during parsing regular expression: "+i.message)}if(s.test(h.default.ji(this.si.location.href)))return t.selector=t.selector.replace(/\s*>\s*/g,">"),new this._H(t,this.nz,this.BH,s)}else this.OH(t,"invalid selector");else this.OH(t,"invalid accessorMethod")},this.VH=t=>{for(var i,s=0;s<t.length;s++)(i=this.FH(t[s]))&&this.zH.push(i);this.vk.configured=t.length},this.UH=t=>{var i;return()=>(i||(i=this.HL.Sf(t,!1).selector),i)},this.xH=(t,i)=>{try{for(var e,r,n=h.default.ji(this.si.location.href),o={},a=0;a<this.zH.length;a++)if(e=this.zH[a].evaluate(t,n,i,o,this.UH(t)),r=this.zH[a].HH(),e&&e.W_&&this.WH[r]!==e.W_){if(e.VP())this.vk.masked++;else{var c=this.zH[a].GH()||this.h.clientAttributeMaxLength;this.ft.emit("clientAttribute",{name:r,W_:e.W_.substring(0,c)}),this.vk.reportsByRule[r]=(this.vk.reportsByRule[r]||0)+1,this.vk.reported++,this.zH[a].qH.sessionTerminator&&s.g[this.YH].invalidateSession()}this.WH[r]=e.W_}}catch(t){d.default.error("Exception occurred during rule evaluation. Error: "+t.message,t)}},this.XH=t=>{if(!this.h.ClientAttributesOnUserInteraction)if(this.KH)if(this.RH()){let i="characterData"===t.type;const s=!i&&"attributes"===t.type,e=i?h.default.parentNode(t.target):t.target;i||"childList"!==t.type||(i=1===t.addedNodes.length&&t.addedNodes[0].nodeType===window.Node.TEXT_NODE),e&&this.xH(e,i||s)}else this.ZH();else this.ZH()},this.ZH=()=>{!this.h.ClientAttributesOnUserInteraction&&void 0!==this.$H&&this.$H>-1&&(this.JH&&clearTimeout(this.JH),this.KH=!1,this.JH=setTimeout((()=>{this.KH=!0,this.xH(this.Ho,!1)}),this.$H))},this.QH=()=>{this.zH=[],!this.h.ClientAttributesOnUserInteraction&&this.tW&&(this.ft.off("domMutation",this.XH),this.tW=!1)},this.iW=(t,i)=>{var s,h;for(s=0;s<i.length;++s){var e=!1;for(h=0;h<t.length;++h)if(t[h].name===i[s].name){e=!0;break}e||t.push(i[s])}},this.sW=t=>{this.QH(),this.WH={},this.vk.configurationLastUpdatedAt=h.default.nr(),this.iW(this.hW,t),h.default.assign(this.vk.rulesList,this.hW),this.VH(this.hW),this.h.ClientAttributesOnUserInteraction||this.tW||!this.zH.length||(this.ft.on("domMutation",this.XH),this.tW=!0),this.eW&&this.xH(this.Ho,!1)},this.getStats=()=>this.vk,this.evaluateAttributes=()=>{this.xH(this.Ho,!1)},this.si=t,this.Ho=this.si.document,this.ft=i,this._H=r,this.nz=n,this.HL=o,this.BH=a,this.h=c,this.WH={},this.YH=e,this.zH=[],this.hW=[],this.NH=["name","pageUrl","selector","accessorMethod","accessor"],this.eW=!1,this.vk={masked:0,reported:0,configured:0,configurationLastUpdatedAt:0,badRules:[],reportsByRule:{},rulesList:[]},this.sx=h.default.N("mousedown","scroll","touchstart","touchend","keydown","drag","dragstart","dragend","navigation","unload","beforeunload"),this.tW=!1,this.$H=c.clientAttributeFuseWaitTime,this.KH=!0,this.JH=0,this.AH=c.clientAttributeMaxMutations,this.PH=0,this.LH=0,i.once("domInit:loaded",(()=>{this.xH(this.Ho,!1),this.eW=!0})),this.h.ClientAttributesOnUserInteraction?i.on("saveEvent",this.DH):i.on("segmentChanged",this.ZH),this.rW=this.FH}}class T{constructor(t,i,s,h){this.nz=i,this.BH=s,this.qH=t,this.nW=h,this.oW=-1!==t.selector.indexOf(">")}aW(t){return this.nW.test(t)}HH(){return this.qH.name}GH(){return this.qH.maxLength}evaluate(t,i,s,e,r){if(this.aW(i)){var n=e[this.qH.selector];if(n||(s?this.nz.matches(t,this.qH.selector)&&(n=t):n=this.nz.querySelector(t,this.qH.selector)),!n&&this.oW){var o=r();if(h.default.startsWith(this.qH.selector,o)){var a=this.qH.selector.substring(o.length+1);if(a)try{s?this.nz.matches(t,a)&&(n=t):n=this.nz.querySelector(t,a)}catch(t){}}}if(n)return e[this.qH.selector]=n,this.BH[this.qH.accessorMethod](n,this.qH.accessor)}}}var E=s("./src/js/enums/domMaskerTypes.js"),C=s("./src/js/censor/domCensorDirection.js");class k{constructor(t,i,s,e){this.cW=t=>{for(;t;){if(t.nodeType===window.Node.ELEMENT_NODE&&t.hasAttribute(this.ib))return!0;t=h.default.parentNode(t)}return!1},this.lW=t=>!("value"!==t.accessor||!this.GP.rb(t.dW,C.default.jt,E.default.Jg))||(!!this.GP.rb(t.dW,C.default._t,E.default.Yg)||!(!this.uW[t.accessor]||!this.fW[t.dW.tagName.toLowerCase()]||t.dW.hasAttribute&&t.dW.hasAttribute(this.ib))),this.mW=t=>{if(this.GP.rb(t.dW,C.default._t,E.default.Yg))return!0;if(this.gW&&"value"===t.accessor){if(this.h.valueMaskIgnoreAttribute&&t.dW&&t.dW.nodeType===window.Node.ELEMENT_NODE&&t.dW.hasAttribute(this.h.valueMaskIgnoreAttribute))return!1;if(this.gW.ct(t.dW))return!0}return("innerText"!==t.accessor&&"textContent"!==t.accessor&&"innerHTML"!==t.accessor&&"outerHTML"!==t.accessor||!this.ib||!this.cW(t.dW))&&(!("innerText"!==t.accessor&&"textContent"!==t.accessor||!(this.GP.rb(t.dW,C.default.yt,E.default.Zg)||this.GP.rb(t.dW,C.default._t,E.default.Zg)||this.vW.Et(t.dW,C.default.yt)||this.vW.Et(t.dW,C.default._t)))||(!("innerHTML"!==t.accessor||!(this.GP.rb(t.dW,C.default.yt,E.default.Zg,E.default.Xg)||this.GP.rb(t.dW,C.default._t,E.default.Zg,E.default.Xg)||this.vW.Et(t.dW,C.default.yt)||this.vW.Et(t.dW,C.default._t)))||!("outerHTML"!==t.accessor||!(this.GP.rb(t.dW,C.default.yt,E.default.Zg,E.default.Xg)||this.GP.rb(t.dW,C.default._t,E.default.Zg,E.default.Xg)||this.vW.Et(t.dW,C.default.yt)||this.vW.Et(t.dW,C.default._t)))))},this.pW=t=>!!this.GP.rb(t.dW,C.default._t,E.default.Yg),this.GP=t,this.vW=i,this.gW=s,this.h=e,this.uW=h.default.N.apply(null,this.h.domMaskedAttributes),this.fW=h.default.N.apply(null,this.h.domMaskAttributesByTag),this.ib=this.h.domMaskIgnoreAttribute,this.attribute=(t,i)=>{var s={accessor:i,dW:t,W_:t.getAttribute&&t.getAttribute(i)};return s.VP=()=>this.lW(s),s},this.property=(t,i)=>{var s={accessor:i,dW:t,W_:""+(t[i]||"")};return s.VP=()=>this.mW(s),s},this.constant=(t,i)=>{var s={dW:t,W_:i};return s.VP=()=>this.pW(s),s}}}class S{constructor(t,i,s,e,n,o,a){this.wW=t=>{t.attributeRules&&(this.bW.sW(t.attributeRules),this.NO=t.attributeRules),this.yW=h.default.nr()},this.TW=t=>{this.yW||(this.wW(t),this.EW=!0)},this.kW=()=>{this.NO&&this.bW.sW(this.NO)},this.initialize=function(){};var c=s.plugins.domRecordingPlugin&&s.plugins.domRecordingPlugin.mx(),l=s.plugins.domRecordingPlugin&&s.plugins.domRecordingPlugin.SW();c||(c={rb:function(){return!1}}),l||(l={Et:function(){return!1}}),this.bW=new y(t,i,a,T,n,o,new k(c,l,e,{domMaskedAttributes:r.default.domMaskedAttributes,domMaskAttributesByTag:r.default.domMaskAttributesByTag,domMaskIgnoreAttribute:r.default.domMaskIgnoreAttribute,valueMaskIgnoreAttribute:r.default.valueMaskIgnoreAttribute}),{clientAttributeMaxLength:r.default.clientAttributeMaxLength,clientAttributeFuseWaitTime:r.default.clientAttributeFuseWaitTime,clientAttributeMaxMutations:r.default.clientAttributeMaxMutations,ClientAttributesOnUserInteraction:r.default.ClientAttributesOnUserInteraction}),this.NO=void 0,this.stats=()=>this.bW.getStats(),this.evaluateAttributes=()=>{this.bW.evaluateAttributes()},this.EW=!1,this.yW=void 0,i.once("plugin:newRemoteConfig",this.TW),i.on("newRemoteConfig",this.wW),i.on("segmentChanged",this.kW)}}var I=s("./src/js/resolving/SelectorResolver.js");const M={SHOW_ALL:0,IW:1};class j{constructor(t,i,s){this.MW=t=>{for(;t&&!t[this.jW];)t[this.jW]=!0,t=h.default.parentNode(t)?h.default.parentNode(t):t.host},this.DW=t=>{const i=this,s=this.si.Element.prototype[t];s&&(this.si.Element.prototype[t]=function(){const t=s.apply(this,arguments);try{h.default.zp(this)?(i.ft.emit("shadow:rootAttached",t),i.ft.emit("shadow:rootDetected",t)):i.ft.emit("shadow:rootDetected",t),this[i.xW]=!0,i.MW(this),i.vk.hookInvocationsCount++,i.vk.totalShadowRootCount++}catch(t){}return t})},this.RW=t=>{let i;for(i=0;i<t.length;i++)this.MW(t[i]),this.ft.emit("shadow:rootDetected",t[i]),this.vk.initialShadowRootCount++,this.vk.totalShadowRootCount++},this.AW=t=>{if("childList"===t.type){let i;for(i=0;i<t.addedNodes.length;i++)t.addedNodes[i][this.jW]&&this.LW.PW(t.addedNodes[i],(t=>{t.shadowRoot&&!t[this.xW]&&this.ft.emit("shadow:rootDetected",t.shadowRoot)}),M.IW);for(i=0;i<t.removedNodes.length;i++)t.removedNodes[i][this.jW]&&this.LW.PW(t.removedNodes[i],(t=>{t.shadowRoot&&(this.ft.emit("shadow:rootRemoved",t.shadowRoot),this.vk.totalShadowRootCount--,this.vk.totalShadowRootRemoved++)}),M.IW)}},this.OW=t=>{this.RW(t||[]),["attachShadow","createShadowRoot"].forEach(this.DW)},this.stats=()=>this.vk,this.si=t,this.ft=i,this.LW=s,this.jW="_gbHasShadow",this.xW="_gbHasObserver",this.vk={initialShadowRootCount:0,hookInvocationsCount:0,totalShadowRootCount:0,totalShadowRootRemoved:0},this.ft.on("domMutation",this.AW)}}class D{constructor(t,i,s){this.element=t,this.id=i,this.addedNodes={},this.FW=[],this.Ya=s}NW(t){this.addedNodes[t]=!0}}class x{constructor(t,i,s){this.BW=(t,i,s)=>{const h=this._W(t);if(!h)return;const e=(this.VW[i]||{})[h],r=t[h];(t.zW||(this.UW?r!==this.defaultValue(t,h):e!==r))&&(s[i]||(s[i]=new D(t,i,this.Ya),s[i].properties=[]),s[i].properties.push(h));const n={};n[h]=r,this.VW[i]=n},this.HW=t=>!(!t.id||!this.WW[t.id])||"hidden"===t.getAttribute("type"),this.start=()=>{},this.track=()=>{let t,i;const s={},h={},e=this.Hx.querySelectorAll("input,select,textarea");for(t=0;t<e.length;t++)this.HW(e[t])||(i=this.Ya.Nt(e[t]),this.BW(e[t],i,s),h[i]=!0);let r;for(r in this.VW)h[r]||delete this.VW[r];return this.UW=!1,s},this.GW=()=>this.Hx,this._W=t=>{if("SELECT"===t.tagName)return"selectedIndex";if("TEXTAREA"===t.tagName)return"value";if("INPUT"===t.tagName){const i=t.getAttribute("type")&&t.getAttribute("type").toLowerCase();return!i||"checkbox"!==i&&"radio"!==i?"value":"checked"}},this.defaultValue=(t,i)=>{if("checked"===i)return t.hasAttribute("checked");if("selectedIndex"===i){const i=t.querySelector("option[selected]");return i?i.index:null!==t.querySelector("option")?0:-1}const s=t.getAttribute(i);return s||"value"!==i?s:""},this.qW=()=>Object.keys(this.VW).length,this.Hx=t,this.Ya=i,this.WW=h.default.N.apply(null,s||[]),this.UW=!0,this.VW={}}}s("./node_modules/core-js/modules/es.error.cause.js");class R{constructor(t,i,s,e,r,n){this.YW=()=>{this.XW&&(this.XW=!1,this.start())},this.KW=()=>{if(!this.ZW){if(this.$W=this.JW(this.$W),!this.$W)throw new Error("cannot start DomObserver: native interface not supported by the browser.");this.h.handleAttributeMutationsAsChunks>=0?this.ZW=new this.$W(this.QW):this.ZW=new this.$W((t=>{this.h.domIgnoreLargeMutationsChunks>0&&t&&t.length>this.h.domIgnoreLargeMutationsChunks||t.forEach(this.tG)}))}},this.iG=()=>this.si.document&&this.si.document.body,this.sG=t=>!!t.toString&&-1!==t.toString().toLowerCase().indexOf("[native code]"),this.JW=t=>{if(!this.iG())return t;if(this.h.reinstateNativeMutationObserver&&"undefined"!=typeof __zone_symbol__MutationObserver)return __zone_symbol__MutationObserver;const i=t.toString().toLowerCase();return this.h.reinstateNativeMutationObserver&&i.indexOf("[native code]")<0?h.default.gE("MutationObserver"):t},this.hG=t=>{var i;for(i=0;i<t.length;i++)if(this.eG(t[i]))return!1;return!0},this.rG=t=>{var i,s=[];for(i=0;i<t.length;i++)h.default.zp(t[i])&&s.push(t[i]);return s.length===t.length?void 0:s},this.QW=t=>{if(!window.Node)return;let i;this.nG&&window.clearTimeout(this.oG);for(let s=0;s<t.length;s++){if(i=t[s],this.h.domIgnoreSameValueAttributesModification&&"attributes"===i.type&&i.target.getAttribute(i.attributeName)===i.oldValue)return;if("attributes"===i.type){if(this.aG[i.attributeName])continue;i.target.cG=i.target.cG||this.lG++;const t=i.target.cG+"_"+i.attributeName,s=this.dG[t];s&&(s.uU=!0),this.dG[t]=i,this.uG.push(i),this.nG=!0}else this.KI(),this.XH(i)}this.nG&&(this.oG=setTimeout(this.KI,this.h.handleAttributeMutationsAsChunks))},this.tG=t=>{window.Node&&(this.h.domIgnoreSameValueAttributesModification&&"attributes"===t.type&&t.target.getAttribute(t.attributeName)===t.oldValue||"attributes"===t.type&&this.aG[t.attributeName]||this.XH(t))},this.XH=t=>{let i=t.target;if(this.eG(i)&&(!this.h.ignoreMutationsOnNotAttachedElements||h.default.zp(i))){if("characterData"===t.type){try{if((null===t.oldValue||""===t.oldValue||"string"==typeof t.oldValue&&""===t.oldValue.trim())&&""===t.target.nodeValue.trim())return}catch(t){}i instanceof CharacterData&&(i=h.default.parentNode(i)||i)}if(this.h.domOmitInvisibleElements&&i.nodeType===this.si.Node.ELEMENT_NODE&&!i.fG&&h.default.isVisible(i)&&(t={type:"childList",target:h.default.parentNode(t.target),mG:h.default.parentNode(t.target),addedNodes:[i],removedNodes:[]},i.fG=!0,i=h.default.parentNode(i)),"childList"===t.type){if(this.hG(t.addedNodes)&&this.hG(t.removedNodes))return;if(this.h.addBaseDomainToRelativeUrls)for(var s=0;s<t.target.children.length;s++){var e=t.target.children[s].attributes.href;e&&e.value&&0===e.value.indexOf("/")&&1!==e.value.indexOf("//")&&(e.value=h.default.Hw(e.value))}var r=this.rG(t.addedNodes);if(r){if(!r.length&&!t.removedNodes.length)return;t={type:t.type,target:t.target,mG:t.mG,addedNodes:r,removedNodes:t.removedNodes}}}if(t.mG=i,!this.vG.gG(t)){if(this.h.domIgnoreSameValueAttributesModification&&"attributes"===t.type&&"class"===t.attributeName&&t.target.classList&&t.target.classList.value===t.oldValue)return;if(this.h.delayDomMutationEvent>=0)setTimeout((()=>{this.ft.emit("domMutation",t)}),this.h.delayDomMutationEvent);else if(t.addedNodes.length>0&&h.default.vE(this.h.domDelayAddedNodesByClass,t.addedNodes)){const i=this;setTimeout((function(){i.ft.emit("domMutation",t)}),0)}else this.ft.emit("domMutation",t)}}},this.KI=()=>{if(!this.nG)return;const t=this.uG;this.dG={},this.uG=[];for(let i=0;i<t.length;i++)t[i].uU||this.XH(t[i]);this.nG=!1},this.pG=()=>{this.wG=!1,this.ZW&&this.ZW.disconnect()},this.bG=()=>"MutationObserver based",this.start=()=>{this.XW||this.wG||(this.KW(),this.ZW.observe(this.Hx,this.yG),this.wG=!0)},this.stop=()=>{this.pG()},this.si=t,this.ft=i,this.vG=s,this.Hx=e,this.eG=r,this.h=n,this.ZW,this.wG=!1,this.XW=!1,this.aG=h.default.N.apply(null,this.h.domIgnoreAttributes||[]),this.lG=1,this.dG={},this.uG=[],this.nG=!1,this.oG=void 0,this.$W=this.si.MutationObserver||this.si.WebKitMutationObserver||null,this.h.initialObserverFirst&&this.KW(),this.yG={attributes:!this.h.characterDataOnly,childList:!this.h.characterDataOnly,characterData:!0,subtree:!this.h.characterDataOnly,attributeOldValue:!this.h.characterDataOnly&&this.h.domIgnoreSameValueAttributesModification,characterDataOldValue:!0},!this.h.characterDataOnly&&this.h.domFilterAttributes&&this.h.domFilterAttributes.length&&(this.yG.attributeFilter=this.h.domFilterAttributes),this.h.reinstateNativeMutationObserver&&this.ft.once("init:domready",(()=>{this.$W=this.JW(this.$W)}))}}class A{constructor(t,i,s,e,r){this.TG=t=>{h.default.ii(t,"DOMCharacterDataModified",this.tG,!1),this.h.characterDataOnly||(h.default.ii(t,"DOMNodeInserted",this.tG,!1),h.default.ii(t,"DOMNodeRemoved",this.tG,!1),h.default.ii(t,"DOMAttrModified",this.tG,!1))},this.YW=()=>{this.XW&&(this.XW=!1,this.start())},this.tG=t=>{let i,s,e;const r=[],n=[],o=t.type;if("DOMNodeInserted"===t.type){if(i="childList",s=h.default.parentNode(t.target),s&&(r.push(t.target),!this.eG(t.target)))return}else if("DOMNodeRemoved"===t.type){if(i="childList",s=h.default.parentNode(t.target),s&&(n.push(t.target),!this.eG(t.target)))return}else if("DOMCharacterDataModified"===t.type)i="characterData",s=h.default.parentNode(t.target);else{if("DOMAttrModified"!==t.type)return;i="attributes",s=t.target,e=t.attrName}if(!this.eG(s))return;if(!s)return;const a={EG:o,type:i,target:t.target,mG:s,attributeName:e,addedNodes:r,removedNodes:n};this.vG.gG(a)||this.ft.emit("domMutation",a)},this.pG=()=>{this.wG&&(this.wG=!1,this.Hx.removeEventListener("DOMCharacterDataModified",this.tG,!1),this.h.characterDataOnly||(this.Hx.removeEventListener("DOMNodeRemoved",this.tG,!1),this.Hx.removeEventListener("DOMAttrModified",this.tG,!1),this.Hx.removeEventListener("DOMNodeInserted",this.tG,!1)))},this.CG=()=>{this.XW=!0,this.pG()},this.bG=()=>"DOM events based",this.supported=()=>"undefined"!=typeof MutationEvent,this.start=()=>{this.XW||this.wG||(this.TG(this.Hx),this.wG=!0)},this.stop=()=>{this.pG()},this.isActive=()=>this.wG,this.ft=t,this.vG=i,this.Hx=s,this.eG=e,this.wG=!1,this.XW=!1,this.ft.on("quotaBreach",this.CG),this.ft.on("recordingStarted",this.YW),this.ft.on("stopDomRecording",this.stop),this.h=r}}class P{constructor(t,i,s){this.kG=t=>{for(;t;)this.SG[this.Ya.Nt(t)]=!0,t=h.default.parentNode(t)},this.IG=(t,i)=>{for(var s,e,r=[t];r.length;)if(i(t=r.shift()),e=this.Ya.Nt(t),h.default.children(t)&&this.SG[e])for(delete this.SG[e],s=0;s<h.default.children(t).length;s++)r.push(h.default.children(t)[s])},this.MG=(t,i,s)=>{function h(t){var i;for(i=0;i<t.length;i++)if("STYLE"===t[i].tagName)return!0;return!1}return!t.ownerDocument.head.contains(t)&&!h(i||[])&&!h(s||[])},this.jG=t=>{var i=this.Ya.Nt(t);if(this.sa[i]){delete this.sa[i];var s,e=[],r=h.default.childNodes(t)||[];for(s=0;s<r.length;s++)r[s].DG&&(delete r[s].DG,e.push(r[s]));this.ft.emit("domMutation",{EG:"childList",type:"childList",target:t,mG:t,addedNodes:e,removedNodes:[]})}},this.Pe=t=>{var i=this.Ya.Nt(t.mG),s=h.default.isVisible(t.mG);if("childList"===t.type&&this.MG(t.mG,t.addedNodes,t.removedNodes)&&!s){var e;for(e=0;e<t.addedNodes.length;e++)t.addedNodes[e].DG=!0;return this.sa[i]=!0,this.vk.xG+=t.addedNodes.length,this.vk.AG++,this.kG(t.mG),!0}return this.SG[i]&&s&&this.IG(t.mG,this.jG),!1},this.ft=i,this.Ya=s,this.sa={},this.SG={},this.vk={AG:0,xG:0},this.PG=h.default.N("DIV","UL","OL","LI","NAV","SPAN","STRONG","LABEL","A"),this.gG=this.Pe}}class L{constructor(t,i,s,e,r,n){this.Sa=t=>this.eG(t)&&!h.default.Rw(t,this.h.domIgnoreChangesByTag)&&!h.default.je(t,this.h.domIgnoreChangesByClass)&&this.h.domIgnoreChangesById.indexOf(h.default.fe(t))<0,this.si=t,this.eG=e,this.h=h.default.ss(n,{domIgnoreChangesByTag:[],domIgnoreChangesByClass:[],domIgnoreChangesById:[]});let o,a=this.h.LG||this.h.OG&&this.FG()?new P(t,i,r):{gG:function(){return!1}};this.h.domForceMutationEventsHandler?(o=new A(i,a,s,this.Sa,{characterDataOnly:!!this.h.characterDataOnly}),o.supported()||(o=void 0)):o=new R(t,i,a,s,this.Sa,{domTamperingDetectionEnabled:this.h.domTamperingDetectionEnabled,delayDomMutationEvent:this.h.delayDomMutationEvent,domDelayAddedNodesByClass:this.h.domDelayAddedNodesByClass,domFilterAttributes:this.h.domFilterAttributes,domIgnoreAttributes:this.h.domIgnoreAttributes,domOmitInvisibleElements:this.h.domOmitInvisibleElements,handleAttributeMutationsAsChunks:this.h.handleAttributeMutationsAsChunks,ignoreMutationsOnNotAttachedElements:this.h.ignoreMutationsOnNotAttachedElements,characterDataOnly:!!this.h.characterDataOnly,reinstateNativeMutationObserver:this.h.reinstateNativeMutationObserver,initialObserverFirst:this.h.initialObserverFirst,addBaseDomainToRelativeUrls:this.h.addBaseDomainToRelativeUrls,domIgnoreSameValueAttributesModification:this.h.domIgnoreSameValueAttributesModification,domIgnoreLargeMutationsChunks:this.h.domIgnoreLargeMutationsChunks}),this.NG=o}}class O{constructor(t,i){this.apply=(t,i)=>{if(!this.HW(t.element)&&t.properties&&t.properties.length>0){let s,e,r=this.BG[t.element.tagName];if(r){let n=h.default.Bw(i,r,t.id);for(s=0;s<t.properties.length;s++)e=this._G(t.element,t.properties[s]),n[e]=this.VG(t.element,e);return n}}},this.VG=(t,i)=>this.gW&&"value"===i?this.gW.ot(t):t[i],this.HW=t=>this.zG[h.default.fe(t)],this._G=(t,i)=>"SELECT"===t.tagName?"selectedIndex":"INPUT"===t.tagName&&this.UG[t.getAttribute("type")||""]?"checked":i,this.gW=t,this.h=i||{},this.UG=h.default.N("checkbox","radio"),this.zG=h.default.N.apply(null,this.h.HG||[]),this.BG={INPUT:"inputs",SELECT:"selects",TEXTAREA:"textareas"}}}class F{constructor(t,i,s,h,e,r,n,o){this.WG=t=>{const i=new L(this.GG,this.ft,t,this.YG.qG,this.XG,{semiDomEnabled:this.h.semiDomEnabled,domForceIEMutationEventsHandler:this.h.domForceIEMutationEventsHandler,domForceMutationEventsHandler:this.h.domForceMutationEventsHandler,domTamperingDetectionEnabled:this.h.domTamperingDetectionEnabled,domDelayAddedNodesByClass:this.h.domDelayAddedNodesByClass,domFilterAttributes:this.h.domFilterAttributes,domIgnoreAttributes:this.h.domIgnoreAttributes,domIgnoreChangesById:this.h.domIgnoreChangesById,domIgnoreChangesByClass:this.h.domIgnoreChangesByClass,domIgnoreChangesByTag:this.h.domIgnoreChangesByTag,handleAttributeMutationsAsChunks:this.h.handleAttributeMutationsAsChunks,ignoreMutationsOnNotAttachedElements:this.h.ignoreMutationsOnNotAttachedElements,reinstateNativeMutationObserver:this.h.reinstateNativeMutationObserver,initialObserverFirst:this.h.initialObserverFirst,addBaseDomainToRelativeUrls:this.h.addBaseDomainToRelativeUrls,domIgnoreSameValueAttributesModification:this.h.domIgnoreSameValueAttributesModification,domIgnoreLargeMutationsChunks:this.h.domIgnoreLargeMutationsChunks}).NG;this.KG[this.Ya.Nt(t)]=i,this.YG.$G().ZG({name:"property",JG:new x(t,this.Ya,this.HL,this.h.domIgnoredFormElements),QG:[new O(this.gW,{HG:this.h.domIgnoredFormElements}).apply]}),i.start()},this.tq=t=>{const i=this.Ya.Nt(t);this.KG[i]&&(this.KG[i].stop(),delete this.KG[i]),this.YG.$G().iq(t)},this.sq=()=>{this.hq.OW(this.YG.Mz("ShadowRoot"))},this.ra=()=>{for(let t in this.KG)this.KG.hasOwnProperty(t)&&this.KG[t]&&(this.KG[t].stop(),this.KG[t]=void 0);this.KG=void 0},this.initialize=()=>{},this.stats=()=>this.hq.stats(),this.GG=t,this.Di=i,this.ft=s,this.gW=h,this.XG=e,this.YG=r,this.HL=n,this.h=o,this.KG={},this.Ya=e,this.hq=new j(this.GG,this.ft,this.YG.eq()),this.ft.on("shadow:rootDetected",this.WG),this.ft.on("shadow:rootRemoved",this.tq),this.ft.on("domTrackingStarted",this.sq),this.ft.on("event:unload",this.ra)}}class N{constructor(t,i){this.rq=()=>{this.nq||(this.si.outerHeight===this.oq&&window.Math.abs(this.si.innerHeight-this.aq)>this.cq?(this.ft.emit("devToolsVisibilityChanged",{value:!0,size:"oh_"+this.si.outerHeight+"_ih_"+this.si.innerHeight}),this.nq=!0):this.si.outerWidth===this.lq&&window.Math.abs(this.si.innerWidth-this.dq)>this.cq?(this.ft.emit("devToolsVisibilityChanged",{value:!0,size:"ow_"+this.si.outerWidth+"_iw_"+this.si.innerWidth}),this.nq=!0):this.si.outerHeight!==this.oq?(this.oq=this.si.outerHeight,this.aq=this.si.innerHeight):(this.lq=this.si.outerWidth,this.dq=this.si.innerWidth))},this.uq=()=>{this.ft.on("window:resize",this.rq)},this.si=t,this.ft=i,this.nq=!1,this.cq=150,this.oq=t.outerHeight,this.aq=t.innerHeight,this.lq=t.outerWidth,this.dq=t.innerWidth}}class B{constructor(t,i,s){this.fq=()=>this.si.outerHeight!==this.oq?(this.oq=this.si.outerHeight,!0):this.si.outerWidth!==this.lq&&(this.lq=this.si.outerWidth,!0),this.rq=t=>{this.mq||t&&this.fq()||this.si.console.log(this.gq)},this.uq=()=>{this.ft.on("event:unload",(()=>this.rq(!1))),this.ft.once("init:preloaded",(()=>this.rq(!1))),this.ft.once("plugin:init:preloaded",(()=>this.rq(!1))),this.ft.on("window:resize",(()=>this.rq(!0)))},this.si=t,this.ft=i,this.h=s||{vq:""},this.mq=!1,this.gq=t.document.createElement("div"),this.gq.textContent=this.h.vq,this.oq=t.outerHeight,this.lq=t.outerWidth;const h=this;Object.defineProperty(this.gq,"id",{get:function(){h.mq||(h.mq=!0,h.ft.emit("devToolsVisibilityChanged",{value:!0,size:"oh_"+h.si.outerHeight+"_ih_"+h.si.innerHeight+"_ow_"+h.si.outerWidth+"_iw_"+h.si.innerWidth}))}})}}s("./node_modules/core-js/modules/web.self.js"),s("./node_modules/core-js/modules/web.url-search-params.delete.js"),s("./node_modules/core-js/modules/web.url-search-params.has.js"),s("./node_modules/core-js/modules/web.url-search-params.size.js");class _{constructor(t,i,s,h){this.pq=()=>{this.wq=!0;try{this.EI=new this.si.Worker(this.bq),this.EI.onmessage=t=>{t.data&&"gbDTDWorkerReady"===t.data?(this.EI.postMessage("gbDTDHello"),setTimeout((()=>{this.EI.terminate(),this.wq&&!this.mq&&(this.mq=!0,URL.revokeObjectURL(this.bq),this.At.emit("devToolsVisibilityChanged",{value:!0,size:"oh_"+this.si.outerHeight+"_ih_"+this.si.innerHeight+"_ow_"+this.si.outerWidth+"_iw_"+this.si.innerWidth}))}),this.yq)):t.data&&"gbDTDHi"===t.data&&(this.wq=!1)}}catch(t){d.default.error("Failed checking Devtools visibility: "+t.message,t),this.At.emit("clsDebug","Failed checking Devtools visibility")}},this.rq=()=>{this.Tq&&(this.mq||setTimeout(this.pq,this.Eq))},this.uq=()=>{this.At.on("event:unload",this.rq),this.At.once("domInit:preloaded",this.rq),this.At.on("window:resize",this.rq)},this.si=t,this.At=i,this.Eq=s,this.yq=h,this.mq=!1,this.wq=void 0,this.EI=void 0,this.Tq=!0;try{this.bq=URL.createObjectURL(new Blob(["(",function(){self.postMessage("gbDTDWorkerReady");
debugger;

self.onmessage=function(t){t.data&&"gbDTDHello"===t.data&&self.postMessage("gbDTDHi")}}.toString(),")()"],{type:"application/javascript"}))}catch(t){this.Tq=!1,d.default.error("Failed creating blob for worker: "+t.message,t),this.At.emit("clsDebug","Failed creating blob for worker during Devtools detection. Detection will not work.")}}}class V{constructor(t,i,s){this.initialize=()=>{this.Cq=!0},this.si=t,this.ft=i,this.h=s,this.kq=void 0,this.Sq=this.si.navigator.userAgent,/firefox/i.test(this.Sq)?this.kq=new N(this.si,this.ft):h.default.cw(this.Sq)&&h.default.fw(this.Sq,89,"chrome/")?this.h.devToolsDebuggerBasedDetection?this.kq=new _(this.si,this.ft,this.h.devToolsDetectionWorkerTimeout,this.h.devToolsDetectionCallbackTimeout||567):this.kq=new N(this.si,this.ft):this.kq=new B(t,i,{vq:this.h.devToolsDetectionMessage}),this.kq.uq()}}class z{constructor(t,i,s,e){this.Iq=()=>{this.Mq=h.default.nr()},this.jq=()=>(this.Mq=this.Mq||h.default.nr(),h.default.nr()-this.Mq),this.Dq=t=>t.nodeType===window.Node.TEXT_NODE&&h.default.parentNode(t)&&this.xq[h.default.parentNode(t).nodeName],this.Ba=t=>{if(t.target&&"characterData"===t.type&&!this.Dq(t.target)){var i=t.target.data;this.Rq();var s=this.jq();this.Aq=this.Aq||s>=this.h.Pq,(this.Lq||this.Oq)&&this.Aq&&this.Fq<this.Nq&&this.Bq[this.Ya.Nt(t.target)]!==i&&t.oldValue.replace(/\s/g,"")!==i.replace(/\s/g,"")&&(++this.Fq,this.ft.emit("domTampered",{element:h.default.parentNode(t.target),Kj:i,eg:t.oldValue})),this.Lq=!0}},this._q=()=>{this.Aq=!1,this.Mq=h.default.nr()},this.Rq=()=>{var t=document.querySelector("title");document.documentElement.className.match("translated-rtl")||document.documentElement.className.match("translated-ltr")?(this.Vq||this._q(),this.Vq=!0):this.Vq&&(this.Vq=!1,this._q()),t&&t.getAttribute&&t.getAttribute("_msthash")&&t.getAttribute("_msttexthash")&&t.getAttribute("_msthidden")?(this.zq||this._q(),this.zq=!0):this.zq&&(this.zq=!1,this._q())},this.Uq=()=>{var t=f.default.VE(this.si.CharacterData.prototype),i=f.default.VE(this.si.Text.prototype),s=f.default.VE(this.si.Node.prototype);f.default.VE(this.si.HTMLElement.prototype);let h=this;var e=function(){h.Fq<h.Nq&&(h.Bq[h.Ya.Nt(this)]=this.data)},r=function(){this&&this.nodeType===window.Node.TEXT_NODE&&h.Fq<h.Nq&&(h.Bq[h.Ya.Nt(this)]=this.data)};t.zE("replaceData",e),t.zE("appendData",e),t.zE("insertData",e),t.zE("deleteData",e),t.GE("data",e),i.zE("splitText",e),s.GE("textContent",r),s.GE("nodeValue",r)},this.Hq=t=>{var i;var s=document.implementation.createHTMLDocument("test");(i=new MutationObserver((function(s){i&&i.disconnect(),"characterData"!==s[0].type&&t()}))).observe(s,{attributes:!1,childList:!0,characterData:!0,subtree:!0,attributeOldValue:!1,characterDataOldValue:!1}),s.body.innerText="text1"},this.initialize=()=>{var t;if(this.h.domTamperingIgnorePages&&this.h.domTamperingIgnorePages.length)for(t=0;t<this.h.domTamperingIgnorePages.length;++t)if(h.default.Dw(this.h.domTamperingIgnorePages[t],h.default.ji(this.si.location.href)))return;var i=!(!h.default.cw()&&!h.default.dw()||this.si.opr);const s=()=>{this.Uq(),this.ft.on("domMutation",this.Ba)};if(this.ft.once("domInit:domready",this.Iq),i){var e=h.default.mw();if(e&&e<70)return;this.Hq(s)}else s()},this.si=t,this.ft=i,this.Ya=s,this.h=h.default.ss(e,{Pq:2e3,Wq:["TITLE","STYLE","SCRIPT"]}),this.xq=h.default.N.apply(null,this.h.Wq),this.Bq={},this.Nq=5,this.Fq=0,this.Vq=!1,this.zq=!1,this.Aq=!1,this.Mq=void 0,this.Lq=!1,this.Oq=!1,this.ft.on("devToolsVisibilityChanged",(t=>{this.Oq=t.value}))}}s("./node_modules/core-js/modules/esnext.iterator.take.js");var U=s("./src/js/mask/DomMasker.js"),H=s("./src/js/mask/DomRegexMasker.js"),W=s("./src/js/censor/encrypt/DomEncryptor.js"),G=s("./src/js/censor/SelectorValidator.js");class q{constructor(t,i,s){this.GG=t,this.Gq=i,this.qq=s,this.ei()}ei(){if(!this.GG.WebSocket)return;const t=this.GG.WebSocket,i=function(i,s){const h=s?new t(i,s):new t(i);try{this.qq?(this.GG.Yq=this.GG.Yq||[],this.GG.Yq.push(h)):h.addEventListener("message",this.Gq)}catch(t){d.default.error("failed intercepting WebSocket constructor: "+t.message,t)}return h}.bind(this);if(this.qq&&this.GG.opener&&this.GG.opener.Yq&&this.GG.opener.Yq.length)for(let t=0;t<this.GG.opener.Yq.length;t++)this.GG.opener.Yq[t].addEventListener("message",this.Gq);i.prototype=t.prototype,i.prototype.constructor=t,i.CONNECTING=0,i.OPEN=1,i.CLOSING=2,i.CLOSED=3,this.GG.WebSocket=i}}var Y=s("./src/js/censor/mask/maskingUtils.js");class X{constructor(t){this.Xq=t=>{if(!t||!this.Kq)return t;var i,s,h,e,r,n=t.split(";"),o=[];for(i=0;i<n.length;i++)-1!==(h=(s=n[i]).indexOf("="))?(e=s.substring(0,h).trim(),r=s.substring(h+1),o.push(e+"="+(r&&this.Kq.hasOwnProperty(e)?Y.default.xt(r):r))):o.push(s);return o.join("; ")},this.h=t,this.Kq=this.h&&this.h.Zq?h.default.N.apply(null,this.h.Zq):null}}X.prototype.$q=function(t){return this.Xq(t)};class K{constructor(t){this.apply=(t,i)=>{if("INPUT"===t.tagName){i.value&&t.setAttribute("value",i.value),i.checked&&t.setAttribute("checked","");const s=this;i.addEventListener("invalid",(function(t){s.At.emit("html5FormValidation:invalid",t)}))}},this.At=t}}class Z{constructor(t){this.apply=(t,i)=>{"TEXTAREA"===t.tagName&&i.firstChild&&i.value!==i.firstChild.textContent&&(t.firstChild?t.Jq?i.Ee?t.firstChild.textContent=Y.default.xt(i.value,void 0,void 0,i.Ee):t.firstChild.textContent=Y.default.xt(i.value):t.firstChild.textContent=i.value:this.At.emit("clsDebug","textareaElementValueSetter",void 0,"cannot set firstChild.textContent as firstChild does not exist on clone of "+i.tagName+" element with _gbid "+(i._gbid||"not assigned")),i.addEventListener("invalid",(function(t){this.At.emit("html5FormValidation:invalid",t)})))},this.At=t}}class ${constructor(t){this.apply=(t,i)=>{if("SELECT"===t.tagName){const s=i.selectedIndex;let h=t.getElementsByTagName("option");h.length?h[s]&&h[s].setAttribute("selected",""):(h=i.getElementsByTagName("option"),h[s]&&(h[s].Qq=!0)),i.addEventListener("invalid",(t=>{this.At.emit("html5FormValidation:invalid",t)}))}"OPTION"===t.tagName&&i.Qq&&t.setAttribute("selected","")},this.At=t}}s("./node_modules/core-js/modules/es.array.includes.js");class J{constructor(t,i,s){this.apply=t=>{if("STYLE"!==t.tagName||!t.ownerDocument)return;const i=t.ownerDocument.createElement("style");if(this.tY&&h.default.cE(t,i),t.media&&i.setAttribute("media",t.media),t.sheet){let s;const h=t.sheet.cssRules;let e="";if(h&&h.length)for(s=0;s<h.length;s++)"string"!=typeof h[s].cssText||this.iY&&h[s]instanceof CSSFontFaceRule||(this.sY&&h[s].cssText.includes(":defined")?e+=h[s].cssText.replaceAll(":defined",""):e+=h[s].cssText);i.textContent=e}return i},this.tY=t,this.iY=i,this.sY=s}}class Q{constructor(t,i){this.apply=t=>{if("STYLE"!==t.tagName)return;const i=t.ownerDocument.createElement("style");if(this.tY&&h.default.cE(t,i),t.media&&i.setAttribute("media",t.media),i.textContent=(t.textContent||"")+(t.hY||""),!i.textContent&&t.sheet){const s=t.sheet.cssRules,h=[];let e;if(s&&s.length){for(e=0;e<s.length;e++)"string"==typeof s[e].cssText&&h.push(s[e].cssText);i.textContent=h.join("")}}return this.sY&&i.textContent.includes(":defined")&&(i.textContent=i.textContent.replaceAll(":defined","")),i},this.tY=t,this.sY=i}}class tt{constructor(t){this.eY=()=>this.rY?new J(this.nY,this.oY,this.sY):new Q(this.nY,this.sY),this.rY=t.domPreciseStyleSheetCloning,this.nY=t.domRecordStyleAttributes,this.oY=t.removeBase64Fonts,this.sY=t.removeCustomElementsDefinitionFromStyle}}class it{constructor(t,i){this.apply=(t,i)=>{if("CANVAS"===t.tagName){var s=h.default.uE(this.ft,i,this.yG.canvasQuality);s&&(t.innerHTML=s)}},this.ft=t,this.yG=i}}class st{constructor(t,i,s,h,e,r){this.toString=()=>"seq:"+this.r_+"referrer"+this.referrer+"charset:"+this.charset+"cookie-len"+(this.cookie?this.cookie.length:0)+(this.e_.length>20?"html length: "+this.e_.length:"html: "+this.e_),this.e_=t,this.referrer=r?i.replace(/\s/g,"%20"):i,this.r_=s,this.charset=e,this.cookie=h}}class ht{constructor(t){this.apply=t=>{if(this.aY&&t&&t.attributes&&t.removeAttribute)for(let i=0;i<this.aY.length;i++)t.removeAttribute(this.aY[i])},this.aY=t}}class et{constructor(){this.apply=(t,i)=>{t&&("IMG"===t.tagName&&t.getAttribute("src")?t.setAttribute("src",i.src):"LINK"===t.tagName&&t.getAttribute("href")&&t.setAttribute("href",i.href))}}}class rt{constructor(){this.apply=t=>{t&&("IMG"===t.tagName&&t.getAttribute("src")?t.setAttribute("src",h.default.wE(t.getAttribute("src"))):"LINK"===t.tagName&&t.getAttribute("href")&&t.setAttribute("href",h.default.wE(t.getAttribute("href"))))}}}class nt{constructor(){this.apply=t=>{t&&("IMG"===t.tagName&&t.getAttribute("src")?t.setAttribute("src",h.default.qf(t.getAttribute("src"))):"LINK"===t.tagName&&t.getAttribute("href")&&t.setAttribute("href",h.default.qf(t.getAttribute("href"))))}}}s("./node_modules/core-js/modules/es.set.difference.v2.js"),s("./node_modules/core-js/modules/es.set.intersection.v2.js"),s("./node_modules/core-js/modules/es.set.is-disjoint-from.v2.js"),s("./node_modules/core-js/modules/es.set.is-subset-of.v2.js"),s("./node_modules/core-js/modules/es.set.is-superset-of.v2.js"),s("./node_modules/core-js/modules/es.set.symmetric-difference.v2.js"),s("./node_modules/core-js/modules/es.set.union.v2.js");class ot{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.apply=t=>{if(this.aY.has(t.nodeName)&&null!=t&&t.attributes&&t.removeAttribute){let i=[],s=!1;for(let h=0;h<t.attributes.length;h++){let e=t.attributes[h];if(e.name.startsWith("="))s=!0,i.push(e.name);else if(s){if(e.value&&""!==e.value.trim())break;i.push(e.name)}}i.forEach((i=>{t.removeAttribute(i)}))}},this.aY=new Set(t.map((t=>t.toUpperCase())))}}class at{constructor(t,i,s,e,r,n,o){this.cY=(t,i,s)=>{this.lY=t,this.dY=s,null===this.Ho.body&&s(void 0);try{if(this.h.snapshotAsync)this.uY.cloneNode(this.Ho.documentElement,this.fY,this.mY,i,this.uY.gY(),this.vY);else{const t=this.uY.cloneNode(this.Ho.documentElement,this.fY,this.mY,i);this.vY(t)}}catch(t){this.pY(t)}},this.vY=t=>{try{if(t&&t.error===this.wY)this.bY=this.wY,this.dY({error:{visibility:this.wY}});else{var i=this.yY+(this.h.fixChromeBackgroundClipCSS?t.outerHTML.replace(/ background-clip/g," -webkit-background-clip"):t.outerHTML),s=this.TY?this.TY.$q(this.Ho.cookie):this.Ho.cookie;this.dY(new st(i,this.Ji.mask(this.Ho.referrer),this.lY,s,this.Ho.characterSet,this.h.encodeReferrer))}}catch(t){this.pY(t)}},this.pY=t=>{d.default.error("could not obtain page snapshot. error: "+t),this.bY=t,this.dY(void 0)},this.Ho=i,this.uY=e,this.Ji=r,this.h=o||{},this.TY=new X({Zq:this.h.maskCookies});let a=new $(s),c=new Z(s),l=new K(s),u=new ht(this.h.domRemoveAttributes);var f=h.default.Jw().add(l.apply).add(c.apply).add(a.apply).add(u.apply);this.h.domRecordAbsoluteResourcesURLs&&f.add((new et).apply),this.h.removeUnnamedAttributesByTags&&this.h.removeUnnamedAttributesByTags.length&&f.add(new ot(this.h.removeUnnamedAttributesByTags).apply),this.h.protocolsToSwitch&&f.add((new nt).apply),this.h.domRemoveDuplicatedSlashResourcesUrl&&f.add((new rt).apply),this.h.recordCanvas&&f.add(new it(s,this.h).apply),t.ShadowRoot&&this.h.recordShadowDom&&f.add(n.Hg),this.mY=f.Yw();let m=new tt({domPreciseStyleSheetCloning:this.h.domPreciseStyleSheetCloning,domRecordStyleAttributes:this.h.domRecordStyleAttributes,removeBase64Fonts:this.h.removeBase64Fonts,removeCustomElementsDefinitionFromStyle:this.h.removeCustomElementsDefinitionFromStyle});this.fY=m.eY().apply,this.wY="page is empty or not visible",this.yY="<!DOCTYPE html>\n"}}class ct{constructor(t,i,s,h){this.EY=()=>{let t,i,s,h,e,r,n={timestamp:this.CY++,propertiesMode:"modifiedOnly",version:this.h.kY},o=0;for(t=0;t<this.SY.length;t++){for(i in e=this.SY[t],s=e.JG.track(),r=0,s)h=s[i],this.IY(e.QG,h,n)&&r++;o+=r}return 0===o&&(n=void 0),n},this.start=()=>{let t;for(t=0;t<this.SY.length;t++)this.SY[t].JG.start()},this.ZG=t=>{this.SY.push(t)},this.iq=t=>{let i;for(i=this.SY.length-1;i>=0;i--)if(this.SY[i].JG.GW()===t){this.SY.splice(i,1);break}},this.SY=t||[],this.HL=i,this.Nr=s,this.h=h||{},this.CY=0}IY(t,i,s){if(i.removed)return!1;let h,e,r=!1;for(h=0;h<t.length;h++)e=t[h](i,s),!e||r||!this.h.setSelectorToAttributes&&i.attributes||(e.selector=this.HL.Sf(i.element,!1).selector,r=!0);return!0}}class lt{constructor(t,i){this.MY=()=>{let t,i,s,e=0;for(t in this.jY)if(this.jY.hasOwnProperty(t)&&(s=this.jY[t],!s.removed)){for(i=s.element;h.default.parentNode(i);){if(this.DY[this.Ya.Nt(i)]){e++,s.removed=!0;break}i=h.default.parentNode(i)}s.removed||i.nodeType===window.Node.DOCUMENT_FRAGMENT_NODE||i.nodeType===window.Node.DOCUMENT_NODE||(s.removed=!0,e++)}return e},this.xY=t=>{const i=this.Ya.Nt(t);let s=this.jY[i];return s||(s=new D(t,i,this.Ya),this.jY[i]=s),s},this.Pe=t=>{const i=this.RY++,s=this.xY(t.mG);if("characterData"===t.type)s.AY=t.target;else if("childList"===t.type){if(s.PY=i,t.addedNodes.length){let i,h;for(h=0;h<t.addedNodes.length;h++)i=this.Ya.Nt(t.addedNodes[h]),this.DY[i]=!0,s.NW(i),t.LY&&s.FW.push(t.addedNodes[h])}}else"attributes"===t.type&&(s.attributes||(s.attributes={}),s.attributes[t.attributeName]=i)},this.OY=t=>{const i=this.Ya.Nt(t),s=this.xY(t.host);s.PY=this.RY++,this.DY[i]=!0,s.NW(i)},this.start=()=>{this.ft.on("domMutation",this.Pe)},this.track=()=>{const t=this.jY;return this.MY(t),this.RY=0,this.jY={},this.DY={},t},this.GW=()=>!1,this.ft=t,this.Ya=i,this.jY={},this.DY={},this.RY=0,this.ft.on("shadow:rootAttached",this.OY)}}class dt{constructor(t){this.Ot=(t,i)=>{for(let s=0;s<this.FY.length;s++)this.FY[s].Ot(t,i)},this.Ft=(t,i)=>{let s,h;for(let e=0;e<this.FY.length;e++)h=this.FY[e].Ft(t,i),s=s||h;return s},this.Bt=(t,i)=>{for(let s=0;s<this.FY.length;s++)this.FY[s].Bt(t,i)},this.Pt=()=>{for(let t=0;t<this.FY.length;t++)this.FY[t].Pt()},this.FY=t}}class ut{constructor(t,i){this.next=()=>{let t=h.default.childNodes(this.NY)[++this.BY];for(;t&&!this.HN(t);)t=h.default.childNodes(this.NY)[++this.BY];return t},this.NY=t,this.HN=i,this.BY=-1}}class ft{constructor(t,i){if(this.clone=(t,i,s,e)=>{const r=[];if(t.getRootNode().adoptedStyleSheets&&(t===t.getRootNode()||t.adoptedStyleSheets||"HEAD"===t.nodeName)){const n=t.adoptedStyleSheets||t.getRootNode().adoptedStyleSheets,o=t===t.getRootNode()?i:s.Nt(t);n&&n.length&&n.forEach((n=>{const a=h.default.iE(n,i,o),c=s.Nt(a);n._Y&&a.setAttribute("gbRemoveId",n._Y),n.VY=o,n._Y=c,a.setAttribute("gbid",n._Y),n.zY&&!n.zY[i]?n.zY[i]=!0:n.zY||(n.zY={},n.zY[i]=!0),e[i]=t.getRootNode();const l=this.UY&&t.host&&this.UY[t.host.nodeName]?this.HY(a):a;r.push(l)}))}return r},this.HY=t=>{if(!t.tagName||"GB_ADOPTEDSTYLE"!==t.tagName.toUpperCase())return t;try{let i;const s=t.textContent,h=this.WY(s),e=this.GY[h];if(e){i=t.ownerDocument.createElement("gb_adoptedstyle"),i.setAttribute(this.qY,e);return["gbrealid","gbAssociateId","gb-ignore","gbid","gbRemoveId"].forEach((s=>{t.hasAttribute(s)&&i.setAttribute(s,t.getAttribute(s))})),i}return this.GY[h]=this.YY,t.setAttribute(this.XY,this.YY.toString()),this.YY++,t}catch(i){return d.default.error("Error while handling repetitive adopted CSS element: "+i.message,i),this.ft.emit("clsDebug","error while handling repetitive adopted CSS element. Exception message: "+i.message),t}},this.WY=t=>{let i=0;if(0===t.length)return i.toString();for(let s=0;s<t.length;s++){i=(i<<5)-i+t.charCodeAt(s),i&=i}return i.toString()},ft.KY)return ft.KY;this.ft=t,this.UY=i,this.YY=1,this.XY="gb-proto",this.qY="gb-clone",this.GY={},ft.KY=this}static reset(){ft.KY=null}}class mt{constructor(t,i,s,e,r,n,o,a,c,l,d,u,f,m,g,v,p,w,b,y,T){this.ZY=function(t,i){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:11;for(;t&&i&&s>0;){if("BODY"===t.tagName||"HTML"===t.tagName)return!1;if(i===t.tagName)return!0;t=h.default.parentNode(t)||t.host,s--}},this.$Y=t=>t&&"SLOT"===t.tagName&&this.JY.some((i=>this.ZY(t,i,5))),this.QY=t=>t instanceof this.si.ShadowRoot,this.tX=t=>t?this.sX.iX.createElement(this.hX):this.sX.iX.createElement("gb-shadow"),this.eX=t=>/{\s+\[native code]/.test(Function.prototype.toString.call(t.constructor)),this.clone=(t,i,s,e,r,n)=>{const o=this.rX++;n&&(this.dD[o]=n);const a=r||this.LW,c={},l=this.sX.iX.createElement("gb-root");let d=0;const u=this.oX.nX();this.aX=!this.cX||e||void 0===e;let f=t.ownerDocument.querySelector("HTML>BODY");return!f&&this.lX&&(f=t.ownerDocument.querySelector("HTML>FRAMESET")),this.aX||f&&h.default.Gp(f)?(a.PW(t,((t,r)=>{if(u.dX)return!0;!this.aX&&(t&&t.nodeType===this.si.Node.TEXT_NODE||this.cX&&!e&&h.default.isVisible(t))&&(this.aX=!0);let n,o=!0;const a=this.Ya.Nt(t);if(!!this.si.ShadowRoot&&this.QY(t))this.uX&&this.UY[t.host.nodeName]||this.fX&&!this.eX(t)?(n=this.tX(!0),t.host.uP=!0):n=this.tX();else try{if(n=i&&i(t,r)||this.fY&&this.fY(t,r),n)o=!1;else{if("BODY"===t.tagName&&t.parentElement&&"HTML"!==t.parentElement.tagName&&this.mX){let i,s;for(n=this.sX.iX.createElement("gb-body"),i=0;i<t.attributes.length;i++)s=t.attributes[i],n.setAttribute(s.name,s.value)}else n=this.sX.cloneNode(t);this.$Y(t)&&(n.textContent=t.innerText,this.Wr.log("renderSlotsInCustomElements: ",t))}}catch(t){this.ft.emit("clsDebug","Error: NodeCloner, error message:"+t.message)}if(n){if(s&&s(n,t),this.mY&&this.mY(n,t),this.gX&&this.gX(n,t),t.nodeType===this.si.Node.ELEMENT_NODE&&(t.fG=!0),this.vX&&t&&t.getRootNode&&t.nodeType!==this.si.Node.DOCUMENT_NODE){const i=new ft(this.ft,this.UY).clone(t,a,this.Ya,this.pX);if(i.length){let t;for(t=0;t<i.length;++t)n.appendChild(i[t])}}(t.shadowRoot||h.default.childNodes(t)&&h.default.childNodes(t).length)&&(c[a]=n);const i=h.default.parentNode(t)||t.host;try{let t=i&&c[this.Ya.Nt(i)]||l;("HEAD"===t.nodeName&&n.nodeType!==window.Node.TEXT_NODE||"HEAD"!==t.nodeName)&&t.appendChild(n)}catch(t){this.ft.emit("clsDebug","Error: NodeCloner, error message:"+t.message)}}return t&&t.nodeType===this.si.Node.ELEMENT_NODE&&d++%100==0&&u.wX(d),o&&!u.dX}),void 0,void 0,this.bX,l,o),n?void 0:this.bX(l,o)):(this.ft.emit("clsDebug","BODY element is not visible during snapshot"),this.bX(null,o))},this.bX=(t,i)=>{let s=null;if(t&&h.default.childNodes(t)&&h.default.childNodes(t).length>1){if(this.ft.emit("clsDebug","Error: NodeCloner, cloneRoot.childNodes have more then one child"),this.yX){let i,e=h.default.childNodes(t);for(i=0;i<e.length;++i)"HTML"===e[i].nodeName&&(s=e[i])}}else this.aX?t&&(s=t.lastChild):s={error:"page is empty or not visible"};if(!this.dD[i])return s;this.dD[i](s),delete this.dD[i]},this.si=t,this.ft=i,this.sX=s,this.oX=e,this.Ya=r,this.LW=n,this.fY=o,this.mY=a,this.gX=c,this.vX=l,this.pX=d,this.yX=u,this.cX=f,this.lX=m,this.fX=g,this.Wr=v,this.JY=p,this.mX=w,this.hX=b,this.UY=h.default.N.apply(null,y),this.uX=T,this.rX=0,this.dD={}}}class gt{constructor(t,i,s){this.PW=(t,i,s,e)=>{let r,n,o=t;const a=s?"children":"childNodes",c=[o],l={};for(this.TX.Ot(t,l);c.length;)if(o=c.pop(),o.EX)this.TX.Bt(o.parent,l);else if(this.CX(o,e)&&(n=i(o,l),!1!==n)){const t=h.default[a](o);if(null!=t&&t.length)for(this.TX.Ft(o,l)&&c.push({parent:o,EX:!0}),r=t.length-1;r>=0;r--)c.push(t[r]);this.h.kX&&o.shadowRoot&&(t&&t.length||this.TX.Ft(o,l)&&c.push({parent:o,EX:!0}),c.push(o.shadowRoot))}this.TX.Pt()},this.CX=t,this.TX=i,this.h=h.default.ss(s,{kX:!1})}}class vt{constructor(t,i,s){this.SX=()=>{let t=!1,i=0,s=0;for(;!t&&this.IX.length;){s=h.default.nr();var e=this.IX.pop();if(e.EX)this.TX.Bt(e.parent,this.pI);else if(this.CX(e,this.MX)&&!1!==this.jX(e,this.pI)){if(e[this.DX]&&e[this.DX].length){this.TX.Ft(e,this.pI)&&this.IX.push({parent:e,EX:!0});for(var r=e[this.DX].length-1;r>=0;r--)this.IX.push(e[this.DX][r])}this.h.kX&&e.shadowRoot&&this.IX.push(e.shadowRoot)}i+=h.default.nr()-s,i>this.xX&&(t=!0)}this.IX.length?window.setTimeout(this.SX,0):(this.TX.Pt(),this.RX(this.AX,this.PX))},this.PW=(t,i,s,h,e,r,n)=>{if(this.LX)throw"NodeVisitorAsync cannot be re-used";this.LX=!0,this.RX=e,this.AX=r,this.PX=n,this.DX=s?"children":"childNodes",this.IX=[t],this.pI={},this.jX=i,this.MX=h,this.TX.Ot(t,this.pI),this.SX()},this.LX=!1,this.CX=t,this.TX=i,this.h=h.default.ss(s,{kX:!1,visitorAsyncMaxChunkTime:50}),this.xX=this.h.visitorAsyncMaxChunkTime}}class pt{constructor(t,i){this.OX=(t,i)=>{if(!t.dX){const s=-1!==t.duration?t.duration:new Date-t.FX;t.dX=!0,this.At.emit("dom:fuseBlown",{reason:i,duration:s,elements:t.NX,BX:this.h.BX||-1,_X:this.h._X||-1}),this.At.emit("clsDebug","DOM cloning fuse blown. reason:"+i+" elements:"+t.NX+" duration:"+s)}},this.VX=(()=>{const t=this;return function(i){this.dX||(this.NX=i,t.zX&&(this.duration=new Date-this.FX,this.duration>=t.h.BX)?t.OX(this,"duration"):t.UX&&this.NX>=t.h._X&&t.OX(this,"elementCount"))}})(),this.nX=()=>({dX:!1,FX:new Date,NX:-1,duration:-1,wX:this.VX}),this.At=t,this.h=i||{},this.UX=(this.h._X||0)>0,this.zX=(this.h.BX||0)>0}}class wt{constructor(t,i){this.apply=t=>{if("TITLE"===t.nodeName){const i=t.ownerDocument.createElement("title");return i.textContent=h.default.kt(t.textContent,(t=>this.It.xt(t,null,this.h.titleMaskingChar))),i}},this.It=t,this.h=i||{}}}class bt{constructor(t,i,s,e){this.HX=t=>t.parentElement&&t.parentElement.tagName&&this.yG.renderSlotsInCustomElements.some((function(i){return i===t.parentElement.tagName})),this.apply=(t,i)=>{if(t&&t.nodeType===window.Node.TEXT_NODE&&i){if(this.yG.renderSlotsInCustomElements.length&&this.HX(t))return t.ownerDocument.createTextNode("");if(i.cb)return t.ownerDocument.createTextNode(h.default.kt(t.textContent,(t=>this.It.xt(t,null,this.yG.WX))));if(i.Dt){const i=this.vW.encrypt(t.textContent);return t.ownerDocument.createTextNode(i)}if(i.fb){const i=this.It.ie(t.textContent,this.yG.domRegexPatternForMasking,this.yG.domRegexMaskingChar);return t.ownerDocument.createTextNode(i)}}},this.It=t,this.vW=i,this.HP=s,this.yG=e}}class yt{constructor(t,i){this.apply=t=>{if(this.tb[t.tagName]&&"function"==typeof t.getAttribute&&!t.hasAttribute(this.ib)){for(let i in this.eb)if(this.eb.hasOwnProperty(i)){const s=t.getAttribute(i);s&&(this.GX[t.tagName]&&"src"===i?t.setAttribute(i,this.GX[t.tagName]):t.setAttribute(i,this.It.xt(s,void 0,this.h.attributeMaskingChar)))}if(this.qX&&t.dataset)for(let i in t.dataset)t.dataset[i]=this.It.xt(t.dataset[i],void 0,this.h.attributeMaskingChar)}},this.It=t,this.h=i,this.GX={IMG:"data:image/gif;base64,"},this.eb=h.default.N.apply(null,i.domMaskedAttributes),this.tb=h.default.N.apply(null,(i.Hy||[]).map((t=>t.toUpperCase()))),this.qX=!!i.domMaskDataAttributes,this.ib=i.domMaskIgnoreAttribute}}class Tt{constructor(t){this.apply=t=>{if("TEXTAREA"===t.tagName&&t.firstChild){let i;if(t.firstChild.textContent&&(i=this.gW.ot(t),i!==t.firstChild.textContent)){const s=t.cloneNode(!0);return s.firstChild.textContent=i,s.Jq=!0,s}}},this.gW=t}}class Et{constructor(t){this.apply=t=>{if("INPUT"===t.tagName){t.getAttribute("value")&&t.setAttribute("value",this.gW.ot(t))}},this.gW=t}}class Ct{constructor(t,i,s,e){this.iX=void 0,this.cloneNode=void 0,this.YX=h.default.N.apply(null,["TEXTAREA"]),this.importNodeWhenUrlContains=e||[];var r=t,n=[];try{s.forEach((t=>{var i=t?new RegExp(t,"i"):void 0;i&&n.push(i)}))}catch(t){}if(this.XX=()=>{this.iX=r.document.implementation.createHTMLDocument("cloner-doc"),this.cloneNode=function(t){return this.iX.importNode(t,!!this.YX[t.tagName])}},Array.isArray(n)&&n.some((t=>t.test(r.navigator.userAgent)))||h.default.Dh(r.navigator.userAgent)||h.default.dw(r.navigator.userAgent)){this.iX=r.document.implementation.createHTMLDocument("cloner-doc");var o=r.document.documentElement?r.document.documentElement.namespaceURI:null;this.cloneNode=function(t){var i;return!this.YX[t.tagName]&&t&&t.nodeType===r.Node.ELEMENT_NODE?(i=t.namespaceURI!==o?this.iX.createElementNS(t.namespaceURI,t.tagName.toLowerCase()):this.iX.createElement(t.tagName),Array.prototype.slice.call(t.attributes).forEach((function(t){try{i.setAttribute(t.name,t.value)}catch(t){}}))):i=this.iX.importNode(t,!!this.YX[t.tagName]),i}}else this.XX()}}class kt{constructor(t,i){this.apply=(t,i)=>{t&&t.nodeType===window.Node.ELEMENT_NODE&&t.setAttribute(this.KX,i[this.ZX])},this.KX=t,this.ZX=i}}class St{constructor(t){this.$X=()=>{let t;const i=new Map;for(t in this.h.JX)i.set(t,new Set(this.h.JX[t]));return i},this.QX=()=>{let t;const i=new Map;for(t in this.h.tK)i.set(t,new RegExp(this.h.tK[t]));return i},this.accept=(t,i)=>{var s;if(this.h.domOmitInvisibleElements&&!t.fG&&t.nodeType===window.Node.ELEMENT_NODE&&"HTML"!==t.tagName&&"LINK"!==t.tagName&&"STYLE"!=t.tagName&&h.default.parentNode(t)&&"HTML"!==h.default.parentNode(t).tagName&&"HEAD"!==h.default.parentNode(t).tagName&&!h.default.isVisible(t)&&(i||t.outerHTML.indexOf("<style")<0&&!this.iK.test(t.outerHTML)))return!1;if(this.h.sK&&this.h.sK>-1&&this.hK.has(t.tagName)&&t.innerHTML.length>this.h.sK)return!1;if("HEAD"===(null===(s=h.default.parentNode(t))||void 0===s?void 0:s.tagName)&&this.eK.has(t.tagName))return!1;if(this.rK.has(t.id)||"OBJECT"===t.tagName&&this.nK.has(t.getAttribute("type"))||h.default.je(t,this.h.oK))return!1;if(this.aK.has(t.tagName)){const i=this.cK.get(t.tagName);if(!i||!i.exec(t.textContent))return!1}if((null==t?void 0:t.nodeType)===window.Node.ELEMENT_NODE&&this.h.lK&&this.h.lK.length)for(const i of this.h.lK)if(t.matches(i))return!1;if(t&&"IFRAME"===t.tagName&&t.src&&this.h.domOmitAnalyticsIframes&&this.h.domOmitAnalyticsIframes.length){const i=1,s=1,e=0;for(let r=0;r<this.h.domOmitAnalyticsIframes.length;r++){const n=h.default.W(t.src);if(n&&n.indexOf(this.h.domOmitAnalyticsIframes[r])>-1&&t.width<=i&&t.height<=s&&("hidden"===t.style.visibility||"none"===t.style.display||t.style.opacity<=e))return!1}}return((null==t?void 0:t.nodeType)!==window.Node.COMMENT_NODE||!this.h.dK)&&(!this.uK.has(t.tagName)||"undefined"===t.id||!this.uK.get(t.tagName).has(t.id))},this.h=h.default.ss(t,{fK:[],tK:{},JX:{},dK:!0,mK:[],gK:[],oK:[],vK:[],tagsToCheckLength:[],sK:-1,domOmitInvisibleElements:!1,domOmitAnalyticsIframes:[]}),this.uK=this.$X(),this.cK=this.QX(),this.aK=new Set(this.h.fK),this.eK=new Set(this.h.mK),this.rK=new Set(this.h.gK),this.nK=new Set(this.h.vK),this.hK=new Set(this.h.tagsToCheckLength),this.iK=/<link[^>]+?rel\s*?=\s*?['"]stylesheet/gi}}class It{constructor(){this.clone=t=>{if("LINK"!==t.tagName||"import"!==t.getAttribute("rel"))return;const i=[],s={};let h,e,r,n,o=t.pK,a="";for(;o;){if(r=o.querySelectorAll("style"),r.length)for(h=0;h<r.length;h++)a+=r[h].textContent;for(n=o.querySelectorAll("link[rel='import']"),e=0;e<n.length;e++)n[e].pK&&!s[n[e].href]&&(i.push(n[e].pK),s[n[e].href]=!0);o=i.pop()}if(a){const i=t.ownerDocument.createElement("style");return i.textContent=a,i.setAttribute("gb-imported-from",t.href),i}}}}class Mt{constructor(t,i){this.wK=t=>{this.At.emit("clsDebug","base64ImageRemover",void 0,"removed image from "+t.nodeName+" node with _gbid "+(t._gbid||"not assigned"))},this.apply=(t,i,s)=>{if(this.bK[t.tagName]){if("IMG"===t.tagName&&t.src)return this.yK.test(t.src)?(this.wK(t),s?"":(t.src="",void t.setAttribute("gb-dataremoved",""))):t.src;if("STYLE"===t.tagName&&this.TK.test(t.innerText))return this.wK(t),s?t.innerText.replace(this.TK,"").replace(/(\r\n|\n|\r)/gm,""):(t.innerText=t.innerText.replace(this.TK,"").replace(/(\r\n|\n|\r)/gm,""),void t.setAttribute("gb-dataremoved",""));const i=t.getAttribute("style");if(i)return this.TK.test(i)?(this.wK(t),s?i.replace(this.TK,""):(t.style.backgroundImage="",void t.setAttribute("gb-dataremoved",""))):i}},this.At=t,this.bK=i||{},this.yK=/(url\()?"?data:image\/(svg\+xml|\.?(png|jpe?g));[a-zA-Z0-9\D]*;?base64/,this.TK=/(background)(-image)*:(.*)(url\()?(&quot;)?"?data:image\/(svg\+xml|(\.?(png|jpe?g)));(.)?(base64,).*(\s)*?(?=\))\)*;*/}}class jt{constructor(t){this.apply=(t,i,s)=>{if("STYLE"===t.tagName&&this.EK.test(t.innerText)){if(this.wK(t),s)return t.innerText.replace(this.EK,"").replace(/(\r\n|\n|\r)/gm,"");t.innerText=t.innerText.replace(this.EK,"").replace(/(\r\n|\n|\r)/gm,""),t.setAttribute("gb-dataremoved","")}},this.At=t,this.EK=/@font-face\s*{[^}]*src:[^;]*url\([^)]*base64[^)]*\)[^}]*\}/g}wK(t){this.At.emit("clsDebug","base64FontRemover",void 0,"removed font data from "+t.nodeName+" node with _gbid "+(t._gbid||"not assigned"))}}class Dt{constructor(t,i){this.clone=t=>{let i;if(t.tagName&&(i=t.tagName.toUpperCase()),this.CK[i])try{let s,h;const e=t.outerHTML,r=this.kK[e];if(r)h=t.ownerDocument.createElement(i),h.setAttribute(this.qY,r);else{for(this.kK[e]=this.YY,h=t.ownerDocument.createElement(i),h.innerHTML=t.innerHTML,s=0;s<t.attributes.length;s++){const i=t.attributes[s];h.setAttribute(i.name,i.value)}h.setAttribute(this.XY,this.YY.toString()),this.YY++}return h}catch(t){d.default.error("Error while handling repetitive element: "+t.message,t),this.ft.emit("clsDebug","error while handling repetitive element. Exception message: "+t.message)}},this.ft=t,this.SK=i,this.YY=1,this.XY="gb-proto",this.qY="gb-clone",this.kK={},this.SK=i.map((t=>t.toUpperCase())),this.CK=h.default.N.apply(null,this.SK)}}class xt{constructor(){this.acceptNode=t=>{if(!t.getAttribute||"OBJECT"!==t.tagName)return!1;const i=(t.getAttribute("data")||"").toLowerCase();return"text/html"===(t.getAttribute("type")||"").toLowerCase()||i.indexOf(".html")===i.length-5||i.indexOf(".htm")===i.length-4},this.apply=t=>{this.acceptNode(t)&&t.setAttribute("_gbObject","")}}}class Rt{constructor(t,i,s,e){this.apply=(t,i)=>{t&&("INPUT"===t.tagName||"SELECT"===t.tagName)&&h.default.isVisible(i)&&this.At.emit("newInputElement",{gbid:this.Ya.Nt(i),clone:t,IK:this.HL.Sf(i),cssSelector:this.ZL.Sf(i)})},this.At=t,this.Ya=i,this.HL=e,this.ZL=s}}class At{constructor(t,i){this.apply=(t,i)=>{let s=this.MK;var e;if(i.nodeType===i.ELEMENT_NODE)for(e=0;e<this.jK.length;++e)if(h.default.vt(i,this.jK[e])){var r=this.si.getComputedStyle(i);for(var n in s)if(r[n])if(s[n].DK&&s[n].DK!==r[n]){if(s[n].xK)break}else t.setAttribute(this.MK[n].RK,s[n].AK?r[n]:"");else if(s[n].xK)break;break}},this.si=t,this.jK=i,this.MK={"-webkit-appearance":{RK:"_gb-apple-pay",AK:!1,DK:"-apple-pay-button",xK:!0},"-apple-pay-button-type":{RK:"_gb-apple-pay-type",AK:!0,DK:!1,xK:!1},"-apple-pay-button-style":{RK:"_gb-apple-pay-style",AK:!0,DK:!1,xK:!1}}}}class Pt{constructor(t,i,s,e,r,n,o,a,c,l,u,f,m){this.PK=()=>this.h.valueMaskingMode===this.Nr.gs.ce||(!!(this.h.maskBlacklistValueByClass.length||this.h.maskBlacklistValueById.length||this.h.valueMaskByCategories.length||this.h.valueBlacklistMaskSimpleSelector.length)||(this.h.valueEncryptionMode===this.Nr.gs.ce||!(!this.h.valueEncryptById.length&&!this.h.valueEncryptByClass.length))),this.LK=t=>new ut(t,this.FK),this.gY=()=>new vt(this.CX,new dt(this.FY),{kX:this.h.recordShadowDom,visitorAsyncMaxChunkTime:this.h.visitorAsyncMaxChunkTime}),this.Nr=s,this.h=u,this.h.renderSlotsInCustomElements=u.renderSlotsInCustomElements,this.CX=new St({dK:!u.domKeepComments,fK:["SCRIPT","NOSCRIPT","DOM-IF","CODE"],JX:u.domIgnoredFormElements?{INPUT:u.domIgnoredFormElements}:{},tK:u.domKeepScriptMatching?{SCRIPT:u.domKeepScriptMatching}:{},mK:["IFRAME","FRAME","FRAMESET"],gK:u.domMaskOmitById||u.domOmitById,oK:u.domMaskOmitByClass||u.domOmitByClass,vK:u.domOmitObjectElementsByType,lK:u.domOmitBySelector,tagsToCheckLength:u.tagsToCheckLength,sK:u.tagMaxLength,domOmitInvisibleElements:u.domOmitInvisibleElements,domOmitAnalyticsIframes:u.domOmitAnalyticsIframes}).accept,this.FY=[],this.FY.push(o.Mt(e)),this.FY.push(a.Mt(e)),this.h.domRegexPatternForMasking.length&&this.h.domMaskContentByRegex.length&&this.FY.push(c.Mt(e));var g=new gt(this.CX,new dt(this.FY),{kX:u.recordShadowDom}),v=h.default.Jw(!0);u.domCompressRepetitiveElements.length&&v.add(new Dt(i,u.domCompressRepetitiveElements).clone),v.add(new It);var p=new Q(u.domRecordStyleAttributes,u.removeCustomElementsDefinitionFromStyle);v.add(p.apply),u.struggleCaptureBlankPage&&v.add(n.Hg);var w=new bt(Y.default,a,c,this.h);if(v.add(w.apply),u.maskTitle){var b=new wt(Y.default,this.h);v.add(b.apply)}var y=h.default.Jw(!0).add(new kt("gbid",e.EP).apply);u.domRemoveAttributes&&u.domRemoveAttributes.length&&y.add(new ht(u.domRemoveAttributes).apply),u.removeUnnamedAttributesByTags&&u.removeUnnamedAttributesByTags.length&&y.add(new ot(u.removeUnnamedAttributesByTags).apply),u.domRecordAbsoluteResourcesURLs&&y.add((new et).apply),u.protocolsToSwitch&&y.add((new nt).apply),u.domRemoveDuplicatedSlashResourcesUrl&&y.add((new rt).apply);var T=new Tt(r),E=new Et(r);this.PK()&&(y.add(E.apply),v.add(T.apply)),u.domMaskAttributesByTag.length&&(u.domMaskedAttributes.length||u.domMaskDataAttributes)&&y.add(new yt(Y.default,{domMaskedAttributes:u.domMaskedAttributes,Hy:u.domMaskAttributesByTag,domMaskIgnoreAttribute:u.domMaskIgnoreAttribute,domMaskDataAttributes:u.domMaskDataAttributes,attributeMaskingChar:u.attributeMaskingChar}).apply),u.recordCanvas&&y.add(new it(i,u).apply),u.htmlObjectRecordEnabled&&y.add((new xt).apply),u.removeBase64ImageDataTagNames&&u.removeBase64ImageDataTagNames.length>0&&y.add(new Mt(i,h.default.N.apply(null,u.removeBase64ImageDataTagNames)).apply),u.removeBase64Fonts&&y.add(new jt(i).apply),u.domFormAnalysisReporting&&y.add(new Rt(i,e,f,m).apply);let C=h.default.Jw(),k=u.applePaySelectors;k&&k.length&&(h.default.Dh()||h.default.dw())&&C.add(new At(t,k).apply);var S=new pt(i,{_X:u.domFuseElementCount,BX:u.domFuseDuration}),I=new mt(t,i,new Ct(t,i,u.forceRenderingFixForMultipleUA,u.importNodeWhenUrlContains),S,e,g,v.Yw(),y.Yw(),C.Yw(),u.enableAdoptedCss,l,u.checkForHtmlOnly,u.checkVisibility,u.framesetRecordEnabled,u.recordNonNativeShadowAsElementContainer,d.default,this.h.renderSlotsInCustomElements,u.domRecordInnerBody,u.customElementWrapperName,u.ignoreAdoptedForElements,u.enableAdoptedCss);this.FK=this.CX,this.PW=g.PW,this.cloneNode=I.clone}}class Lt{constructor(t,i){this.NK=t=>{const i=t.insertRule,s=this;t.insertRule=function(){const t=i.apply(this,arguments);try{const i=arguments[0];this.hY?this.hY+=i:this.hY=i;const h=s.Ya.Nt(this.ownerNode);s.NO.push({selector:""+h,type:"added",rule:i,index:t})}catch(t){d.default.error("Exception occurred during CSS insertRule interception. Error: "+t.message,t)}return t}},this.BK=t=>{const i=t.deleteRule,s=this;t.deleteRule=function(){try{const t=arguments[0];if(void 0!==this.cssRules[t]){const i=s.Ya.Nt(this.ownerNode);s.NO.push({selector:""+i,type:"deleted",index:t})}}catch(t){d.default.error("Exception occurred during CSS deleteRule interception. Error: "+t.message,t)}return i.apply(this,arguments)}},this.start=()=>{},this.track=()=>{const t={};return this.NO.length&&(t.cssRules={rules:this.NO}),this.NO=[],t},this.GW=()=>!1,this._K=this.NK,this.VK=this.BK,this.si=t,this.Ya=i,this.NO=[],this.NK(this.si.CSSStyleSheet.prototype),this.BK(this.si.CSSStyleSheet.prototype)}}class Ot{constructor(){this.apply=(t,i)=>{t.rules&&t.rules.length>0&&(h.default.Bw(i,"cssRuleChanges").rules=t.rules)}}}class Ft{constructor(t,i){this.zK=t=>{const i=t.setProperty,s=this;t.setProperty=function(){const t=i.apply(this,arguments);try{if(this.parentRule&&this.parentRule.parentStyleSheet){const t=this.parentRule.parentStyleSheet.ownerNode;if(t){const i=s.Ya.Nt(t);s.NO.push({selector:""+i,type:"setProperty",selectorText:this.parentRule.selectorText,propertyName:arguments[0],value:arguments[1],priority:arguments[2]})}}}catch(t){d.default.error("Exception occurred during CSS set property interception. Error: "+t.message,t)}return t}},this.UK=t=>{const i=t.removeProperty,s=this;t.removeProperty=function(){const t=i.apply(this,arguments);try{if(this.parentRule&&this.parentRule.parentStyleSheet){const t=this.parentRule.parentStyleSheet.ownerNode;if(t){const i=s.Ya.Nt(t);s.NO.push({selector:""+i,type:"removeProperty",selectorText:this.parentRule.selectorText,propertyName:arguments[0]})}}}catch(t){d.default.error("Exception occurred during CSS remove property interception. Error: "+t.message,t)}return t}},this.start=()=>{},this.track=()=>{var t={};return this.NO.length&&(t.cssRules={rules:this.NO}),this.NO=[],t},this.GW=()=>!1,this.HK=this.zK,this.WK=this.UK,this.si=t,this.Ya=i,this.NO=[],this.zK(this.si.CSSStyleDeclaration.prototype),this.UK(this.si.CSSStyleDeclaration.prototype)}}class Nt{constructor(){this.apply=(t,i)=>{t.rules&&t.rules.length>0&&(h.default.Bw(i,"cssPropertyChanges").props=t.rules)}}}class Bt{constructor(t,i,s){this.Wr=t,this.NO=i,this.dI=s}GK(){try{this.NO.forEach((t=>{if("object"==typeof t)for(const[i,s]of Object.entries(t)){if(!i||!s)return void this.Wr.log("[Glassbox] Invalid or missing rule for domTrackStyleChanges");const t=document.querySelector(i);if(!t)return void this.Wr.log("[Glassbox] Element for domTrackStyleChanges not found:",i);let h=getComputedStyle(t)[s];setInterval((()=>{const i=getComputedStyle(t)[s];i!==h&&(t.style[s]=i,h=i)}),this.dI)}else this.Wr.log('[Glassbox] Invalid style rule for domTrackStyleChanges - should be of form [{"el":"style"}]:',t)}))}catch(t){this.Wr.log("[Glassbox] Invalid rules provided for domTrackStyleChanges:",t)}}}class _t{constructor(t,i,s,e,r){this.qK=(t,i)=>{let s,h=-1,e={YK:-1,XK:!1,KK:""};for(;s=t.next();)h++,s.nodeType!==window.Node.TEXT_NODE?e.XK=!0:e.KK+=s.textContent,s===i&&(e.YK=h);return e},this.apply=(t,i)=>{if(void 0!==t.AY){let s=this.qK(this.ZK(t.element),t.AY);if(s.YK>=0){let e=s.XK?t.AY.textContent:s.KK;this.GP&&this.GP.rb(t.element,C.default._t,E.default.Zg)?e=Y.default.xt(e):this.HP&&this.HP.rb(t.element,C.default._t)?e=Y.default.ie(e,this.h.domRegexPatternForMasking,this.h.domRegexMaskingChar):this.vW&&this.vW.Et(t.element,C.default._t)&&(e=this.vW.encrypt(e));let r=h.default.Bw(i,"domChanges",t.id);return r.characterData={value:e,child:s.XK?s.YK:0},r}}},this.ZK=t,this.GP=i,this.vW=e,this.HP=s,this.h=r}}class Vt{constructor(t,i,s,e){this.apply=(t,i)=>{const s=t.attributes?Object.keys(t.attributes):[];if(s&&s.length>0){let e,r,n,o,a={};for(this.h&&this.h.removeBase64ImageDataTagNames&&this.h.removeBase64ImageDataTagNames.length>0&&(o=h.default.N.apply(null,this.h.removeBase64ImageDataTagNames),n=new Mt(this.At,o)),e=0;e<s.length;e++)r=t.element.getAttribute(s[e]),"INPUT"===t.element.tagName&&"value"===s[e]?r="password"===t.element.getAttribute("type")?Y.default.xt(r):this.gW.ot(t.element):this.GP.Ky(t.element,s[e])?r=Y.default.xt(r):("style"===s[e]||"src"===s[e])&&n&&o[t.element.tagName]&&(r=n.apply(t.element,null,!0),""===r&&"src"===s[e]&&(a["gb-dataremoved"]={value:"",ordinal:s.length+1})),a[s[e]]={value:r,ordinal:t.attributes[s[e]]};const c=h.default.Bw(i,"domChanges",t.id);return c.attributes=a,c}},this.gW=t,this.GP=i,this.h=s,this.At=e}}class zt{constructor(t,i,s,e,r,n,o){this.init=(t,i)=>{if(void 0!==t.PY){if(this.GP.rb(t.element,C.default._t,E.default.Yg))return;let e,r,n,o=[],a=this.ZK(t.element);if(h.default.childNodes(t.element).length>1&&"STYLE"===t.element.nodeName){const i=t.element.sheet.rules;let h="";for(var s=0;s<i.length;s++)h+=i[s].cssText+"\n";h=h.replace(/<svg.*svg>/gi,""),o.push("text:"+h)}else for(;e=a.next();)r=this.Ya.Nt(e),this.$K[e.tagName]||t.addedNodes&&t.addedNodes[r]||this.h.domChildListUpdateExistingElements&&this.JK(t,r)?(n=this.uY.cloneNode(e),o.push(this.tZ.QK(n))):o.push(this.tZ.iZ(e));"SELECT"!=t.element.nodeName||t.element.selectedIndex||t.element.querySelector("option[selected]")||(t.element.zW=!0);const c=t.element.shadowRoot;if(c&&t.addedNodes[this.Ya.Nt(c)]&&o.push(this.tZ.QK(this.uY.cloneNode(c))),!c&&t.FW&&t.FW.length){let i=this;t.FW.forEach((function(t){o.push(i.tZ.QK(t))}))}const l=h.default.Bw(i,"domChanges",t.id);return l.children={ordinal:t.PY,childList:o},l}},this.JK=(t,i)=>!(!t.AY||t.AY._gbid!==i||"#text"!==t.AY.nodeName),this.uY=t,this.Ya=i,this.tZ=s,this.ZK=e,this.GP=r,this.HP=n,this.h=o||{},this.$K=h.default.N.apply(null,this.h.domChildListUpdateExistingElementsList)}}class Ut{constructor(t){this.sZ=t=>h.default.Ow(t),this.QK=t=>(t&&t.nodeType===window.Node.TEXT_NODE?"text:":"el:")+this.sZ(t),this.iZ=t=>t&&t.nodeType===window.Node.TEXT_NODE?"text-ref:"+h.default.Hv(t.textContent):"id:"+this.Ya.Nt(t),this.Ya=t}}class Ht{constructor(t,i,s){var e=this;this.hZ=()=>{setTimeout((()=>{this.eZ={}}),this.h.rZ)},this.Hg=(t,i)=>{let s;for(s=0;s<this.h.nZ.length;s++)if(i instanceof this.si[this.h.nZ[s]]){this.eZ[this.h.nZ[s]]||(this.eZ[this.h.nZ[s]]=[]),this.eZ[this.h.nZ[s]].push(i);break}},this.oZ=function(t){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const s=e.eZ[t];return i&&delete e.eZ[t],s||[]},this.si=t,this.ft=i,this.h=h.default.ss(s,{rZ:100,nZ:[]}),this.eZ={},this.ft.on("domTrackingStarted",this.hZ)}}class Wt{constructor(t,i){this.si=t,this.Ya=i;let s=[],h={};function e(t){const s=t.animate;t.animate=function(){const t=s.apply(this,arguments);try{const t=i.Nt(this);h[t]=arguments[0]}catch(t){d.default.error("Exception occurred during animation interception. Error: "+t.message,t)}return t}}function r(t){const e=t.play;e&&(t.play=function(){const t=e.apply(this,arguments);try{if(this.effect){const t=i.Nt(this.effect.target);h[t]&&s.push({selector:""+t,type:"animate",rule:[h[t],this.effect.getTiming()]})}}catch(t){d.default.error("Exception occurred during animation interception. Error: "+t.message,t)}return t})}t.Animation&&(r(t.Animation.prototype),e(HTMLElement.prototype)),this.start=()=>{},this.track=()=>{let t={};return s.length&&(t.cssRules={rules:s}),s=[],t},this.GW=()=>!1,this.aZ=e,this.cZ=r}}class Gt{constructor(){this.apply=(t,i)=>{t.rules&&t.rules.length>0&&(h.default.Bw(i,"animationApply").rules=t.rules)}}}class qt{constructor(t,i,s,e){this.lZ=(t,i)=>{var s=Object.getOwnPropertyDescriptor(t,"adoptedStyleSheets")&&Object.getOwnPropertyDescriptor(t,"adoptedStyleSheets").set,h=Object.getOwnPropertyDescriptor(i,"adoptedStyleSheets")&&Object.getOwnPropertyDescriptor(i,"adoptedStyleSheets").set;let e=this;s&&Object.defineProperty(t,"adoptedStyleSheets",{set:function(){s.apply(this,arguments);try{e.dZ(this,arguments)}catch(t){d.default.error("error during method 'adoptedStyleSheets' hook invocation. error: "+t.message,t)}}}),h&&Object.defineProperty(i,"adoptedStyleSheets",{set:function(){h.apply(this,arguments);try{e.dZ(this,arguments)}catch(t){d.default.error("error during method 'adoptedStyleSheets' hook invocation. error: "+t.message,t)}}})},this.dZ=(t,i)=>{if(!(t&&t.host&&this.UY[t.host.nodeName])&&t&&i&&i[0]&&i[0].length){var s=i[0],e=[],r=t.nodeType===window.Node.DOCUMENT_NODE?t.getElementsByTagName("HEAD")[0]:t,n=this.Ya.Nt(r),o=t===r?n:this.Ya.Nt(t);s.forEach((t=>{var i=h.default.iE(t,n,o),s=this.Ya.Nt(i);t._Y&&i.setAttribute("gbRemoveId",t._Y),t.VY=o,t._Y=s,i.setAttribute("gbid",t._Y),t.zY&&!t.zY[n]?t.zY[n]=!0:t.zY||(t.zY={},t.zY[n]=!0),e.push(i)})),this.pX[n]=r,this.ft.emit("domMutation",{type:"childList",target:r,mG:r,addedNodes:e,removedNodes:[],LY:!0})}},this.ft=t,this.Ya=i,this.pX=s,this.UY=h.default.N.apply(null,e);let r=this;if(window.CSSStyleSheet){this.lZ(window.Document.prototype,window.ShadowRoot.prototype);var n=window.CSSStyleSheet.prototype.replaceSync;n&&(window.CSSStyleSheet.prototype.replaceSync=function(){var t=n.apply(this,arguments);try{if(arguments){var i=this.zY;if(i)for(var s in i)if(r.pX[s]){var e=h.default.iE(this,s,this.VY);e.setAttribute("gbremoveid",this._Y),this._Y=r.Ya.Nt(e),e.setAttribute("gbid",this._Y),r.ft.emit("domMutation",{type:"childList",mG:r.pX[s],addedNodes:[e],removedNodes:[],LY:!0})}}}catch(t){d.default.error("error during method 'CSSStyleSheet.replaceSync' hook invocation. error: "+t.message,t)}return t});var o=window.CSSStyleSheet.prototype.replace;o&&(window.CSSStyleSheet.prototype.replace=function(){return Promise.resolve(o.apply(this,arguments).then((function(t){var i=t.zY;if(i)for(var s in i)if(r.pX[s]){var e=h.default.iE(t,s,t.VY);e.setAttribute("gbremoveid",t._Y),t._Y=r.Ya.Nt(e),e.setAttribute("gbid",t._Y),r.ft.emit("domMutation",{type:"childList",mG:r.pX[s],addedNodes:[e],removedNodes:[],LY:!0})}return t})).catch((function(t){return d.default.error("error during method 'CSSStyleSheet.replace' hook invocation. error: "+t),Promise.reject(t)})))})}}}class Yt{constructor(){this.apply=(t,i)=>{t.rules&&t.rules.length>0&&(h.default.Bw(i,"canvas").rules=t.rules)}}}class Xt{constructor(t,i,s,e){var r=this;this.uZ=t=>{Object.keys(this.fZ).length>0||this.mZ(t)},this.mZ=t=>{const i=t.querySelector("canvas");if(i){const s=this.Ya.Nt(i,!0);s&&(this.fZ[s]={gZ:s,node:i,shadowRoot:t}),this.vZ(i)}},this.pZ=(()=>{const t=this;return function(){const i=t.Ya.Nt(this.canvas,!0);i&&(t.wZ[i]=!0)}})(),this.vZ=t=>{f.default.VE(t).zE("getContext",this.bZ,!0)},this.bZ=function(){var t;const i=(t=arguments.length-1)<0||arguments.length<=t?void 0:arguments[t],s=f.default.VE(i);s.zE("clearRect",r.pZ),s.zE("strokeRect",r.pZ),s.zE("beginPath",r.pZ),s.zE("rect",r.pZ),s.zE("fill",r.pZ),s.zE("drawImage",r.pZ),s.zE("fillRect",r.pZ),s.zE("putImageData",r.pZ),s.zE("scale",r.pZ),s.zE("translate",r.pZ),s.zE("enable",r.pZ),s.zE("scissor",r.pZ),s.zE("clearColor",r.pZ),s.zE("clear",r.pZ),s.zE("transferFromImageBitmap",r.pZ),s.zE("transferToImageBitmap",r.pZ)},this.yZ=t=>{if(this.fZ[t]){const i=this.fZ[t];if(i.node&&"CANVAS"===i.node.tagName&&h.default.zp(i.node))return h.default.uE(this.ft,i.node,this.h&&this.h.canvasQuality);delete this.fZ[t]}const i=this.si.document.querySelectorAll("canvas");for(let s=0;s<i.length;s++)if(i[s]._gbid==t){const t=i[s];return h.default.uE(this.ft,t,this.h&&this.h.canvasQuality)}return null},this.start=function(){},this.track=()=>{const t=[],i={};for(let i in this.wZ)if(this.wZ.hasOwnProperty(i)){const s=this.yZ(i);s&&t.push({selector:i,type:"snapshot",rule:s})}return this.wZ={},t.length&&(i.canvasRules={rules:t}),i},this.GW=()=>!1,this.TZ=this.vZ,this.EZ=this.yZ,this.si=t,this.Ya=i,this.ft=s,this.h=e,this.wZ={},this.fZ={},this.si.HTMLCanvasElement&&this.vZ(this.si.HTMLCanvasElement.prototype),this.ft.on("shadow:rootDetected",this.uZ)}}class Kt{constructor(t,i,s,h,e){this.CZ=t=>{if(!t.sheet||!t.sheet.cssRules)return"";let i,s="";const h=t.sheet.cssRules;for(i=0;i<h.length;i++)h[i].cssText&&(s+=h[i].cssText);return s},this.kZ=()=>{let t,i,s,h,e;const r=document.querySelectorAll("style");for(t=0;t<r.length;t++){if(h=r[t],!h.parentNode)return;if(s=this.Ya.Nt(h),i=this.CZ(h),i&&i!==this.SZ[s]){e=h.ownerDocument.createElement("STYLE"),e.textContent=i+h.textContent,e._gbid=s;const t={addedNodes:[e],type:"childList",EG:"childList",target:h.parentNode,mG:h.parentNode,removedNodes:[h]};this.SZ[s]=i,this.At.emit("domMutation",t)}}},this.start=()=>{const t=this.si.setInterval(this.kZ,this.IZ);-1!==this.MZ&&this.si.setTimeout((()=>{this.si.clearInterval(t)}),this.MZ)},this.track=()=>{},this.GW=()=>!1,this.si=t,this.Ya=i,this.At=s,this.IZ=h,this.MZ=e,this.SZ={}}}class Zt{constructor(t,i){this.si=t,this.Ya=i;let s=[];function h(t){var h=t.showModal;t.showModal=function(){const t=h.apply(this,arguments);try{const t=i.Nt(this);s.push({selector:""+t,type:"showModal",rule:["showModal"]})}catch(t){d.default.error("Exception occurred during showModal interception. Error: "+t.message,t)}return t}}"function"==typeof HTMLDialogElement&&h(HTMLDialogElement.prototype),this.start=()=>{},this.track=()=>{var t={};return s.length&&(t.cssRules={rules:s}),s=[],t},this.GW=()=>!1,this.jZ=h}}class $t{constructor(){this.apply=(t,i)=>{t.rules&&t.rules.length>0&&(h.default.Bw(i,"dialog").rules=t.rules)}}}class Jt{constructor(t,i,s,e,r,n,o,a,c,l,u,f,m,g){var v=this;this.DZ=(t,i)=>{var s;for(s=0;s<i.length;s++)if(-1!==t.indexOf(i[s]))return!0;return!1},this.xZ=()=>{var t=new Ut(this.VV),i=[{name:"DOM-mutations",JG:new lt(this.ke,this.VV),QG:[new _t(this.RZ.LK,this.AZ,this.RV,this.TV,this.options).apply,new Vt(this.PZ,this.AZ,{removeBase64ImageDataTagNames:this.options.removeBase64ImageDataTagNames},this.ft).apply,new zt(this.RZ,this.VV,t,this.RZ.LK,this.AZ,null,this.options).init]},{name:"property",JG:new x(this.document,this.VV,this.options.domIgnoredFormElements),QG:[new O(this.PZ,{HG:this.options.domIgnoredFormElements}).apply]}];if(this.options.domRecordCssRules&&i.push({name:"css",JG:new Lt(this.window,this.VV),QG:[(new Ot).apply]}),this.options.domCaptureCssText&&i.push({name:"cssText",JG:new Kt(window,this.VV,this.ke,this.options.domCaptureCssTextInterval,this.options.domCaptureCssTextTermination),QG:[]}),this.options.domRecordCssProps&&i.push({name:"cssProp",JG:new Ft(this.window,this.VV),QG:[(new Nt).apply]}),this.options.domTrackStyleChanges&&this.options.domTrackStyleChanges.length>0){new Bt(d.default,this.options.domTrackStyleChanges,this.options.domTrackStyleChangesInterval).GK()}return this.options.recordAnimation&&i.push({name:"animate",JG:new Wt(this.window,this.VV),QG:[(new Gt).apply]}),this.options.recordCanvas&&i.push({name:"canvas",JG:new Xt(this.window,this.VV,this.ke,this.options),QG:[(new Yt).apply]}),this.options.interceptDialogShowModal&&i.push({name:"dialog",JG:new Zt(this.window,this.VV),QG:[(new $t).apply]}),i},this.reset=()=>{this.status.LZ=!1,this.status.OZ=!1,this.status.aborted=!1,this.status.FZ=0,this.status.NZ=!1},this.BZ=t=>{this._Z=new Date,this.status.OZ=!0,this.VZ.cY(this.status.zZ,!!t,this.UZ)},this.UZ=t=>(this.status.OZ=!1,t&&!t.error?(this.vk.snapshotDuration=new Date-this._Z,this.status.zZ++,this.ke.emit("pageSnapshot:report",t),this.ke.emit("pageSnapshot:save",t),"hidden"===this.document.visibilityState&&this.ke.emit("clsDebug","Error: snapshot was taken while document was hidden"),this.HZ.start(),this.status.LZ=!0,this.ke.emit("domTrackingStarted")):(++this.status.FZ,this.WZ("pageSnapshotError("+this.status.FZ+")",this.VZ.bY),this.status.FZ>=this.GZ?t.error&&t.error.visibility?this.qZ(!0):this.status.aborted=!0:this.options.reTakeSnapshotAfterTime&&this.options.reTakeSnapshotAfterTime>0&&setTimeout(this.qZ,this.options.reTakeSnapshotAfterTime)),this.pw.Dd||(this.options.performanceDebugEnabled&&this.ke.emit("clsDebug",h.default.Md("_snapshotCallback: Attempting to send performance event via snapshot callback event. isPerformanceEventSent: {0}",this.pw.Dd)),this.pw.Od()),this.options.performanceDebugEnabled&&!this.pw.Dd&&this.ke.emit("clsDebug","_snapshotCallback: trySendPerformanceEvent was unable to send performance event"),t),this.YZ=()=>{this.reset(),this.status.NZ=!0,this.qZ(!0)},this.XZ=t=>()=>{var i;if(this.options.allowWaitForElementsUrls&&this.options.allowWaitForElementsUrls.length&&null===t)for(i=0;i<this.options.allowWaitForElementsUrls.length;++i)if(h.default.Dw(this.options.allowWaitForElementsUrls[i],h.default.ji(this.window.location.href))){t=!0;break}return t=!!t},this.KZ=()=>{var t=!1;this.status.ZZ=!1,this.status.NZ=!0,this.options.delaySnapshotAfterElementFound&&this.options.delaySnapshotAfterElementFound>-1&&setTimeout((()=>{t||(t=!0,this.qZ())}),this.options.delaySnapshotAfterElementFound),this.options.delaySnapshotAfterElementFound&&-1!==this.options.delaySnapshotAfterElementFound||this.options.snapshotWaitForPageHidden||this.qZ(!0)},this.qZ=t=>{if(!(this.status.aborted||this.status.LZ||this.status.OZ||this.status.ZZ))try{if(this.options.snapshotWaitForElement&&this.options.snapshotWaitForElement.length&&!this.status.NZ&&this.$Z())return h.default.Bi(this.pw,this.options.snapshotWaitForElement,this.KZ,this.options.elMustBeShown),this.status.ZZ=!0,!1;this.JZ&&(this.domObserver.start(),this.QZ&&(this.QZ.stop(),delete this.QZ)),this.BZ(t)}catch(t){this.WZ("startingError",t),d.default.error("error during DOM recording plugin starting. error: "+t)}return this.status.LZ},this.t$=t=>{var i;if(this.status.i$)for(i=0;i<this.options.domNewPageAjaxTriggers.length;i++)if(-1!==t.url.indexOf(this.options.domNewPageAjaxTriggers[i]))return void this.YZ()},this.s$=t=>{this.status.i$&&-1!==this.options.domNewPageTriggers.indexOf(t.h$)&&this.YZ()},this.gr=()=>{this.JZ&&(this.options.startMutationObserverOnLoad?this.domObserver.start():this.QZ&&this.QZ.start(),!this.status.i$||this.status.LZ||this.status.aborted||void 0===this.options.domStartAfter||-1===this.options.domStartAfter||setTimeout(this.qZ,this.options.domStartAfter))},this.e$=()=>{var t;if(this.status.i$&&this.options.snapshotImmediatePages&&this.options.snapshotImmediatePages.length){var i,s=h.default.ji(this.window.location.href);for(t=0;t<this.options.snapshotImmediatePages.length;++t)if(h.default.Dw(this.options.snapshotImmediatePages[t],s)){this.status.NZ=!0,(i=this.document.querySelector("BODY"))&&!h.default.Gp(i)&&this.ke.emit("clsDebug","BODY element not visible during immediate snapshot"),this.pw.Yj="immediate",this.qZ(!0);break}}},this.ra=()=>{this.domObserver&&(this.domObserver.stop(),this.domObserver=void 0),this.QZ&&(this.QZ.stop(),this.QZ=void 0)},this.r$=()=>{++this.status.n$%this.options.domUpdateEveryWsMsgIn==0&&(this.options.isWsSendCustom&&this.ke.emit("customEvent",{name:"customDomUpdate",W_:"WsDomUpdate",_g:void 0,ox:!0}),this.ke.emit("pageUpdate"))},this.initialize=t=>(t.on("event:mousedown",this.s$),t.on("ajax:send",this.t$),t.once("domInit:loaded",this.gr),t.on("session:new",this.YZ),t.once("domInit:domready",this.e$),t.on("event:unload",this.ra),this.JZ,-1!==this.options.domUpdateEveryWsMsgIn&&(this.status.o$=new q(this.window,this.r$,this.options.isWsSupportOpener)),this.options.domCompress,this.a$,this.options.enableAdoptedCss&&this.window.ShadowRoot&&this.window.ShadowRoot.prototype&&new qt(t,this.VV,this.c$,this.options.ignoreAdoptedForElements),this.status.i$=!0,!0),this.ux=()=>{if(this.status.i$&&!this.status.aborted&&this.qZ()&&this.JZ){var t=new Date,i=this.HZ.EY();return this.vk.domUpdateDuration+=new Date-t,this.vk.domUpdateCount++,i}},this.l$=()=>!this.JZ,this.Gj=()=>this.status.LZ,this.d$=()=>this.RZ,this.mx=()=>this.AZ,this.SW=()=>this.TV,this.eq=()=>this.RZ,this.Mz=function(t){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return v.CA?v.CA.oZ(t,i):[]},this.$G=()=>this.HZ;var p=g.valueMaskingMode===r.gs.ce,w=g.domMaskingMode===r.gs.ce;this.window=t,this.document=i,this.pw=s,this.ke=e,this.cu=r,this.VV=n,this.PZ=l,this.xf=f,this.kf=u,this.WZ=m||function(){},this.options=g||{},this.c$={},this.AZ=new U.default(r,{valueMaskingMode:this.options.valueMaskingMode,Uy:p?this.options.maskWhitelistValueById:this.options.maskBlacklistValueById,Vy:p?this.options.maskWhitelistValueByClass:this.options.maskBlacklistValueByClass,valueMaskIgnoreAttribute:this.options.valueMaskIgnoreAttribute,domMaskingMode:this.options.domMaskingMode,Wy:w?this.options.domWhitelistMaskContentById:this.options.domBlacklistMaskContentById,zy:w?this.options.domWhitelistMaskContentByClass:this.options.domBlacklistMaskContentByClass,Gy:this.options.domMaskOmitById||this.options.domOmitById,qy:this.options.domMaskOmitByClass||this.options.domOmitByClass,domMaskedAttributes:this.options.domMaskedAttributes,Hy:this.options.domMaskAttributesByTag,domMaskIgnoreAttribute:this.options.domMaskIgnoreAttribute,domMaskSimpleSelector:w?this.options.domWhitelistMaskSimpleSelector:this.options.domBlacklistMaskSimpleSelector,recordShadowDom:this.options.recordShadowDom}),this.TV=new W.default(e,a,{Ut:this.options.domEncryptById,Vt:this.options.domEncryptByClass,domEncryptorMaskingChar:this.options.domEncryptorMaskingChar}),this.RV=new H.default(new G.default,{domMaskContentByRegex:this.options.domMaskContentByRegex,domRegexPatternForMasking:this.options.domRegexPatternForMasking,domRegexMaskingChar:this.options.domRegexMaskingChar}),this.RZ=new Pt(this.window,e,r,this.VV,this.PZ,c,this.AZ,this.TV,this.RV,this.c$,this.options,this.xf,this.kf),!this.options.startMutationObserverOnLoad&&this.options.domTamperingDetectionEnabled&&(this.QZ=new L(this.window,e,this.document,this.RZ.FK,this.VV,{semiDomEnabled:this.options.semiDomEnabled,domForceIEMutationEventsHandler:this.options.domForceIEMutationEventsHandler,domForceMutationEventsHandler:this.options.domForceMutationEventsHandler,domTamperingDetectionEnabled:this.options.domTamperingDetectionEnabled,LG:this.options.domThrottleChanges,OG:this.options.domThrottleChangesIE11Only,delayDomMutationEvent:this.options.delayDomMutationEvent,domDelayAddedNodesByClass:this.options.domDelayAddedNodesByClass,domFilterAttributes:this.options.domFilterAttributes,domIgnoreAttributes:this.options.domIgnoreAttributes,domIgnoreChangesById:this.options.domIgnoreChangesById,domIgnoreChangesByClass:this.options.domIgnoreChangesByClass,domIgnoreChangesByTag:this.options.domIgnoreChangesByTag,domOmitInvisibleElements:this.options.domOmitInvisibleElements,handleAttributeMutationsAsChunks:this.options.handleAttributeMutationsAsChunks,ignoreMutationsOnNotAttachedElements:this.options.ignoreMutationsOnNotAttachedElements,characterDataOnly:!0,reinstateNativeMutationObserver:this.options.reinstateNativeMutationObserver,initialObserverFirst:this.options.initialObserverFirst,addBaseDomainToRelativeUrls:this.options.addBaseDomainToRelativeUrls,domIgnoreSameValueAttributesModification:this.options.domIgnoreSameValueAttributesModification,domIgnoreLargeMutationsChunks:this.options.domIgnoreLargeMutationsChunks}).NG),this.qG=this.RZ.FK,this.domObserver=new L(this.window,e,this.document,this.RZ.FK,this.VV,{semiDomEnabled:this.options.semiDomEnabled,domForceIEMutationEventsHandler:this.options.domForceIEMutationEventsHandler,domForceMutationEventsHandler:this.options.domForceMutationEventsHandler,domTamperingDetectionEnabled:this.options.domTamperingDetectionEnabled,LG:this.options.domThrottleChanges,OG:this.options.domThrottleChangesIE11Only,delayDomMutationEvent:this.options.delayDomMutationEvent,domDelayAddedNodesByClass:this.options.domDelayAddedNodesByClass,domFilterAttributes:this.options.domFilterAttributes,domIgnoreAttributes:this.options.domIgnoreAttributes,domIgnoreChangesById:this.options.domIgnoreChangesById,domIgnoreChangesByClass:this.options.domIgnoreChangesByClass,domIgnoreChangesByTag:this.options.domIgnoreChangesByTag,domOmitInvisibleElements:this.options.domOmitInvisibleElements,handleAttributeMutationsAsChunks:this.options.handleAttributeMutationsAsChunks,ignoreMutationsOnNotAttachedElements:this.options.ignoreMutationsOnNotAttachedElements,reinstateNativeMutationObserver:this.options.reinstateNativeMutationObserver,initialObserverFirst:this.options.initialObserverFirst,addBaseDomainToRelativeUrls:this.options.addBaseDomainToRelativeUrls,domIgnoreSameValueAttributesModification:this.options.domIgnoreSameValueAttributesModification,domIgnoreLargeMutationsChunks:this.options.domIgnoreLargeMutationsChunks}).NG,this.a$=this.DZ(h.default.ji(this.document.location.href),this.options.domPartialWhenLocationContains||[]);var b=this.xZ();(this.options.recordShadowDom&&this.window.ShadowRoot||h.default.Vp(this.options.forceShadowDomTrackingWhenUrlContains,h.default.ji(this.window.location.href)))&&(this.CA=new Ht(this.window,e,{nZ:["ShadowRoot"]})),this.HZ=new ct(b,this.options.domIncludeSelectorOnUpdate?u:{Sf:function(){return{}}},r,{kY:"2",setSelectorToAttributes:this.options.setSelectorToAttributes}),this.VZ=new at(this.window,this.document,e,this.RZ,o,this.CA,this.options),this.vk={snapshotDuration:-1,domUpdateDuration:-1,domUpdateCount:0,domObserver:this.domObserver?this.domObserver.bG():"NONE"},this.stats=()=>this.vk,this.JZ=!!this.domObserver||!!this.QZ,this.GZ=3,this._Z=0,this.status={i$:!1,LZ:!1,OZ:!1,aborted:!1,ZZ:!1,NZ:!1,FZ:0,zZ:0,n$:0,o$:void 0},this.ke.on("stopDomRecording",(()=>{this.status.aborted=!0})),this.$Z=this.XZ(null)}}class Qt{constructor(t,i,s,e,r,n){this.u$=t=>{let i,s=[];for(i=0;i<t.length;i++)s.push(t[i].toLowerCase());return s},this._z=t=>{for(;t;){if("FORM"===t.tagName||this.f$[t.tagName])return h.default.isVisible(t)?t:null;t=h.default.parentNode(t)||t.host}return null},this.m$=(t,i)=>{const s=this;setTimeout((()=>{s.ft.emit("formValidationError",{element:t,message:i})}),0)},this.g$=t=>"childList"===t.type?t.addedNodes:"attributes"===t.type?[t.mG]:[],this.v$=t=>{const i=this.si.getComputedStyle(t);return h.default.isVisible(t)&&"hidden"!==i.visibility&&i.opacity>this.h.minVisibleElementOpacity},this.p$=t=>{let i=this.h.domFormValidationTraverseParentsForVisibility;for(;i&&t;){if(!this.v$(t))return!1;t=t.parentElement||t.host,i--}return!0},this.w$=(t,i)=>{if(t.nodeType===this.si.Node.ELEMENT_NODE&&!this.h.ignoreNodesVisibility&&!this.p$(t))return!1;t.nodeType===this.si.Node.TEXT_NODE?h.default.parentNode(t)&&this.b$(t)&&(this.h.ignoreNodesVisibility||!this.h.ignoreNodesVisibility&&this.p$(h.default.parentNode(t)))&&i.push(t):this.LW.PW(t,(t=>{if(t)if(t.nodeType===this.si.Node.TEXT_NODE&&this.b$(t))i.push(t);else if(t.nodeType===this.si.Node.ELEMENT_NODE&&!this.h.ignoreNodesVisibility&&!this.v$(t))return!1}),!1,!0)},this.y$=t=>{try{let i=h.default.parentNode(t);if(i&&i.nodeType===this.si.Node.ELEMENT_NODE){const t=this.si.getComputedStyle(i).color,s=/\d+/g;return t.match(s).join(",")}}catch(t){this.ft.emit("clsDebug","failed getting text color:"+t.message)}return null},this.T$=t=>{if(this.E$[h.default.parentNode(t).tagName])return!1;if(this.C$.length&&h.default.Vp(this.C$,t.textContent.toLowerCase()))return!0;if(this.k$){let i=this.y$(t);return!(null===i||!this.S$[i])}this.I$=t=>{const i=t.match(/\d+/g);return i&&parseInt(i[0])>this.h.M$&&i[0]>Math.max(parseInt(i[1]),parseInt(i[2]))+this.h.j$};let i=h.default.parentNode(t);if(i&&i.nodeType===this.si.Node.ELEMENT_NODE){const t=this.si.getComputedStyle(i);return this.I$(t.color)||this.h.D$&&this.I$(t.backgroundColor)}return!1},this.x$=t=>{let i;for(i=0;i<this.h.ignorableTextRegex.length;i++)if(new RegExp(this.h.ignorableTextRegex[i]).test(t))return!0;for(t=t.replace(/\s+/g," ").toLowerCase(),i=0;i<this.R$.length;i++)if(-1!==t.indexOf(this.R$[i]))return!0;return!1},this.A$=t=>!this.x$(t.textContent)&&t.textContent.trim().length>this.h.P$,this.L$=(t,i)=>{let s=h.default.parentNode(t),e=s.previousElementSibling;for(;e;){if(this.O$[e.tagName])return e;e=e.previousElementSibling}let r,n=this.F$,o=s.parentElement;for(;o&&n--;){if(r=o.querySelectorAll(this.N$),1===r.length)return r[0];if(r.length>1)break;if(o===i)break;o=h.default.parentNode(o)}return i},this.b$=t=>!this.B$[this.Ya.Nt(t)]&&this.A$(t)&&this.T$(t),this._$=t=>{const i=this.Ya.Nt(t),s=void 0===this.V$[i]||this.V$[i]!==t.value;return this.V$[i]=t.value,!s},this.AW=t=>{if(!this.z$)return;const i=this._z(t.mG);i&&setTimeout((()=>{let s,h,e=this.g$(t),r=[];for(s=0;s<e.length;s++)this.w$(e[s],r);for(s=0;s<r.length;s++){if(h=this.L$(r[s],i),!this.h.U$&&h===i)continue;const t=!this._$(h);this.O$[h.tagName]&&!t||(this.B$[this.Ya.Nt(r[s])]=!0,this.m$(h,r[s].textContent.trim()))}}),1)},this.intercept=t=>{var i=!1;if(this.h.H$.length>0)for(let s=0;s<this.h.H$.length;s++)if(this.nz.matches(t,this.h.H$[s])){i=!0;break}this.z$=this.W$[t.id]||!!this._z(t)||i,this.z$&&(this.B$={})},this.G$=()=>{let t;if(this.h.q$.length)for(t=0;t<this.h.q$.length;++t)if(h.default.Dw(this.h.q$[t],h.default.ji(this.si.location.href)))return void this.m$(document.body,"url contain form validation signs: "+this.h.q$[t]);if(this.h.Y$.length)for(t=0;t<this.h.Y$.length;++t)if(h.default.Dw(this.h.Y$[t],this.si.document.title))return void this.m$(document.body,"title contain form validation signs: "+this.h.Y$[t])},this.si=t,this.ft=i,this.Ya=s,this.LW=e,this.nz=r,this.h=h.default.ss(n,{M$:120,j$:80,P$:10,X$:[],H$:[],ignoreNodesVisibility:!1,U$:!0,D$:!0,K$:[],ignorableText:["characters left","characters remaining"],ignorableTextRegex:[],q$:[],Y$:[],domFormValidationErrorRelatedText:[],domFormValidationTraverseParentsForVisibility:1,minVisibleElementOpacity:.5}),this.R$=this.u$(this.h.ignorableText),this.W$=h.default.N.apply(null,this.h.X$),this.f$=h.default.N.apply(null,this.h.K$),this.E$=h.default.N.apply(null,this.h.Wq),this.O$=h.default.N("INPUT","SELECT","TEXTAREA"),this.N$='input:not([type="hidden"]),select,textarea',this.F$=2,this.z$=!1,this.B$={},this.V$={},this.C$=h.default.$t(this.h.domFormValidationErrorRelatedText),this.S$=h.default.N.apply(null,this.h.domFormValidationTextByRGB),this.k$=!h.default.Za(this.S$),this.ft.on("domMutation",this.AW)}}var ti=s("./src/js/libs/lru.js");class ii{constructor(t,i){this.x$=t=>{for(let i=0;i<this.h.ignorableTextRegex.length;i++)if(new RegExp(this.h.ignorableTextRegex[i]).test(t))return!0;t=t.replace(/\s+/g," ").toLowerCase();for(let i=0;i<this.R$.length;i++)if(-1!==t.indexOf(this.R$[i]))return!0;return!1},this.intercept=()=>{const t=jQuery.validator.prototype.showErrors,i=this;jQuery.validator.prototype.showErrors=function(s){try{if(this.errorList&&this.errorList.length>0)for(let t of this.errorList){const s=t.element,e=t.message;if(!i.x$(e)){let t="SAME - NOT REPORTING";s.gbLocalId||(s.gbLocalId=i.Z$++);const r=i.$$.Ls(s.gbLocalId,e);if(null===r||h.default.In(r))t="NEW";else if(r!==e)t="UPDATE";else if(r===e){const i=this.J$(s);i&&i.length>0&&!h.default.In(i[0].innerHTML)&&(i[0].innerHTML===e&&jQuery(i[0]).is(":visible")||(t="SHOW"))}"NEW"!==t&&"UPDATE"!==t&&"SHOW"!==t||i.ft.emit("formValidationError",{element:s,message:e.length>0?e:"NONE"})}}}catch(t){d.default.error("Failed intercepting showErrors for validation error report. "+t.message,t)}t.call(this,s)}},this.ft=t,this.h=h.default.ss(i,{ignorableText:[],ignorableTextRegex:[]}),this.R$=h.default.$t(this.h.ignorableText),this.Z$=1,this.$$=new ti.default(20)}}var si=s("./src/js/ajaxRecorder/AjaxPredicateFactory.js");class hi{constructor(t,i){this.x$=t=>{for(let i=0;i<this.h.ignorableTextRegex.length;i++)if(new RegExp(this.h.ignorableTextRegex[i]).test(t))return!0;t=t.replace(/\s+/g," ").toLowerCase();for(let i=0;i<this.R$.length;i++)if(-1!==t.indexOf(this.R$[i]))return!0;return!1},this.Q$=t=>{if(h.default.nr()-this.tJ<1e3)return;const i=t.target.validationMessage||"NONE";this.x$(i)||(this.tJ=h.default.nr(),this.At.emit("formValidationError",{element:t.target,message:i}))},this.iJ=t=>{for(var i=0;i<t.addedNodes.length;i++)if(window.Node.ELEMENT_NODE==t.addedNodes[i].nodeType){if(t.addedNodes[i][this.sJ]||!t.addedNodes[i].matches(this.hJ))continue;t.addedNodes[i].addEventListener("invalid",this.Q$),t.addedNodes[i][this.sJ]=!0}},this.init=()=>{this.At.on("html5FormValidation:invalid",this.Q$),this.At.on("domMutation",(t=>{setTimeout((()=>{this.iJ(t)}),0)}))},this.At=t,this.h=h.default.ss(i,{ignorableText:[],ignorableTextRegex:[]}),this.R$=h.default.$t(this.h.ignorableText),this.tJ=0,this.hJ="input, textarea, select",this.sJ="_gb_hasValidationListener"}}class ei{constructor(t,i,s,e,r){this.jD=()=>{const t=["always","never","fqdn","tld","statusGte"];let i;this.eJ=()=>"undefined"!=typeof jQuery&&void 0!==jQuery.validator,this.rJ=()=>{const i=this.h.nJ.filter((i=>{for(let s=0;s<t.length;++s)if(-1!==i.indexOf(t[s]))return!1;return!0}));let s;if(i&&i.length){const t=new si.default(this.si.location.hostname);for(s=0;s<i.length;++s){if(t.create(i[s])({url:h.default.ji(this.si.location.href)}))return!1}}return!0},this.ft.once("domInit:loaded",(()=>{if(i&&(i.G$(),this.h.domFormValidationCheckAfterPageLoad)){let t=document.querySelector("FORM");t&&i.intercept(t)}if(this.h.jQueryFormValidationEnabled&&this.eJ()){new ii(this.ft,{ignorableText:this.h.ignorableText,ignorableTextRegex:this.h.ignorableTextRegex}).intercept()}})),this.ft.once("domInit:preloaded",(()=>{if(this.h.html5FormValidation){new hi(this.ft,{ignorableText:this.h.ignorableText,ignorableTextRegex:this.h.ignorableTextRegex}).init()}this.h.domFormValidationTracking&&this.rJ()&&(i=new Qt(this.si,this.ft,this.Ya,this.LW,new l.default(this.si.document),{M$:this.h.M$,j$:this.h.j$,X$:this.h.X$,H$:this.h.H$,U$:this.h.U$,D$:this.h.D$,K$:this.h.K$,ignorableText:this.h.ignorableText,ignorableTextRegex:this.h.ignorableTextRegex,Wq:this.h.Wq,q$:this.h.q$,Y$:this.h.Y$,domFormValidationErrorRelatedText:this.h.domFormValidationErrorRelatedText,domFormValidationTraverseParentsForVisibility:this.h.domFormValidationTraverseParentsForVisibility,minVisibleElementOpacity:this.h.minVisibleElementOpacity,domFormValidationTextByRGB:this.h.domFormValidationTextByRGB}),this.ft.on("event:mousedown",(t=>i.intercept(t.element))),this.ft.on("element:focus",(t=>i.intercept(t))))}))},this.initialize=()=>{},this.si=t,this.ft=i,this.Ya=s,this.LW=e,this.h=r,this.jD()}}class ri{constructor(){this.fetch=(t,i,s,r)=>{const n={url:t};if(r.reportByFetch&&window.fetch)try{let h=new Headers,r=new Request(t,{method:"GET",headers:h,mode:"cors",credentials:"include",cls_own:!0});fetch(r).then((function(h){h.ok?h.headers&&(n.headers=Object.fromEntries(h.headers.entries()),n.type=h.headers.get("Content-Type"),h.text().then((t=>{n.content=e.default.w_.b_(t),i(n)})).catch((()=>{d.default.error("Failed to read resource text by fetch for url : "+t)}))):s(t)})).catch((function(s){d.default.error("Failed getting resource data by fetch for url : "+t),n.error=s,i(n)}))}catch(i){return d.default.error("error was detected "+i.message,i),console.log("Failed getting resource data by Ajax for url: "+t+": "+i.message,i),!1}else{const o=new XMLHttpRequest;if(!o)return!1;try{const a=()=>{if(4===o.readyState)if(200===o.status){n.type=o.getResponseHeader("Content-Type"),n.headers={};const t=o.getAllResponseHeaders().split("\n");for(let i=0;i<t.length;i++){const s=t[i].split(":");let h=s[0];if(h&&(h=h.trim()),h){s.splice(0,1);const t=s.join(":");n.headers[h]=t.trim()}}n.content=e.default.w_.b_(o.response),i(n)}else 0===o.status?s(n.url):(d.default.error("Failed getting resource data by Ajax for url : "+t+" status:"+o.status+"  "+o.statusText),n.error="status: "+o.statusText+" ("+o.status+")",i(n))};return r.xhrBypassOnReadyStateChange?(h.default.ii(o,"load",a),h.default.ii(o,"error",a),h.default.ii(o,"abort",a)):o.onreadystatechange=a,o.cls_own=!0,o.open("GET",t,!0),o.responseType="arraybuffer",o.send(),!0}catch(i){return d.default.error("error was detected "+i.message,i),console.log("Failed getting resource data by Ajax for url: "+t+": "+i.message,i),!1}}}}}class ni{constructor(t,i){this.apply=t=>{if(t.match(this.oJ))return!0;if(!h.default.startsWith(t,"http")||!this.aJ&&h.default.ey(t)!==window.location.origin)return!0;for(let i=0;i<this.cJ.length;i++)if(-1!==t.indexOf(this.cJ[i]))return!0;return!1},this.aJ=t,this.cJ=i||[],this.oJ=new RegExp(/.js$/i)}}var oi=s("./src/js/utils/Base64JsonCodec.js");class ai{constructor(t,i,s,e,r,n){if(this.getStats=t=>(t.countRecorded=0,t.countCorsDenied=0,t.recordingAll=!!this.UD.Os("res.all"),t),this.lJ=t=>{const i=this.UD.Os(t?this.dJ:this.TN);let s;if(this.UD.remove(t?this.dJ:this.TN),i)try{s=this.yD.decode(i)}catch(t){d.default.error("Failed parsing JSON for pending resources: "+t.message,t)}return s},this.uJ=(t,i)=>{let s=[];for(let h=0;h<t.length;h++){const e=t[h];!i&&this.fJ(e.name)||(i&&this.mJ(e.name)||("fetch"!==t[h].initiatorType||this.gJ(e.name))&&(("xmlhttprequest"===e.initiatorType||"other"===e.initiatorType)&&e.name.indexOf(".svg")>-1?!i&&this.h.resourceRecordCssOnly||s.push(e):(i&&this.vJ[e.initiatorType]||!i&&this.pJ[e.initiatorType])&&s.push(e)))}return s},this.wJ=t=>{const i=[];for(let s=0;s<t.length;s++)i.indexOf(t[s])<0&&i.push(t[s]);return i},this.bJ=t=>{var i;if(t.error||t.content&&t.content.length){if((null==t||null===(i=t.content)||void 0===i?void 0:i.byteLength)>this.h.yJ){var s,h=null==t||null===(s=t.content)||void 0===s?void 0:s.byteLength;return t.content=`*** REMOVED because content length of ${h} bytes exceeded the configured max payload size of ${this.h.yJ} bytes ***`,void this.ft.emit("clsDebug",`Data not sent because request would result in 413 Entity Too Large. DATA: ${JSON.stringify(t)}`)}this.stats.countRecorded++,this.ft.emit("saveResourceEvent",t)}},this.TJ=t=>{this.stats.countCorsDenied++,this.ft.emit("saveCorsDeniedEvent",t)},this.EJ=t=>{this.ft.emit("saveResourceUrls",t)},this.CJ=()=>{let t;if(this.h.kJ&&(t=this.lJ(),t))for(let i=0;i<t.length;i++)if(!this.SJ.fetch(t[i],this.bJ,this.TJ,this.h)){d.default.error("Failed executing an XHR request for fetching a resource. Breaking the fetch loop.");break}this.h.IJ&&(t=this.lJ(!0),t&&this.EJ(this.wJ(t)))},this.MJ=()=>{let t,i=!1,s=!1,h=this.h.jJ,e=this.h.DJ;if(this.UD.Os("res.all")&&(i=!0,s=!0,h=Number.MAX_VALUE,e=Number.MAX_VALUE),i|=this.h.kJ&&Math.random()<this.h.xJ,s|=this.h.IJ&&Math.random()<this.h.RJ,i||s){const r=this.oA.performance.getEntriesByType("resource");let n=[],o=[];i&&(n=this.uJ(r,!1)),s&&(o=this.uJ(r,!0));let a,c=this.lJ(!1)||[],l=this.lJ(!0)||[];if(i){for(t=0;t<h&&n.length>0&&!(c.length>=e);t++)a=Math.floor(Math.random()*n.length),c.push(n[a].name),n.splice(a,1);this.UD.Ls(this.TN,this.yD.encode(c))}if(s){for(t=0;t<o.length;t++)l.indexOf(o[t].name)<0&&l.push(o[t].name);this.UD.Ls(this.dJ,this.yD.encode(l))}}},this.AJ=()=>{this.UD.Ls("res.all","true")},this.PJ=()=>{this.UD.remove("res.all")},this.LJ=this.bJ,this.oA=t,this.ft=s,this.UD=n,this.SJ=new ri,this.fJ=new ni(e.resourcesRecordAllowCors,e.resourceIgnoreWhenUrlContains).apply,this.mJ=new ni(!0,e.resourceIgnoreWhenUrlContains).apply,this.yD=new oi.default(i.Xt),this.stats=this.getStats(r||{}),this.TN="res.pending",this.dJ="resurl.pending",this.h=e,e.resourceRecordCssOnly?this.pJ=h.default.N("link","css"):this.pJ=h.default.N("link","css","font","img","input","use","fetch"),this.vJ=h.default.N("link","css","font","img","input","use","fetch"),e.electResourcesOnClear)if(this.oA.Performance.prototype.clearResourceTimings){const t=this.oA.Performance.prototype.clearResourceTimings,i=this;this.oA.Performance.prototype.clearResourceTimings=function(){try{i.MJ()}catch(t){d.default.error("faild to run hook on Performance.clearResourceTimings: "+t)}t.apply(this,arguments)}}else if(this.oA.Performance.prototype.webkitClearResourceTimings){const t=this.oA.Performance.prototype.webkitClearResourceTimings,i=this;this.oA.Performance.prototype.webkitClearResourceTimings=function(){try{i.MJ()}catch(t){d.default.error("faild to run hook on Performance.webkitClearResourceTimings: "+t)}t.apply(this,arguments)}}this.gJ=t=>/\.(jpg|jpeg|png|webp|avif|gif|svg)$/.test(t)}}class ci{constructor(t,i,s,e){this.OJ=t=>this.FJ[t]?this.NJ:this.BJ[t]?this._J:this.VJ[t]?this.zJ:this.UJ,this.HJ=(t,i)=>{const s=t.split(".");let h=s[s.length-1].toLowerCase();return h.indexOf("?")>-1&&(h=h.split("?")[0]),"script"===i?this.WJ:"video"===i||"audio"===i?this.GJ:"img"===i||"svg"===i?this.NJ:this.qJ[i]?this.YJ:"link"===i||"css"===i||"other"!==i?this.OJ(h):this.UJ},this.XJ=t=>{let i;t.hostname=h.default.W(t.name),t.path=h.default.gb(t.name),i=t.path.split("/"),t.fileName=i[i.length-1]},this.KJ=t=>{if(t.name){if(!t.resourceType){const i=this.HJ(t.name,t.initiatorType);i&&(t.resourceType=i.toLowerCase())}this.XJ(t),t.isSameTLD=h.default.V(this.si.location.host)===h.default.V(t.hostname)}t.nextHopProtocol&&(t.protocol=t.nextHopProtocol),delete t.nextHopProtocol,t.isFromCache=0===t.transferSize&&window.location.host===t.hostname},this.ZJ=t=>{delete t.loadMode,delete t.isSuccessful,delete t.resourceType},this.$J=(t,i,s)=>{const h={};for(let s=0;s<i.length;s++)void 0!==t[i[s]]&&(h[i[s]]=t[i[s]]);return"resource"===s&&"document"!==h.name&&this.KJ(h),this.ZJ(t),h},this.JJ=()=>{const t={},i=this.si.document.querySelectorAll('script[src][async],script[src][defer],link[rel="preload"],img[loading]');for(let s=0;s<i.length;s++)switch(i[s].tagName){case"SCRIPT":t[i[s].src]=i[s].async?"async":i[s].defer?"defer":"sync";break;case"LINK":t[i[s].href]="preload";break;case"IMG":t[i[s].src]="lazy"}return t},this.QJ=()=>{let t,i;const s=this.si.document.querySelectorAll('link[rel="stylesheet"]');for(t=0;t<s.length;t++)i=s[t].href||s[t].name,this.tQ[i]=!0},this.iQ=t=>{if(!t)return!1;const i=t.name;return-1===i.indexOf(this.Ok)&&(!this.sQ[i]||this.sQ[i].startTime!==t.startTime)},this.hQ=t=>{t.initiatorType=t.initiatorType||t.entryType,t.isSuccessful=!0,t.isSameTLD=!0,t.resourceType="other",t.duration=t.duration||t.responseEnd-t.redirectStart,"document"===t.name&&(t.name=h.default.ji(window.location.href)||t.name,this.XJ(t))},this.eQ=t=>({startTime:0,connectEnd:t.connectEnd,connectStart:t.connectStart,domainLookupEnd:t.domainLookupEnd,domainLookupStart:t.domainLookupStart,entryType:"navigation",fetchStart:t.fetchStart,initiatorType:"navigation",name:h.default.ji(window.location.href),redirectEnd:t.redirectEnd,redirectStart:t.redirectStart,requestStart:t.requestStart,responseEnd:t.responseEnd,responseStart:t.responseStart,secureConnectionStart:t.secureConnectionStart}),this.rQ=(t,i,s,e,r)=>{let n=[];const o=this.si.performance.getEntriesByType(i);let a,c;if(n=e&&r?o.filter((t=>void 0!==r[t[e]])):o,"resource"===i){let t=this.JJ();for(this.QJ(),"function"==typeof this.si.performance.getEntriesByType&&this.si.performance.getEntriesByType("navigation")[0]?n.push(this.si.performance.getEntriesByType("navigation")[0]):h.default.Dh(this.si.navigator.userAgent)&&n.push(this.eQ(this.si.performance.timing)),a=0;a<n.length;a++)this.iQ(n[a])&&(c=n[a],"script"===c.initiatorType?c.loadMode=t[c.name]||"sync":"link"!==c.initiatorType&&"img"!==c.initiatorType||(t[c.name]&&(c.loadMode=t[c.name]),"link"===c.initiatorType&&this.tQ[c.name]&&(c.resourceType=this.zJ)),c.isSuccessful=!(c.transferSize>0&&0===c.duration));this.tQ={}}for(t[i]=[],a=0;a<n.length;a++){const h=n[a];let e;this.iQ(h)&&(e=this.$J(h,s,i),this.sQ[h.name]={startTime:h.startTime},"navigation"!==e.initiatorType&&"navigation"!==e.entryType||this.hQ(e),t[i].push(e))}},this.nQ=()=>this.si.performance.timing,this.oQ=(t,i)=>{try{const s={};this.aQ="pageload"===i;for(let t=0;t<this.De.length;t++)this.rQ(s,this.De[t].type,this.De[t].properties,this.De[t].cQ,this.De[t].lQ);if(0===Object.keys(s).length||s.resource&&0===s.resource.length)return;t&&(this.sQ={}),this.aQ=!1,this.dQ&&(s.ect=this.dQ),this.uQ&&(s.rtt=this.uQ),s.pagePerformance=this.nQ(),s.version=this.fQ,s.causedBy=i,this.ft.emit("resourcesWaterfall",s)}catch(t){d.default.error("Exception while trying to report resources waterfall. Error: "+t.message,t),this.ft.emit("clsDebug","error trying to report resources waterfall. Exception message: "+t.message)}},this.si=t,this.ft=i,this.De=s,this.Ok=e,this.sQ={},this.tQ={},this.aQ=!1,this.dQ=void 0,this.uQ=void 0,this.fQ=1,this.GJ="media",this.NJ="img",this._J="font",this.zJ="css",this.WJ="js",this.YJ="ajax",this.UJ="other",this.FJ=h.default.N("png","gif","jpg","jpeg","svg","tif","tiff","bmp","webp"),this.BJ=h.default.N("woff","woff2","ttf","otf","eot"),this.qJ=h.default.N("xmlhttprequest","fetch","beacon"),this.VJ=h.default.N("css"),this.si.navigator.connection&&(this.dQ=this.si.navigator.connection.effectiveType,this.uQ=this.si.navigator.connection.rtt),this.mQ=this.HJ}}var li=s("./src/js/config/enableByChances.js");class di{constructor(t,i){if(this.gQ=()=>{const t=this.si.performance.getEntriesByType("resource");t&&t.length>=this.vQ&&this.pQ()},this.pQ=()=>{if(this.h.resourceBufferIncreaseBy&&this.h.resourceBufferIncreaseBy>0&&this.si.performance.setResourceTimingBufferSize){const t=this.si.performance.getEntriesByType("resource").length;t>this.wQ&&(this.wQ=t),this.wQ+=this.h.resourceBufferIncreaseBy,this.vQ+=this.h.resourceBufferIncreaseBy,this.si.performance.setResourceTimingBufferSize(this.wQ)}else this.si.performance.clearResourceTimings()},this.si=t,this.h=h.default.ss(i,{resourceBufferCheckTime:5e3,bQ:140,resourceBufferIncreaseBy:100}),this.wQ=150,this.vQ=this.h.maxResourcesBeforeFlush,this.si.performance)if(Object.getOwnPropertyDescriptor(this.si.Performance.prototype,"onresourcetimingbufferfull"))this.si.performance.onresourcetimingbufferfull=this.pQ;else if(this.si.PerformanceObserver){new this.si.PerformanceObserver(this.gQ).observe({yQ:["resource"]})}else setInterval(this.gQ,this.h.resourceBufferCheckTime)}}class ui{constructor(t,i,s,e,r,n,o){this.ei=()=>{const t=this.h.versionResources&&!this.h.resourceTimingRecordEnabled;if(t||this.h.resourcesRecordEnabled&&void 0!==window.XMLHttpRequest){const i=5e3;this.TQ=new ai(this.si,this.Nr,this.ft,{xJ:this.h.resourcesRecordChance,RJ:this.h.versionResourcesEnabledByChance,jJ:this.h.resourcesRecordCount,DJ:5,resourceRecordCssOnly:this.h.resourceRecordCssOnly,kJ:this.h.resourcesRecordEnabled,IJ:t,electResourcesOnClear:this.h.electResourcesOnClear,resourcesRecordAllowCors:this.h.resourcesRecordAllowCors,resourceIgnoreWhenUrlContains:this.h.resourceIgnoreWhenUrlContains,reportByFetch:this.h.reportByFetch,xhrBypassOnReadyStateChange:this.h.xhrBypassOnReadyStateChange,yJ:this.Nr.EQ},this.vk,this.UD),this.ft.once("domInit:loaded",(()=>{setTimeout(this.TQ.CJ,i)})),this.ft.on("event:unload",this.TQ.MJ)}if(this.h.resourceTimingRecordEnabled&&(new li.default).apply(this.h.resourceTimingRecordEnabledByChance,this.CQ,this._o,"performanceRecord",this.h.saveChancesByCookie)&&(this.kQ=new ci(this.si,this.ft,[{type:"resource",properties:["name","startTime","requestStart","responseStart","responseEnd","duration","decodedBodySize","loadMode","nextHopProtocol","initiatorType","transferSize","redirectStart","fetchStart","domainLookupStart","domainLookupEnd","redirectEnd","connectStart","resourceType","entryType","connectEnd","secureConnectionStart","isSuccessful"],cQ:"initiatorType",lQ:this.h.resourceTimingRecordAjax?h.default.N("link","css","font","img","input","script","xmlhttprequest","fetch","beacon"):h.default.N("link","css","font","img","input","body","script")}],this.h.reportURI),this.ft.once("domInit:loaded",(()=>this.kQ.oQ(!1,"pageload"))),this.ft.on("segmentChanged",(()=>this.kQ.oQ(!1,"segment"))),this.ft.on("event:unload",(()=>this.kQ.oQ(!1,"unload")))),this.kQ||this.TQ){if(this.h.electResourcesOnClear)if(this.si.Performance.prototype.clearResourceTimings){const t=this.si.Performance.prototype.clearResourceTimings,i=this;this.si.Performance.prototype.clearResourceTimings=function(){try{i.kQ&&i.kQ.oQ(!0,"clearResources"),i.TQ&&i.TQ.MJ()}catch(t){d.default.error("failed to run hook on Performance.clearResourceTimings: "+t)}t.apply(this,arguments)}}else if(this.si.Performance.prototype.webkitClearResourceTimings){const t=i.si.Performance.prototype.webkitClearResourceTimings,i=this;this.si.Performance.prototype.webkitClearResourceTimings=function(){try{i.kQ&&i.kQ.oQ(!0,"clearResources"),i.TQ&&i.TQ.MJ()}catch(t){d.default.error("failed to run hook on Performance.webkitClearResourceTimings: "+t)}t.apply(this,arguments)}}this.h.isCheckResourceBuffer&&new di(this.si,{resourceBufferCheckTime:this.h.resourceBufferCheckTime,maxResourcesBeforeFlush:this.h.maxResourcesBeforeFlush,resourceBufferIncreaseBy:this.h.resourceBufferIncreaseBy})}},this.SQ=()=>{this.TQ?(console.log("Exiting full resources recording mode."),this.TQ.PJ()):console.log("Please allow resource recording first.")},this.IQ=()=>{this.TQ?(console.log("Entering full resources recording mode."),this.TQ.AJ()):console.log("Please allow resource recording first.")},this.initialize=()=>{},this.si=t,this.ft=i,this.CQ=s,this.UD=e,this.Nr=r,this._o=n,this.h=o,this.TQ=void 0,this.kQ=void 0,this.vk={},this.ei(),this.startRecordingAll=this.IQ,this.stopRecordingAll=this.SQ,this.stats=()=>this.vk}}var fi=s("./src/js/libs/asmcrypto.aes.cbc.js"),mi=s("./src/js/censor/CompositeValueCensor.js"),gi=s("./src/js/censor/valueCensorScheme.js");class vi{constructor(t,i,s){this.MQ=(()=>{let t=0;return{jQ:()=>++t,DQ:()=>--t}})(),this.xQ=t=>{let i;for(i=0;i<this.h.RQ.length;i++)if(t.indexOf(this.h.RQ[i])>=0)return!0;return!1},this.AQ=t=>{t.visible?this.PQ(t):this.LQ(t)},this.PQ=t=>{!0===t.visible&&this.OQ.ci()||t.FQ&&this.xQ(t.frame.contentWindow.location.href)&&1===this.MQ.jQ()&&this.ft.emit("frame:blackoutEnter",t.frame)},this.LQ=t=>{(!1!==t.visible||this.OQ.ci())&&t.FQ&&this.xQ(t.frame.contentWindow.location.href)&&0===this.MQ.DQ()&&this.ft.emit("frame:blackoutLeave",t.frame)},this.ft=t,this.OQ=i,this.h=h.default.ss(s,{RQ:[]}),this.ft.on("frame:wired",this.PQ),this.ft.on("frame:load",this.PQ),this.ft.on("frame:unload",this.LQ),this.ft.on("frame:visibilityChange",this.AQ)}}var pi=s("./src/js/iframe/iframeHelper.js");class wi{constructor(t,i,s,e,r,n,o,a,c,l,d,u,f,m,g){this.NQ=()=>{const t=this;this.BQ&&this.BQ.NQ((function(i,s){s?t.vk.injected++:t.vk.injectionFailed++}))},this._Q=t=>{this.VQ(t);const i=this.UQ.zQ(t);this.options.HQ&&this.BQ&&i&&this.BQ.WQ(t),this.vk.detected++},this.GQ=()=>{this.ke.emit("pageUpdate"),this.qQ()},this.qQ=()=>{this.domTrackingStarted&&this.XQ.YQ({type:"pageUpdate"})},this.KQ=(t,i)=>{this.ZQ=t,this.ZQ.origin=i,this.ZQ.Lo&&this.ke.emit("clseUpdate",this.ZQ.Lo),this.ZQ.$Q&&this.ke.emit("rtoUpdate",this.ZQ.$Q),this.ke.emit("parentWindowInfo",this.ZQ),t.JQ&&this.blackoutManager.forceBlackoutEnter(),this.vk.handshakeWithParent.completedAt=h.default.nr(),this.vk.handshakeWithParent.info=this.ZQ,this.XQ.QQ(),this.t0(t.parentPageId,t.containerId),this.ke.emit("iframesHandshakeDone",this.ZQ)},this.i0=()=>{this.ke.emit("clsDebug","handshake timeout"),this.vk.handshakeWithParent.timeout=!0,this.t0()},this.nd=()=>{this.s0.start(),this.MH&&(this.vk.handshakeWithParent.startedAt=h.default.nr(),this.e0.h0(this.window.parent,this.KQ,this.i0))},this.r0=()=>{this.domTrackingStarted=!0,this.n0({type:"domTrackingStarted"})},this.n0=t=>{this.ZQ&&this.XQ.notify(this.window.parent,t,this.ZQ.origin)},this.o0=t=>{this.domTrackingStarted&&"pageUpdate"!==t.type&&-1!==this.cu.vv.indexOf(t.type)&&this.qQ()},this.a0=t=>{t.frame.c0=!1,setTimeout((()=>{this.ke.emit("sendStoragePendingReports")}),1e3)},this.l0=t=>{var i=t.frame;this.BQ&&this.options.HQ&&t.FQ&&this.BQ.WQ(i)},this.d0=t=>{this.options.HQ&&!t.frame.c0&&t.visible&&this.BQ.WQ(t.frame)},this.u0=()=>{this.ke.emit("local:forceBlackoutEnter"),this.XQ.YQ({type:"forceBlackoutEnter"})},this.f0=()=>{this.ke.emit("local:forceBlackoutLeave"),this.XQ.YQ({type:"forceBlackoutLeave"})},this.m0=()=>{this.window===this.window.top?this.g0.onPossibleBlackoutEnter():this.XQ.notify(this.window.top,{type:"onPossibleBlackoutEnter"})},this.v0=()=>{this.window===this.window.top?this.g0.onPossibleBlackoutLeave():this.XQ.notify(this.window.top,{type:"onPossibleBlackoutLeave"})},this.onFramePort=t=>{this.XQ.notify(this.window.top,{type:"onFramePort",CI:t.CI,AT:t.AT})},this.p0=t=>{this.XQ.YQ({type:"queryParamUpdate",CI:t})},this.w0=t=>{this.XQ.YQ({type:"clseUpdate",CI:t})},this.b0=t=>{this.XQ.YQ({type:"rtoUpdate",CI:t})},this.y0=()=>{this.XQ.YQ({type:"notifyStopRecording"})},this.T0=()=>{this.XQ.YQ({type:"notifyStartRecording"})},this.forceFlush=()=>{this.XQ.YQ({type:"forceFlush"})},this.E0=()=>{this.ke.on("frame:visibilityChange",this.d0)},this.C0=t=>{this.ZQ=t},this.k0=()=>this.domTrackingStarted,this.S0=()=>{this.domTrackingStarted=!0},this.I0=()=>{this.MH=!0},this.M0=()=>{this.MH=!1},this.window=t,this.ke=i,this.pw=s,this.cu=e,this.options={},this.options.j0=g.iframesSkipHidden,this.options.HQ=g.iframesAutoInject,this.g0=r,this.s0=n,this.UQ=o,this.BQ=a,this.XQ=c,this.blackoutManager=l,this.e0=d,this.D0=u,this.VQ=f,this.t0=m,new vi(i,l,{RQ:g.iframesBlackoutWhenLocationContains}),this.vk={detected:0,injected:0,injectionFailed:0,handshakesWithChildren:{success:0,error:0},handshakeWithParent:{startedAt:-1,completedAt:-1,timeout:!1}},this.ZQ,this.MH=t.top!==t,this.NQ(),this.domTrackingStarted,this.e0.x0((t=>{this.vk.handshakesWithChildren.success+=t?1:0,this.vk.handshakesWithChildren.error+=t?0:1,this.domTrackingStarted&&i.emit("pageUpdate")})),this.initialize=()=>{this.MH||this.t0()},this.stats=()=>this.vk,this.BQ&&this.options.j0&&i.on("frame:visibilityChange",this.d0),i.on("saveEvent",this.o0),i.on("frame:detected",this._Q),i.on("frame:domChange",this.GQ),i.once("domInit:loaded",this.nd),i.on("domTrackingStarted",this.r0),i.on("frame:unload",this.a0),i.on("frame:load",this.l0),i.on("frame:blackoutEnter",this.m0),i.on("frame:blackoutLeave",this.v0),i.on("frame:port",this.onFramePort),i.on("notifyAll:blackoutEnter",this.u0),i.on("notifyAll:blackoutLeave",this.f0),i.on("iFramesForceFlush",this.forceFlush),i.on("session:new",this.p0),i.on("remoteClseConf",this.w0),i.on("remoteRtoConf",this.b0),i.on("recordingStopped",this.y0),i.on("recordingStarted",this.T0)}}class bi{constructor(t,i,s,e,r){this.jD=()=>{try{const t=this.ld.hd(!0);t||this.R0("Failed creating XHR object for fetching external configuration");const i=()=>{if(4===t.readyState)if(200===t.status){const i=t.getResponseHeader("Content-Type");i&&-1!==i.indexOf("application/json")&&this.A0(t.response)}else{const i="Failed getting external configuration for url : "+this.$+" status:"+t.status+"  "+t.statusText;this.R0(i)}};this.h.xhrBypassOnReadyStateChange?(h.default.ii(t,"load",i),h.default.ii(t,"error",i),h.default.ii(t,"abort",i)):t.onreadystatechange=i,t.open("GET",this.$,!0),setTimeout((()=>{try{t.send()}catch(t){d.default.error("Failed sending request to url "+this.$+": "+t.message,t)}}),0)}catch(t){d.default.error("error was detected "+t.message,t),console.log("Failed getting external configuration for url: "+this.$+": "+t.message,t),this.R0(t.message)}},this.ld=t,this.$=i,this.h=s,this.A0=e,this.R0=r,this.jD()}}class yi{constructor(t,i,s,e,r,n){if(this.P0=t=>{var i;try{i=JSON.parse(t)}catch(t){return void d.default.error("Failed parsing external configuration JSON: "+t.message,t)}void 0!==this.L0&&void 0!==i["hash "]&&this.L0===i.hash||(this.Dg.Ls("js.conf",this._I.encode(i)),this.O0(i),this.L0=i.hash)},this.cu=t,this.Dg=s,this._I=e,this.options=n,this.F0=bi,this.ke=r,this.L0,this.cu.jv&&this.cu.jv.src&&this.options.configPath){this.N0();var o=h.default.ey(this.cu.jv.src);new this.F0(i,h.default.sr(o,this.options.configPath),this.options,this.P0,this.B0.bind(this))}}B0(t){this.ke.emit("clsDebug",t)}N0(){var t,i=this.Dg.Os("js.conf");if(i)try{t=this._I.decode(i),this.L0=t.hash,this.O0(t)}catch(t){d.default.error("failed parsing JSON of external configuration: "+t.message,t)}}O0(t){if(t){for(var i in t)"hash"!==i&&(this.options[i]=t[i])}}}var Ti=s("./src/js/censor/mask/UriMasker.js"),Ei=s("./src/js/dom/cloners/DomCloningHook.js"),Ci=s("./src/js/censor/encrypt/encryptionUtils.js");class ki{constructor(t,i,s,h,e){this._0=()=>{var t,i,s,h,e={passive:!0,capture:!0},r=new Date,n=function(){h=[],i=-1,t=null,l(addEventListener)},o=function(h,e){t||(t=e,i=h,s=new Date,l(removeEventListener),a())},a=function(){if(i>=0&&i<s-r){var e={entryType:"first-input",name:t.type,target:t.target,cancelable:t.cancelable,startTime:t.timeStamp,processingStart:t.timeStamp+i};h.forEach((function(t){t(e)})),h=[]}},c=function(t){if(t.cancelable){var i=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,i){var s=function(){o(t,i),r()},h=function(){r()},r=function(){removeEventListener("pointerup",s,e),removeEventListener("pointercancel",h,e)};addEventListener("pointerup",s,e),addEventListener("pointercancel",h,e)}(i,t):o(i,t)}},l=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach((function(i){return t(i,c,e)}))},d="hidden"===document.visibilityState?0:1/0;addEventListener("visibilitychange",(function t(i){"hidden"===document.visibilityState&&(d=i.timeStamp,removeEventListener("visibilitychange",t,!0))}),!0),n(),this.V0=this.V0||{},this.V0.z0=function(t){h.push(t),a()},this.V0.U0=n,Object.defineProperty(this.V0,"H0",{get:function(){return d},enumerable:!0,configurable:!0})},this.track=()=>{try{this.V0.W0((t=>{this.G0++,void 0!==t.value&&(this.q0[t.name]=t.value)}),!0)}catch(t){d.default.error("failed getting CLS. Is browser supported by lib? "+t.message,t)}try{this.V0.Y0((t=>{void 0!==t.value&&t.value<this.X0&&(this.q0[t.name]=t.value)}))}catch(t){d.default.error("failed getting FCP. Is browser supported by lib? "+t.message,t)}try{this.V0.K0((t=>{this.Z0++,t.value>this.$0&&void 0!==t.value&&t.value<this.J0&&(this.q0[t.name]=t.value)}),!0)}catch(t){d.default.error("failed getting LCP. Is browser supported by lib? "+t.message,t)}try{this.V0.Q0((t=>{void 0!==t.value&&(this.q0[t.name]=t.value)}))}catch(t){d.default.error("failed getting TTFB. Is browser supported by lib? "+t.message,t)}try{this.V0.t1((t=>{void 0!==t.value&&(this.q0[t.name]=t.value)}),{i1:!0,s1:0})}catch(t){d.default.error("failed getting INP. Is browser supported by lib? "+t.message,t)}},this.Bf=()=>{const t={};this.q0.NCLS=this.G0,this.q0.NLCP=this.Z0,this.q0.FID&&delete this.q0.FID,this.dQ&&(t.ect=this.dQ),this.uQ&&(t.rtt=this.uQ),t.Sg=JSON.stringify(this.q0),this.ft.emit("webVitals",t)},this.si=t,this.ft=i,this.X0=h,this.J0=e,this.q0={},this.$0=0,this.G0=0,this.Z0=0,this.V0=s,this.si.navigator.connection&&(this.dQ=this.si.navigator.connection.effectiveType,this.uQ=t.navigator.connection.rtt)}}var Si,Ii,Mi,ji,Di,xi=-1,Ri=function(t){addEventListener("pageshow",(function(i){i.persisted&&(xi=i.timeStamp,t(i))}),!0)},Ai=function(){var t=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},Pi=function(){var t=Ai();return t&&t.h1||0},Li=function(t,i){var s=Ai(),h="navigate";return xi>=0?h="back-forward-cache":s&&(document.prerendering||Pi()>0?h="prerender":document.wasDiscarded?h="restore":s.type&&(h=s.type.replace(/_/g,"-"))),{name:t,value:void 0===i?-1:i,e1:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),n1:h}},Oi=function(t,i,s){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var h=new PerformanceObserver((function(t){Promise.resolve().then((function(){i(t.getEntries())}))}));return h.observe(Object.assign({type:t,buffered:!0},s||{})),h}}catch(t){}},Fi=function(t,i,s,h){var e,r;return function(n){i.value>=0&&(n||h)&&((r=i.value-(e||0))||void 0===e)&&(e=i.value,i.delta=r,i.e1=function(t,i){return t>i[1]?"poor":t>i[0]?"needs-improvement":"good"}(i.value,s),t(i))}},Ni=function(t){requestAnimationFrame((function(){return requestAnimationFrame((function(){return t()}))}))},Bi=function(t){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&t()}))},_i=function(t){var i=!1;return function(){i||(t(),i=!0)}},Vi=-1,zi=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},Ui=function(t){"hidden"===document.visibilityState&&Vi>-1&&(Vi="visibilitychange"===t.type?t.timeStamp:0,Wi())},Hi=function(){addEventListener("visibilitychange",Ui,!0),addEventListener("prerenderingchange",Ui,!0)},Wi=function(){removeEventListener("visibilitychange",Ui,!0),removeEventListener("prerenderingchange",Ui,!0)},Gi=function(){return Vi<0&&(Vi=zi(),Hi(),Ri((function(){setTimeout((function(){Vi=zi(),Hi()}),0)}))),{get H0(){return Vi}}},qi=function(t){document.prerendering?addEventListener("prerenderingchange",(function(){return t()}),!0):t()},Yi=[1800,3e3],Xi=function(t,i){i=i||{},qi((function(){var s,h=Gi(),e=Li("FCP"),r=Oi("paint",(function(t){t.forEach((function(t){"first-contentful-paint"===t.name&&(r.disconnect(),t.startTime<h.H0&&(e.value=Math.max(t.startTime-Pi(),0),e.entries.push(t),s(!0)))}))}));r&&(s=Fi(t,e,Yi,i.i1),Ri((function(h){e=Li("FCP"),s=Fi(t,e,Yi,i.i1),Ni((function(){e.value=performance.now()-h.timeStamp,s(!0)}))})))}))},Ki=[.1,.25],Zi=0,$i=1/0,Ji=0,Qi=function(t){t.forEach((function(t){t.o1&&($i=Math.min($i,t.o1),Ji=Math.max(Ji,t.o1),Zi=Ji?(Ji-$i)/7+1:0)}))},ts=function(){"a1"in performance||Si||(Si=Oi("event",Qi,{type:"event",buffered:!0,s1:0}))},is=[],ss=new Map,hs=0,es=function(){return(Si?Zi:performance.a1||0)-hs},rs=[],ns=function(t){if(rs.forEach((function(i){return i(t)})),t.o1||"first-input"===t.entryType){var i=is[is.length-1],s=ss.get(t.o1);if(s||is.length<10||t.duration>i.c1){if(s)t.duration>s.c1?(s.entries=[t],s.c1=t.duration):t.duration===s.c1&&t.startTime===s.entries[0].startTime&&s.entries.push(t);else{var h={id:t.o1,c1:t.duration,entries:[t]};ss.set(h.id,h),is.push(h)}is.sort((function(t,i){return i.c1-t.c1})),is.length>10&&is.splice(10).forEach((function(t){return ss.delete(t.id)}))}}},os=function(t){var i=self.requestIdleCallback||self.setTimeout,s=-1;return t=_i(t),"hidden"===document.visibilityState?t():(s=i(t),Bi(t)),s},as=[200,500],cs=[2500,4e3],ls={},ds=[800,1800],us=function t(i){document.prerendering?qi((function(){return t(i)})):"complete"!==document.readyState?addEventListener("load",(function(){return t(i)}),!0):setTimeout(i,0)},fs={passive:!0,capture:!0},ms=new Date,gs=function(t,i){Ii||(Ii=i,Mi=t,ji=new Date,ws(removeEventListener),vs())},vs=function(){if(Mi>=0&&Mi<ji-ms){var t={entryType:"first-input",name:Ii.type,target:Ii.target,cancelable:Ii.cancelable,startTime:Ii.timeStamp,processingStart:Ii.timeStamp+Mi};Di.forEach((function(i){i(t)})),Di=[]}},ps=function(t){if(t.cancelable){var i=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,i){var s=function(){gs(t,i),e()},h=function(){e()},e=function(){removeEventListener("pointerup",s,fs),removeEventListener("pointercancel",h,fs)};addEventListener("pointerup",s,fs),addEventListener("pointercancel",h,fs)}(i,t):gs(i,t)}},ws=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach((function(i){return t(i,ps,fs)}))},bs=[100,300],ys={W0:function(t,i){i=i||{},Xi(_i((function(){var s,h=Li("CLS",0),e=0,r=[],n=function(t){t.forEach((function(t){if(!t.hadRecentInput){var i=r[0],s=r[r.length-1];e&&t.startTime-s.startTime<1e3&&t.startTime-i.startTime<5e3?(e+=t.value,r.push(t)):(e=t.value,r=[t])}})),e>h.value&&(h.value=e,h.entries=r,s())},o=Oi("layout-shift",n);o&&(s=Fi(t,h,Ki,i.i1),Bi((function(){n(o.takeRecords()),s(!0)})),Ri((function(){e=0,h=Li("CLS",0),s=Fi(t,h,Ki,i.i1),Ni((function(){return s()}))})),setTimeout(s,0))})))},Y0:Xi,l1:function(t,i){i=i||{},qi((function(){var s,h=Gi(),e=Li("FID"),r=function(t){t.startTime<h.H0&&(e.value=t.processingStart-t.startTime,e.entries.push(t),s(!0))},n=function(t){t.forEach(r)},o=Oi("first-input",n);s=Fi(t,e,bs,i.i1),o&&(Bi(_i((function(){n(o.takeRecords()),o.disconnect()}))),Ri((function(){var h;e=Li("FID"),s=Fi(t,e,bs,i.i1),Di=[],Mi=-1,Ii=null,ws(addEventListener),h=r,Di.push(h),vs()})))}))},t1:function(t,i){"PerformanceEventTiming"in self&&"o1"in PerformanceEventTiming.prototype&&(i=i||{},qi((function(){var s;ts();var h,e=Li("INP"),r=function(t){os((function(){t.forEach(ns);var i,s=(i=Math.min(is.length-1,Math.floor(es()/50)),is[i]);s&&s.c1!==e.value&&(e.value=s.c1,e.entries=s.entries,h())}))},n=Oi("event",r,{s1:null!==(s=i.s1)&&void 0!==s?s:40});h=Fi(t,e,as,i.i1),n&&(n.observe({type:"first-input",buffered:!0}),Bi((function(){r(n.takeRecords()),h(!0)})),Ri((function(){hs=0,is.length=0,ss.clear(),e=Li("INP"),h=Fi(t,e,as,i.i1)})))})))},K0:function(t,i){i=i||{},qi((function(){var s,h=Gi(),e=Li("LCP"),r=function(t){i.i1||(t=t.slice(-1)),t.forEach((function(t){t.startTime<h.H0&&(e.value=Math.max(t.startTime-Pi(),0),e.entries=[t],s())}))},n=Oi("largest-contentful-paint",r);if(n){s=Fi(t,e,cs,i.i1);var o=_i((function(){ls[e.id]||(r(n.takeRecords()),n.disconnect(),ls[e.id]=!0,s(!0))}));["keydown","click"].forEach((function(t){addEventListener(t,(function(){return os(o)}),!0)})),Bi(o),Ri((function(h){e=Li("LCP"),s=Fi(t,e,cs,i.i1),Ni((function(){e.value=performance.now()-h.timeStamp,ls[e.id]=!0,s(!0)}))}))}}))},Q0:function(t,i){i=i||{};var s=Li("TTFB"),h=Fi(t,s,ds,i.i1);us((function(){var e=Ai();e&&(s.value=Math.max(e.responseStart-Pi(),0),s.entries=[e],h(!0),Ri((function(){s=Li("TTFB",0),(h=Fi(t,s,ds,i.i1))(!0)})))}))}};class Ts{constructor(t,i,s,h){this.initialize=()=>{},this.ft=t,this.d1=i,this.u1=new ki(window,t,ys,s,h),this.u1._0(),this.f1,this.m1=()=>{this.f1&&clearTimeout(this.f1),t.off("event:unload",this.m1),t.off("event:visibilitychange",this.m1),this.u1.Bf()},this.g1=()=>{this.u1.track(),t.on("event:unload",this.m1),t.on("event:visibilitychange",this.m1),this.f1=setTimeout(this.m1,this.d1)},this.ft.on("domInit:loaded",this.g1)}}class Es{constructor(t,i,s){this.v1=()=>{this.w1=this.b1?h.default.kt(this.Di.title,(t=>{this.T1(t)})):this.Di.title},this.Pe=()=>{this.E1()||setTimeout((()=>{this.ft.emit("titleChanged")}),0)},this.T1=(t,i)=>Y.default.xt(t,null,i),this.E1=()=>{const t=!this.w1||this.w1===document.title||this.b1&&h.default.kt(this.Di.title,(t=>{this.T1(t,this.Di.title)}))===this.w1;return this.w1=this.b1?h.default.kt(this.Di.title,this.T1):this.Di.title,t},this.C1=()=>this.w1,this.Di=t,this.ft=i,this.b1=s,this.w1=void 0,this.ft.once("init:loaded",this.v1),this.ft.on("domMutation",this.Pe)}}var Cs=s("./src/js/detectorState.js");class ks{static S1(t,i,s){new Es(t,i,s.maskTitle)}static init(t,i,s,h,e){var r=this;s.on("domInit:plugins",(()=>{h(),i.fd()})),Cs.default.Wu?s.emit("domInit:plugins"):s.once("init:plugins",(()=>{s.emit("domInit:plugins")})),Cs.default.Xf?s.emit("domInit:domready"):s.once("init:domready",(function(){s.emit("domInit:domready")})),Cs.default.sd?s.emit("domInit:preloaded"):s.once("init:preloaded",(function(){s.emit("domInit:preloaded")})),Cs.default.loaded?(r.S1(t,s,e),s.emit("domInit:loaded")):s.once("init:loaded",(function(){r.S1(t,s,e),s.emit("domInit:loaded")}))}}class Ss{constructor(t,i,s){this.I1=()=>{const t={lastConfAt:this.yW,pageLoaded:this.M1,initPreloadedCalled:this.j1,resolvedForCurrentContext:this.D1};return this.A1.R1(t),t},this.P1=t=>{this.yW||this.wW(t)},this.wW=t=>{t.pageAttributeRules&&this.A1.sW(t.pageAttributeRules),this.yW=h.default.nr(),this.L1()},this.L1=()=>{if(void 0===this.yW||this.D1)return;const t=this.A1.resolve();(t.length>0||this.M1)&&(t.length>0&&this.At.emit("pageAttributes",t),this.D1=!0)},this.initialize=()=>{},this.resolve=this.L1,this.At=t,this.A1=i,this.O1=1500,this.M1=!1,this.j1=!1,this.D1=!1,this.yW=void 0,this.stats=this.I1,this.At.once("plugin:newRemoteConfig",this.P1),this.At.on("newRemoteConfig",this.wW),this.At.on("segmentChanged",(()=>{this.D1=!1,this.L1()}),void 0,-1),this.At.once("init:preloaded",(()=>{this.j1=!0,this.L1()})),this.At.once("init:loaded",(()=>{this.M1=!0,this.L1()}));const e=()=>{const t=window.utag.view;"function"==typeof t&&(window.utag.view=i=>(i&&this.L1(),t.apply(window.utag,arguments)))};var r,n;s&&(window.utag?e():(r=e,n=this.O1,setTimeout((()=>{window.utag&&r()}),n)))}}class Is{constructor(t,i,s,h,e,r){this.F1=t=>this.nW.test(t),this.N1=()=>this.Xx,this.B1=()=>this._1,this.V1=t=>{if(!this.F1(t))return;let i,s;const h=[];for(i=0;i<this.z1.length;i++)s=this.z1[i](),void 0!==s&&(!this.U1&&s.includes(this.H1)&&(s=s.split(this.H1).pop()),h.push(s));return h.length?h.join(this.H1||","):void 0},this.Xx=t,this._1=i,this.nW=s,this.H1=h,this.z1=e,this.U1=r}}class Ms{constructor(t,i,s,e){this.W1=t=>{if(!(t.id&&t.pageUrl&&t.rules&&t.rules.length))return void this.vk.badAttributeConf++;let i,s,h,e=t.pageUrl;t.pageHash&&(e+=("#"===t.pageHash.charAt(0)?"":"#")+t.pageHash);try{i=new RegExp("^"+e.split("*").join(".*")+"$")}catch(t){return d.default.error("Exception occurred during parsing regular expression. Error: "+t.message,t),void this.vk.badAttributePattern++}const r=[];for(s=0;s<t.rules.length;s++)h=this.G1[t.rules[s].type],h&&r.push(h(t.rules[s]));if(r.length)return new Is(t.id,t.name,i,t.q1||",",r,this.U1);this.vk.badRules++},this.Y1=()=>{const t=[];let i,s,e;const r=h.default.ji(this.si.location.href);let n;for(n=0;n<this.X1.length;n++)try{e=this.X1[n].V1(r),void 0!==e&&(i=this.X1[n].N1(),s=this.X1[n].B1(),t.push({id:i,name:s,value:e}),this.vk.resolved++,this.vk.reportsByRule[i]=(this.vk.reportsByRule[i]||0)+1)}catch(t){d.default.error("Error while resolving page attribute attribute. id: "+this.X1[n].N1()+"  error: "+t.message,t),this.K1||(this.K1=!0,this.At.emit("clsDebug","page attribute error (id="+this.X1[n].N1()+"): "+t.message))}return t},this.sW=t=>{let i,s;for(this.vk.configurationLastUpdatedAt=h.default.nr(),this.X1=[],i=0;i<t.length;i++)s=this.W1(t[i]),s&&(this.X1.push(s),this.vk.configured++);return this.X1.length>0},this.resolve=()=>this.Y1(),this.R1=t=>{h.default.Pw(t,this.vk)},this.si=t,this.At=i,this.G1=s,this.X1=[],this.vk={resolved:0,configured:0,configurationLastUpdatedAt:0,badAttributeConf:0,badAttributePattern:0,reportsByRule:{},rulesList:[]},this.K1=!1,this.U1=e}}var js=s("./src/js/3rdPartyIntegration/objectCaptor.js");class Ds{constructor(t,i,s,r,n){this.Z1=()=>{this.J1=[{body:{selector:"-",cssSelector:"body",name:"BODY",submitted:!1},Q1:{}}]},this.t2=(t,i)=>{d.default.error(t+". Message: "+i.message,i),this.At.emit("clsDebug",t+". Message: "+i.message)},this.i2=t=>{const i=this.Ya.Nt(this.si.document.querySelector("BODY"));t[0].body.gbid=i.toString();for(let i=0;i<t.length;i++){const s=t[i].Q1;if(Object.keys(s).length){t[i].inputs=[];for(const h in s)s.hasOwnProperty(h)&&t[i].inputs.push(s[h]),s[h].gbid=s[h].gbid.toString()}delete t[i].Q1}return t},this.s2=()=>{let t;for(t=0;t<this.J1.length;t++)if(!h.default.Za(this.J1[t].Q1))return!0;return!1},this.h2=()=>{try{this.e2&&(this.J1[0].body.lastInput=this.e2.toString()),this.s2()&&this.At.emit("formAnalysis",this.i2(this.J1)),this.Z1()}catch(t){this.t2("Exception while sending Form Analysis",t)}},this.n2=t=>{try{const i=t.element.type&&t.element.type.toLowerCase(),s=this.Ya.Nt(t.element);if("SELECT"===t.element.tagName||"radio"===i||"checkbox"===i)this.J1[0].Q1[s]||this.o2(t.element,s,t.cssSelector),this.J1[0].Q1[s].metrics.entries++;else{const t=this.J1[0].Q1[s];if("number"==typeof this.a2[s]){const i=h.default.nr()-this.a2[s];i<0?this.At.emit("clsDebug","form analysis - negative duration. Element gbid: "+s):t.metrics.duration+=i}}this.e2=s}catch(t){this.t2("Exception while handling focus lost",t)}},this.c2=t=>("INPUT"===t.tagName&&t.type||t.tagName).toLowerCase(),this.o2=(t,i,s,h)=>{if(this.J1[0].Q1[i]||"submit"===t.type.toLowerCase())return;const e={type:this.c2(t),gbid:i,metrics:{entries:0,duration:0,validationErrors:0}};try{this.l2(t,e,s,h),e.name=this.d2.Vf(t),this.J1[0].Q1[i]=e}catch(t){this.t2("Exception while adding a new input",t)}},this.u2=t=>{try{const i=this.Ya.Nt(t.element);this.a2[i]=h.default.nr();const s=this.J1[0].Q1;s[i]||this.o2(t.element,i,t.cssSelector),s[i].metrics.entries++}catch(t){this.t2("Exception while handling focus in",t)}},this.l2=(t,i,s,h)=>{h||(h=this.HL.Sf(t)),i.selector=h.selector||e.default.encoding.If,i.cssSelector=s,h.hostSelectorPath&&(i.shadowHostPath=h.hostSelectorPath),s&&"-"!==s&&(i.cssSelector=s)},this.f2=t=>{this.o2(t.clone,t.gbid,t.cssSelector,t.IK)},this.m2=t=>{const i=this.Ya.Nt(t.element);try{this.J1[0].Q1[i]&&this.J1[0].Q1[i].metrics.validationErrors++}catch(t){this.t2("Exception while updating validation error",t)}},this.si=t,this.At=i,this.Ya=r,this.HL=n,this.J1=void 0,this.e2=void 0,this.a2={},this.d2=s,this.Z1(),this.At.on("event:elementChange",this.n2),this.At.on("event:focus",this.u2),this.At.on("event:unload",this.h2),this.At.on("segmentChanged",this.h2),this.At.on("newInputElement",this.f2),this.At.on("formValidationError",this.m2)}}class xs{constructor(t,i,s,h,e){this.g2=()=>{new Ds(this.si,this.At,this.d2,this.Ya,this.HL)},this.initialize=()=>{},this.si=t,this.At=i,this.Ya=h,this.HL=e,this.d2=s,this.At.once("domInit:preloaded",this.g2)}}class Rs{constructor(t,i,s,e,r,n,o){this.v2=(t,i)=>{if(!this.yG.recordClipboardContent)return"";let s;const e=t.target;if(s="paste"===t.type?(t.clipboardData||this.si.clipboardData).getData("text"):(h.default.ri()||h.default.lw())&&t.target.value?t.target.value:this.Di.getSelection().toString(),s&&s.length&&(i.L_=s.length,s=s.slice(0,this.yG.clipboardMaxValue)),this.w2[e.nodeName]&&this.gW.ct(e)||this.GP.rb(e,C.default._t,E.default.Zg))s=this.It.xt(s);else if(/\d/.test(s)){const t=s.match(/\d+/gm);s=this.It.xt(s,0,"*",t)}s&&(i.content=s)},this.b2=()=>{this.T2&&clearTimeout(this.T2);const t=this;setTimeout((function(){t.E2=null}),this.yG.clipboardMaxDuration)},this.C2=t=>{this.b2();const i={type:t.type,timestamp:h.default.nr(),element:t.target};this.E2={type:i.type,timestamp:i.timestamp,element:i.element},this.v2(t,i),i.content&&(this.E2.content=i.content),this.ft.emit("clipboardEvent",{data:i,element:t.target})},this.S2=t=>{this.b2();const i={type:t.type,timestamp:h.default.nr(),element:t.target};this.E2={type:i.type,timestamp:i.timestamp,element:i.element},this.v2(t,i),i.content&&(this.E2.content=i.content),this.ft.emit("clipboardEvent",{data:i,element:t.target})},this.I2=t=>{const i={type:t.type,timestamp:h.default.nr()},s=(t.clipboardData||this.si.clipboardData).items;if(s&&s.length){i.contentType=s[0].kind;for(let t=0;t<s.length;++t)i.contentType!==s[t].kind&&(i.contentType="mix")}i.contentType=this.M2[i.contentType],this.v2(t,i),i.content&&this.E2&&i.content===this.E2.content&&(delete this.E2.content,i.sourceData={type:this.E2.type,timestamp:this.E2.timestamp,element:this.E2.element},this.E2.content&&(i.sourceData.content=this.E2.content)),this.ft.emit("clipboardEvent",{data:i,element:t.target})},this.si=t,this.Di=i,this.ft=s,this.gW=e,this.GP=r,this.It=n,this.yG=o,this.E2=void 0,this.T2=void 0,this.w2={TEXTAREA:!0,INPUT:!0,SELECT:!0},this.M2={file:"binary",string:"text",mix:"mix"}}}var As=s("./src/js/mask/CreateDomMasker.js");class Ps{constructor(t,i,s,e){this.fq=t=>{this.j2&&clearTimeout(this.j2);const i=h.default.Kd()&&h.default.sm()?h.default.Cp():h.default.Sp(this.si),s=h.default.kp();let e=!1;null!==i&&(i.width<100||i.height<100)||(null===i||null===this.d2.page.xp||this.d2.page.xp.width===i.width&&this.d2.page.xp.height===i.height||(this.d2.page.xp=i,e=!0),null===s||null===this.d2.page.lo||this.d2.page.lo.width===s.width&&this.d2.page.lo.height===s.height||(this.d2.page.lo=s,e=!0),this.si.devicePixelRatio!==this.d2.state.Ip&&(this.si.devicePixelRatio>this.d2.state.Ip?t.Wo(t.Tp,this.d2.Ap.Rp):t.Wo(t.Tp,this.d2.Ap.Mp),this.d2.state.Ip=this.si.devicePixelRatio),t.value={},t.value.Ip=this.d2.state.Ip,t.value.window=this.d2.page.xp,t.value.screen=this.d2.page.lo,e&&(this.D2=t,this.yG.R2?this.j2=setTimeout(this.A2,this.yG.R2):this.A2()))},this.si=t,this.d2=i,this.ft=s,this.yG=e,this.D2=null,this.j2=null,this.A2=()=>{i.P2&&(this.D2.type="tilt",this.D2.value.orientation=this.d2.orientation,this.d2.P2=!1),this.d2.Ed(this.D2)}}}class Ls{constructor(t,i,s,r,n,o,a,c){this.initialize=()=>{if(this.yG.recordClipboardEvents){const t=new As.default(e.default).create(),i=new Rs(this.si,this.Di,this.ft,this.gW,t,this.It,this.yG);h.default.ii(this.si,"copy",i.C2),h.default.ii(this.si,"cut",i.S2),h.default.ii(this.si,"paste",i.I2)}if(!h.default.ep()){const t=new Ps(this.si,this.d2,this.ft,this.yG);this.ft.on("event:resize",t.fq)}},this.si=t,this.Di=i,this.d2=s,this.ft=r,this.gW=n,this.It=o,this.yG=c}}class Os{constructor(t,i){this.globalObject=t=>()=>{const i=this.L2.capture(this.GG,t.paths);if(!i)return;let s;const h=[];for(s in i)i.hasOwnProperty(s)&&h.push(i[s]);return h.join(t.q1||",")},this.L2=i,this.GG=t}}class Fs{constructor(t){this.MQ=(()=>{let t=0;return{jQ:()=>++t,DQ:()=>--t}})(),this.O2=()=>{1===this.MQ.jQ()&&this.ft.emit("notifyAll:blackoutEnter")},this.F2=()=>{0===this.MQ.DQ()&&this.ft.emit("notifyAll:blackoutLeave")},this.onPossibleBlackoutEnter=()=>{this.O2()},this.onPossibleBlackoutLeave=()=>{this.F2()},this.ft=t}}class Ns{constructor(t){this.N2=(t,i,s)=>{const h=i.value.AT;return delete i.value.AT,t.postMessage(i,s,[h])},this.B2=(t,i,s)=>t.postMessage(i,s),this._2=t=>{const i=i=>{t(i)&&i.stopImmediatePropagation()};return this.V2.push(i),h.default.ii(this.si,"message",i)},this.close=()=>{let t;for(t=0;t<this.V2.length;t++)this.si.removeEventListener("message",this.V2[t]);this.V2=[]},this.si=t,this.V2=[],this.name="postMessage"}}class Bs{constructor(t,i,s){this.z2=t=>{let i;for(i=0;i<this.dD.length;i++)this.dD[i](t)},this.U2=t=>{try{return t.location.href,!1}catch(t){return!0}},this.name="direct",this.B2=(t,i)=>{if(this.U2(t))return void pi.default.sy("failed sending message over direct channel: cross origin.");const s=t[this.H2];s&&s.W2?setTimeout((()=>{s.W2({source:this.si,data:i,origin:this.G2})}),0):pi.default.sy("failed sending message over direct channel: remote facade is invalid.")},this._2=t=>{this.dD.push(t)},this.close=()=>{this.dD=[]},this.si=t,this.d2=i,this.H2=s,this.dD=[],this.G2=this.si.location.origin||h.default.ey(h.default.ji(this.si.location.href)),this.d2.W2=this.z2}}class _s{constructor(t,i,s,h){this.q2=()=>{if(this.h.directChannel)return new Bs(this.si,this.d2,this.H2);if(this.h.directChannelWhenUriContainer){let t;for(t=0;t<this.h.directChannelWhenUriContainer.length;t++)if(this.si.location.href.indexOf(this.h.directChannelWhenUriContainer[t])>=0)return new Bs(this.si,this.d2,this.H2)}return new Ns(this.si)},this.si=t,this.d2=i,this.H2=s,this.h=h||{}}}class Vs{constructor(t,i,s,h){this.Sa=t=>{if(!t.getAttribute)return!1;const i=(t.getAttribute("data")||"").toLowerCase();return this.Y2[t.tagName]&&("OBJECT"!==t.tagName||"text/html"===(t.getAttribute("type")||"").toLowerCase()||i.indexOf(".html")===i.length-5||i.indexOf(".htm")===i.length-4)},this.X2=t=>{this.ft.emit("frame:detected",t)},this.K2=(t,i)=>{this.Z2<=0?this.ft.emit("frame:domChange",{target:t,attributeName:i}):(this.J2={target:t,attributeName:i},this.Q2&&clearTimeout(this.Q2),this.Q2=setTimeout((()=>{this.J2&&(this.ft.emit("frame:domChange",this.J2),this.J2=null),this.Q2=null}),this.Z2))},this.Pe=t=>{if("childList"===t.type){let i;const s=[];for(i=0;i<t.addedNodes.length;i++)this.Sa(t.addedNodes[i])?s.push(t.addedNodes[i]):"function"==typeof t.addedNodes[i].getElementsByTagName&&Array.prototype.push.apply(s,t.addedNodes[i].querySelectorAll(this.t5));for(i=0;i<s.length;i++)this.X2(s[i]);s.length}else"attributes"===t.type&&this.Sa(t.mG)&&(this.Sa(t.mG)||"function"==typeof t.mG.getElementsByTagName&&t.mG.querySelectorAll(this.t5).length>0)&&this.K2(t.mG,t.attributeName)},this.start=()=>{let t;const i=this.Di.querySelectorAll(this.t5);for(t=0;t<i.length;t++)this.X2(i[t]);this.ft.on("domMutation",this.Pe)},this.Di=t,this.ft=i,this.lX=s.framesetRecordEnabled,this.i5=s.htmlObjectRecordEnabled,this.t5=h,this.Z2=s.iframesPageUpdateDebounceMs||-1,this.Q2=null,this.J2=null,this.Y2={IFRAME:!0,FRAME:!!this.lX,OBJECT:!!this.i5}}}class zs{constructor(t,i,s,h){this.s5=t=>{try{return t.contentWindow.location.href,!0}catch(t){return!1}},this.h5=t=>!pi.default.ty(t,document.location.origin)&&this.s5(t),this.e5=t=>{var i=this;t.contentWindow.addEventListener("beforeunload",(()=>{i.ft.emit("frame:unload",{FQ:i.h5(t),frame:t})}))},this.gr=t=>{const i=this.h5(t.target);i&&this.e5(t.target),this.ft.emit("frame:load",{FQ:i,frame:t.target})},this.r5=t=>{if("style"===t.attributeName){const i="none"!==this.si.getComputedStyle(t.target).display,s=this.Ya.Nt(t.target);this.n5[s]||this.o5(t.target,this.h5(t.target)),this.n5[s].visible!==i&&this.ft.emit("frame:visibilityChange",{visible:i,frame:t.target,FQ:this.n5[s].FQ}),this.n5[s].visible=i}},this.o5=(t,i)=>{this.n5[this.Ya.Nt(t)]={visible:"none"!==this.si.getComputedStyle(t).display,FQ:i}},this.zQ=t=>{const i=this.h5(t);return t.a5||(t.addEventListener("load",this.gr),this.o5(t,i),i&&this.e5(t),t.a5=!0,this.ft.emit("frame:wired",{FQ:i,frame:t})),i},this.si=t,this.Di=i,this.ft=s,this.Ya=h,this.n5={},this.ft.on("frame:domChange",this.r5)}}const Us={hidden:function(t,i){let s=t,e=0;if(0===i)return"none"===getComputedStyle(s).display||"hidden"===getComputedStyle(s).visibility;for(;s&&s!==document&&e<=i;){if("none"===getComputedStyle(s).display||"hidden"===getComputedStyle(s).visibility)return!0;e++,s=h.default.parentNode(s)}return!1}};class Hs{constructor(t,i,s,e,r,n){var o,a;this.c5=t=>()=>{const i=h.default.Pw({},t);return i.storageBackedReporting=!0,i.iframesParentOrigin=this.Di.location.origin||h.default.ey(h.default.ji(this.Di.location.href)),this.h.l5&&(i.iframesDirectChannel=!0),i.idleEventTimeInterval=-1,i},this.d5=(t,i)=>{let s;const h=i===this.Nr.iframesAutoInjectMode.Ss;for(s=0;s<this.h.u5.length;s++)if(t.indexOf(this.h.u5[s])>=0)return h;return!h},this.f5=t=>(!this.h.j0||!Us.hidden(t,this.h.iframeVisibilityMaxLevels))&&(!(!t.contentDocument||!t.contentDocument.body||!t.contentDocument.body.hasChildNodes()&&"about:blank"!==t.contentWindow.location.href)&&(!("about:blank"===t.contentWindow.location.href&&!this.h.injectIframesAboutBlank)&&(!this.d5(t.contentWindow.location.href,this.h.m5)&&"complete"===t.contentDocument.readyState))),this.g5=t=>{const i=t.contentWindow;return!i[this.v5]&&!t.c0&&(i._cls_config_forced=this.p5(t),i.document.head.appendChild(this.w5(i.document)),t.c0=!0,this.b5&&setTimeout((()=>this.b5(t,!0)),0),!0)},this.y5=t=>{try{return this.f5(t)&&this.g5(t)}catch(i){return pi.default.sy("failed injecting frame window. error:"+i),this.b5&&this.b5(t,!1),!1}},this.WQ=t=>this.y5(t),this.NQ=t=>{this.b5=t},this.Di=t,this.Nr=i,this.T5=e,this.v5=r,this.h=h.default.ss(n,{j0:!0,l5:!1,u5:[],m5:this.Nr.iframesAutoInjectMode.Ss,injectIframesAboutBlank:!1,iframeVisibilityMaxLevels:3}),this.b5=void 0,this.E5=this.T5.getAttribute("id"),this.C5=h.default.qw(this.T5.getAttribute("src")),this.w5=(o=this.E5,a=this.C5,t=>{const i=t.createElement("script");return i.setAttribute("type","module"),o&&i.setAttribute("id",o),i.setAttribute("src",a),i.setAttribute("data-clsautoinjected","true"),i}),this.p5=this.c5(s)}}class Ws{constructor(t,i,s,e,r,n){this.k5=(t,i,s,h)=>{this.S5(i.type)||(h&&(h.postMessage({type:"ack"}),i.CI&&(i.CI.port=h)),this.I5[i.type]&&this.I5[i.type](i.CI),this.M5(t,i))},this.S5=t=>{if("onFramePort"===t)return!1;const i=h.default.nr(),s=this.j5[t];return!!(s&&i-s<this.h.D5)||(this.j5[t]=i,!1)},this.x5=(t,i,s)=>{t&&this.si!==t&&this.R5.send(t,"frame:notification",i,s)},this.A5=t=>!!t.P5,this.M5=(t,i)=>{if(i.L5){let s;const h=this.si.document.querySelectorAll(this.t5);for(s=0;s<h.length;s++)t!==h[s].contentWindow&&this.A5(h[s])&&this.x5(h[s].contentWindow,{type:i.type,CI:i.CI,L5:!0})}i.O5&&this.F5&&this.x5(this.si.parent,{type:i.type,CI:i.CI,O5:!0,L5:!0})},this.QQ=()=>{this.F5=!0},this.notify=(t,i,s)=>{this.h.disabled||this.x5(t,{type:i.type,CI:i.CI,AT:i.AT},s)},this.YQ=t=>{this.h.disabled||this.M5(void 0,{type:t.type,CI:t.CI,L5:!0,O5:!0})},this.si=t,this.R5=i,this.N5=s,this.I5=e,this.h=h.default.ss(r,{D5:300,disabled:!1}),this.t5=n,this.F5=!1,this.j5={},this.N5._2("frame:notification",this.k5)}}class Gs{constructor(t,i,s){this.B5=t=>t&&!this._5[t],this.send=(t,i,s,h)=>{h=this.B5(h)?h:this.V5,s.AT?this.z5.N2(t,{message:i,value:s},h):this.z5.B2(t,{message:i,value:s},h)},this.si=t,this.z5=i,this.V5=s||"*",this._5=h.default.N("javascript:","data:")}}class qs{constructor(t,i){this.TT=t=>{if(!window.Node)return;const i=t.data.message,s=this.dD[i];if(s){try{this.XT=t.ports&&t.ports[0],s(t.source,t.data.value,t.origin,this.XT)}catch(i){pi.default.sy("message (origin:"+t.origin+") handler raised an error.",i)}return!0}return!1},this._2=(t,i)=>{this.dD[t]=i},this.si=t,this.z5=i,this.dD={},this.XT=void 0,i._2(this.TT)}}class Ys{constructor(t,i,s,h,e,r,n,o){this.onPossibleBlackoutEnter=h.onPossibleBlackoutEnter,this.onPossibleBlackoutLeave=h.onPossibleBlackoutLeave,this.forceBlackoutEnter=s.blackoutManager.forceBlackoutEnter,this.forceBlackoutLeave=s.blackoutManager.forceBlackoutLeave,this.queryParamUpdate=e,this.onFramePort=r,this.notifyStopRecording=()=>{try{s.bu().stop()}catch(t){console.warn("Unable to stop recording in iframe ("+s.page.url+" "+s.page.id+")")}},this.notifyStartRecording=()=>{try{s.bu().start()}catch(t){console.warn("Unable to start recording in iframe ("+s.page.url+" "+s.page.id+")")}},this.domTrackingStarted=()=>{i().qZ()},this.pageUpdate=()=>{s.Cd()},this.forceFlush=()=>{t.emit("forceFlush")},this.clseUpdate=t=>{n(t)},this.rtoUpdate=t=>{o(t)}}}class Xs{constructor(t,i,s,h,e,r,n,o,a){this.U5=(t,i,s)=>{let h,e;const r=this.h.searchIframesInShadowDom?this.H5(document):document.querySelectorAll(this.t5);for(h=0;h<r.length;h++)if(t===r[h].contentWindow){e=r[h];break}if(!e)return void(this.W5&&this.W5());const n=this.G5(e);this.W5&&this.W5(n,i.q5),e.P5=!0,this.R5.send(e.contentWindow,"parent:hello",{xo:this.Y5.xo,Co:this.Y5.Co,containerId:n,parentPageId:this.X5.id,zN:this.X5.name,JQ:this.OQ.ci(),ag:this.X5.ag,Lo:this.Y5.Lo,$Q:this.Y5.$Q},s)},this.K5=(t,i,s)=>{this.Z5&&clearTimeout(this.Z5),this.J5&&this.J5(i,s),this.J5=void 0},this.h0=(t,i,s)=>{this.J5=i,this.R5.send(t,"child:hello",{q5:this.X5.id}),-1!==this.h.Q5&&(this.Z5=setTimeout(s,this.h.Q5))},this.x0=t=>{this.W5=t},this.Di=t,this.X5=i,this.OQ=s,this.R5=h,this.N5=e,this.G5=r,this.Y5=n,this.h=o||{t3:"gb_cid",Q5:o.Q5||2e3},this.t5=a,this.J5=void 0,this.W5=void 0,this.Z5=void 0,this.N5._2("child:hello",this.U5),this.N5._2("parent:hello",this.K5)}H5(t){let i=[];return function t(s){"IFRAME"===s.tagName&&i.push(s),s.shadowRoot&&t(s.shadowRoot),s.childNodes.forEach(t)}(t),i}}class Ks{constructor(t,i,s){this.i3=()=>{this.s3||(this.h3[this.h.e3]&&this.r3.Wo(this.h.e3,this.h3[this.h.e3]),this.h3[this.h.n3]&&this.r3.Wo(this.h.n3,this.h3[this.h.n3]),this.s3=!0,this.Le())},this.t0=(t,i)=>{this.h3={parentPageId:t,containerId:i},this.r3&&this.Le&&this.i3()},this.ft=t,this.d2=i,this.h=s||{e3:"containerId",n3:"parentPageId"},this.r3=void 0,this.Le=void 0,this.h3=void 0,this.s3=!1,this.ft.on("event:unload",(()=>{this.r3&&(this.h3={},this.i3())}),void 0,-100),this.ft.on("sessionTimeoutExpired",(()=>{this.s3=!1})),this.d2.Pj=(t,i)=>{this.r3=t,this.Le=i,this.h3&&this.i3()}}}class Zs{constructor(t,i,s,e,r,n){this.o3=()=>{const t=this.a3(),i=Math.max(screen.width,screen.height),s=Math.min(screen.width,screen.height);return t?i:s},this.a3=()=>(this.c3?this.l3=this.c3.matches?0:90:this.si&&void 0!==this.si.orientation?this.l3=90===Math.abs(window.orientation)?90:0:screen&&screen.orientation&&void 0!==screen.orientation.type?this.l3=0===screen.orientation.type.indexOf("landscape")?90:0:this.l3=this.Di.documentElement.clientHeight>this.Di.documentElement.clientWidth?0:90,this.l3),this.d3=t=>{void 0!==t&&t!==this.l3&&(this.d2.orientation=this.l3,this.d2.P2=!0)},this.u3=()=>{const t=this.l3;this.a3(),this.d3(t)},this.initialize=()=>{h.default.Au()||(this.c3?this.c3.addListener((t=>{const i=self.l3;self.l3=t.matches?0:90,this.d3(i)})):(this.a3(),h.default.ii(this.si,"orientationchange",this.u3,!0)))},this.Qj=()=>this.l3,this.si=t,this.Di=i,this.At=s,this.h=e,this.d2=n,this.c3=t.matchMedia?t.matchMedia("(orientation: portrait)"):void 0,this.l3=this.c3?this.c3.matches?0:90:void 0,this.f3=!1}}class $s{constructor(t,i,s,h,n,o,a,c,l,d,u,f,m,g){this.nV=()=>{this.pw&&(this.m3(),this.g3(),this.v3(),this.w3(),this.b3(),window===window.top&&this.y3(),this.T3(),this.E3(),this.C3(),this.S3(),this.I3(),this.M3(),this.j3(),this.D3(),this.start())},this.pw=s,this.global=t,this.document=i,this.vV=n,this.ke=h,this.yG=r.default,this.Ng=o,this.uu=a,this.Fu=c,this.Dg=l,this.kf=d,this.xf=u,this.EV=f,new fi.default(this.EV),this.xV=new Ci.default(this.global,this.EV),this.jj=new mi.default(this.global,new gi.default(this.EV,this.xV,this.ke,e.default,this.yG)),this.SV=g,this.Ij=new Ti.default(this.yG.maskQueryParameters,this.yG.maskUrlPath,{urlMaskingChar:this.yG.urlMaskingChar,queryMaskingChar:this.yG.queryMaskingChar}),this.IV=new Ei.default,this.CV=m,new yi(e.default,this.CV,this.Dg,new oi.default(e.default.Xt),this.ke,this.yG)}init(){ks.init(this.document,this.pw,this.ke,this.nV,this.yG)}w3(){void 0!==this.pw&&this.pw.dd("eventsDetectionPlugin",new Ls(this.global,this.document,this.pw,this.ke,this.jj,Y.default,this.kf,this.yG))}D3(){void 0!==this.pw&&this.yG.recordOrientation&&"ontouchstart"in this.global&&this.pw.dd("mobileEventsPlugin",new Zs(this.global,this.document,this.ke,this.yG,this.pw))}v3(){this.yG.clientAttributesEnabled&&(h.default.time("initializeAttributesPlugin",this.yG.timingMode),this.pw.dd("attributePlugin",new S(this.global,this.ke,this.pw,this.jj,new l.default(this.document),this.kf,this.vV)),h.default.timeEnd("initializeAttributesPlugin",this.yG.timingMode))}g3(){this.yG.collectStruggles&&(h.default.time("initializeStrugglePlugin",this.yG.timingMode),this.pw.dd("strugglesPlugin",new b(this.global,this.ke,this.SV,this.IV,this.kf,this.xf,this.uu,this.pw,this.yG)),h.default.timeEnd("initializeStrugglePlugin",this.yG.timingMode))}b3(){if(this.yG.recordShadowDom&&this.yG.domRecordEnabled&&(this.global.ShadowRoot||h.default.Vp(this.yG.forceShadowDomTrackingWhenUrlContains,h.default.ji(this.global.location.href)))){h.default.time("initializeShadowDomPlugin",this.yG.timingMode);var t=new I.default(e.default,this.yG);this.pw.dd("shadowDomPlugin",new F(this.global,document,this.ke,this.jj,this.SV,this.pw.plugins.domRecordingPlugin,t,this.yG)),h.default.timeEnd("initializeShadowDomPlugin",this.yG.timingMode)}}y3(){this.global&&this.global===this.global.top&&this.yG.devToolsDetectionEnabled&&!h.default.vd()&&(h.default.time("initializeDevtoolsTrackingPlugin",this.yG.timingMode),this.pw.dd("devToolsTrackingPlugin",new V(this.global,this.ke,{devToolsDetectionMessage:this.yG.devToolsDetectionMessage,devToolsDetectionWorkerTimeout:this.yG.devToolsDetectionWorkerTimeout,devToolsDebuggerBasedDetection:this.yG.devToolsDebuggerBasedDetection})),h.default.timeEnd("initializeDevtoolsTrackingPlugin",this.yG.timingMode))}T3(){h.default.vd()||!this.yG.domTamperingDetectionEnabled||"undefined"==typeof MutationObserver&&"undefined"==typeof WebKitMutationObserver||(h.default.time("initializeDomTamperingPlugin",this.yG.timingMode),this.pw.dd("domTamperingPlugin",new z(this.global,this.ke,this.SV,{Pq:this.yG.domTamperingGraceTime,domTamperingIgnorePages:this.yG.domTamperingIgnorePages,Wq:this.yG.domTamperingIgnorableTags})),h.default.timeEnd("initializeDomTamperingPlugin",this.yG.timingMode))}C3(){this.yG.domFormAnalysisReporting&&(h.default.time("initializeFormAnalysisPlugin",this.yG.timingMode),this.pw.dd("formAnalysisPlugin",new xs(this.global,this.ke,this.pw,this.SV,this.kf)),h.default.timeEnd("initializeFormAnalysisPlugin",this.yG.timingMode))}E3(){var t;this.yG.reportValidationErrors&&null!==(t=this.pw.plugins)&&void 0!==t&&t.domRecordingPlugin&&(h.default.time("initializeFormValidationPlugin",this.yG.timingMode),this.pw.dd("formValidationPlugin",new ei(this.global,this.ke,this.SV,this.pw.plugins.domRecordingPlugin.eq(),{domFormValidationTracking:this.yG.domFormValidationTracking,M$:this.yG.domFormValidationRedComponentMin,j$:this.yG.domFormValidationRedComponentDelta,X$:this.yG.domFormValidationSubmissionIds,H$:this.yG.domFormValidationSubmissionSelectors,U$:this.yG.domFormViolationsAllowFormLevel,D$:this.yG.domFormValidationConsiderBG,K$:this.yG.domFormValidationAdditionalTagNames,ignorableText:this.yG.domFormValidationIgnorableText,ignorableTextRegex:this.yG.domFormValidationIgnorableTextRegex,Wq:this.yG.domFormValidationIgnorableTags,nJ:this.yG.domFormValidationIgnorePagesPredicates,q$:this.yG.domFormValidationCheckUrls,Y$:this.yG.domFormValidationTitlesToCheck,domFormValidationCheckAfterPageLoad:this.yG.domFormValidationCheckAfterPageLoad,domFormValidationErrorRelatedText:this.yG.domFormValidationErrorRelatedText,html5FormValidation:this.yG.html5FormValidation,domFormValidationTraverseParentsForVisibility:this.yG.domFormValidationTraverseParentsForVisibility,minVisibleElementOpacity:this.yG.minVisibleElementOpacity,jQueryFormValidationEnabled:this.yG.jQueryFormValidationEnabled,domFormValidationTextByRGB:this.yG.domFormValidationTextByRGB})),h.default.timeEnd("initializeFormValidationPlugin",this.yG.timingMode))}m3(){if(this.yG.domRecordEnabled){h.default.time("initializeDomRecordingPlugin",this.yG.timingMode);const t=(t,i)=>{this.pw.Su("domPlugin",{name:i,message:t})};this.pw.dd("domRecordingPlugin",new Jt(this.global,this.document,this.pw,this.ke,e.default,this.SV,this.Ij,this.xV,this.IV,this.jj,this.kf,this.xf,t,this.yG)),h.default.timeEnd("initializeDomRecordingPlugin",this.yG.timingMode)}}I3(){(this.yG.versionResources||this.yG.resourcesRecordEnabled||this.yG.resourceTimingRecordEnabled)&&this.global.performance&&void 0!==this.global.performance.getEntriesByType&&void 0!==this.global.MutationObserver&&(h.default.time("initializeResourceRecorderPlugin",this.yG.timingMode),this.pw.dd("resourceRecorderPlugin",new ui(this.global,this.ke,this.Fu,this.Dg,e.default,this.uu,{electResourcesOnClear:this.yG.electResourcesOnClear,isCheckResourceBuffer:this.yG.isCheckResourceBuffer,maxResourcesBeforeFlush:this.yG.maxResourcesBeforeFlush,resourceBufferCheckTime:this.yG.resourceBufferCheckTime,resourceBufferIncreaseBy:this.yG.resourceBufferIncreaseBy,resourceTimingRecordAjax:this.yG.resourceTimingRecordAjax,versionResources:this.yG.versionResources,versionResourcesEnabledByChance:this.yG.versionResourcesEnabledByChance,resourcesRecordAllowCors:this.yG.resourcesRecordAllowCors,resourceIgnoreWhenUrlContains:this.yG.resourceIgnoreWhenUrlContains,resourcesRecordChance:this.yG.resourcesRecordChance,resourcesRecordCount:this.yG.resourcesRecordCount,resourceRecordCssOnly:this.yG.resourceRecordCssOnly,resourceTimingRecordEnabledByChance:this.yG.resourceTimingRecordEnabledByChance,resourceTimingRecordEnabled:this.yG.resourceTimingRecordEnabled,resourcesRecordEnabled:this.yG.resourcesRecordEnabled,reportURI:this.yG.reportURI,saveChancesByCookie:this.yG.saveChancesByCookie,reportByFetch:this.yG.reportByFetch,xhrBypassOnReadyStateChange:this.yG.xhrBypassOnReadyStateChange})),h.default.timeEnd("initializeResourceRecorderPlugin",this.yG.timingMode))}S3(){h.default.time("webVitalsPlugin",this.yG.timingMode),this.pw.dd("webVitalsPlugin",new Ts(this.ke,this.yG.webVitalsReportTimeout,this.yG.webVitalsMaxFCP,this.yG.webVitalsMaxLCP)),h.default.timeEnd("webVitalsPlugin",this.yG.timingMode)}M3(){if(this.yG.iframesRecordEnabled){h.default.time("initializeIFramesPlugin",this.yG.timingMode);const t="frame",i="object[type='text/html'],object[data$='.htm'],object[data$='.html']";let s="iframe";this.yG.framesetRecordEnabled&&this.yG.htmlObjectRecordEnabled?this.x3+=","+t+","+i:this.yG.framesetRecordEnabled?this.x3+=","+t:this.yG.htmlObjectRecordEnabled&&(this.x3+=","+i);const n=new Fs(this.ke),o=new _s(this.global,this.pw,this.vV,{directChannel:this.yG.iframesDirectChannel,directChannelWhenUriContainer:this.yG.iframesDirectChannelWhenUriContains}).q2(),a=new Vs(this.document,this.ke,{framesetRecordEnabled:this.yG.framesetRecordEnabled,htmlObjectRecordEnabled:this.yG.htmlObjectRecordEnabled,iframesPageUpdateDebounceMs:this.yG.iframesPageUpdateDebounceMs},s),c=new zs(this.global,this.document,this.ke,this.SV),l=e.default.jv?new Hs(this.document,e.default,this.yG,e.default.jv,this.vV,{j0:this.yG.iframesSkipHidden,l5:"direct"===o.name,u5:this.yG.iframesSkipWhenLocationContains,m5:this.yG.iframesAutoInjectMode,injectIframesAboutBlank:this.yG.injectIframesAboutBlank,iframeVisibilityMaxLevels:this.yG.iframeVisibilityMaxLevels}):void 0,d=new Gs(window,o,this.yG.iframesParentOrigin),u=new qs(window,o),f=new Ys(this.ke,(()=>this.pw.plugins.domRecordingPlugin),this.pw,n,(t=>{this.ke.emit("parentWindowInfo",t)}),(t=>{this.ke.emit("iframePortReceived",t)}),(t=>{this.ke.emit("clseUpdate",t)}),(t=>{this.ke.emit("rtoUpdate",t)})),m=new Ws(window,d,u,f,{disabled:r.default.iframesDisableNotifications},s),g=t=>""+this.SV.Nt(t),v=new Xs(this.document,this.pw.page,this.pw.blackoutManager,d,u,g,this.pw,{Q5:this.yG.iframesHandshakeTimeout,searchIframesInShadowDom:this.yG.searchIframesInShadowDom},s),p=new Ks(this.ke,this.pw,{n3:"parentPageId",e3:"containerId"}).t0,w=this.pw.blackoutManager,b=()=>this.pw.reporter;this.pw.dd("iframes",new wi(this.global,this.ke,this.pw,e.default,n,a,c,l,m,w,v,b,g,p,this.yG)),h.default.timeEnd("initializeIFramesPlugin",this.yG.timingMode)}}j3(){this.yG.pageAttributesEnabled&&(h.default.time("initializePageAttributesPlugin",this.yG.timingMode),this.pw.dd("pageAttributesPlugin",new Ss(this.ke,new Ms(this.global,this.ke,new Os(this.global,new js.default),this.yG.allowMultiplePageNames),this.yG.listenToUtagData)),h.default.timeEnd("initializePageAttributesPlugin",this.yG.timingMode))}start(){this.pw.xj(this.pw.page.initializationTimestamp)}}},"./node_modules/core-js/internals/not-a-nan.js":t=>{var i=RangeError;t.exports=function(t){if(t==t)return t;throw new i("NaN is not allowed")}},"./node_modules/core-js/modules/es.iterator.take.js":(t,i,s)=>{var h=s("./node_modules/core-js/internals/export.js"),e=s("./node_modules/core-js/internals/function-call.js"),r=s("./node_modules/core-js/internals/an-object.js"),n=s("./node_modules/core-js/internals/get-iterator-direct.js"),o=s("./node_modules/core-js/internals/not-a-nan.js"),a=s("./node_modules/core-js/internals/to-positive-integer.js"),c=s("./node_modules/core-js/internals/iterator-create-proxy.js"),l=s("./node_modules/core-js/internals/iterator-close.js"),d=s("./node_modules/core-js/internals/is-pure.js"),u=c((function(){var t=this.iterator;if(!this.R3--)return this.done=!0,l(t,"normal",void 0);var i=r(e(this.next,t));return(this.done=!!i.done)?void 0:i.value}));h({target:"Iterator",fS:!0,_S:!0,PC:d},{cY:function(t){r(this);var i=a(o(+t));return new u(n(this),{R3:i})}})},"./node_modules/core-js/modules/esnext.iterator.take.js":(t,i,s)=>{s("./node_modules/core-js/modules/es.iterator.take.js")}}]);