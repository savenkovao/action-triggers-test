/*!
 * Version: [Local_version_prod] (2025-07-08)
 * Copyright (c) 2025 Glassbox https://www.glassboxdigital.com
 */
"use strict";(self.webpackChunkdetector=self.webpackChunkdetector||[]).push([[92],{"./node_modules/core-js/internals/not-a-nan.js":t=>{var i=RangeError;t.exports=function(t){if(t==t)return t;throw new i("NaN is not allowed")}},"./node_modules/core-js/modules/es.iterator.take.js":(t,i,s)=>{var h=s("./node_modules/core-js/internals/export.js"),e=s("./node_modules/core-js/internals/function-call.js"),r=s("./node_modules/core-js/internals/an-object.js"),n=s("./node_modules/core-js/internals/get-iterator-direct.js"),o=s("./node_modules/core-js/internals/not-a-nan.js"),a=s("./node_modules/core-js/internals/to-positive-integer.js"),c=s("./node_modules/core-js/internals/iterator-create-proxy.js"),l=s("./node_modules/core-js/internals/iterator-close.js"),d=s("./node_modules/core-js/internals/is-pure.js"),u=c((function(){var t=this.iterator;if(!this.t--)return this.done=!0,l(t,"normal",void 0);var i=r(e(this.next,t));return(this.done=!!i.done)?void 0:i.value}));h({target:"Iterator",qt:!0,Yt:!0,gt:d},{take:function(t){r(this);var i=a(o(+t));return new u(n(this),{t:i})}})},"./src/js/DetectorDomBootstrap.js":(t,i,s)=>{s.r(i),s.d(i,{default:()=>$s});var h=s("./src/js/utils.js"),e=s("./src/js/env.js"),r=s("./src/js/config.js"),n=(s("./node_modules/core-js/modules/es.array.push.js"),s("./node_modules/core-js/modules/es.iterator.constructor.js"),s("./node_modules/core-js/modules/es.iterator.for-each.js"),{INPUT:!0,SELECT:!0,TEXTAREA:!0,A:!0,q:!0});class o{constructor(t,i,s,e){var r;if(this.ga=()=>{clearTimeout(this.by)},this.TD=t=>{var i;if(this.TR&&this.TR.length)for(i=0;i<this.TR.length;++i)if(this.TV.matches(t,this.TR[i]))return!0;return!1},this.kV=t=>{let i;try{i=t.element.closest("a")}catch(t){return!1}return!(!i||"_blank"!=i.target)},this.IV=t=>{let i=4;for(;t&&i--;){if("BUTTON"===t.tagName&&t.disabled)return!0;t=h.default.parentNode(t)}return!1},this.SV=t=>{if(clearTimeout(this.by),(t.element.disabled||t.element.ariaDisabled||!n[t.element.tagName])&&!h.default.HE(t)&&!this.kV(t)&&!this.TD(t.element)&&!this.te.observeRightClick&&t.hg&&!t.hg.button&&2!==t.hg.button){const i=t.id,s=t,h={element:t.element,dataToEncode:{type:"deadClick",MV:i},relatedEvent:s};this.te.struggleCaptureDeadClickOnDisabledElements&&(t.element.disabled||t.element.ariaDisabled)?this.DV(h,"deadClick - disabledElement"):this.IV(t.element)?this.DV(h,"deadClick - disabledButtonParent"):this.by=setTimeout((()=>{this.DV(h,"deadClick - enabledButtonParent")}),this.xV)}},this.TV=s,this.DV=i,this.Ge=t,this.te=e,this.by=null,this.xV=e.RV,this.TR=e.elementsToIgnoreBySelector,e.additionalTagNamesToIgnore&&e.additionalTagNamesToIgnore.length)for(r=0;r<e.additionalTagNamesToIgnore.length;++r)n[e.additionalTagNamesToIgnore[r]]=!0;this.Ge.on("domMutation",this.ga),this.Ge.on("segmentChanged",this.ga),this.Ge.on("event:change",this.ga),this.Ge.on("ajax:send",this.ga),this.Ge.on("pageError",this.ga),this.Ge.on("event:unload",this.ga),this.Ge.on("window:open",this.ga),"undefined"!=typeof Element&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var i=this;do{if(i.matches(t))return i;i=i.parentElement||h.default.parentNode(i)}while(null!==i&&1===i.nodeType);return null}))}}s("./node_modules/core-js/modules/es.iterator.filter.js");class a{constructor(t,i,s,h,e){this.SV=t=>{if(!this.AV.HE(t)){if(this.PV.length>0)for(var i=0;i<this.PV.length;i++)if(this.TV.matches(t.element,this.PV[i]))return;var s=this.LV.ps(t.element);if(this.OV[s]){if(this.OV[s].FV.push({time:t.timestamp,NV:t.id}),this.OV[s].FV.length>=this.BV){var h=this;this.OV[s].FV=this.OV[s].FV.filter((function(i){return t.timestamp-i.time<h.VV}))}this.OV[s].FV.length>=this.BV?(t.indexInRage=this.BV+this.OV[s].count,t.rageSequence=this.zV,this.OV[s].UV||this.DV({element:t.element,dataToEncode:{type:"rageClick",startEventRelatedId:this.OV[s].FV[0].NV,endEventRelatedId:t.id,rageSequence:this.zV},relatedEvent:t},"rageClickStruggle"),this.OV[s].UV=!0,this.OV[s].count=this.OV[s].count+1):this.OV[s].UV&&(this.OV={},this.OV[s]={},this.OV[s].FV=[],this.OV[s].FV.push({time:t.timestamp,NV:t.id}),this.OV[s].count=0,++this.zV)}else this.OV[s]={},this.OV[s].FV=[],this.OV[s].FV.push({time:t.timestamp,NV:t.id}),this.OV[s].count=0;this.HV&&this.OV[this.HV]&&this.OV[this.HV].UV&&!this.OV[s].UV&&(this.OV[this.HV].UV=!1,this.OV[this.HV].count=0,++this.zV),this.HV=s}},this.AV=t,this.DV=s,this.LV=i,this.VV=e.VV||3e3,this.BV=e.WV||5,this.PV=e.elementsToIgnoreBySelector||[],this.OV={},this.zV=1,this.HV=null,this.TV=h}}s("./node_modules/core-js/modules/es.iterator.map.js"),s("./node_modules/core-js/modules/es.regexp.constructor.js"),s("./node_modules/core-js/modules/es.regexp.dot-all.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.replace.js");class c{constructor(t,i,s){this.GV=t=>{const i=this.qV.map((t=>{const i=t.toLowerCase().replace(/[-/\\^$+?.()|[\]{}]/g,"\\$&");return new RegExp(`^${i.replace(/\*/g,".*")}`)}));for(let s of i)if(s.test(t.toLowerCase()))return!0;return!1},this.YV=t=>{this.by&&(t.XV=!1,this.KV.push(t.error),this.ZV=!0)},this.SV=t=>{clearTimeout(this.by);var i=t.id;this.by=setTimeout((()=>{this.ZV&&(this.KV=this.KV.filter(((t,i,s)=>s.indexOf(t)===i)),this.KV=this.KV.filter((t=>!this.GV(t))),this.KV.length>0&&(this.ZV=!1,this.DV({element:t.element,dataToEncode:{MV:i,type:"errorClick"},Av:this.KV,relatedEvent:t},"errorClickStruggle")),this.KV=[]),this.by=null}),this.$V)},this.DV=i,this.by=null,this.ZV=!1,this.KV=[],this.$V=s.JV,this.qV=s.struggleErrorClickBlacklist,t.on("pageError",this.YV)}}var l=s("./src/js/resolving/ElementResolver.js"),d=s("./src/js/logger.js");class u{constructor(t,i,s,h,e){if(this.QV=()=>{clearTimeout(this.tz)},this.TD=t=>{const i=this.te.elementsToIgnoreBySelector;if(i&&i.length)for(let s=0;s<i.length;++s)if(this.iz.matches(t,i[s]))return!0;return!1},this.sz=t=>{let i=this.Lr.getComputedStyle(t.element).overflow;if(i&&(i=i.toLowerCase()),"scroll"!==i&&"auto"!==i)return!1;try{const i=t.element.getBoundingClientRect(),s=i.right-i.width,h=this.Lr.getComputedStyle(t.element).direction;if("ltr"===h){if(t.value.lj.x>s+t.element.clientWidth)return!0}else if("rtl"===h&&t.value.lj.x<s+i.width-t.element.clientWidth)return!0;const e=i.bottom-i.height;if(t.value.lj.y>e+t.element.clientHeight)return!0}catch(t){d.default.error("Error while intercepting right click. Error: "+t.message,t)}return!1},this.kV=t=>{try{if(!t.element.closest("a"))return!1}catch(t){return!1}return"_blank"==t.element.closest("a").target},this.SV=t=>{if(2===t.hg.button&&(clearTimeout(this.tz),!this.hz[t.element.tagName]&&!this.sz(t)&&!this.kV(t))){const i=t.id,s=t;this.tz=setTimeout((()=>{this.TD(t.element)||this.ez({element:t.element,dataToEncode:{type:"rightClick",MV:i},relatedEvent:s},"rightClickStruggle")}),this.rz)}},this.Lr=t,this.cs=i,this.ez=s,this.iz=h,this.te=e,this.tz=void 0,this.rz=e.rightClickTimeout,this.hz={INPUT:!0,SELECT:!0,TEXTAREA:!0,A:!0},e.additionalTagNamesToIgnore&&e.additionalTagNamesToIgnore.length)for(let t=0;t<e.additionalTagNamesToIgnore.length;++t)this.hz[e.additionalTagNamesToIgnore[t]]=!0;i.on("domMutation",this.QV),i.on("segmentChanged",this.QV),i.on("event:change",this.QV),i.on("ajax:send",this.QV),i.on("pageError",this.QV),i.on("event:unload",this.QV),"undefined"!=typeof Element&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var i=this;do{if(i.matches(t))return i;i=i.parentElement||i.parentNode}while(null!==i&&1===i.nodeType);return null}))}}var f=s("./src/js/utils/hookingUtils.js");class m{constructor(t,i,s,e,r){if(this.nz=()=>{try{f.default.fS(this.Lr).pS("open",(function(){this.Ge.emit("window:open")}))}catch(t){d.default.error("Failed hooking window.open method. "+t.message,t)}},this.SV=t=>{this.oz.forEach((function(i){i(t)}))},this.oz=[],this.iz=new l.default(r.document),this.Ge=i,this.Lr=r,e.struggleCaptureRightClick&&e.domRecordEnabled){const t=new u(r,i,s,this.iz,{rightClickTimeout:e.struggleRightClickInterval||1e3,elementsToIgnoreBySelector:e.struggleRightClickIgnoreBySelector||[],additionalTagNamesToIgnore:e.struggleRightClickIgnoreByTagNames||[]});this.oz.push(t.SV)}if(e.domRecordEnabled&&e.interceptAjax&&e.struggleCaptureDeadClick){this.nz();const t=new o(i,s,this.iz,{RV:e.struggleDeadClickInterval||1e3,elementsToIgnoreBySelector:e.struggleDeadClickIgnoreBySelector||[],additionalTagNamesToIgnore:e.struggleDeadClickIgnoreByTagNames||[],struggleCaptureDeadClickOnDisabledElements:e.struggleCaptureDeadClickOnDisabledElements||!1});this.oz.push(t.SV)}const n=new a(h.default,t,s,this.iz,{VV:e.struggleRageClickInterval,WV:e.struggleRageClickMinCount,elementsToIgnoreBySelector:e.struggleRageClickIgnoreBySelector});if(this.oz.push(n.SV),e.struggleCaptureErrorClick){const t=new c(i,s,{JV:e.struggleErrorClickInterval||1e3,struggleErrorClickBlacklist:e.struggleErrorClickBlacklist||[]});this.oz.push(t.SV)}}}class g{constructor(t,i,s){this.az=()=>{this.cz=this.ym(),this.cz&&this.lz&&this.ez({element:document,dataToEncode:{type:"reload"}},"pageStruggle - reload")},this.dz=()=>{var t,i=this.Lr.performance.getEntriesByType?this.Lr.performance.getEntriesByType("navigation"):[];if(i.length>0)for(t=0;t<i.length;t++){if("reload"===i[t].type)return this.lz=!0,void this.az();if("back_forward"===i[t].type)return this.uz=!0,void this.fz()}this.Lr.performance.navigation&&this.Lr.PerformanceNavigation&&(this.Lr.performance.navigation.type===this.Lr.PerformanceNavigation.TYPE_RELOAD&&(this.lz=!0,this.az()),this.Lr.performance.navigation.type===this.Lr.PerformanceNavigation.TYPE_BACK_FORWARD&&(this.uz=!0,this.fz()))},this.mz=()=>{this.dz()},this.gz=()=>{this.fz(),this.az()},this.Lr=t,this.ez=i,this.cz=!1,this.uz=!1,this.vz=!1,this.ym=s,this.lz=!1,this.pz=!1}fz(){this.cz=this.ym(),this.cz&&this.uz&&!this.vz&&this.ez({element:document,dataToEncode:{type:"backForward"}},"pageStruggle - backForward")}}s("./node_modules/core-js/modules/es.iterator.some.js");class v{constructor(t,i,s){this.wz=t=>{(0===t.status&&!this.ajaxStruggleIgnoreCancel&&!this.bz(this.ajaxStruggleExcludedUrls,t.url)||t.status>=400)&&this.DV({Dv:t.Fv,cssSelector:t.Bv,dataToEncode:{type:0===t.status?t.aborted?"ajaxAborted":"ajaxCanceled":"ajaxError",xhrStatus:t.status,url:t.url,sn:t.sn}},"ajaxStruggle - checkXhr")},this.DV=t,this.ajaxStruggleIgnoreCancel=i,this.ajaxStruggleExcludedUrls=s,this.bz=(t,i)=>!!t&&t.some((t=>0==i.indexOf(t)))}}class p{constructor(t,i,s,e,r,n){this.yz=()=>{this.DV({dataToEncode:{type:"blankPage"}},"domStruggle - blankPage")},this.Tz=()=>{try{return this.GE.plugins.domRecordingPlugin.Ez("ShadowRoot")}catch(t){return[]}},this.Cz=t=>{for(var i=h.default.childNodes(t.shadowRoot),s=0;s<i.length;s++){if(i[s].nodeType===Node.ELEMENT_NODE&&0!==i[s].innerText.trim().length)return!1;if(i[s].nodeType===Node.TEXT_NODE&&0!==i[s].wholeText.trim().length)return!1}return!0},this.kz=t=>t.shadowRoot?this.Cz(t):0===t.innerText.trim().length,this.Iz=()=>{try{var t=this.Tz();t.push(this.window.document);for(var i=0;i<t.length;i++)for(var s=t[i].querySelectorAll(this.options.Sz),h=0;h<s.length;h++)if(this.kz(s[h]))return void this.yz()}catch(t){}},this.Fx=()=>{this.Mz&&this.options.Dz?this.yz():this.options.Sz&&this.Iz()},this.jz=t=>{if(this.Mz&&t.nodeType===this.window.Node.TEXT_NODE){var i=t.textContent;i&&i.trim()&&h.default.isVisible(h.default.parentNode(t))&&(this.Mz=!1)}},this.xz=t=>{this.options.Dz&&this.jz(t)},this.window=t,this.GE=i,this.options=r.Li(n,{Dz:!0,Sz:""}),this.DV=s,this.Rz=0,this.Mz=!0,this.ni=e,this.AV=r,e.on("pageSnapshot:report",this.Fx)}}class w{constructor(t,i,s,e,r,n){this.Az=t=>{let i,s=!1,h=0;for(;!s&&h<this.Pz.length;){const e=document.querySelectorAll(this.Pz[h]);for(i=0;!s&&i<e.length;)t===e[i]&&(s=!0),i++;h++}return s},this.Lz=t=>{for(;t;){if(this.Az(t))return h.default.isVisible(t)?t:null;t=h.default.parentNode(t)||t.host}return null},this.Oz=t=>{const i=t.querySelectorAll("input, select, button, textarea");for(let t=0;t<i.length;t++)switch(i[t].type){case"radio":i[t].checked&&(i[t].gbPrepop=!0);break;case"select":case"select-one":i[t].selectedIndex>-1&&(i[t].gbPrepop=!0);break;default:i[t].value&&(i[t].gbPrepop=!0)}t.gbPrepopCheck=!0},this.Fz=t=>{if("INPUT"===t.element.tagName||"TEXTAREA"===t.element.tagName){const i=t.element;i.Nz&&!this.Bz[this.Tc.ps(i)]&&h.default.zC(t.hg)&&(this.Bz[this.Tc.ps(i)]=!0,this.ez({element:i,dataToEncode:{type:"inputCharsExceeded",MV:t.id},relatedEvent:t},"formStruggle - checkLimit"));const s=parseInt(i.getAttribute("maxLength"));i.Nz=s<=i.value.length}},this._z=(t,i)=>{if(!t)return!0;if(this.Vz&&(t.gbPrepop||t.getAttribute("value")))return!0;if(this.zz.length){const t=i?i.outerHTML.toLowerCase():"";for(let i=0;i<this.zz.length;i++)if(t.indexOf(this.zz[i].toLowerCase())>=0)return!0}return!1},this.Uz=t=>{const i=this.Lz(t.element),s=t.element,h=s?parseInt(s.getAttribute("tabindex")):void 0,e=this.Wz?parseInt(this.Wz.getAttribute("tabindex")):void 0;if(this.Vz&&i&&!i.gbPrepopCheck&&this.Oz(i),"radio"===s.type){if(s.name===this.Gz)return;this.Gz=s.name}else this.Gz=null;if(this.Wz&&i===this.qz&&!this._z(s,i)&&!this._z(this.Wz))if(h&&e&&h<e)this.ez({element:s,dataToEncode:{type:"formZigzag",reason:"tabindex",MV:t.id},relatedEvent:t},"formStruggle - zigZag1");else{const i=s.getBoundingClientRect(),h=this.Wz&&this.Wz.getBoundingClientRect(),e=i.top-h.top==0;if(i.top-h.top<0)this.ez({element:s,dataToEncode:{type:"formZigzag",reason:"vertical",MV:t.id},relatedEvent:t},"formStruggle - zigZag2");else{const r="rtl"===this.Lr.getComputedStyle(s).getPropertyValue("direction")||"rtl"===this.Lr.getComputedStyle(document.body).getPropertyValue("direction");e&&!r&&i.left-h.left<0?this.ez({element:s,dataToEncode:{type:"formZigzag",reason:"horizontal",MV:t.id},relatedEvent:t},"formStruggle - zigZag3"):e&&r&&i.right-h.right>0&&this.ez({element:s,dataToEncode:{type:"formZigzag",reason:"horizontal-rtl",MV:t.id},relatedEvent:t},"formStruggle - zigZag4")}}this.qz=i,this.Wz=s},this.Yz=t=>{if(h.default.Fr())return!1;const i=this.Lz(t.element);if(!i)return!1;const s=this.Tc.ps(i);if(i.querySelectorAll("input:not([type]), input[type=text], textarea").length<this.te.struggleUncompletedFormMinFields)return!1;this.Xz[s]||(this.Xz[s]={selector:this.zL.Kp(i),cssSelector:this.GL.Kp(i),NV:t.id,relatedEvent:t})},this.Kz=t=>{const i=this.Lz(t.element);if(!i)return;const s=this.Tc.ps(i);i&&this.Xz[s]&&delete this.Xz[s]},this.Zz=()=>{for(const t in this.Xz)this.Xz.hasOwnProperty(t)&&this.ez({Dv:this.Xz[t].selector,cssSelector:this.Xz[t].cssSelector,dataToEncode:{type:"uncompletedForm",MV:this.Xz[t].NV},relatedEvent:this.Xz[t].relatedEvent},"formStruggle - uncompletedForm")},this.$z=t=>{const i=t.extraInfo&&Math.floor(t.extraInfo.focusTime||0);i>this.Jz&&this.ez({element:this.Wz,dataToEncode:{type:"longFocusTime",duration:i,MV:t.id},relatedEvent:this.RI},"formStruggle - longFocus"),this.RI=t},this.Qz=t=>{const i=this.Lz(t.element);if(!i)return;const s=this.Tc.ps(i);this.tH[s]?(this.tH[s].count++,this.tH[s].iH=t.id,this.tH[s].relatedEvent=t):this.tH[s]={count:1,sH:t.id,relatedEvent:t},this.tH[s].count>1&&this.ez({element:i,dataToEncode:{type:"formResubmitted",count:this.tH[s].count,startEventRelatedId:this.tH[s].sH,endEventRelatedId:this.tH[s].iH},relatedEvent:this.tH[s].relatedEvent},"formStruggle - resubmitted")},this.hH=t=>{this.Kz(t),this.Qz(t)},this.eH=t=>{this.Fz(t)},this.rH=t=>{this.Yz(t),this.Uz(t),this.$z(t)},this.nH=()=>{this.Zz()},this.Lr=t,this.Tc=i,this.ez=s,this.zL=e,this.GL=r,this.te=n,this.tH={},this.Xz={},this.Wz=null,this.qz=null,this.Gz=null,this.Bz={},this.Jz=n.oH||3e4,this.RI=void 0,this.Pz=n.formStruggleZigzagFormSelectors||["form"],this.zz=n.formStruggleZigzagIgnoreFormsWithText||[],this.Vz=n.formStruggleZigzagIgnorePrepopulated}}class b{constructor(t,i,s,e,r,n,o,a,c){this.aH=(t,i)=>{t.dataToEncode?this.cH?this.ni.emit("reportStruggle",t):setTimeout((()=>{this.ni.emit("reportStruggle",t)}),0):this.ni.emit("clsDebug","reportStruggle missing dataToEncode. Came from: "+i)},this.lH=()=>{this.dH.mz.call(this.dH)},this.gz=()=>{this.dH.gz()},this.uH=t=>{this.fH.hH.call(this.fH,t)},this.mH=t=>{this.fH.eH.call(this.fH,t)},this.gH=t=>{this.fH.rH.call(this.fH,t)},this.vH=()=>{this.cH=!0,this.fH.nH.call(this.fH)},this.pH=t=>{this.wH.SV.call(this.wH,t)},this.bH=t=>{this.yH.wz.call(this.yH,t)},this.initialize=()=>{this.ni.once("domInit:loaded",this.lH),this.ni.on("event:click",this.pH),this.ni.on("rightclick",this.pH),this.ni.once("sessionCookieSet",this.gz),this.ni.once("plugin:sessionCookieSet",this.gz),this.config.struggleCaptureAjaxErrors&&(this.yH=new v(this.aH,this.config.ajaxStruggleIgnoreCancel,this.config.ajaxStruggleExcludedUrls),this.ni.on("ajax:end",this.bH)),this.config.collectFormStruggles&&(this.fH=new w(this.window,this.LV,this.aH,this.tg,this.eg,{oH:this.config.struggleMaxLongFocusTime,struggleUncompletedFormMinFields:this.config.struggleUncompletedFormMinFields,formStruggleZigzagIgnoreFormsWithText:this.config.formStruggleZigzagIgnoreFormsWithText,formStruggleZigzagIgnorePrepopulated:this.config.formStruggleZigzagIgnorePrepopulated,formStruggleZigzagFormSelectors:this.config.formStruggleZigzagFormSelectors}),this.ni.on("event:submit",this.uH),this.ni.on("event:keyup",this.mH),this.ni.on("event:elementChange",this.gH),this.ni.on("event:unload",this.vH))},this.TH=t!==t.top,this.config=c,this.window=t,this.LV=s,this.ni=i,this.GE=a,this.tg=r,this.eg=n,this.fH={},this.wH=new m(this.LV,this.ni,this.aH,this.config,this.window),this.dH=new g(this.window,this.aH,this.GE.ym),this.yH=void 0,this.EH=new p(this.window,this.GE,this.aH,this.ni,h.default,{Dz:!this.TH&&this.config.struggleCaptureBlankPage,Sz:c.struggleCaptureBlankPageTargetsSelector}),e.v_(this.EH.xz),this.cH=!1}}class y{constructor(t,i,e,r,n,o,a,c){this.CH=t=>{this.Qk[t.type]&&setTimeout((()=>{this.kH(this.Ch,!1)}),0)},this.IH=()=>!(void 0!==this.SH&&this.SH>-1&&(++this.MH,this.DH&&clearTimeout(this.DH),this.DH=setTimeout((()=>{this.MH=0}),500),this.MH>this.SH)),this.jH=(t,i)=>{this.pk.badRules.push({rule:t,msg:i})},this.xH=t=>{for(var i=0;i<this.RH.length;i++)if(!t[this.RH[i]])return void this.jH(t,"missing mandatory property: "+this.RH[i]);if(this.AH[t.accessorMethod])if(this.iz.hE(t.selector)){var s,e=t.pageUrl;t.pageHash&&(e+=("#"===t.pageHash.charAt(0)?"":"#")+t.pageHash);try{s=new RegExp("^"+e.split("*").join(".*")+"$")}catch(i){return d.default.error("Exception occurred during parsing regular expression. Error: "+i.message,i),void this.jH(t,"Exception occurred during parsing regular expression: "+i.message)}if(s.test(h.default.Jr(this.Lr.location.href)))return t.selector=t.selector.replace(/\s*>\s*/g,">"),new this.PH(t,this.iz,this.AH,s)}else this.jH(t,"invalid selector");else this.jH(t,"invalid accessorMethod")},this.LH=t=>{for(var i,s=0;s<t.length;s++)(i=this.xH(t[s]))&&this.OH.push(i);this.pk.configured=t.length},this.FH=t=>{var i;return()=>(i||(i=this.zL.Kp(t,!1).selector),i)},this.kH=(t,i)=>{try{for(var e,r,n=h.default.Jr(this.Lr.location.href),o={},a=0;a<this.OH.length;a++)if(e=this.OH[a].evaluate(t,n,i,o,this.FH(t)),r=this.OH[a].NH(),e&&e.Cb&&this.BH[r]!==e.Cb){if(e.FP())this.pk.masked++;else{var c=this.OH[a]._H()||this.te.clientAttributeMaxLength;this.Ge.emit("clientAttribute",{name:r,Cb:e.Cb.substring(0,c)}),this.pk.reportsByRule[r]=(this.pk.reportsByRule[r]||0)+1,this.pk.reported++,this.OH[a].VH.sessionTerminator&&s.g[this.zH].invalidateSession()}this.BH[r]=e.Cb}}catch(t){d.default.error("Exception occurred during rule evaluation. Error: "+t.message,t)}},this.UH=t=>{if(!this.te.ClientAttributesOnUserInteraction)if(this.HH)if(this.IH()){let i="characterData"===t.type;const s=!i&&"attributes"===t.type,e=i?h.default.parentNode(t.target):t.target;i||"childList"!==t.type||(i=1===t.addedNodes.length&&t.addedNodes[0].nodeType===window.Node.TEXT_NODE),e&&this.kH(e,i||s)}else this.WH();else this.WH()},this.WH=()=>{!this.te.ClientAttributesOnUserInteraction&&void 0!==this.GH&&this.GH>-1&&(this.qH&&clearTimeout(this.qH),this.HH=!1,this.qH=setTimeout((()=>{this.HH=!0,this.kH(this.Ch,!1)}),this.GH))},this.YH=()=>{this.OH=[],!this.te.ClientAttributesOnUserInteraction&&this.XH&&(this.Ge.off("domMutation",this.UH),this.XH=!1)},this.KH=(t,i)=>{var s,h;for(s=0;s<i.length;++s){var e=!1;for(h=0;h<t.length;++h)if(t[h].name===i[s].name){e=!0;break}e||t.push(i[s])}},this.ZH=t=>{this.YH(),this.BH={},this.pk.configurationLastUpdatedAt=h.default.Vn(),this.KH(this.$H,t),h.default.assign(this.pk.rulesList,this.$H),this.LH(this.$H),this.te.ClientAttributesOnUserInteraction||this.XH||!this.OH.length||(this.Ge.on("domMutation",this.UH),this.XH=!0),this.JH&&this.kH(this.Ch,!1)},this.getStats=()=>this.pk,this.evaluateAttributes=()=>{this.kH(this.Ch,!1)},this.Lr=t,this.Ch=this.Lr.document,this.Ge=i,this.PH=r,this.iz=n,this.zL=o,this.AH=a,this.te=c,this.BH={},this.zH=e,this.OH=[],this.$H=[],this.RH=["name","pageUrl","selector","accessorMethod","accessor"],this.JH=!1,this.pk={masked:0,reported:0,configured:0,configurationLastUpdatedAt:0,badRules:[],reportsByRule:{},rulesList:[]},this.Qk=h.default.ve("mousedown","scroll","touchstart","touchend","keydown","drag","dragstart","dragend","navigation","unload","beforeunload"),this.XH=!1,this.GH=c.clientAttributeFuseWaitTime,this.HH=!0,this.qH=0,this.SH=c.clientAttributeMaxMutations,this.MH=0,this.DH=0,i.once("domInit:loaded",(()=>{this.kH(this.Ch,!1),this.JH=!0})),this.te.ClientAttributesOnUserInteraction?i.on("saveEvent",this.CH):i.on("segmentChanged",this.WH),this.QH=this.xH}}class T{constructor(t,i,s,h){this.iz=i,this.AH=s,this.VH=t,this.tW=h,this.iW=-1!==t.selector.indexOf(">")}sW(t){return this.tW.test(t)}NH(){return this.VH.name}_H(){return this.VH.maxLength}evaluate(t,i,s,e,r){if(this.sW(i)){var n=e[this.VH.selector];if(n||(s?this.iz.matches(t,this.VH.selector)&&(n=t):n=this.iz.querySelector(t,this.VH.selector)),!n&&this.iW){var o=r();if(h.default.startsWith(this.VH.selector,o)){var a=this.VH.selector.substring(o.length+1);if(a)try{s?this.iz.matches(t,a)&&(n=t):n=this.iz.querySelector(t,a)}catch(t){}}}if(n)return e[this.VH.selector]=n,this.AH[this.VH.accessorMethod](n,this.VH.accessor)}}}var E=s("./src/js/enums/domMaskerTypes.js"),C=s("./src/js/censor/domCensorDirection.js");class k{constructor(t,i,s,e){this.hW=t=>{for(;t;){if(t.nodeType===window.Node.ELEMENT_NODE&&t.hasAttribute(this.Dw))return!0;t=h.default.parentNode(t)}return!1},this.eW=t=>!("value"!==t.accessor||!this.UP.Ow(t.rW,C.default.qe,E.default.E_))||(!!this.UP.Ow(t.rW,C.default.Xe,E.default.C_)||!(!this.nW[t.accessor]||!this.oW[t.rW.tagName.toLowerCase()]||t.rW.hasAttribute&&t.rW.hasAttribute(this.Dw))),this.aW=t=>{if(this.UP.Ow(t.rW,C.default.Xe,E.default.C_))return!0;if(this.cW&&"value"===t.accessor){if(this.te.valueMaskIgnoreAttribute&&t.rW&&t.rW.nodeType===window.Node.ELEMENT_NODE&&t.rW.hasAttribute(this.te.valueMaskIgnoreAttribute))return!1;if(this.cW.Ue(t.rW))return!0}return("innerText"!==t.accessor&&"textContent"!==t.accessor&&"innerHTML"!==t.accessor&&"outerHTML"!==t.accessor||!this.Dw||!this.hW(t.rW))&&(!("innerText"!==t.accessor&&"textContent"!==t.accessor||!(this.UP.Ow(t.rW,C.default.Je,E.default.b_)||this.UP.Ow(t.rW,C.default.Xe,E.default.b_)||this.lW.Qe(t.rW,C.default.Je)||this.lW.Qe(t.rW,C.default.Xe)))||(!("innerHTML"!==t.accessor||!(this.UP.Ow(t.rW,C.default.Je,E.default.b_,E.default.w_)||this.UP.Ow(t.rW,C.default.Xe,E.default.b_,E.default.w_)||this.lW.Qe(t.rW,C.default.Je)||this.lW.Qe(t.rW,C.default.Xe)))||!("outerHTML"!==t.accessor||!(this.UP.Ow(t.rW,C.default.Je,E.default.b_,E.default.w_)||this.UP.Ow(t.rW,C.default.Xe,E.default.b_,E.default.w_)||this.lW.Qe(t.rW,C.default.Je)||this.lW.Qe(t.rW,C.default.Xe)))))},this.dW=t=>!!this.UP.Ow(t.rW,C.default.Xe,E.default.C_),this.UP=t,this.lW=i,this.cW=s,this.te=e,this.nW=h.default.ve.apply(null,this.te.domMaskedAttributes),this.oW=h.default.ve.apply(null,this.te.domMaskAttributesByTag),this.Dw=this.te.domMaskIgnoreAttribute,this.attribute=(t,i)=>{var s={accessor:i,rW:t,Cb:t.getAttribute&&t.getAttribute(i)};return s.FP=()=>this.eW(s),s},this.property=(t,i)=>{var s={accessor:i,rW:t,Cb:""+(t[i]||"")};return s.FP=()=>this.aW(s),s},this.constant=(t,i)=>{var s={rW:t,Cb:i};return s.FP=()=>this.dW(s),s}}}class I{constructor(t,i,s,e,n,o,a){this.uW=t=>{t.attributeRules&&(this.fW.ZH(t.attributeRules),this.DO=t.attributeRules),this.mW=h.default.Vn()},this.gW=t=>{this.mW||(this.uW(t),this.vW=!0)},this.pW=()=>{this.DO&&this.fW.ZH(this.DO)},this.initialize=function(){};var c=s.plugins.domRecordingPlugin&&s.plugins.domRecordingPlugin.nI(),l=s.plugins.domRecordingPlugin&&s.plugins.domRecordingPlugin.wW();c||(c={Ow:function(){return!1}}),l||(l={Qe:function(){return!1}}),this.fW=new y(t,i,a,T,n,o,new k(c,l,e,{domMaskedAttributes:r.default.domMaskedAttributes,domMaskAttributesByTag:r.default.domMaskAttributesByTag,domMaskIgnoreAttribute:r.default.domMaskIgnoreAttribute,valueMaskIgnoreAttribute:r.default.valueMaskIgnoreAttribute}),{clientAttributeMaxLength:r.default.clientAttributeMaxLength,clientAttributeFuseWaitTime:r.default.clientAttributeFuseWaitTime,clientAttributeMaxMutations:r.default.clientAttributeMaxMutations,ClientAttributesOnUserInteraction:r.default.ClientAttributesOnUserInteraction}),this.DO=void 0,this.stats=()=>this.fW.getStats(),this.evaluateAttributes=()=>{this.fW.evaluateAttributes()},this.vW=!1,this.mW=void 0,i.once("plugin:newRemoteConfig",this.gW),i.on("newRemoteConfig",this.uW),i.on("segmentChanged",this.pW)}}var S=s("./src/js/resolving/SelectorResolver.js");const M={SHOW_ALL:0,bW:1};class D{constructor(t,i,s){this.yW=t=>{for(;t&&!t[this.TW];)t[this.TW]=!0,t=h.default.parentNode(t)?h.default.parentNode(t):t.host},this.EW=t=>{const i=this,s=this.Lr.Element.prototype[t];s&&(this.Lr.Element.prototype[t]=function(){const t=s.apply(this,arguments);try{h.default.jj(this)?(i.Ge.emit("shadow:rootAttached",t),i.Ge.emit("shadow:rootDetected",t)):i.Ge.emit("shadow:rootDetected",t),this[i.kW]=!0,i.yW(this),i.pk.hookInvocationsCount++,i.pk.totalShadowRootCount++}catch(t){}return t})},this.IW=t=>{let i;for(i=0;i<t.length;i++)this.yW(t[i]),this.Ge.emit("shadow:rootDetected",t[i]),this.pk.initialShadowRootCount++,this.pk.totalShadowRootCount++},this.SW=t=>{if("childList"===t.type){let i;for(i=0;i<t.addedNodes.length;i++)t.addedNodes[i][this.TW]&&this.DW.MW(t.addedNodes[i],(t=>{t.shadowRoot&&!t[this.kW]&&this.Ge.emit("shadow:rootDetected",t.shadowRoot)}),M.bW);for(i=0;i<t.removedNodes.length;i++)t.removedNodes[i][this.TW]&&this.DW.MW(t.removedNodes[i],(t=>{t.shadowRoot&&(this.Ge.emit("shadow:rootRemoved",t.shadowRoot),this.pk.totalShadowRootCount--,this.pk.totalShadowRootRemoved++)}),M.bW)}},this.jW=t=>{this.IW(t||[]),["attachShadow","createShadowRoot"].forEach(this.EW)},this.stats=()=>this.pk,this.Lr=t,this.Ge=i,this.DW=s,this.TW="_gbHasShadow",this.kW="_gbHasObserver",this.pk={initialShadowRootCount:0,hookInvocationsCount:0,totalShadowRootCount:0,totalShadowRootRemoved:0},this.Ge.on("domMutation",this.SW)}}class j{constructor(t,i,s){this.element=t,this.id=i,this.addedNodes={},this.xW=[],this.Tc=s}RW(t){this.addedNodes[t]=!0}}class x{constructor(t,i,s){this.AW=(t,i,s)=>{const h=this.PW(t);if(!h)return;const e=(this.LW[i]||{})[h],r=t[h];(t.OW||(this.FW?r!==this.defaultValue(t,h):e!==r))&&(s[i]||(s[i]=new j(t,i,this.Tc),s[i].properties=[]),s[i].properties.push(h));const n={};n[h]=r,this.LW[i]=n},this.NW=t=>!(!t.id||!this.BW[t.id])||"hidden"===t.getAttribute("type"),this.start=()=>{},this.track=()=>{let t,i;const s={},h={},e=this.NI.querySelectorAll("input,select,textarea");for(t=0;t<e.length;t++)this.NW(e[t])||(i=this.Tc.ps(e[t]),this.AW(e[t],i,s),h[i]=!0);let r;for(r in this.LW)h[r]||delete this.LW[r];return this.FW=!1,s},this._W=()=>this.NI,this.PW=t=>{if("SELECT"===t.tagName)return"selectedIndex";if("TEXTAREA"===t.tagName)return"value";if("INPUT"===t.tagName){const i=t.getAttribute("type")&&t.getAttribute("type").toLowerCase();return!i||"checkbox"!==i&&"radio"!==i?"value":"checked"}},this.defaultValue=(t,i)=>{if("checked"===i)return t.hasAttribute("checked");if("selectedIndex"===i){const i=t.querySelector("option[selected]");return i?i.index:null!==t.querySelector("option")?0:-1}const s=t.getAttribute(i);return s||"value"!==i?s:""},this.VW=()=>Object.keys(this.LW).length,this.NI=t,this.Tc=i,this.BW=h.default.ve.apply(null,s||[]),this.FW=!0,this.LW={}}}s("./node_modules/core-js/modules/es.error.cause.js");class R{constructor(t,i,s,e,r,n){this.zW=()=>{this.UW&&(this.UW=!1,this.start())},this.HW=()=>{if(!this.WW){if(this.GW=this.qW(this.GW),!this.GW)throw new Error("cannot start DomObserver: native interface not supported by the browser.");this.te.handleAttributeMutationsAsChunks>=0?this.WW=new this.GW(this.YW):this.WW=new this.GW((t=>{this.te.domIgnoreLargeMutationsChunks>0&&t&&t.length>this.te.domIgnoreLargeMutationsChunks||t.forEach(this.XW)}))}},this.KW=()=>this.Lr.document&&this.Lr.document.body,this.ZW=t=>!!t.toString&&-1!==t.toString().toLowerCase().indexOf("[native code]"),this.qW=t=>{if(!this.KW())return t;if(this.te.reinstateNativeMutationObserver&&"undefined"!=typeof __zone_symbol__MutationObserver)return __zone_symbol__MutationObserver;const i=t.toString().toLowerCase();return this.te.reinstateNativeMutationObserver&&i.indexOf("[native code]")<0?h.default.qC("MutationObserver"):t},this.$W=t=>{var i;for(i=0;i<t.length;i++)if(this.JW(t[i]))return!1;return!0},this.QW=t=>{var i,s=[];for(i=0;i<t.length;i++)h.default.jj(t[i])&&s.push(t[i]);return s.length===t.length?void 0:s},this.YW=t=>{if(!window.Node)return;let i;this.tG&&window.clearTimeout(this.iG);for(let s=0;s<t.length;s++){if(i=t[s],this.te.domIgnoreSameValueAttributesModification&&"attributes"===i.type&&i.target.getAttribute(i.attributeName)===i.oldValue)return;if("attributes"===i.type){if(this.sG[i.attributeName])continue;i.target.hG=i.target.hG||this.eG++;const t=i.target.hG+"_"+i.attributeName,s=this.rG[t];s&&(s.aU=!0),this.rG[t]=i,this.nG.push(i),this.tG=!0}else this.Yx(),this.UH(i)}this.tG&&(this.iG=setTimeout(this.Yx,this.te.handleAttributeMutationsAsChunks))},this.XW=t=>{window.Node&&(this.te.domIgnoreSameValueAttributesModification&&"attributes"===t.type&&t.target.getAttribute(t.attributeName)===t.oldValue||"attributes"===t.type&&this.sG[t.attributeName]||this.UH(t))},this.UH=t=>{let i=t.target;if(this.JW(i)&&(!this.te.ignoreMutationsOnNotAttachedElements||h.default.jj(i))){if("characterData"===t.type){try{if((null===t.oldValue||""===t.oldValue||"string"==typeof t.oldValue&&""===t.oldValue.trim())&&""===t.target.nodeValue.trim())return}catch(t){}i instanceof CharacterData&&(i=h.default.parentNode(i)||i)}if(this.te.domOmitInvisibleElements&&i.nodeType===this.Lr.Node.ELEMENT_NODE&&!i.oG&&h.default.isVisible(i)&&(t={type:"childList",target:h.default.parentNode(t.target),aG:h.default.parentNode(t.target),addedNodes:[i],removedNodes:[]},i.oG=!0,i=h.default.parentNode(i)),"childList"===t.type){if(this.$W(t.addedNodes)&&this.$W(t.removedNodes))return;if(this.te.addBaseDomainToRelativeUrls)for(var s=0;s<t.target.children.length;s++){var e=t.target.children[s].attributes.href;e&&e.value&&0===e.value.indexOf("/")&&1!==e.value.indexOf("//")&&(e.value=h.default.yC(e.value))}var r=this.QW(t.addedNodes);if(r){if(!r.length&&!t.removedNodes.length)return;t={type:t.type,target:t.target,aG:t.aG,addedNodes:r,removedNodes:t.removedNodes}}}if(t.aG=i,!this.lG.cG(t)){if(this.te.domIgnoreSameValueAttributesModification&&"attributes"===t.type&&"class"===t.attributeName&&t.target.classList&&t.target.classList.value===t.oldValue)return;if(this.te.delayDomMutationEvent>=0)setTimeout((()=>{this.Ge.emit("domMutation",t)}),this.te.delayDomMutationEvent);else if(t.addedNodes.length>0&&h.default.HC(this.te.domDelayAddedNodesByClass,t.addedNodes)){const i=this;setTimeout((function(){i.Ge.emit("domMutation",t)}),0)}else this.Ge.emit("domMutation",t)}}},this.Yx=()=>{if(!this.tG)return;const t=this.nG;this.rG={},this.nG=[];for(let i=0;i<t.length;i++)t[i].aU||this.UH(t[i]);this.tG=!1},this.dG=()=>{this.uG=!1,this.WW&&this.WW.disconnect()},this.getName=()=>"MutationObserver based",this.start=()=>{this.UW||this.uG||(this.HW(),this.WW.observe(this.NI,this.fG),this.uG=!0)},this.stop=()=>{this.dG()},this.Lr=t,this.Ge=i,this.lG=s,this.NI=e,this.JW=r,this.te=n,this.WW,this.uG=!1,this.UW=!1,this.sG=h.default.ve.apply(null,this.te.domIgnoreAttributes||[]),this.eG=1,this.rG={},this.nG=[],this.tG=!1,this.iG=void 0,this.GW=this.Lr.MutationObserver||this.Lr.WebKitMutationObserver||null,this.te.initialObserverFirst&&this.HW(),this.fG={attributes:!this.te.characterDataOnly,childList:!this.te.characterDataOnly,characterData:!0,subtree:!this.te.characterDataOnly,attributeOldValue:!this.te.characterDataOnly&&this.te.domIgnoreSameValueAttributesModification,characterDataOldValue:!0},!this.te.characterDataOnly&&this.te.domFilterAttributes&&this.te.domFilterAttributes.length&&(this.fG.attributeFilter=this.te.domFilterAttributes),this.te.reinstateNativeMutationObserver&&this.Ge.once("init:domready",(()=>{this.GW=this.qW(this.GW)}))}}class A{constructor(t,i,s,e,r){this.mG=t=>{h.default.Nr(t,"DOMCharacterDataModified",this.XW,!1),this.te.characterDataOnly||(h.default.Nr(t,"DOMNodeInserted",this.XW,!1),h.default.Nr(t,"DOMNodeRemoved",this.XW,!1),h.default.Nr(t,"DOMAttrModified",this.XW,!1))},this.zW=()=>{this.UW&&(this.UW=!1,this.start())},this.XW=t=>{let i,s,e;const r=[],n=[],o=t.type;if("DOMNodeInserted"===t.type){if(i="childList",s=h.default.parentNode(t.target),s&&(r.push(t.target),!this.JW(t.target)))return}else if("DOMNodeRemoved"===t.type){if(i="childList",s=h.default.parentNode(t.target),s&&(n.push(t.target),!this.JW(t.target)))return}else if("DOMCharacterDataModified"===t.type)i="characterData",s=h.default.parentNode(t.target);else{if("DOMAttrModified"!==t.type)return;i="attributes",s=t.target,e=t.attrName}if(!this.JW(s))return;if(!s)return;const a={gG:o,type:i,target:t.target,aG:s,attributeName:e,addedNodes:r,removedNodes:n};this.lG.cG(a)||this.Ge.emit("domMutation",a)},this.dG=()=>{this.uG&&(this.uG=!1,this.NI.removeEventListener("DOMCharacterDataModified",this.XW,!1),this.te.characterDataOnly||(this.NI.removeEventListener("DOMNodeRemoved",this.XW,!1),this.NI.removeEventListener("DOMAttrModified",this.XW,!1),this.NI.removeEventListener("DOMNodeInserted",this.XW,!1)))},this.vG=()=>{this.UW=!0,this.dG()},this.getName=()=>"DOM events based",this.supported=()=>"undefined"!=typeof MutationEvent,this.start=()=>{this.UW||this.uG||(this.mG(this.NI),this.uG=!0)},this.stop=()=>{this.dG()},this.isActive=()=>this.uG,this.Ge=t,this.lG=i,this.NI=s,this.JW=e,this.uG=!1,this.UW=!1,this.Ge.on("quotaBreach",this.vG),this.Ge.on("recordingStarted",this.zW),this.Ge.on("stopDomRecording",this.stop),this.te=r}}class P{constructor(t,i,s){this.pG=t=>{for(;t;)this.wG[this.Tc.ps(t)]=!0,t=h.default.parentNode(t)},this.bG=(t,i)=>{for(var s,e,r=[t];r.length;)if(i(t=r.shift()),e=this.Tc.ps(t),h.default.children(t)&&this.wG[e])for(delete this.wG[e],s=0;s<h.default.children(t).length;s++)r.push(h.default.children(t)[s])},this.yG=(t,i,s)=>{function h(t){var i;for(i=0;i<t.length;i++)if("STYLE"===t[i].tagName)return!0;return!1}return!t.ownerDocument.head.contains(t)&&!h(i||[])&&!h(s||[])},this.TG=t=>{var i=this.Tc.ps(t);if(this.Oh[i]){delete this.Oh[i];var s,e=[],r=h.default.childNodes(t)||[];for(s=0;s<r.length;s++)r[s].EG&&(delete r[s].EG,e.push(r[s]));this.Ge.emit("domMutation",{gG:"childList",type:"childList",target:t,aG:t,addedNodes:e,removedNodes:[]})}},this.ji=t=>{var i=this.Tc.ps(t.aG),s=h.default.isVisible(t.aG);if("childList"===t.type&&this.yG(t.aG,t.addedNodes,t.removedNodes)&&!s){var e;for(e=0;e<t.addedNodes.length;e++)t.addedNodes[e].EG=!0;return this.Oh[i]=!0,this.pk.CG+=t.addedNodes.length,this.pk.kG++,this.pG(t.aG),!0}return this.wG[i]&&s&&this.bG(t.aG,this.TG),!1},this.Ge=i,this.Tc=s,this.Oh={},this.wG={},this.pk={kG:0,CG:0},this.IG=h.default.ve("DIV","UL","OL","LI","NAV","SPAN","STRONG","LABEL","A"),this.cG=this.ji}}class L{constructor(t,i,s,e,r,n){this.sc=t=>this.JW(t)&&!h.default.rC(t,this.te.domIgnoreChangesByTag)&&!h.default.Js(t,this.te.domIgnoreChangesByClass)&&this.te.domIgnoreChangesById.indexOf(h.default.Zs(t))<0,this.Lr=t,this.JW=e,this.te=h.default.Li(n,{domIgnoreChangesByTag:[],domIgnoreChangesByClass:[],domIgnoreChangesById:[]});let o,a=this.te.SG||this.te.MG&&this.DG()?new P(t,i,r):{cG:function(){return!1}};this.te.domForceMutationEventsHandler?(o=new A(i,a,s,this.sc,{characterDataOnly:!!this.te.characterDataOnly}),o.supported()||(o=void 0)):o=new R(t,i,a,s,this.sc,{domTamperingDetectionEnabled:this.te.domTamperingDetectionEnabled,delayDomMutationEvent:this.te.delayDomMutationEvent,domDelayAddedNodesByClass:this.te.domDelayAddedNodesByClass,domFilterAttributes:this.te.domFilterAttributes,domIgnoreAttributes:this.te.domIgnoreAttributes,domOmitInvisibleElements:this.te.domOmitInvisibleElements,handleAttributeMutationsAsChunks:this.te.handleAttributeMutationsAsChunks,ignoreMutationsOnNotAttachedElements:this.te.ignoreMutationsOnNotAttachedElements,characterDataOnly:!!this.te.characterDataOnly,reinstateNativeMutationObserver:this.te.reinstateNativeMutationObserver,initialObserverFirst:this.te.initialObserverFirst,addBaseDomainToRelativeUrls:this.te.addBaseDomainToRelativeUrls,domIgnoreSameValueAttributesModification:this.te.domIgnoreSameValueAttributesModification,domIgnoreLargeMutationsChunks:this.te.domIgnoreLargeMutationsChunks}),this.jG=o}}class O{constructor(t,i){this.apply=(t,i)=>{if(!this.NW(t.element)&&t.properties&&t.properties.length>0){let s,e,r=this.xG[t.element.tagName];if(r){let n=h.default.dC(i,r,t.id);for(s=0;s<t.properties.length;s++)e=this.AG(t.element,t.properties[s]),n[e]=this.PG(t.element,e);return n}}},this.PG=(t,i)=>this.cW&&"value"===i?this.cW.Be(t):t[i],this.NW=t=>this.LG[h.default.Zs(t)],this.AG=(t,i)=>"SELECT"===t.tagName?"selectedIndex":"INPUT"===t.tagName&&this.OG[t.getAttribute("type")||""]?"checked":i,this.cW=t,this.te=i||{},this.OG=h.default.ve("checkbox","radio"),this.LG=h.default.ve.apply(null,this.te.FG||[]),this.xG={INPUT:"inputs",SELECT:"selects",TEXTAREA:"textareas"}}}class F{constructor(t,i,s,h,e,r,n,o){this.NG=t=>{const i=new L(this.BG,this.Ge,t,this.VG._G,this.zG,{semiDomEnabled:this.te.semiDomEnabled,domForceIEMutationEventsHandler:this.te.domForceIEMutationEventsHandler,domForceMutationEventsHandler:this.te.domForceMutationEventsHandler,domTamperingDetectionEnabled:this.te.domTamperingDetectionEnabled,domDelayAddedNodesByClass:this.te.domDelayAddedNodesByClass,domFilterAttributes:this.te.domFilterAttributes,domIgnoreAttributes:this.te.domIgnoreAttributes,domIgnoreChangesById:this.te.domIgnoreChangesById,domIgnoreChangesByClass:this.te.domIgnoreChangesByClass,domIgnoreChangesByTag:this.te.domIgnoreChangesByTag,handleAttributeMutationsAsChunks:this.te.handleAttributeMutationsAsChunks,ignoreMutationsOnNotAttachedElements:this.te.ignoreMutationsOnNotAttachedElements,reinstateNativeMutationObserver:this.te.reinstateNativeMutationObserver,initialObserverFirst:this.te.initialObserverFirst,addBaseDomainToRelativeUrls:this.te.addBaseDomainToRelativeUrls,domIgnoreSameValueAttributesModification:this.te.domIgnoreSameValueAttributesModification,domIgnoreLargeMutationsChunks:this.te.domIgnoreLargeMutationsChunks}).jG;this.UG[this.Tc.ps(t)]=i,this.VG.WG().HG({name:"property",GG:new x(t,this.Tc,this.zL,this.te.domIgnoredFormElements),qG:[new O(this.cW,{FG:this.te.domIgnoredFormElements}).apply]}),i.start()},this.YG=t=>{const i=this.Tc.ps(t);this.UG[i]&&(this.UG[i].stop(),delete this.UG[i]),this.VG.WG().XG(t)},this.KG=()=>{this.ZG.jW(this.VG.Ez("ShadowRoot"))},this.Nh=()=>{for(let t in this.UG)this.UG.hasOwnProperty(t)&&this.UG[t]&&(this.UG[t].stop(),this.UG[t]=void 0);this.UG=void 0},this.initialize=()=>{},this.stats=()=>this.ZG.stats(),this.BG=t,this.pn=i,this.Ge=s,this.cW=h,this.zG=e,this.VG=r,this.zL=n,this.te=o,this.UG={},this.Tc=e,this.ZG=new D(this.BG,this.Ge,this.VG.$G()),this.Ge.on("shadow:rootDetected",this.NG),this.Ge.on("shadow:rootRemoved",this.YG),this.Ge.on("domTrackingStarted",this.KG),this.Ge.on("event:unload",this.Nh)}}class N{constructor(t,i){this.JG=()=>{this.QG||(this.Lr.outerHeight===this.tq&&window.Math.abs(this.Lr.innerHeight-this.iq)>this.sq?(this.Ge.emit("devToolsVisibilityChanged",{value:!0,size:"oh_"+this.Lr.outerHeight+"_ih_"+this.Lr.innerHeight}),this.QG=!0):this.Lr.outerWidth===this.hq&&window.Math.abs(this.Lr.innerWidth-this.eq)>this.sq?(this.Ge.emit("devToolsVisibilityChanged",{value:!0,size:"ow_"+this.Lr.outerWidth+"_iw_"+this.Lr.innerWidth}),this.QG=!0):this.Lr.outerHeight!==this.tq?(this.tq=this.Lr.outerHeight,this.iq=this.Lr.innerHeight):(this.hq=this.Lr.outerWidth,this.eq=this.Lr.innerWidth))},this.rq=()=>{this.Ge.on("window:resize",this.JG)},this.Lr=t,this.Ge=i,this.QG=!1,this.sq=150,this.tq=t.outerHeight,this.iq=t.innerHeight,this.hq=t.outerWidth,this.eq=t.innerWidth}}class B{constructor(t,i,s){this.nq=()=>this.Lr.outerHeight!==this.tq?(this.tq=this.Lr.outerHeight,!0):this.Lr.outerWidth!==this.hq&&(this.hq=this.Lr.outerWidth,!0),this.JG=t=>{this.oq||t&&this.nq()||this.Lr.console.log(this.aq)},this.rq=()=>{this.Ge.on("event:unload",(()=>this.JG(!1))),this.Ge.once("init:preloaded",(()=>this.JG(!1))),this.Ge.once("plugin:init:preloaded",(()=>this.JG(!1))),this.Ge.on("window:resize",(()=>this.JG(!0)))},this.Lr=t,this.Ge=i,this.te=s||{cq:""},this.oq=!1,this.aq=t.document.createElement("div"),this.aq.textContent=this.te.cq,this.tq=t.outerHeight,this.hq=t.outerWidth;const h=this;Object.defineProperty(this.aq,"id",{get:function(){h.oq||(h.oq=!0,h.Ge.emit("devToolsVisibilityChanged",{value:!0,size:"oh_"+h.Lr.outerHeight+"_ih_"+h.Lr.innerHeight+"_ow_"+h.Lr.outerWidth+"_iw_"+h.Lr.innerWidth}))}})}}s("./node_modules/core-js/modules/web.self.js"),s("./node_modules/core-js/modules/web.url-search-params.delete.js"),s("./node_modules/core-js/modules/web.url-search-params.has.js"),s("./node_modules/core-js/modules/web.url-search-params.size.js");class _{constructor(t,i,s,h){this.lq=()=>{this.dq=!0;try{this.bx=new this.Lr.Worker(this.uq),this.bx.onmessage=t=>{t.data&&"gbDTDWorkerReady"===t.data?(this.bx.postMessage("gbDTDHello"),setTimeout((()=>{this.bx.terminate(),this.dq&&!this.oq&&(this.oq=!0,URL.revokeObjectURL(this.uq),this.cs.emit("devToolsVisibilityChanged",{value:!0,size:"oh_"+this.Lr.outerHeight+"_ih_"+this.Lr.innerHeight+"_ow_"+this.Lr.outerWidth+"_iw_"+this.Lr.innerWidth}))}),this.fq)):t.data&&"gbDTDHi"===t.data&&(this.dq=!1)}}catch(t){d.default.error("Failed checking Devtools visibility: "+t.message,t),this.cs.emit("clsDebug","Failed checking Devtools visibility")}},this.JG=()=>{this.mq&&(this.oq||setTimeout(this.lq,this.gq))},this.rq=()=>{this.cs.on("event:unload",this.JG),this.cs.once("domInit:preloaded",this.JG),this.cs.on("window:resize",this.JG)},this.Lr=t,this.cs=i,this.gq=s,this.fq=h,this.oq=!1,this.dq=void 0,this.bx=void 0,this.mq=!0;try{this.uq=URL.createObjectURL(new Blob(["(",function(){self.postMessage("gbDTDWorkerReady");
debugger;

self.onmessage=function(t){t.data&&"gbDTDHello"===t.data&&self.postMessage("gbDTDHi")}}.toString(),")()"],{type:"application/javascript"}))}catch(t){this.mq=!1,d.default.error("Failed creating blob for worker: "+t.message,t),this.cs.emit("clsDebug","Failed creating blob for worker during Devtools detection. Detection will not work.")}}}class V{constructor(t,i,s){this.initialize=()=>{this.vq=!0},this.Lr=t,this.Ge=i,this.te=s,this.pq=void 0,this.wq=this.Lr.navigator.userAgent,/firefox/i.test(this.wq)?this.pq=new N(this.Lr,this.Ge):h.default.BE(this.wq)&&h.default.zE(this.wq,89,"chrome/")?this.te.devToolsDebuggerBasedDetection?this.pq=new _(this.Lr,this.Ge,this.te.devToolsDetectionWorkerTimeout,this.te.devToolsDetectionCallbackTimeout||567):this.pq=new N(this.Lr,this.Ge):this.pq=new B(t,i,{cq:this.te.devToolsDetectionMessage}),this.pq.rq()}}class z{constructor(t,i,s,e){this.bq=()=>{this.yq=h.default.Vn()},this.Tq=()=>(this.yq=this.yq||h.default.Vn(),h.default.Vn()-this.yq),this.Eq=t=>t.nodeType===window.Node.TEXT_NODE&&h.default.parentNode(t)&&this.Cq[h.default.parentNode(t).nodeName],this.jc=t=>{if(t.target&&"characterData"===t.type&&!this.Eq(t.target)){var i=t.target.data;this.kq();var s=this.Tq();this.Iq=this.Iq||s>=this.te.Sq,(this.Mq||this.Dq)&&this.Iq&&this.jq<this.xq&&this.Rq[this.Tc.ps(t.target)]!==i&&t.oldValue.replace(/\s/g,"")!==i.replace(/\s/g,"")&&(++this.jq,this.Ge.emit("domTampered",{element:h.default.parentNode(t.target),Iv:i,Tv:t.oldValue})),this.Mq=!0}},this.Aq=()=>{this.Iq=!1,this.yq=h.default.Vn()},this.kq=()=>{var t=document.querySelector("title");document.documentElement.className.match("translated-rtl")||document.documentElement.className.match("translated-ltr")?(this.Pq||this.Aq(),this.Pq=!0):this.Pq&&(this.Pq=!1,this.Aq()),t&&t.getAttribute&&t.getAttribute("_msthash")&&t.getAttribute("_msttexthash")&&t.getAttribute("_msthidden")?(this.Lq||this.Aq(),this.Lq=!0):this.Lq&&(this.Lq=!1,this.Aq())},this.Oq=()=>{var t=f.default.fS(this.Lr.CharacterData.prototype),i=f.default.fS(this.Lr.Text.prototype),s=f.default.fS(this.Lr.Node.prototype);f.default.fS(this.Lr.HTMLElement.prototype);let h=this;var e=function(){h.jq<h.xq&&(h.Rq[h.Tc.ps(this)]=this.data)},r=function(){this&&this.nodeType===window.Node.TEXT_NODE&&h.jq<h.xq&&(h.Rq[h.Tc.ps(this)]=this.data)};t.gS("replaceData",e),t.gS("appendData",e),t.gS("insertData",e),t.gS("deleteData",e),t.jS("data",e),i.gS("splitText",e),s.jS("textContent",r),s.jS("nodeValue",r)},this.Fq=t=>{var i;var s=document.implementation.createHTMLDocument("test");(i=new MutationObserver((function(s){i&&i.disconnect(),"characterData"!==s[0].type&&t()}))).observe(s,{attributes:!1,childList:!0,characterData:!0,subtree:!0,attributeOldValue:!1,characterDataOldValue:!1}),s.body.innerText="text1"},this.initialize=()=>{var t;if(this.te.domTamperingIgnorePages&&this.te.domTamperingIgnorePages.length)for(t=0;t<this.te.domTamperingIgnorePages.length;++t)if(h.default.aC(this.te.domTamperingIgnorePages[t],h.default.Jr(this.Lr.location.href)))return;var i=!(!h.default.BE()&&!h.default.VE()||this.Lr.opr);const s=()=>{this.Oq(),this.Ge.on("domMutation",this.jc)};if(this.Ge.once("domInit:domready",this.bq),i){var e=h.default.WE();if(e&&e<70)return;this.Fq(s)}else s()},this.Lr=t,this.Ge=i,this.Tc=s,this.te=h.default.Li(e,{Sq:2e3,Nq:["TITLE","STYLE","SCRIPT"]}),this.Cq=h.default.ve.apply(null,this.te.Nq),this.Rq={},this.xq=5,this.jq=0,this.Pq=!1,this.Lq=!1,this.Iq=!1,this.yq=void 0,this.Mq=!1,this.Dq=!1,this.Ge.on("devToolsVisibilityChanged",(t=>{this.Dq=t.value}))}}s("./node_modules/core-js/modules/es.iterator.take.js");var U=s("./src/js/mask/DomMasker.js"),H=s("./src/js/mask/DomRegexMasker.js"),W=s("./src/js/censor/encrypt/DomEncryptor.js"),G=s("./src/js/censor/SelectorValidator.js");class q{constructor(t,i,s){this.BG=t,this.Bq=i,this._q=s,this.Or()}Or(){if(!this.BG.WebSocket)return;const t=this.BG.WebSocket,i=function(i,s){const h=s?new t(i,s):new t(i);try{this._q?(this.BG.Vq=this.BG.Vq||[],this.BG.Vq.push(h)):h.addEventListener("message",this.Bq)}catch(t){d.default.error("failed intercepting WebSocket constructor: "+t.message,t)}return h}.bind(this);if(this._q&&this.BG.opener&&this.BG.opener.Vq&&this.BG.opener.Vq.length)for(let t=0;t<this.BG.opener.Vq.length;t++)this.BG.opener.Vq[t].addEventListener("message",this.Bq);i.prototype=t.prototype,i.prototype.constructor=t,i.CONNECTING=0,i.OPEN=1,i.CLOSING=2,i.CLOSED=3,this.BG.WebSocket=i}}var Y=s("./src/js/censor/mask/maskingUtils.js");class X{constructor(t){this.zq=t=>{if(!t||!this.Uq)return t;var i,s,h,e,r,n=t.split(";"),o=[];for(i=0;i<n.length;i++)-1!==(h=(s=n[i]).indexOf("="))?(e=s.substring(0,h).trim(),r=s.substring(h+1),o.push(e+"="+(r&&this.Uq.hasOwnProperty(e)?Y.default.ss(r):r))):o.push(s);return o.join("; ")},this.te=t,this.Uq=this.te&&this.te.Hq?h.default.ve.apply(null,this.te.Hq):null}}X.prototype.Wq=function(t){return this.zq(t)};class K{constructor(t){this.apply=(t,i)=>{if("INPUT"===t.tagName){i.value&&t.setAttribute("value",i.value),i.checked&&t.setAttribute("checked","");const s=this;i.addEventListener("invalid",(function(t){s.cs.emit("html5FormValidation:invalid",t)}))}},this.cs=t}}class Z{constructor(t){this.apply=(t,i)=>{"TEXTAREA"===t.tagName&&i.firstChild&&i.value!==i.firstChild.textContent&&(t.firstChild?t.Gq?i.si?t.firstChild.textContent=Y.default.ss(i.value,void 0,void 0,i.si):t.firstChild.textContent=Y.default.ss(i.value):t.firstChild.textContent=i.value:this.cs.emit("clsDebug","textareaElementValueSetter",void 0,"cannot set firstChild.textContent as firstChild does not exist on clone of "+i.tagName+" element with _gbid "+(i._gbid||"not assigned")),i.addEventListener("invalid",(function(t){this.cs.emit("html5FormValidation:invalid",t)})))},this.cs=t}}class ${constructor(t){this.apply=(t,i)=>{if("SELECT"===t.tagName){const s=i.selectedIndex;let h=t.getElementsByTagName("option");h.length?h[s]&&h[s].setAttribute("selected",""):(h=i.getElementsByTagName("option"),h[s]&&(h[s].qq=!0)),i.addEventListener("invalid",(t=>{this.cs.emit("html5FormValidation:invalid",t)}))}"OPTION"===t.tagName&&i.qq&&t.setAttribute("selected","")},this.cs=t}}s("./node_modules/core-js/modules/es.array.includes.js");class J{constructor(t,i,s){this.apply=t=>{if("STYLE"!==t.tagName||!t.ownerDocument)return;const i=t.ownerDocument.createElement("style");if(this.Yq&&h.default.FC(t,i),t.media&&i.setAttribute("media",t.media),t.sheet){let s;const h=t.sheet.cssRules;let e="";if(h&&h.length)for(s=0;s<h.length;s++)"string"!=typeof h[s].cssText||this.Xq&&h[s]instanceof CSSFontFaceRule||(this.Kq&&h[s].cssText.includes(":defined")?e+=h[s].cssText.replaceAll(":defined",""):e+=h[s].cssText);i.textContent=e}return i},this.Yq=t,this.Xq=i,this.Kq=s}}class Q{constructor(t,i){this.apply=t=>{if("STYLE"!==t.tagName)return;const i=t.ownerDocument.createElement("style");if(this.Yq&&h.default.FC(t,i),t.media&&i.setAttribute("media",t.media),i.textContent=(t.textContent||"")+(t.Zq||""),!i.textContent&&t.sheet){const s=t.sheet.cssRules,h=[];let e;if(s&&s.length){for(e=0;e<s.length;e++)"string"==typeof s[e].cssText&&h.push(s[e].cssText);i.textContent=h.join("")}}return this.Kq&&i.textContent.includes(":defined")&&(i.textContent=i.textContent.replaceAll(":defined","")),i},this.Yq=t,this.Kq=i}}class tt{constructor(t){this.$q=()=>this.Jq?new J(this.Qq,this.tY,this.Kq):new Q(this.Qq,this.Kq),this.Jq=t.domPreciseStyleSheetCloning,this.Qq=t.domRecordStyleAttributes,this.tY=t.removeBase64Fonts,this.Kq=t.removeCustomElementsDefinitionFromStyle}}class it{constructor(t,i){this.apply=(t,i)=>{if("CANVAS"===t.tagName){var s=h.default.PC(this.Ge,i,this.fG.canvasQuality);s&&(t.innerHTML=s)}},this.Ge=t,this.fG=i}}class st{constructor(t,i,s,h,e,r){this.toString=()=>"seq:"+this.Py+"referrer"+this.referrer+"charset:"+this.charset+"cookie-len"+(this.cookie?this.cookie.length:0)+(this.Ny.length>20?"html length: "+this.Ny.length:"html: "+this.Ny),this.Ny=t,this.referrer=r?i.replace(/\s/g,"%20"):i,this.Py=s,this.charset=e,this.cookie=h}}class ht{constructor(t){this.apply=t=>{if(this.iY&&t&&t.attributes&&t.removeAttribute)for(let i=0;i<this.iY.length;i++)t.removeAttribute(this.iY[i])},this.iY=t}}class et{constructor(){this.apply=(t,i)=>{t&&("IMG"===t.tagName&&t.getAttribute("src")?t.setAttribute("src",i.src):"LINK"===t.tagName&&t.getAttribute("href")&&t.setAttribute("href",i.href))}}}class rt{constructor(){this.apply=t=>{t&&("IMG"===t.tagName&&t.getAttribute("src")?t.setAttribute("src",h.default.YC(t.getAttribute("src"))):"LINK"===t.tagName&&t.getAttribute("href")&&t.setAttribute("href",h.default.YC(t.getAttribute("href"))))}}}class nt{constructor(){this.apply=t=>{t&&("IMG"===t.tagName&&t.getAttribute("src")?t.setAttribute("src",h.default._g(t.getAttribute("src"))):"LINK"===t.tagName&&t.getAttribute("href")&&t.setAttribute("href",h.default._g(t.getAttribute("href"))))}}}s("./node_modules/core-js/modules/es.set.difference.v2.js"),s("./node_modules/core-js/modules/es.set.intersection.v2.js"),s("./node_modules/core-js/modules/es.set.is-disjoint-from.v2.js"),s("./node_modules/core-js/modules/es.set.is-subset-of.v2.js"),s("./node_modules/core-js/modules/es.set.is-superset-of.v2.js"),s("./node_modules/core-js/modules/es.set.symmetric-difference.v2.js"),s("./node_modules/core-js/modules/es.set.union.v2.js");class ot{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.apply=t=>{if(this.iY.has(t.nodeName)&&null!=t&&t.attributes&&t.removeAttribute){let i=[],s=!1;for(let h=0;h<t.attributes.length;h++){let e=t.attributes[h];if(e.name.startsWith("="))s=!0,i.push(e.name);else if(s){if(e.value&&""!==e.value.trim())break;i.push(e.name)}}i.forEach((i=>{t.removeAttribute(i)}))}},this.iY=new Set(t.map((t=>t.toUpperCase())))}}class at{constructor(t,i,s,e,r,n,o){this.take=(t,i,s)=>{this.sY=t,this.hY=s,null===this.Ch.body&&s(void 0);try{if(this.te.snapshotAsync)this.eY.cloneNode(this.Ch.documentElement,this.rY,this.nY,i,this.eY.oY(),this.aY);else{const t=this.eY.cloneNode(this.Ch.documentElement,this.rY,this.nY,i);this.aY(t)}}catch(t){this.cY(t)}},this.aY=t=>{try{if(t&&t.error===this.lY)this.lastError=this.lY,this.hY({error:{visibility:this.lY}});else{var i=this.dY+(this.te.fixChromeBackgroundClipCSS?t.outerHTML.replace(/ background-clip/g," -webkit-background-clip"):t.outerHTML),s=this.uY?this.uY.Wq(this.Ch.cookie):this.Ch.cookie;this.hY(new st(i,this.An.mask(this.Ch.referrer),this.sY,s,this.Ch.characterSet,this.te.encodeReferrer))}}catch(t){this.cY(t)}},this.cY=t=>{d.default.error("could not obtain page snapshot. error: "+t),this.lastError=t,this.hY(void 0)},this.Ch=i,this.eY=e,this.An=r,this.te=o||{},this.uY=new X({Hq:this.te.maskCookies});let a=new $(s),c=new Z(s),l=new K(s),u=new ht(this.te.domRemoveAttributes);var f=h.default.EC().add(l.apply).add(c.apply).add(a.apply).add(u.apply);this.te.domRecordAbsoluteResourcesURLs&&f.add((new et).apply),this.te.removeUnnamedAttributesByTags&&this.te.removeUnnamedAttributesByTags.length&&f.add(new ot(this.te.removeUnnamedAttributesByTags).apply),this.te.protocolsToSwitch&&f.add((new nt).apply),this.te.domRemoveDuplicatedSlashResourcesUrl&&f.add((new rt).apply),this.te.recordCanvas&&f.add(new it(s,this.te).apply),t.ShadowRoot&&this.te.recordShadowDom&&f.add(n.y_),this.nY=f.CC();let m=new tt({domPreciseStyleSheetCloning:this.te.domPreciseStyleSheetCloning,domRecordStyleAttributes:this.te.domRecordStyleAttributes,removeBase64Fonts:this.te.removeBase64Fonts,removeCustomElementsDefinitionFromStyle:this.te.removeCustomElementsDefinitionFromStyle});this.rY=m.$q().apply,this.lY="page is empty or not visible",this.dY="<!DOCTYPE html>\n"}}class ct{constructor(t,i,s,h){this.fY=()=>{let t,i,s,h,e,r,n={timestamp:this.mY++,propertiesMode:"modifiedOnly",version:this.te.gY},o=0;for(t=0;t<this.vY.length;t++){for(i in e=this.vY[t],s=e.GG.track(),r=0,s)h=s[i],this.pY(e.qG,h,n)&&r++;o+=r}return 0===o&&(n=void 0),n},this.start=()=>{let t;for(t=0;t<this.vY.length;t++)this.vY[t].GG.start()},this.HG=t=>{this.vY.push(t)},this.XG=t=>{let i;for(i=this.vY.length-1;i>=0;i--)if(this.vY[i].GG._W()===t){this.vY.splice(i,1);break}},this.vY=t||[],this.zL=i,this.jo=s,this.te=h||{},this.mY=0}pY(t,i,s){if(i.removed)return!1;let h,e,r=!1;for(h=0;h<t.length;h++)e=t[h](i,s),!e||r||!this.te.setSelectorToAttributes&&i.attributes||(e.selector=this.zL.Kp(i.element,!1).selector,r=!0);return!0}}class lt{constructor(t,i){this.wY=()=>{let t,i,s,e=0;for(t in this.bY)if(this.bY.hasOwnProperty(t)&&(s=this.bY[t],!s.removed)){for(i=s.element;h.default.parentNode(i);){if(this.yY[this.Tc.ps(i)]){e++,s.removed=!0;break}i=h.default.parentNode(i)}s.removed||i.nodeType===window.Node.DOCUMENT_FRAGMENT_NODE||i.nodeType===window.Node.DOCUMENT_NODE||(s.removed=!0,e++)}return e},this.TY=t=>{const i=this.Tc.ps(t);let s=this.bY[i];return s||(s=new j(t,i,this.Tc),this.bY[i]=s),s},this.ji=t=>{const i=this.EY++,s=this.TY(t.aG);if("characterData"===t.type)s.CY=t.target;else if("childList"===t.type){if(s.kY=i,t.addedNodes.length){let i,h;for(h=0;h<t.addedNodes.length;h++)i=this.Tc.ps(t.addedNodes[h]),this.yY[i]=!0,s.RW(i),t.IY&&s.xW.push(t.addedNodes[h])}}else"attributes"===t.type&&(s.attributes||(s.attributes={}),s.attributes[t.attributeName]=i)},this.SY=t=>{const i=this.Tc.ps(t),s=this.TY(t.host);s.kY=this.EY++,this.yY[i]=!0,s.RW(i)},this.start=()=>{this.Ge.on("domMutation",this.ji)},this.track=()=>{const t=this.bY;return this.wY(t),this.EY=0,this.bY={},this.yY={},t},this._W=()=>!1,this.Ge=t,this.Tc=i,this.bY={},this.yY={},this.EY=0,this.Ge.on("shadow:rootAttached",this.SY)}}class dt{constructor(t){this.ds=(t,i)=>{for(let s=0;s<this.MY.length;s++)this.MY[s].ds(t,i)},this.gs=(t,i)=>{let s,h;for(let e=0;e<this.MY.length;e++)h=this.MY[e].gs(t,i),s=s||h;return s},this.js=(t,i)=>{for(let s=0;s<this.MY.length;s++)this.MY[s].js(t,i)},this.vs=()=>{for(let t=0;t<this.MY.length;t++)this.MY[t].vs()},this.MY=t}}class ut{constructor(t,i){this.next=()=>{let t=h.default.childNodes(this.DY)[++this.jY];for(;t&&!this.zN(t);)t=h.default.childNodes(this.DY)[++this.jY];return t},this.DY=t,this.zN=i,this.jY=-1}}class ft{constructor(){this.clone=(t,i,s,e)=>{const r=[];if(t.getRootNode().adoptedStyleSheets&&(t===t.getRootNode()||t.adoptedStyleSheets||"HEAD"===t.nodeName)){const n=t.adoptedStyleSheets||t.getRootNode().adoptedStyleSheets,o=t===t.getRootNode()?i:s.ps(t);n&&n.length&&n.forEach((n=>{const a=h.default.AC(n,i,o),c=s.ps(a);n.xY&&a.setAttribute("gbRemoveId",n.xY),n.RY=o,n.xY=c,a.setAttribute("gbid",n.xY),n.AY&&!n.AY[i]?n.AY[i]=!0:n.AY||(n.AY={},n.AY[i]=!0),e[i]=t.getRootNode(),r.push(a)}))}return r}}}class mt{constructor(t,i,s,e,r,n,o,a,c,l,d,u,f,m,g,v,p,w,b,y,T){this.PY=function(t,i){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:11;for(;t&&i&&s>0;){if("BODY"===t.tagName||"HTML"===t.tagName)return!1;if(i===t.tagName)return!0;t=h.default.parentNode(t)||t.host,s--}},this.LY=t=>t&&"SLOT"===t.tagName&&this.OY.some((i=>this.PY(t,i,5))),this.FY=t=>t instanceof this.Lr.ShadowRoot,this.NY=t=>t?this._Y.BY.createElement(this.VY):this._Y.BY.createElement("gb-shadow"),this.zY=t=>/{\s+\[native code]/.test(Function.prototype.toString.call(t.constructor)),this.clone=(t,i,s,e,r,n)=>{const o=this.UY++;n&&(this.cD[o]=n);const a=r||this.DW,c={},l=this._Y.BY.createElement("gb-root");let d=0;const u=this.WY.HY();this.GY=!this.qY||e||void 0===e;let f=t.ownerDocument.querySelector("HTML>BODY");return!f&&this.YY&&(f=t.ownerDocument.querySelector("HTML>FRAMESET")),this.GY||f&&h.default.vj(f)?(a.MW(t,((t,r)=>{if(u.XY)return!0;!this.GY&&(t&&t.nodeType===this.Lr.Node.TEXT_NODE||this.qY&&!e&&h.default.isVisible(t))&&(this.GY=!0);let n,o=!0;const a=this.Tc.ps(t);if(!!this.Lr.ShadowRoot&&this.FY(t))this.KY&&this.ZY[t.host.nodeName]||this.$Y&&!this.zY(t)?(n=this.NY(!0),t.host.aP=!0):n=this.NY();else try{if(n=i&&i(t,r)||this.rY&&this.rY(t,r),n)o=!1;else{if("BODY"===t.tagName&&t.parentElement&&"HTML"!==t.parentElement.tagName&&this.JY){let i,s;for(n=this._Y.BY.createElement("gb-body"),i=0;i<t.attributes.length;i++)s=t.attributes[i],n.setAttribute(s.name,s.value)}else n=this._Y.cloneNode(t);this.LY(t)&&(n.textContent=t.innerText,this.Eo.log("renderSlotsInCustomElements: ",t))}}catch(t){this.Ge.emit("clsDebug","Error: NodeCloner, error message:"+t.message)}if(n){if(s&&s(n,t),this.nY&&this.nY(n,t),this.QY&&this.QY(n,t),t.nodeType===this.Lr.Node.ELEMENT_NODE&&(t.oG=!0),this.tX&&t&&t.getRootNode&&t.nodeType!==this.Lr.Node.DOCUMENT_NODE){const i=(new ft).clone(t,a,this.Tc,this.iX);if(i.length){let t;for(t=0;t<i.length;++t)n.appendChild(i[t])}}(t.shadowRoot||h.default.childNodes(t)&&h.default.childNodes(t).length)&&(c[a]=n);const i=h.default.parentNode(t)||t.host;try{let t=i&&c[this.Tc.ps(i)]||l;("HEAD"===t.nodeName&&n.nodeType!==window.Node.TEXT_NODE||"HEAD"!==t.nodeName)&&t.appendChild(n)}catch(t){this.Ge.emit("clsDebug","Error: NodeCloner, error message:"+t.message)}}return t&&t.nodeType===this.Lr.Node.ELEMENT_NODE&&d++%100==0&&u.sX(d),o&&!u.XY}),void 0,void 0,this.hX,l,o),n?void 0:this.hX(l,o)):(this.Ge.emit("clsDebug","BODY element is not visible during snapshot"),this.hX(null,o))},this.hX=(t,i)=>{let s=null;if(t&&h.default.childNodes(t)&&h.default.childNodes(t).length>1){if(this.Ge.emit("clsDebug","Error: NodeCloner, cloneRoot.childNodes have more then one child"),this.eX){let i,e=h.default.childNodes(t);for(i=0;i<e.length;++i)"HTML"===e[i].nodeName&&(s=e[i])}}else this.GY?t&&(s=t.lastChild):s={error:"page is empty or not visible"};if(!this.cD[i])return s;this.cD[i](s),delete this.cD[i]},this.Lr=t,this.Ge=i,this._Y=s,this.WY=e,this.Tc=r,this.DW=n,this.rY=o,this.nY=a,this.QY=c,this.tX=l,this.iX=d,this.eX=u,this.qY=f,this.YY=m,this.$Y=g,this.Eo=v,this.OY=p,this.JY=w,this.VY=b,this.ZY=h.default.ve.apply(null,y),this.KY=T,this.UY=0,this.cD={}}}class gt{constructor(t,i,s){this.MW=(t,i,s,e)=>{let r,n,o=t;const a=s?"children":"childNodes",c=[o],l={};for(this.rX.ds(t,l);c.length;)if(o=c.pop(),o.nX)this.rX.js(o.parent,l);else if(this.oX(o,e)&&(n=i(o,l),!1!==n)){const t=h.default[a](o);if(null!=t&&t.length)for(this.rX.gs(o,l)&&c.push({parent:o,nX:!0}),r=t.length-1;r>=0;r--)c.push(t[r]);this.te.aX&&o.shadowRoot&&(t&&t.length||this.rX.gs(o,l)&&c.push({parent:o,nX:!0}),c.push(o.shadowRoot))}this.rX.vs()},this.oX=t,this.rX=i,this.te=h.default.Li(s,{aX:!1})}}class vt{constructor(t,i,s){this.cX=()=>{let t=!1,i=0,s=0;for(;!t&&this.lX.length;){s=h.default.Vn();var e=this.lX.pop();if(e.nX)this.rX.js(e.parent,this.lx);else if(this.oX(e,this.dX)&&!1!==this.uX(e,this.lx)){if(e[this.fX]&&e[this.fX].length){this.rX.gs(e,this.lx)&&this.lX.push({parent:e,nX:!0});for(var r=e[this.fX].length-1;r>=0;r--)this.lX.push(e[this.fX][r])}this.te.aX&&e.shadowRoot&&this.lX.push(e.shadowRoot)}i+=h.default.Vn()-s,i>this.mX&&(t=!0)}this.lX.length?window.setTimeout(this.cX,0):(this.rX.vs(),this.gX(this.vX,this.pX))},this.MW=(t,i,s,h,e,r,n)=>{if(this.wX)throw"NodeVisitorAsync cannot be re-used";this.wX=!0,this.gX=e,this.vX=r,this.pX=n,this.fX=s?"children":"childNodes",this.lX=[t],this.lx={},this.uX=i,this.dX=h,this.rX.ds(t,this.lx),this.cX()},this.wX=!1,this.oX=t,this.rX=i,this.te=h.default.Li(s,{aX:!1,visitorAsyncMaxChunkTime:50}),this.mX=this.te.visitorAsyncMaxChunkTime}}class pt{constructor(t,i){this.bX=(t,i)=>{if(!t.XY){const s=-1!==t.duration?t.duration:new Date-t.yX;t.XY=!0,this.cs.emit("dom:fuseBlown",{reason:i,duration:s,elements:t.TX,EX:this.te.EX||-1,CX:this.te.CX||-1}),this.cs.emit("clsDebug","DOM cloning fuse blown. reason:"+i+" elements:"+t.TX+" duration:"+s)}},this.kX=(()=>{const t=this;return function(i){this.XY||(this.TX=i,t.IX&&(this.duration=new Date-this.yX,this.duration>=t.te.EX)?t.bX(this,"duration"):t.SX&&this.TX>=t.te.CX&&t.bX(this,"elementCount"))}})(),this.HY=()=>({XY:!1,yX:new Date,TX:-1,duration:-1,sX:this.kX}),this.cs=t,this.te=i||{},this.SX=(this.te.CX||0)>0,this.IX=(this.te.EX||0)>0}}class wt{constructor(t,i){this.apply=t=>{if("TITLE"===t.nodeName){const i=t.ownerDocument.createElement("title");return i.textContent=h.default.es(t.textContent,(t=>this.rs.ss(t,null,this.te.titleMaskingChar))),i}},this.rs=t,this.te=i||{}}}class bt{constructor(t,i,s,e){this.MX=t=>t.parentElement&&t.parentElement.tagName&&this.fG.renderSlotsInCustomElements.some((function(i){return i===t.parentElement.tagName})),this.apply=(t,i)=>{if(t&&t.nodeType===window.Node.TEXT_NODE&&i){if(this.fG.renderSlotsInCustomElements.length&&this.MX(t))return t.ownerDocument.createTextNode("");if(i.Pw)return t.ownerDocument.createTextNode(h.default.es(t.textContent,(t=>this.rs.ss(t,null,this.fG.DX))));if(i.us){const i=this.lW.encrypt(t.textContent);return t.ownerDocument.createTextNode(i)}if(i.zw){const i=this.rs.Ns(t.textContent,this.fG.domRegexPatternForMasking,this.fG.domRegexMaskingChar);return t.ownerDocument.createTextNode(i)}}},this.rs=t,this.lW=i,this.WP=s,this.fG=e}}class yt{constructor(t,i){this.apply=t=>{if(this.Rw[t.tagName]&&"function"==typeof t.getAttribute&&!t.hasAttribute(this.Dw)){for(let i in this.Aw)if(this.Aw.hasOwnProperty(i)){const s=t.getAttribute(i);s&&(this.jX[t.tagName]&&"src"===i?t.setAttribute(i,this.jX[t.tagName]):t.setAttribute(i,this.rs.ss(s,void 0,this.te.attributeMaskingChar)))}if(this.xX&&t.dataset)for(let i in t.dataset)t.dataset[i]=this.rs.ss(t.dataset[i],void 0,this.te.attributeMaskingChar)}},this.rs=t,this.te=i,this.jX={IMG:"data:image/gif;base64,"},this.Aw=h.default.ve.apply(null,i.domMaskedAttributes),this.Rw=h.default.ve.apply(null,(i.ww||[]).map((t=>t.toUpperCase()))),this.xX=!!i.domMaskDataAttributes,this.Dw=i.domMaskIgnoreAttribute}}class Tt{constructor(t){this.apply=t=>{if("TEXTAREA"===t.tagName&&t.firstChild){let i;if(t.firstChild.textContent&&(i=this.cW.Be(t),i!==t.firstChild.textContent)){const s=t.cloneNode(!0);return s.firstChild.textContent=i,s.Gq=!0,s}}},this.cW=t}}class Et{constructor(t){this.apply=t=>{if("INPUT"===t.tagName){t.getAttribute("value")&&t.setAttribute("value",this.cW.Be(t))}},this.cW=t}}class Ct{constructor(t,i,s,e){this.BY=void 0,this.cloneNode=void 0,this.RX=h.default.ve.apply(null,["TEXTAREA"]),this.importNodeWhenUrlContains=e||[];var r=t,n=[];try{s.forEach((t=>{var i=t?new RegExp(t,"i"):void 0;i&&n.push(i)}))}catch(t){}if(this.AX=()=>{this.BY=r.document.implementation.createHTMLDocument("cloner-doc"),this.cloneNode=function(t){return this.BY.importNode(t,!!this.RX[t.tagName])}},Array.isArray(n)&&n.some((t=>t.test(r.navigator.userAgent)))||h.default.ll(r.navigator.userAgent)||h.default.VE(r.navigator.userAgent)){this.BY=r.document.implementation.createHTMLDocument("cloner-doc");var o=r.document.documentElement?r.document.documentElement.namespaceURI:null;this.cloneNode=function(t){var i;return!this.RX[t.tagName]&&t&&t.nodeType===r.Node.ELEMENT_NODE?(i=t.namespaceURI!==o?this.BY.createElementNS(t.namespaceURI,t.tagName.toLowerCase()):this.BY.createElement(t.tagName),Array.prototype.slice.call(t.attributes).forEach((function(t){try{i.setAttribute(t.name,t.value)}catch(t){}}))):i=this.BY.importNode(t,!!this.RX[t.tagName]),i}}else this.AX()}}class kt{constructor(t,i){this.apply=(t,i)=>{t&&t.nodeType===window.Node.ELEMENT_NODE&&t.setAttribute(this.PX,i[this.LX])},this.PX=t,this.LX=i}}class It{constructor(t){this.OX=()=>{let t;const i=new Map;for(t in this.te.FX)i.set(t,new Set(this.te.FX[t]));return i},this.NX=()=>{let t;const i=new Map;for(t in this.te.BX)i.set(t,new RegExp(this.te.BX[t]));return i},this.accept=(t,i)=>{var s;if(this.te.domOmitInvisibleElements&&!t.oG&&t.nodeType===window.Node.ELEMENT_NODE&&"HTML"!==t.tagName&&"LINK"!==t.tagName&&"STYLE"!=t.tagName&&h.default.parentNode(t)&&"HTML"!==h.default.parentNode(t).tagName&&"HEAD"!==h.default.parentNode(t).tagName&&!h.default.isVisible(t)&&(i||t.outerHTML.indexOf("<style")<0&&!this._X.test(t.outerHTML)))return!1;if(this.te.VX&&this.te.VX>-1&&this.zX.has(t.tagName)&&t.innerHTML.length>this.te.VX)return!1;if("HEAD"===(null===(s=h.default.parentNode(t))||void 0===s?void 0:s.tagName)&&this.UX.has(t.tagName))return!1;if(this.HX.has(t.id)||"OBJECT"===t.tagName&&this.WX.has(t.getAttribute("type"))||h.default.Js(t,this.te.GX))return!1;if(this.qX.has(t.tagName)){const i=this.YX.get(t.tagName);if(!i||!i.exec(t.textContent))return!1}if((null==t?void 0:t.nodeType)===window.Node.ELEMENT_NODE&&this.te.XX&&this.te.XX.length)for(const i of this.te.XX)if(t.matches(i))return!1;if(t&&"IFRAME"===t.tagName&&t.src&&this.te.domOmitAnalyticsIframes&&this.te.domOmitAnalyticsIframes.length){const i=1,s=1,e=0;for(let r=0;r<this.te.domOmitAnalyticsIframes.length;r++){const n=h.default.Ae(t.src);if(n&&n.indexOf(this.te.domOmitAnalyticsIframes[r])>-1&&t.width<=i&&t.height<=s&&("hidden"===t.style.visibility||"none"===t.style.display||t.style.opacity<=e))return!1}}return((null==t?void 0:t.nodeType)!==window.Node.COMMENT_NODE||!this.te.KX)&&(!this.ZX.has(t.tagName)||"undefined"===t.id||!this.ZX.get(t.tagName).has(t.id))},this.te=h.default.Li(t,{$X:[],BX:{},FX:{},KX:!0,JX:[],QX:[],GX:[],tK:[],tagsToCheckLength:[],VX:-1,domOmitInvisibleElements:!1,domOmitAnalyticsIframes:[]}),this.ZX=this.OX(),this.YX=this.NX(),this.qX=new Set(this.te.$X),this.UX=new Set(this.te.JX),this.HX=new Set(this.te.QX),this.WX=new Set(this.te.tK),this.zX=new Set(this.te.tagsToCheckLength),this._X=/<link[^>]+?rel\s*?=\s*?['"]stylesheet/gi}}class St{constructor(){this.clone=t=>{if("LINK"!==t.tagName||"import"!==t.getAttribute("rel"))return;const i=[],s={};let h,e,r,n,o=t.iK,a="";for(;o;){if(r=o.querySelectorAll("style"),r.length)for(h=0;h<r.length;h++)a+=r[h].textContent;for(n=o.querySelectorAll("link[rel='import']"),e=0;e<n.length;e++)n[e].iK&&!s[n[e].href]&&(i.push(n[e].iK),s[n[e].href]=!0);o=i.pop()}if(a){const i=t.ownerDocument.createElement("style");return i.textContent=a,i.setAttribute("gb-imported-from",t.href),i}}}}class Mt{constructor(t,i){this.sK=t=>{this.cs.emit("clsDebug","base64ImageRemover",void 0,"removed image from "+t.nodeName+" node with _gbid "+(t._gbid||"not assigned"))},this.apply=(t,i,s)=>{if(this.hK[t.tagName]){if("IMG"===t.tagName&&t.src)return this.eK.test(t.src)?(this.sK(t),s?"":(t.src="",void t.setAttribute("gb-dataremoved",""))):t.src;if("STYLE"===t.tagName&&this.rK.test(t.innerText))return this.sK(t),s?t.innerText.replace(this.rK,"").replace(/(\r\n|\n|\r)/gm,""):(t.innerText=t.innerText.replace(this.rK,"").replace(/(\r\n|\n|\r)/gm,""),void t.setAttribute("gb-dataremoved",""));const i=t.getAttribute("style");if(i)return this.rK.test(i)?(this.sK(t),s?i.replace(this.rK,""):(t.style.backgroundImage="",void t.setAttribute("gb-dataremoved",""))):i}},this.cs=t,this.hK=i||{},this.eK=/(url\()?"?data:image\/(svg\+xml|\.?(png|jpe?g));[a-zA-Z0-9\D]*;?base64/,this.rK=/(background)(-image)*:(.*)(url\()?(&quot;)?"?data:image\/(svg\+xml|(\.?(png|jpe?g)));(.)?(base64,).*(\s)*?(?=\))\)*;*/}}class Dt{constructor(t){this.apply=(t,i,s)=>{if("STYLE"===t.tagName&&this.nK.test(t.innerText)){if(this.sK(t),s)return t.innerText.replace(this.nK,"").replace(/(\r\n|\n|\r)/gm,"");t.innerText=t.innerText.replace(this.nK,"").replace(/(\r\n|\n|\r)/gm,""),t.setAttribute("gb-dataremoved","")}},this.cs=t,this.nK=/@font-face\s*{[^}]*src:[^;]*url\([^)]*base64[^)]*\)[^}]*\}/g}sK(t){this.cs.emit("clsDebug","base64FontRemover",void 0,"removed font data from "+t.nodeName+" node with _gbid "+(t._gbid||"not assigned"))}}class jt{constructor(t,i){this.clone=t=>{let i;if(t.tagName&&(i=t.tagName.toUpperCase()),this.oK[i])try{let s,h;const e=t.outerHTML,r=this.aK[e];if(r)h=t.ownerDocument.createElement(i),h.setAttribute(this.cK,r);else{for(this.aK[e]=this.lK,h=t.ownerDocument.createElement(i),h.innerHTML=t.innerHTML,s=0;s<t.attributes.length;s++){const i=t.attributes[s];h.setAttribute(i.name,i.value)}h.setAttribute(this.dK,this.lK.toString()),this.lK++}return h}catch(t){d.default.error("Error while handling repetitive element: "+t.message,t),this.Ge.emit("clsDebug","error while handling repetitive element. Exception message: "+t.message)}},this.Ge=t,this.uK=i,this.lK=1,this.dK="gb-proto",this.cK="gb-clone",this.aK={},this.uK=i.map((t=>t.toUpperCase())),this.oK=h.default.ve.apply(null,this.uK)}}class xt{constructor(){this.acceptNode=t=>{if(!t.getAttribute||"OBJECT"!==t.tagName)return!1;const i=(t.getAttribute("data")||"").toLowerCase();return"text/html"===(t.getAttribute("type")||"").toLowerCase()||i.indexOf(".html")===i.length-5||i.indexOf(".htm")===i.length-4},this.apply=t=>{this.acceptNode(t)&&t.setAttribute("_gbObject","")}}}class Rt{constructor(t,i,s,e){this.apply=(t,i)=>{t&&("INPUT"===t.tagName||"SELECT"===t.tagName)&&h.default.isVisible(i)&&this.cs.emit("newInputElement",{gbid:this.Tc.ps(i),clone:t,fK:this.zL.Kp(i),cssSelector:this.GL.Kp(i)})},this.cs=t,this.Tc=i,this.zL=e,this.GL=s}}class At{constructor(t,i){this.apply=(t,i)=>{let s=this.mK;var e;if(i.nodeType===i.ELEMENT_NODE)for(e=0;e<this.gK.length;++e)if(h.default.Ze(i,this.gK[e])){var r=this.Lr.getComputedStyle(i);for(var n in s)if(r[n])if(s[n].vK&&s[n].vK!==r[n]){if(s[n].pK)break}else t.setAttribute(this.mK[n].wK,s[n].bK?r[n]:"");else if(s[n].pK)break;break}},this.Lr=t,this.gK=i,this.mK={"-webkit-appearance":{wK:"_gb-apple-pay",bK:!1,vK:"-apple-pay-button",pK:!0},"-apple-pay-button-type":{wK:"_gb-apple-pay-type",bK:!0,vK:!1,pK:!1},"-apple-pay-button-style":{wK:"_gb-apple-pay-style",bK:!0,vK:!1,pK:!1}}}}class Pt{constructor(t,i,s,e,r,n,o,a,c,l,u,f,m){this.yK=()=>this.te.valueMaskingMode===this.jo.Zi.Ws||(!!(this.te.maskBlacklistValueByClass.length||this.te.maskBlacklistValueById.length||this.te.valueMaskByCategories.length||this.te.valueBlacklistMaskSimpleSelector.length)||(this.te.valueEncryptionMode===this.jo.Zi.Ws||!(!this.te.valueEncryptById.length&&!this.te.valueEncryptByClass.length))),this.TK=t=>new ut(t,this.EK),this.oY=()=>new vt(this.oX,new dt(this.MY),{aX:this.te.recordShadowDom,visitorAsyncMaxChunkTime:this.te.visitorAsyncMaxChunkTime}),this.jo=s,this.te=u,this.te.renderSlotsInCustomElements=u.renderSlotsInCustomElements,this.oX=new It({KX:!u.domKeepComments,$X:["SCRIPT","NOSCRIPT","DOM-IF","CODE"],FX:u.domIgnoredFormElements?{INPUT:u.domIgnoredFormElements}:{},BX:u.domKeepScriptMatching?{SCRIPT:u.domKeepScriptMatching}:{},JX:["IFRAME","FRAME","FRAMESET"],QX:u.domMaskOmitById||u.domOmitById,GX:u.domMaskOmitByClass||u.domOmitByClass,tK:u.domOmitObjectElementsByType,XX:u.domOmitBySelector,tagsToCheckLength:u.tagsToCheckLength,VX:u.tagMaxLength,domOmitInvisibleElements:u.domOmitInvisibleElements,domOmitAnalyticsIframes:u.domOmitAnalyticsIframes}).accept,this.MY=[],this.MY.push(o.ls(e)),this.MY.push(a.ls(e)),this.te.domRegexPatternForMasking.length&&this.te.domMaskContentByRegex.length&&this.MY.push(c.ls(e));var g=new gt(this.oX,new dt(this.MY),{aX:u.recordShadowDom}),v=h.default.EC(!0);u.domCompressRepetitiveElements.length&&v.add(new jt(i,u.domCompressRepetitiveElements).clone),v.add(new St);var p=new Q(u.domRecordStyleAttributes,u.removeCustomElementsDefinitionFromStyle);v.add(p.apply),u.struggleCaptureBlankPage&&v.add(n.y_);var w=new bt(Y.default,a,c,this.te);if(v.add(w.apply),u.maskTitle){var b=new wt(Y.default,this.te);v.add(b.apply)}var y=h.default.EC(!0).add(new kt("gbid",e._P).apply);u.domRemoveAttributes&&u.domRemoveAttributes.length&&y.add(new ht(u.domRemoveAttributes).apply),u.removeUnnamedAttributesByTags&&u.removeUnnamedAttributesByTags.length&&y.add(new ot(u.removeUnnamedAttributesByTags).apply),u.domRecordAbsoluteResourcesURLs&&y.add((new et).apply),u.protocolsToSwitch&&y.add((new nt).apply),u.domRemoveDuplicatedSlashResourcesUrl&&y.add((new rt).apply);var T=new Tt(r),E=new Et(r);this.yK()&&(y.add(E.apply),v.add(T.apply)),u.domMaskAttributesByTag.length&&(u.domMaskedAttributes.length||u.domMaskDataAttributes)&&y.add(new yt(Y.default,{domMaskedAttributes:u.domMaskedAttributes,ww:u.domMaskAttributesByTag,domMaskIgnoreAttribute:u.domMaskIgnoreAttribute,domMaskDataAttributes:u.domMaskDataAttributes,attributeMaskingChar:u.attributeMaskingChar}).apply),u.recordCanvas&&y.add(new it(i,u).apply),u.htmlObjectRecordEnabled&&y.add((new xt).apply),u.removeBase64ImageDataTagNames&&u.removeBase64ImageDataTagNames.length>0&&y.add(new Mt(i,h.default.ve.apply(null,u.removeBase64ImageDataTagNames)).apply),u.removeBase64Fonts&&y.add(new Dt(i).apply),u.domFormAnalysisReporting&&y.add(new Rt(i,e,f,m).apply);let C=h.default.EC(),k=u.applePaySelectors;k&&k.length&&(h.default.ll()||h.default.VE())&&C.add(new At(t,k).apply);var I=new pt(i,{CX:u.domFuseElementCount,EX:u.domFuseDuration}),S=new mt(t,i,new Ct(t,i,u.forceRenderingFixForMultipleUA,u.importNodeWhenUrlContains),I,e,g,v.CC(),y.CC(),C.CC(),u.enableAdoptedCss,l,u.checkForHtmlOnly,u.checkVisibility,u.framesetRecordEnabled,u.recordNonNativeShadowAsElementContainer,d.default,this.te.renderSlotsInCustomElements,u.domRecordInnerBody,u.customElementWrapperName,u.ignoreAdoptedForElements,u.enableAdoptedCss);this.EK=this.oX,this.MW=g.MW,this.cloneNode=S.clone}}class Lt{constructor(t,i){this.CK=t=>{const i=t.insertRule,s=this;t.insertRule=function(){const t=i.apply(this,arguments);try{const i=arguments[0];this.Zq?this.Zq+=i:this.Zq=i;const h=s.Tc.ps(this.ownerNode);s.DO.push({selector:""+h,type:"added",rule:i,index:t})}catch(t){d.default.error("Exception occurred during CSS insertRule interception. Error: "+t.message,t)}return t}},this.kK=t=>{const i=t.deleteRule,s=this;t.deleteRule=function(){try{const t=arguments[0];if(void 0!==this.cssRules[t]){const i=s.Tc.ps(this.ownerNode);s.DO.push({selector:""+i,type:"deleted",index:t})}}catch(t){d.default.error("Exception occurred during CSS deleteRule interception. Error: "+t.message,t)}return i.apply(this,arguments)}},this.start=()=>{},this.track=()=>{const t={};return this.DO.length&&(t.cssRules={rules:this.DO}),this.DO=[],t},this._W=()=>!1,this.IK=this.CK,this.SK=this.kK,this.Lr=t,this.Tc=i,this.DO=[],this.CK(this.Lr.CSSStyleSheet.prototype),this.kK(this.Lr.CSSStyleSheet.prototype)}}class Ot{constructor(){this.apply=(t,i)=>{t.rules&&t.rules.length>0&&(h.default.dC(i,"cssRuleChanges").rules=t.rules)}}}class Ft{constructor(t,i){this.MK=t=>{const i=t.setProperty,s=this;t.setProperty=function(){const t=i.apply(this,arguments);try{if(this.parentRule&&this.parentRule.parentStyleSheet){const t=this.parentRule.parentStyleSheet.ownerNode;if(t){const i=s.Tc.ps(t);s.DO.push({selector:""+i,type:"setProperty",selectorText:this.parentRule.selectorText,propertyName:arguments[0],value:arguments[1],priority:arguments[2]})}}}catch(t){d.default.error("Exception occurred during CSS set property interception. Error: "+t.message,t)}return t}},this.DK=t=>{const i=t.removeProperty,s=this;t.removeProperty=function(){const t=i.apply(this,arguments);try{if(this.parentRule&&this.parentRule.parentStyleSheet){const t=this.parentRule.parentStyleSheet.ownerNode;if(t){const i=s.Tc.ps(t);s.DO.push({selector:""+i,type:"removeProperty",selectorText:this.parentRule.selectorText,propertyName:arguments[0]})}}}catch(t){d.default.error("Exception occurred during CSS remove property interception. Error: "+t.message,t)}return t}},this.start=()=>{},this.track=()=>{var t={};return this.DO.length&&(t.cssRules={rules:this.DO}),this.DO=[],t},this._W=()=>!1,this.jK=this.MK,this.xK=this.DK,this.Lr=t,this.Tc=i,this.DO=[],this.MK(this.Lr.CSSStyleDeclaration.prototype),this.DK(this.Lr.CSSStyleDeclaration.prototype)}}class Nt{constructor(){this.apply=(t,i)=>{t.rules&&t.rules.length>0&&(h.default.dC(i,"cssPropertyChanges").props=t.rules)}}}class Bt{constructor(t,i,s){this.Eo=t,this.DO=i,this.nx=s}RK(){try{this.DO.forEach((t=>{if("object"==typeof t)for(const[i,s]of Object.entries(t)){if(!i||!s)return void this.Eo.log("[Glassbox] Invalid or missing rule for domTrackStyleChanges");const t=document.querySelector(i);if(!t)return void this.Eo.log("[Glassbox] Element for domTrackStyleChanges not found:",i);let h=getComputedStyle(t)[s];setInterval((()=>{const i=getComputedStyle(t)[s];i!==h&&(t.style[s]=i,h=i)}),this.nx)}else this.Eo.log('[Glassbox] Invalid style rule for domTrackStyleChanges - should be of form [{"el":"style"}]:',t)}))}catch(t){this.Eo.log("[Glassbox] Invalid rules provided for domTrackStyleChanges:",t)}}}class _t{constructor(t,i,s,e,r){this.AK=(t,i)=>{let s,h=-1,e={PK:-1,LK:!1,FK:""};for(;s=t.next();)h++,s.nodeType!==window.Node.TEXT_NODE?e.LK=!0:e.FK+=s.textContent,s===i&&(e.PK=h);return e},this.apply=(t,i)=>{if(void 0!==t.CY){let s=this.AK(this.NK(t.element),t.CY);if(s.PK>=0){let e=s.LK?t.CY.textContent:s.FK;this.UP&&this.UP.Ow(t.element,C.default.Xe,E.default.b_)?e=Y.default.ss(e):this.WP&&this.WP.Ow(t.element,C.default.Xe)?e=Y.default.Ns(e,this.te.domRegexPatternForMasking,this.te.domRegexMaskingChar):this.lW&&this.lW.Qe(t.element,C.default.Xe)&&(e=this.lW.encrypt(e));let r=h.default.dC(i,"domChanges",t.id);return r.characterData={value:e,child:s.LK?s.PK:0},r}}},this.NK=t,this.UP=i,this.lW=e,this.WP=s,this.te=r}}class Vt{constructor(t,i,s,e){this.apply=(t,i)=>{const s=t.attributes?Object.keys(t.attributes):[];if(s&&s.length>0){let e,r,n,o,a={};for(this.te&&this.te.removeBase64ImageDataTagNames&&this.te.removeBase64ImageDataTagNames.length>0&&(o=h.default.ve.apply(null,this.te.removeBase64ImageDataTagNames),n=new Mt(this.cs,o)),e=0;e<s.length;e++)r=t.element.getAttribute(s[e]),"INPUT"===t.element.tagName&&"value"===s[e]?r="password"===t.element.getAttribute("type")?Y.default.ss(r):this.cW.Be(t.element):this.UP.Tw(t.element,s[e])?r=Y.default.ss(r):("style"===s[e]||"src"===s[e])&&n&&o[t.element.tagName]&&(r=n.apply(t.element,null,!0),""===r&&"src"===s[e]&&(a["gb-dataremoved"]={value:"",ordinal:s.length+1})),a[s[e]]={value:r,ordinal:t.attributes[s[e]]};const c=h.default.dC(i,"domChanges",t.id);return c.attributes=a,c}},this.cW=t,this.UP=i,this.te=s,this.cs=e}}class zt{constructor(t,i,s,e,r,n,o){this.init=(t,i)=>{if(void 0!==t.kY){if(this.UP.Ow(t.element,C.default.Xe,E.default.C_))return;let e,r,n,o=[],a=this.NK(t.element);if(h.default.childNodes(t.element).length>1&&"STYLE"===t.element.nodeName){const i=t.element.sheet.rules;let h="";for(var s=0;s<i.length;s++)h+=i[s].cssText+"\n";h=h.replace(/<svg.*svg>/gi,""),o.push("text:"+h)}else for(;e=a.next();)r=this.Tc.ps(e),this.BK[e.tagName]||t.addedNodes&&t.addedNodes[r]||this.te.domChildListUpdateExistingElements&&this._K(t,r)?(n=this.eY.cloneNode(e),o.push(this.zK.VK(n))):o.push(this.zK.UK(e));"SELECT"!=t.element.nodeName||t.element.selectedIndex||t.element.querySelector("option[selected]")||(t.element.OW=!0);const c=t.element.shadowRoot;if(c&&t.addedNodes[this.Tc.ps(c)]&&o.push(this.zK.VK(this.eY.cloneNode(c))),!c&&t.xW&&t.xW.length){let i=this;t.xW.forEach((function(t){o.push(i.zK.VK(t))}))}const l=h.default.dC(i,"domChanges",t.id);return l.children={ordinal:t.kY,childList:o},l}},this._K=(t,i)=>!(!t.CY||t.CY._gbid!==i||"#text"!==t.CY.nodeName),this.eY=t,this.Tc=i,this.zK=s,this.NK=e,this.UP=r,this.WP=n,this.te=o||{},this.BK=h.default.ve.apply(null,this.te.domChildListUpdateExistingElementsList)}}class Ut{constructor(t){this.HK=t=>h.default.hC(t),this.VK=t=>(t&&t.nodeType===window.Node.TEXT_NODE?"text:":"el:")+this.HK(t),this.UK=t=>t&&t.nodeType===window.Node.TEXT_NODE?"text-ref:"+h.default.Iy(t.textContent):"id:"+this.Tc.ps(t),this.Tc=t}}class Ht{constructor(t,i,s){this.WK=()=>{setTimeout((()=>{this.GK={}}),this.te.qK)},this.y_=(t,i)=>{let s;for(s=0;s<this.te.YK.length;s++)if(i instanceof this.Lr[this.te.YK[s]]){this.GK[this.te.YK[s]]||(this.GK[this.te.YK[s]]=[]),this.GK[this.te.YK[s]].push(i);break}},this.XK=t=>{const i=this.GK[t];return delete this.GK[t],i||[]},this.Lr=t,this.Ge=i,this.te=h.default.Li(s,{qK:100,YK:[]}),this.GK={},this.Ge.on("domTrackingStarted",this.WK)}}class Wt{constructor(t,i){this.Lr=t,this.Tc=i;let s=[],h={};function e(t){const s=t.animate;t.animate=function(){const t=s.apply(this,arguments);try{const t=i.ps(this);h[t]=arguments[0]}catch(t){d.default.error("Exception occurred during animation interception. Error: "+t.message,t)}return t}}function r(t){const e=t.play;e&&(t.play=function(){const t=e.apply(this,arguments);try{if(this.effect){const t=i.ps(this.effect.target);h[t]&&s.push({selector:""+t,type:"animate",rule:[h[t],this.effect.getTiming()]})}}catch(t){d.default.error("Exception occurred during animation interception. Error: "+t.message,t)}return t})}t.Animation&&(r(t.Animation.prototype),e(HTMLElement.prototype)),this.start=()=>{},this.track=()=>{let t={};return s.length&&(t.cssRules={rules:s}),s=[],t},this._W=()=>!1,this.KK=e,this.ZK=r}}class Gt{constructor(){this.apply=(t,i)=>{t.rules&&t.rules.length>0&&(h.default.dC(i,"animationApply").rules=t.rules)}}}class qt{constructor(t,i,s,e){this.$K=(t,i)=>{var s=Object.getOwnPropertyDescriptor(t,"adoptedStyleSheets")&&Object.getOwnPropertyDescriptor(t,"adoptedStyleSheets").set,h=Object.getOwnPropertyDescriptor(i,"adoptedStyleSheets")&&Object.getOwnPropertyDescriptor(i,"adoptedStyleSheets").set;let e=this;s&&Object.defineProperty(t,"adoptedStyleSheets",{set:function(){s.apply(this,arguments);try{e.JK(this,arguments)}catch(t){d.default.error("error during method 'adoptedStyleSheets' hook invocation. error: "+t.message,t)}}}),h&&Object.defineProperty(i,"adoptedStyleSheets",{set:function(){h.apply(this,arguments);try{e.JK(this,arguments)}catch(t){d.default.error("error during method 'adoptedStyleSheets' hook invocation. error: "+t.message,t)}}})},this.JK=(t,i)=>{if(!(t&&t.host&&this.ZY[t.host.nodeName])&&t&&i&&i[0]&&i[0].length){var s=i[0],e=[],r=t.nodeType===window.Node.DOCUMENT_NODE?t.getElementsByTagName("HEAD")[0]:t,n=this.Tc.ps(r),o=t===r?n:this.Tc.ps(t);s.forEach((t=>{var i=h.default.AC(t,n,o),s=this.Tc.ps(i);t.xY&&i.setAttribute("gbRemoveId",t.xY),t.RY=o,t.xY=s,i.setAttribute("gbid",t.xY),t.AY&&!t.AY[n]?t.AY[n]=!0:t.AY||(t.AY={},t.AY[n]=!0),e.push(i)})),this.iX[n]=r,this.Ge.emit("domMutation",{type:"childList",target:r,aG:r,addedNodes:e,removedNodes:[],IY:!0})}},this.Ge=t,this.Tc=i,this.iX=s,this.ZY=h.default.ve.apply(null,e);let r=this;if(window.CSSStyleSheet){this.$K(window.Document.prototype,window.ShadowRoot.prototype);var n=window.CSSStyleSheet.prototype.replaceSync;n&&(window.CSSStyleSheet.prototype.replaceSync=function(){var t=n.apply(this,arguments);try{if(arguments){var i=this.AY;if(i)for(var s in i)if(r.iX[s]){var e=h.default.AC(this,s,this.RY);e.setAttribute("gbremoveid",this.xY),this.xY=r.Tc.ps(e),e.setAttribute("gbid",this.xY),r.Ge.emit("domMutation",{type:"childList",aG:r.iX[s],addedNodes:[e],removedNodes:[],IY:!0})}}}catch(t){d.default.error("error during method 'CSSStyleSheet.replaceSync' hook invocation. error: "+t.message,t)}return t});var o=window.CSSStyleSheet.prototype.replace;o&&(window.CSSStyleSheet.prototype.replace=function(){return Promise.resolve(o.apply(this,arguments).then((function(t){var i=t.AY;if(i)for(var s in i)if(r.iX[s]){var e=h.default.AC(t,s,t.RY);e.setAttribute("gbremoveid",t.xY),t.xY=r.Tc.ps(e),e.setAttribute("gbid",t.xY),r.Ge.emit("domMutation",{type:"childList",aG:r.iX[s],addedNodes:[e],removedNodes:[],IY:!0})}return t})).catch((function(t){return d.default.error("error during method 'CSSStyleSheet.replace' hook invocation. error: "+t),Promise.reject(t)})))})}}}class Yt{constructor(){this.apply=(t,i)=>{t.rules&&t.rules.length>0&&(h.default.dC(i,"canvas").rules=t.rules)}}}class Xt{constructor(t,i,s,e){var r=this;this.QK=t=>{Object.keys(this.tZ).length>0||this.iZ(t)},this.iZ=t=>{const i=t.querySelector("canvas");if(i){const s=this.Tc.ps(i,!0);s&&(this.tZ[s]={sZ:s,node:i,shadowRoot:t}),this.hZ(i)}},this.eZ=(()=>{const t=this;return function(){const i=t.Tc.ps(this.canvas,!0);i&&(t.rZ[i]=!0)}})(),this.hZ=t=>{f.default.fS(t).gS("getContext",this.nZ,!0)},this.nZ=function(){var t;const i=(t=arguments.length-1)<0||arguments.length<=t?void 0:arguments[t],s=f.default.fS(i);s.gS("clearRect",r.eZ),s.gS("strokeRect",r.eZ),s.gS("beginPath",r.eZ),s.gS("rect",r.eZ),s.gS("fill",r.eZ),s.gS("drawImage",r.eZ),s.gS("fillRect",r.eZ),s.gS("putImageData",r.eZ),s.gS("scale",r.eZ),s.gS("translate",r.eZ),s.gS("enable",r.eZ),s.gS("scissor",r.eZ),s.gS("clearColor",r.eZ),s.gS("clear",r.eZ),s.gS("transferFromImageBitmap",r.eZ),s.gS("transferToImageBitmap",r.eZ)},this.oZ=t=>{if(this.tZ[t]){const i=this.tZ[t];if(i.node&&"CANVAS"===i.node.tagName&&h.default.jj(i.node))return h.default.PC(this.Ge,i.node,this.te&&this.te.canvasQuality);delete this.tZ[t]}const i=this.Lr.document.querySelectorAll("canvas");for(let s=0;s<i.length;s++)if(i[s]._gbid==t){const t=i[s];return h.default.PC(this.Ge,t,this.te&&this.te.canvasQuality)}return null},this.start=function(){},this.track=()=>{const t=[],i={};for(let i in this.rZ)if(this.rZ.hasOwnProperty(i)){const s=this.oZ(i);s&&t.push({selector:i,type:"snapshot",rule:s})}return this.rZ={},t.length&&(i.canvasRules={rules:t}),i},this._W=()=>!1,this.aZ=this.hZ,this.cZ=this.oZ,this.Lr=t,this.Tc=i,this.Ge=s,this.te=e,this.rZ={},this.tZ={},this.Lr.HTMLCanvasElement&&this.hZ(this.Lr.HTMLCanvasElement.prototype),this.Ge.on("shadow:rootDetected",this.QK)}}class Kt{constructor(t,i,s,h,e){this.lZ=t=>{if(!t.sheet||!t.sheet.cssRules)return"";let i,s="";const h=t.sheet.cssRules;for(i=0;i<h.length;i++)h[i].cssText&&(s+=h[i].cssText);return s},this.dZ=()=>{let t,i,s,h,e;const r=document.querySelectorAll("style");for(t=0;t<r.length;t++){if(h=r[t],!h.parentNode)return;if(s=this.Tc.ps(h),i=this.lZ(h),i&&i!==this.uZ[s]){e=h.ownerDocument.createElement("STYLE"),e.textContent=i+h.textContent,e._gbid=s;const t={addedNodes:[e],type:"childList",gG:"childList",target:h.parentNode,aG:h.parentNode,removedNodes:[h]};this.uZ[s]=i,this.cs.emit("domMutation",t)}}},this.start=()=>{const t=this.Lr.setInterval(this.dZ,this.fZ);-1!==this.mZ&&this.Lr.setTimeout((()=>{this.Lr.clearInterval(t)}),this.mZ)},this.track=()=>{},this._W=()=>!1,this.Lr=t,this.Tc=i,this.cs=s,this.fZ=h,this.mZ=e,this.uZ={}}}class Zt{constructor(t,i){this.Lr=t,this.Tc=i;let s=[];function h(t){var h=t.showModal;t.showModal=function(){const t=h.apply(this,arguments);try{const t=i.ps(this);s.push({selector:""+t,type:"showModal",rule:["showModal"]})}catch(t){d.default.error("Exception occurred during showModal interception. Error: "+t.message,t)}return t}}"function"==typeof HTMLDialogElement&&h(HTMLDialogElement.prototype),this.start=()=>{},this.track=()=>{var t={};return s.length&&(t.cssRules={rules:s}),s=[],t},this._W=()=>!1,this.gZ=h}}class $t{constructor(){this.apply=(t,i)=>{t.rules&&t.rules.length>0&&(h.default.dC(i,"dialog").rules=t.rules)}}}class Jt{constructor(t,i,s,e,r,n,o,a,c,l,u,f,m,g){this.vZ=(t,i)=>{var s;for(s=0;s<i.length;s++)if(-1!==t.indexOf(i[s]))return!0;return!1},this.pZ=()=>{var t=new Ut(this.LV),i=[{name:"DOM-mutations",GG:new lt(this.ni,this.LV),qG:[new _t(this.wZ.TK,this.bZ,this.CV,this.EV,this.options).apply,new Vt(this.yZ,this.bZ,{removeBase64ImageDataTagNames:this.options.removeBase64ImageDataTagNames},this.Ge).apply,new zt(this.wZ,this.LV,t,this.wZ.TK,this.bZ,null,this.options).init]},{name:"property",GG:new x(this.document,this.LV,this.options.domIgnoredFormElements),qG:[new O(this.yZ,{FG:this.options.domIgnoredFormElements}).apply]}];if(this.options.domRecordCssRules&&i.push({name:"css",GG:new Lt(this.window,this.LV),qG:[(new Ot).apply]}),this.options.domCaptureCssText&&i.push({name:"cssText",GG:new Kt(window,this.LV,this.ni,this.options.domCaptureCssTextInterval,this.options.domCaptureCssTextTermination),qG:[]}),this.options.domRecordCssProps&&i.push({name:"cssProp",GG:new Ft(this.window,this.LV),qG:[(new Nt).apply]}),this.options.domTrackStyleChanges&&this.options.domTrackStyleChanges.length>0){new Bt(d.default,this.options.domTrackStyleChanges,this.options.domTrackStyleChangesInterval).RK()}return this.options.recordAnimation&&i.push({name:"animate",GG:new Wt(this.window,this.LV),qG:[(new Gt).apply]}),this.options.recordCanvas&&i.push({name:"canvas",GG:new Xt(this.window,this.LV,this.ni,this.options),qG:[(new Yt).apply]}),this.options.interceptDialogShowModal&&i.push({name:"dialog",GG:new Zt(this.window,this.LV),qG:[(new $t).apply]}),i},this.reset=()=>{this.status.TZ=!1,this.status.EZ=!1,this.status.aborted=!1,this.status.CZ=0,this.status.kZ=!1},this.IZ=t=>{this.SZ=new Date,this.status.EZ=!0,this.MZ.take(this.status.DZ,!!t,this.jZ)},this.jZ=t=>(this.status.EZ=!1,t&&!t.error?(this.pk.snapshotDuration=new Date-this.SZ,this.status.DZ++,this.ni.emit("pageSnapshot:report",t),this.ni.emit("pageSnapshot:save",t),"hidden"===this.document.visibilityState&&this.ni.emit("clsDebug","Error: snapshot was taken while document was hidden"),this.xZ.start(),this.status.TZ=!0,this.ni.emit("domTrackingStarted")):(++this.status.CZ,this.RZ("pageSnapshotError("+this.status.CZ+")",this.MZ.lastError),this.status.CZ>=this.AZ?t.error&&t.error.visibility?this.PZ(!0):this.status.aborted=!0:this.options.reTakeSnapshotAfterTime&&this.options.reTakeSnapshotAfterTime>0&&setTimeout(this.PZ,this.options.reTakeSnapshotAfterTime)),this.GE.uf||(this.options.performanceDebugEnabled&&this.ni.emit("clsDebug",h.default.lf("_snapshotCallback: Attempting to send performance event via snapshot callback event. isPerformanceEventSent: {0}",this.GE.uf)),this.GE.df()),this.options.performanceDebugEnabled&&!this.GE.uf&&this.ni.emit("clsDebug","_snapshotCallback: trySendPerformanceEvent was unable to send performance event"),t),this.LZ=()=>{this.reset(),this.status.kZ=!0,this.PZ(!0)},this.OZ=t=>()=>{var i;if(this.options.allowWaitForElementsUrls&&this.options.allowWaitForElementsUrls.length&&null===t)for(i=0;i<this.options.allowWaitForElementsUrls.length;++i)if(h.default.aC(this.options.allowWaitForElementsUrls[i],h.default.Jr(this.window.location.href))){t=!0;break}return t=!!t},this.FZ=()=>{var t=!1;this.status.NZ=!1,this.status.kZ=!0,this.options.delaySnapshotAfterElementFound&&this.options.delaySnapshotAfterElementFound>-1&&setTimeout((()=>{t||(t=!0,this.PZ())}),this.options.delaySnapshotAfterElementFound),this.options.delaySnapshotAfterElementFound&&-1!==this.options.delaySnapshotAfterElementFound||this.options.snapshotWaitForPageHidden||this.PZ(!0)},this.PZ=t=>{if(!(this.status.aborted||this.status.TZ||this.status.EZ||this.status.NZ))try{if(this.options.snapshotWaitForElement&&this.options.snapshotWaitForElement.length&&!this.status.kZ&&this.BZ())return h.default.yn(this.GE,this.options.snapshotWaitForElement,this.FZ,this.options.elMustBeShown),this.status.NZ=!0,!1;this._Z&&(this.domObserver.start(),this.VZ&&(this.VZ.stop(),delete this.VZ)),this.IZ(t)}catch(t){this.RZ("startingError",t),d.default.error("error during DOM recording plugin starting. error: "+t)}return this.status.TZ},this.zZ=t=>{var i;if(this.status.UZ)for(i=0;i<this.options.domNewPageAjaxTriggers.length;i++)if(-1!==t.url.indexOf(this.options.domNewPageAjaxTriggers[i]))return void this.LZ()},this.HZ=t=>{this.status.UZ&&-1!==this.options.domNewPageTriggers.indexOf(t.WZ)&&this.LZ()},this.$n=()=>{this._Z&&(this.options.startMutationObserverOnLoad?this.domObserver.start():this.VZ&&this.VZ.start(),!this.status.UZ||this.status.TZ||this.status.aborted||void 0===this.options.domStartAfter||-1===this.options.domStartAfter||setTimeout(this.PZ,this.options.domStartAfter))},this.GZ=()=>{var t;if(this.status.UZ&&this.options.snapshotImmediatePages&&this.options.snapshotImmediatePages.length){var i,s=h.default.Jr(this.window.location.href);for(t=0;t<this.options.snapshotImmediatePages.length;++t)if(h.default.aC(this.options.snapshotImmediatePages[t],s)){this.status.kZ=!0,(i=this.document.querySelector("BODY"))&&!h.default.vj(i)&&this.ni.emit("clsDebug","BODY element not visible during immediate snapshot"),this.GE.Cv="immediate",this.PZ(!0);break}}},this.Nh=()=>{this.domObserver&&(this.domObserver.stop(),this.domObserver=void 0),this.VZ&&(this.VZ.stop(),this.VZ=void 0)},this.qZ=()=>{++this.status.YZ%this.options.domUpdateEveryWsMsgIn==0&&(this.options.isWsSendCustom&&this.ni.emit("customEvent",{name:"customDomUpdate",Cb:"WsDomUpdate",Zv:void 0,eI:!0}),this.ni.emit("pageUpdate"))},this.initialize=t=>(t.on("event:mousedown",this.HZ),t.on("ajax:send",this.zZ),t.once("domInit:loaded",this.$n),t.on("session:new",this.LZ),t.once("domInit:domready",this.GZ),t.on("event:unload",this.Nh),this._Z,-1!==this.options.domUpdateEveryWsMsgIn&&(this.status.XZ=new q(this.window,this.qZ,this.options.isWsSupportOpener)),this.options.domCompress,this.KZ,this.options.enableAdoptedCss&&this.window.ShadowRoot&&this.window.ShadowRoot.prototype&&new qt(t,this.LV,this.ZZ,this.options.ignoreAdoptedForElements),this.status.UZ=!0,!0),this.rI=()=>{if(this.status.UZ&&!this.status.aborted&&this.PZ()&&this._Z){var t=new Date,i=this.xZ.fY();return this.pk.domUpdateDuration+=new Date-t,this.pk.domUpdateCount++,i}},this.$Z=()=>!this._Z,this.vv=()=>this.status.TZ,this.JZ=()=>this.wZ,this.nI=()=>this.bZ,this.wW=()=>this.EV,this.$G=()=>this.wZ,this.Ez=t=>this.bA?this.bA.XK(t):[],this.WG=()=>this.xZ;var v=g.valueMaskingMode===r.Zi.Ws,p=g.domMaskingMode===r.Zi.Ws;this.window=t,this.document=i,this.GE=s,this.ni=e,this.Pd=r,this.LV=n,this.yZ=l,this.eg=f,this.tg=u,this.RZ=m||function(){},this.options=g||{},this.ZZ={},this.bZ=new U.default(r,{valueMaskingMode:this.options.valueMaskingMode,pw:v?this.options.maskWhitelistValueById:this.options.maskBlacklistValueById,gw:v?this.options.maskWhitelistValueByClass:this.options.maskBlacklistValueByClass,valueMaskIgnoreAttribute:this.options.valueMaskIgnoreAttribute,domMaskingMode:this.options.domMaskingMode,jw:p?this.options.domWhitelistMaskContentById:this.options.domBlacklistMaskContentById,_w:p?this.options.domWhitelistMaskContentByClass:this.options.domBlacklistMaskContentByClass,yw:this.options.domMaskOmitById||this.options.domOmitById,bw:this.options.domMaskOmitByClass||this.options.domOmitByClass,domMaskedAttributes:this.options.domMaskedAttributes,ww:this.options.domMaskAttributesByTag,domMaskIgnoreAttribute:this.options.domMaskIgnoreAttribute,domMaskSimpleSelector:p?this.options.domWhitelistMaskSimpleSelector:this.options.domBlacklistMaskSimpleSelector,recordShadowDom:this.options.recordShadowDom}),this.EV=new W.default(e,a,{_s:this.options.domEncryptById,ys:this.options.domEncryptByClass,domEncryptorMaskingChar:this.options.domEncryptorMaskingChar}),this.CV=new H.default(new G.default,{domMaskContentByRegex:this.options.domMaskContentByRegex,domRegexPatternForMasking:this.options.domRegexPatternForMasking,domRegexMaskingChar:this.options.domRegexMaskingChar}),this.wZ=new Pt(this.window,e,r,this.LV,this.yZ,c,this.bZ,this.EV,this.CV,this.ZZ,this.options,this.eg,this.tg),!this.options.startMutationObserverOnLoad&&this.options.domTamperingDetectionEnabled&&(this.VZ=new L(this.window,e,this.document,this.wZ.EK,this.LV,{semiDomEnabled:this.options.semiDomEnabled,domForceIEMutationEventsHandler:this.options.domForceIEMutationEventsHandler,domForceMutationEventsHandler:this.options.domForceMutationEventsHandler,domTamperingDetectionEnabled:this.options.domTamperingDetectionEnabled,SG:this.options.domThrottleChanges,MG:this.options.domThrottleChangesIE11Only,delayDomMutationEvent:this.options.delayDomMutationEvent,domDelayAddedNodesByClass:this.options.domDelayAddedNodesByClass,domFilterAttributes:this.options.domFilterAttributes,domIgnoreAttributes:this.options.domIgnoreAttributes,domIgnoreChangesById:this.options.domIgnoreChangesById,domIgnoreChangesByClass:this.options.domIgnoreChangesByClass,domIgnoreChangesByTag:this.options.domIgnoreChangesByTag,domOmitInvisibleElements:this.options.domOmitInvisibleElements,handleAttributeMutationsAsChunks:this.options.handleAttributeMutationsAsChunks,ignoreMutationsOnNotAttachedElements:this.options.ignoreMutationsOnNotAttachedElements,characterDataOnly:!0,reinstateNativeMutationObserver:this.options.reinstateNativeMutationObserver,initialObserverFirst:this.options.initialObserverFirst,addBaseDomainToRelativeUrls:this.options.addBaseDomainToRelativeUrls,domIgnoreSameValueAttributesModification:this.options.domIgnoreSameValueAttributesModification,domIgnoreLargeMutationsChunks:this.options.domIgnoreLargeMutationsChunks}).jG),this._G=this.wZ.EK,this.domObserver=new L(this.window,e,this.document,this.wZ.EK,this.LV,{semiDomEnabled:this.options.semiDomEnabled,domForceIEMutationEventsHandler:this.options.domForceIEMutationEventsHandler,domForceMutationEventsHandler:this.options.domForceMutationEventsHandler,domTamperingDetectionEnabled:this.options.domTamperingDetectionEnabled,SG:this.options.domThrottleChanges,MG:this.options.domThrottleChangesIE11Only,delayDomMutationEvent:this.options.delayDomMutationEvent,domDelayAddedNodesByClass:this.options.domDelayAddedNodesByClass,domFilterAttributes:this.options.domFilterAttributes,domIgnoreAttributes:this.options.domIgnoreAttributes,domIgnoreChangesById:this.options.domIgnoreChangesById,domIgnoreChangesByClass:this.options.domIgnoreChangesByClass,domIgnoreChangesByTag:this.options.domIgnoreChangesByTag,domOmitInvisibleElements:this.options.domOmitInvisibleElements,handleAttributeMutationsAsChunks:this.options.handleAttributeMutationsAsChunks,ignoreMutationsOnNotAttachedElements:this.options.ignoreMutationsOnNotAttachedElements,reinstateNativeMutationObserver:this.options.reinstateNativeMutationObserver,initialObserverFirst:this.options.initialObserverFirst,addBaseDomainToRelativeUrls:this.options.addBaseDomainToRelativeUrls,domIgnoreSameValueAttributesModification:this.options.domIgnoreSameValueAttributesModification,domIgnoreLargeMutationsChunks:this.options.domIgnoreLargeMutationsChunks}).jG,this.KZ=this.vZ(h.default.Jr(this.document.location.href),this.options.domPartialWhenLocationContains||[]);var w=this.pZ();(this.options.recordShadowDom&&this.window.ShadowRoot||h.default.pj(this.options.forceShadowDomTrackingWhenUrlContains,h.default.Jr(this.window.location.href)))&&(this.bA=new Ht(this.window,e,{YK:["ShadowRoot"]})),this.xZ=new ct(w,this.options.domIncludeSelectorOnUpdate?u:{Kp:function(){return{}}},r,{gY:"2",setSelectorToAttributes:this.options.setSelectorToAttributes}),this.MZ=new at(this.window,this.document,e,this.wZ,o,this.bA,this.options),this.pk={snapshotDuration:-1,domUpdateDuration:-1,domUpdateCount:0,domObserver:this.domObserver?this.domObserver.getName():"NONE"},this.stats=()=>this.pk,this._Z=!!this.domObserver||!!this.VZ,this.AZ=3,this.SZ=0,this.status={UZ:!1,TZ:!1,EZ:!1,aborted:!1,NZ:!1,kZ:!1,CZ:0,DZ:0,YZ:0,XZ:void 0},this.ni.on("stopDomRecording",(()=>{this.status.aborted=!0})),this.BZ=this.OZ(null)}}class Qt{constructor(t,i,s,e,r,n){this.QZ=t=>{let i,s=[];for(i=0;i<t.length;i++)s.push(t[i].toLowerCase());return s},this.Lz=t=>{for(;t;){if("FORM"===t.tagName||this.t$[t.tagName])return h.default.isVisible(t)?t:null;t=h.default.parentNode(t)||t.host}return null},this.i$=(t,i)=>{const s=this;setTimeout((()=>{s.Ge.emit("formValidationError",{element:t,message:i})}),0)},this.s$=t=>"childList"===t.type?t.addedNodes:"attributes"===t.type?[t.aG]:[],this.h$=t=>{const i=this.Lr.getComputedStyle(t);return h.default.isVisible(t)&&"hidden"!==i.visibility&&i.opacity>this.te.minVisibleElementOpacity},this.e$=t=>{let i=this.te.domFormValidationTraverseParentsForVisibility;for(;i&&t;){if(!this.h$(t))return!1;t=t.parentElement||t.host,i--}return!0},this.r$=(t,i)=>{if(t.nodeType===this.Lr.Node.ELEMENT_NODE&&!this.te.ignoreNodesVisibility&&!this.e$(t))return!1;t.nodeType===this.Lr.Node.TEXT_NODE?h.default.parentNode(t)&&this.n$(t)&&(this.te.ignoreNodesVisibility||!this.te.ignoreNodesVisibility&&this.e$(h.default.parentNode(t)))&&i.push(t):this.DW.MW(t,(t=>{if(t)if(t.nodeType===this.Lr.Node.TEXT_NODE&&this.n$(t))i.push(t);else if(t.nodeType===this.Lr.Node.ELEMENT_NODE&&!this.te.ignoreNodesVisibility&&!this.h$(t))return!1}),!1,!0)},this.o$=t=>{try{let i=h.default.parentNode(t);if(i&&i.nodeType===this.Lr.Node.ELEMENT_NODE){const t=this.Lr.getComputedStyle(i).color,s=/\d+/g;return t.match(s).join(",")}}catch(t){this.Ge.emit("clsDebug","failed getting text color:"+t.message)}return null},this.a$=t=>{if(this.c$[h.default.parentNode(t).tagName])return!1;if(this.l$.length&&h.default.pj(this.l$,t.textContent.toLowerCase()))return!0;if(this.d$){let i=this.o$(t);return!(null===i||!this.u$[i])}this.f$=t=>{const i=t.match(/\d+/g);return i&&parseInt(i[0])>this.te.m$&&i[0]>Math.max(parseInt(i[1]),parseInt(i[2]))+this.te.g$};let i=h.default.parentNode(t);if(i&&i.nodeType===this.Lr.Node.ELEMENT_NODE){const t=this.Lr.getComputedStyle(i);return this.f$(t.color)||this.te.v$&&this.f$(t.backgroundColor)}return!1},this.p$=t=>{let i;for(i=0;i<this.te.ignorableTextRegex.length;i++)if(new RegExp(this.te.ignorableTextRegex[i]).test(t))return!0;for(t=t.replace(/\s+/g," ").toLowerCase(),i=0;i<this.w$.length;i++)if(-1!==t.indexOf(this.w$[i]))return!0;return!1},this.b$=t=>!this.p$(t.textContent)&&t.textContent.trim().length>this.te.y$,this.T$=(t,i)=>{let s=h.default.parentNode(t),e=s.previousElementSibling;for(;e;){if(this.E$[e.tagName])return e;e=e.previousElementSibling}let r,n=this.C$,o=s.parentElement;for(;o&&n--;){if(r=o.querySelectorAll(this.k$),1===r.length)return r[0];if(r.length>1)break;if(o===i)break;o=h.default.parentNode(o)}return i},this.n$=t=>!this.I$[this.Tc.ps(t)]&&this.b$(t)&&this.a$(t),this.S$=t=>{const i=this.Tc.ps(t),s=void 0===this.M$[i]||this.M$[i]!==t.value;return this.M$[i]=t.value,!s},this.SW=t=>{if(!this.D$)return;const i=this.Lz(t.aG);i&&setTimeout((()=>{let s,h,e=this.s$(t),r=[];for(s=0;s<e.length;s++)this.r$(e[s],r);for(s=0;s<r.length;s++){if(h=this.T$(r[s],i),!this.te.j$&&h===i)continue;const t=!this.S$(h);this.E$[h.tagName]&&!t||(this.I$[this.Tc.ps(r[s])]=!0,this.i$(h,r[s].textContent.trim()))}}),1)},this.intercept=t=>{var i=!1;if(this.te.x$.length>0)for(let s=0;s<this.te.x$.length;s++)if(this.iz.matches(t,this.te.x$[s])){i=!0;break}this.D$=this.R$[t.id]||!!this.Lz(t)||i,this.D$&&(this.I$={})},this.A$=()=>{let t;if(this.te.P$.length)for(t=0;t<this.te.P$.length;++t)if(h.default.aC(this.te.P$[t],h.default.Jr(this.Lr.location.href)))return void this.i$(document.body,"url contain form validation signs: "+this.te.P$[t]);if(this.te.L$.length)for(t=0;t<this.te.L$.length;++t)if(h.default.aC(this.te.L$[t],this.Lr.document.title))return void this.i$(document.body,"title contain form validation signs: "+this.te.L$[t])},this.Lr=t,this.Ge=i,this.Tc=s,this.DW=e,this.iz=r,this.te=h.default.Li(n,{m$:120,g$:80,y$:10,O$:[],x$:[],ignoreNodesVisibility:!1,j$:!0,v$:!0,F$:[],ignorableText:["characters left","characters remaining"],ignorableTextRegex:[],P$:[],L$:[],domFormValidationErrorRelatedText:[],domFormValidationTraverseParentsForVisibility:1,minVisibleElementOpacity:.5}),this.w$=this.QZ(this.te.ignorableText),this.R$=h.default.ve.apply(null,this.te.O$),this.t$=h.default.ve.apply(null,this.te.F$),this.c$=h.default.ve.apply(null,this.te.Nq),this.E$=h.default.ve("INPUT","SELECT","TEXTAREA"),this.k$='input:not([type="hidden"]),select,textarea',this.C$=2,this.D$=!1,this.I$={},this.M$={},this.l$=h.default.Rs(this.te.domFormValidationErrorRelatedText),this.u$=h.default.ve.apply(null,this.te.domFormValidationTextByRGB),this.d$=!h.default.kc(this.u$),this.Ge.on("domMutation",this.SW)}}var ti=s("./src/js/libs/lru.js");class ii{constructor(t,i){this.p$=t=>{for(let i=0;i<this.te.ignorableTextRegex.length;i++)if(new RegExp(this.te.ignorableTextRegex[i]).test(t))return!0;t=t.replace(/\s+/g," ").toLowerCase();for(let i=0;i<this.w$.length;i++)if(-1!==t.indexOf(this.w$[i]))return!0;return!1},this.intercept=()=>{const t=jQuery.validator.prototype.showErrors,i=this;jQuery.validator.prototype.showErrors=function(s){try{if(this.errorList&&this.errorList.length>0)for(let t of this.errorList){const s=t.element,e=t.message;if(!i.p$(e)){let t="SAME - NOT REPORTING";s.gbLocalId||(s.gbLocalId=i.N$++);const r=i.B$.dr(s.gbLocalId,e);if(null===r||h.default.oa(r))t="NEW";else if(r!==e)t="UPDATE";else if(r===e){const i=this._$(s);i&&i.length>0&&!h.default.oa(i[0].innerHTML)&&(i[0].innerHTML===e&&jQuery(i[0]).is(":visible")||(t="SHOW"))}"NEW"!==t&&"UPDATE"!==t&&"SHOW"!==t||i.Ge.emit("formValidationError",{element:s,message:e.length>0?e:"NONE"})}}}catch(t){d.default.error("Failed intercepting showErrors for validation error report. "+t.message,t)}t.call(this,s)}},this.Ge=t,this.te=h.default.Li(i,{ignorableText:[],ignorableTextRegex:[]}),this.w$=h.default.Rs(this.te.ignorableText),this.N$=1,this.B$=new ti.default(20)}}var si=s("./src/js/ajaxRecorder/AjaxPredicateFactory.js");class hi{constructor(t,i){this.p$=t=>{for(let i=0;i<this.te.ignorableTextRegex.length;i++)if(new RegExp(this.te.ignorableTextRegex[i]).test(t))return!0;t=t.replace(/\s+/g," ").toLowerCase();for(let i=0;i<this.w$.length;i++)if(-1!==t.indexOf(this.w$[i]))return!0;return!1},this.V$=t=>{if(h.default.Vn()-this.z$<1e3)return;const i=t.target.validationMessage||"NONE";this.p$(i)||(this.z$=h.default.Vn(),this.cs.emit("formValidationError",{element:t.target,message:i}))},this.U$=t=>{for(var i=0;i<t.addedNodes.length;i++)if(window.Node.ELEMENT_NODE==t.addedNodes[i].nodeType){if(t.addedNodes[i][this.H$]||!t.addedNodes[i].matches(this.W$))continue;t.addedNodes[i].addEventListener("invalid",this.V$),t.addedNodes[i][this.H$]=!0}},this.init=()=>{this.cs.on("html5FormValidation:invalid",this.V$),this.cs.on("domMutation",(t=>{setTimeout((()=>{this.U$(t)}),0)}))},this.cs=t,this.te=h.default.Li(i,{ignorableText:[],ignorableTextRegex:[]}),this.w$=h.default.Rs(this.te.ignorableText),this.z$=0,this.W$="input, textarea, select",this.H$="_gb_hasValidationListener"}}class ei{constructor(t,i,s,e,r){this.mD=()=>{const t=["always","never","fqdn","tld","statusGte"];let i;this.G$=()=>"undefined"!=typeof jQuery&&void 0!==jQuery.validator,this.q$=()=>{const i=this.te.Y$.filter((i=>{for(let s=0;s<t.length;++s)if(-1!==i.indexOf(t[s]))return!1;return!0}));let s;if(i&&i.length){const t=new si.default(this.Lr.location.hostname);for(s=0;s<i.length;++s){if(t.create(i[s])({url:h.default.Jr(this.Lr.location.href)}))return!1}}return!0},this.Ge.once("domInit:loaded",(()=>{if(i&&(i.A$(),this.te.domFormValidationCheckAfterPageLoad)){let t=document.querySelector("FORM");t&&i.intercept(t)}if(this.te.jQueryFormValidationEnabled&&this.G$()){new ii(this.Ge,{ignorableText:this.te.ignorableText,ignorableTextRegex:this.te.ignorableTextRegex}).intercept()}})),this.Ge.once("domInit:preloaded",(()=>{if(this.te.html5FormValidation){new hi(this.Ge,{ignorableText:this.te.ignorableText,ignorableTextRegex:this.te.ignorableTextRegex}).init()}this.te.domFormValidationTracking&&this.q$()&&(i=new Qt(this.Lr,this.Ge,this.Tc,this.DW,new l.default(this.Lr.document),{m$:this.te.m$,g$:this.te.g$,O$:this.te.O$,x$:this.te.x$,j$:this.te.j$,v$:this.te.v$,F$:this.te.F$,ignorableText:this.te.ignorableText,ignorableTextRegex:this.te.ignorableTextRegex,Nq:this.te.Nq,P$:this.te.P$,L$:this.te.L$,domFormValidationErrorRelatedText:this.te.domFormValidationErrorRelatedText,domFormValidationTraverseParentsForVisibility:this.te.domFormValidationTraverseParentsForVisibility,minVisibleElementOpacity:this.te.minVisibleElementOpacity,domFormValidationTextByRGB:this.te.domFormValidationTextByRGB}),this.Ge.on("event:mousedown",(t=>i.intercept(t.element))),this.Ge.on("element:focus",(t=>i.intercept(t))))}))},this.initialize=()=>{},this.Lr=t,this.Ge=i,this.Tc=s,this.DW=e,this.te=r,this.mD()}}class ri{constructor(){this.fetch=(t,i,s,r)=>{const n={url:t};if(r.reportByFetch&&window.fetch)try{let h=new Headers,r=new Request(t,{method:"GET",headers:h,mode:"cors",credentials:"include",cls_own:!0});fetch(r).then((function(h){h.ok?h.headers&&(n.headers=Object.fromEntries(h.headers.entries()),n.type=h.headers.get("Content-Type"),h.text().then((t=>{n.content=e.default.sb.eb(t),i(n)})).catch((()=>{d.default.error("Failed to read resource text by fetch for url : "+t)}))):s(t)})).catch((function(s){d.default.error("Failed getting resource data by fetch for url : "+t),n.error=s,i(n)}))}catch(i){return d.default.error("error was detected "+i.message,i),console.log("Failed getting resource data by Ajax for url: "+t+": "+i.message,i),!1}else{const o=new XMLHttpRequest;if(!o)return!1;try{const a=()=>{if(4===o.readyState)if(200===o.status){n.type=o.getResponseHeader("Content-Type"),n.headers={};const t=o.getAllResponseHeaders().split("\n");for(let i=0;i<t.length;i++){const s=t[i].split(":");let h=s[0];if(h&&(h=h.trim()),h){s.splice(0,1);const t=s.join(":");n.headers[h]=t.trim()}}n.content=e.default.sb.eb(o.response),i(n)}else 0===o.status?s(n.url):(d.default.error("Failed getting resource data by Ajax for url : "+t+" status:"+o.status+"  "+o.statusText),n.error="status: "+o.statusText+" ("+o.status+")",i(n))};return r.xhrBypassOnReadyStateChange?(h.default.Nr(o,"load",a),h.default.Nr(o,"error",a),h.default.Nr(o,"abort",a)):o.onreadystatechange=a,o.cls_own=!0,o.open("GET",t,!0),o.responseType="arraybuffer",o.send(),!0}catch(i){return d.default.error("error was detected "+i.message,i),console.log("Failed getting resource data by Ajax for url: "+t+": "+i.message,i),!1}}}}}class ni{constructor(t,i){this.apply=t=>{if(t.match(this.X$))return!0;if(!h.default.startsWith(t,"http")||!this.K$&&h.default.Nb(t)!==window.location.origin)return!0;for(let i=0;i<this.Z$.length;i++)if(-1!==t.indexOf(this.Z$[i]))return!0;return!1},this.K$=t,this.Z$=i||[],this.X$=new RegExp(/.js$/i)}}var oi=s("./src/js/utils/Base64JsonCodec.js");class ai{constructor(t,i,s,e,r,n){if(this.getStats=t=>(t.countRecorded=0,t.countCorsDenied=0,t.recordingAll=!!this.FD.ur("res.all"),t),this.$$=t=>{const i=this.FD.ur(t?this.J$:this.kN);let s;if(this.FD.remove(t?this.J$:this.kN),i)try{s=this.jD.decode(i)}catch(t){d.default.error("Failed parsing JSON for pending resources: "+t.message,t)}return s},this.Q$=(t,i)=>{let s=[];for(let h=0;h<t.length;h++){const e=t[h];!i&&this.tJ(e.name)||(i&&this.iJ(e.name)||("fetch"!==t[h].initiatorType||this.sJ(e.name))&&(("xmlhttprequest"===e.initiatorType||"other"===e.initiatorType)&&e.name.indexOf(".svg")>-1?!i&&this.te.resourceRecordCssOnly||s.push(e):(i&&this.hJ[e.initiatorType]||!i&&this.eJ[e.initiatorType])&&s.push(e)))}return s},this.rJ=t=>{const i=[];for(let s=0;s<t.length;s++)i.indexOf(t[s])<0&&i.push(t[s]);return i},this.nJ=t=>{var i;if(t.error||t.content&&t.content.length){if((null==t||null===(i=t.content)||void 0===i?void 0:i.byteLength)>this.te.oJ){var s,h=null==t||null===(s=t.content)||void 0===s?void 0:s.byteLength;return t.content=`*** REMOVED because content length of ${h} bytes exceeded the configured max payload size of ${this.te.oJ} bytes ***`,void this.Ge.emit("clsDebug",`Data not sent because request would result in 413 Entity Too Large. DATA: ${JSON.stringify(t)}`)}this.stats.countRecorded++,this.Ge.emit("saveResourceEvent",t)}},this.aJ=t=>{this.stats.countCorsDenied++,this.Ge.emit("saveCorsDeniedEvent",t)},this.cJ=t=>{this.Ge.emit("saveResourceUrls",t)},this.lJ=()=>{let t;if(this.te.dJ&&(t=this.$$(),t))for(let i=0;i<t.length;i++)if(!this.uJ.fetch(t[i],this.nJ,this.aJ,this.te)){d.default.error("Failed executing an XHR request for fetching a resource. Breaking the fetch loop.");break}this.te.fJ&&(t=this.$$(!0),t&&this.cJ(this.rJ(t)))},this.mJ=()=>{let t,i=!1,s=!1,h=this.te.gJ,e=this.te.vJ;if(this.FD.ur("res.all")&&(i=!0,s=!0,h=Number.MAX_VALUE,e=Number.MAX_VALUE),i|=this.te.dJ&&Math.random()<this.te.pJ,s|=this.te.fJ&&Math.random()<this.te.wJ,i||s){const r=this.iA.performance.getEntriesByType("resource");let n=[],o=[];i&&(n=this.Q$(r,!1)),s&&(o=this.Q$(r,!0));let a,c=this.$$(!1)||[],l=this.$$(!0)||[];if(i){for(t=0;t<h&&n.length>0&&!(c.length>=e);t++)a=Math.floor(Math.random()*n.length),c.push(n[a].name),n.splice(a,1);this.FD.dr(this.kN,this.jD.encode(c))}if(s){for(t=0;t<o.length;t++)l.indexOf(o[t].name)<0&&l.push(o[t].name);this.FD.dr(this.J$,this.jD.encode(l))}}},this.bJ=()=>{this.FD.dr("res.all","true")},this.yJ=()=>{this.FD.remove("res.all")},this.TJ=this.nJ,this.iA=t,this.Ge=s,this.FD=n,this.uJ=new ri,this.tJ=new ni(e.resourcesRecordAllowCors,e.resourceIgnoreWhenUrlContains).apply,this.iJ=new ni(!0,e.resourceIgnoreWhenUrlContains).apply,this.jD=new oi.default(i.Is),this.stats=this.getStats(r||{}),this.kN="res.pending",this.J$="resurl.pending",this.te=e,e.resourceRecordCssOnly?this.eJ=h.default.ve("link","css"):this.eJ=h.default.ve("link","css","font","img","input","use","fetch"),this.hJ=h.default.ve("link","css","font","img","input","use","fetch"),e.electResourcesOnClear)if(this.iA.Performance.prototype.clearResourceTimings){const t=this.iA.Performance.prototype.clearResourceTimings,i=this;this.iA.Performance.prototype.clearResourceTimings=function(){try{i.mJ()}catch(t){d.default.error("faild to run hook on Performance.clearResourceTimings: "+t)}t.apply(this,arguments)}}else if(this.iA.Performance.prototype.webkitClearResourceTimings){const t=this.iA.Performance.prototype.webkitClearResourceTimings,i=this;this.iA.Performance.prototype.webkitClearResourceTimings=function(){try{i.mJ()}catch(t){d.default.error("faild to run hook on Performance.webkitClearResourceTimings: "+t)}t.apply(this,arguments)}}this.sJ=t=>/\.(jpg|jpeg|png|webp|avif|gif|svg)$/.test(t)}}class ci{constructor(t,i,s,e){this.EJ=t=>this.CJ[t]?this.kJ:this.IJ[t]?this.SJ:this.MJ[t]?this.DJ:this.jJ,this.xJ=(t,i)=>{const s=t.split(".");let h=s[s.length-1].toLowerCase();return h.indexOf("?")>-1&&(h=h.split("?")[0]),"script"===i?this.RJ:"video"===i||"audio"===i?this.AJ:"img"===i||"svg"===i?this.kJ:this.PJ[i]?this.LJ:"link"===i||"css"===i||"other"!==i?this.EJ(h):this.jJ},this.OJ=t=>{let i;t.hostname=h.default.Ae(t.name),t.path=h.default.Hw(t.name),i=t.path.split("/"),t.fileName=i[i.length-1]},this.FJ=t=>{if(t.name){if(!t.resourceType){const i=this.xJ(t.name,t.initiatorType);i&&(t.resourceType=i.toLowerCase())}this.OJ(t),t.isSameTLD=h.default.Re(this.Lr.location.host)===h.default.Re(t.hostname)}t.nextHopProtocol&&(t.protocol=t.nextHopProtocol),delete t.nextHopProtocol,t.isFromCache=0===t.transferSize&&window.location.host===t.hostname},this.NJ=t=>{delete t.loadMode,delete t.isSuccessful,delete t.resourceType},this.BJ=(t,i,s)=>{const h={};for(let s=0;s<i.length;s++)void 0!==t[i[s]]&&(h[i[s]]=t[i[s]]);return"resource"===s&&"document"!==h.name&&this.FJ(h),this.NJ(t),h},this._J=()=>{const t={},i=this.Lr.document.querySelectorAll('script[src][async],script[src][defer],link[rel="preload"],img[loading]');for(let s=0;s<i.length;s++)switch(i[s].tagName){case"SCRIPT":t[i[s].src]=i[s].async?"async":i[s].defer?"defer":"sync";break;case"LINK":t[i[s].href]="preload";break;case"IMG":t[i[s].src]="lazy"}return t},this.VJ=()=>{let t,i;const s=this.Lr.document.querySelectorAll('link[rel="stylesheet"]');for(t=0;t<s.length;t++)i=s[t].href||s[t].name,this.zJ[i]=!0},this.UJ=t=>{if(!t)return!1;const i=t.name;return-1===i.indexOf(this.Ak)&&(!this.HJ[i]||this.HJ[i].startTime!==t.startTime)},this.WJ=t=>{t.initiatorType=t.initiatorType||t.entryType,t.isSuccessful=!0,t.isSameTLD=!0,t.resourceType="other",t.duration=t.duration||t.responseEnd-t.redirectStart,"document"===t.name&&(t.name=h.default.Jr(window.location.href)||t.name,this.OJ(t))},this.GJ=t=>({startTime:0,connectEnd:t.connectEnd,connectStart:t.connectStart,domainLookupEnd:t.domainLookupEnd,domainLookupStart:t.domainLookupStart,entryType:"navigation",fetchStart:t.fetchStart,initiatorType:"navigation",name:h.default.Jr(window.location.href),redirectEnd:t.redirectEnd,redirectStart:t.redirectStart,requestStart:t.requestStart,responseEnd:t.responseEnd,responseStart:t.responseStart,secureConnectionStart:t.secureConnectionStart}),this.qJ=(t,i,s,e,r)=>{let n=[];const o=this.Lr.performance.getEntriesByType(i);let a,c;if(n=e&&r?o.filter((t=>void 0!==r[t[e]])):o,"resource"===i){let t=this._J();for(this.VJ(),"function"==typeof this.Lr.performance.getEntriesByType&&this.Lr.performance.getEntriesByType("navigation")[0]?n.push(this.Lr.performance.getEntriesByType("navigation")[0]):h.default.ll(this.Lr.navigator.userAgent)&&n.push(this.GJ(this.Lr.performance.timing)),a=0;a<n.length;a++)this.UJ(n[a])&&(c=n[a],"script"===c.initiatorType?c.loadMode=t[c.name]||"sync":"link"!==c.initiatorType&&"img"!==c.initiatorType||(t[c.name]&&(c.loadMode=t[c.name]),"link"===c.initiatorType&&this.zJ[c.name]&&(c.resourceType=this.DJ)),c.isSuccessful=!(c.transferSize>0&&0===c.duration));this.zJ={}}for(t[i]=[],a=0;a<n.length;a++){const h=n[a];let e;this.UJ(h)&&(e=this.BJ(h,s,i),this.HJ[h.name]={startTime:h.startTime},"navigation"!==e.initiatorType&&"navigation"!==e.entryType||this.WJ(e),t[i].push(e))}},this.YJ=()=>this.Lr.performance.timing,this.XJ=(t,i)=>{try{const s={};this.KJ="pageload"===i;for(let t=0;t<this.di.length;t++)this.qJ(s,this.di[t].type,this.di[t].properties,this.di[t].ZJ,this.di[t].$J);if(0===Object.keys(s).length||s.resource&&0===s.resource.length)return;t&&(this.HJ={}),this.KJ=!1,this.JJ&&(s.ect=this.JJ),this.QJ&&(s.rtt=this.QJ),s.pagePerformance=this.YJ(),s.version=this.tQ,s.causedBy=i,this.Ge.emit("resourcesWaterfall",s)}catch(t){d.default.error("Exception while trying to report resources waterfall. Error: "+t.message,t),this.Ge.emit("clsDebug","error trying to report resources waterfall. Exception message: "+t.message)}},this.Lr=t,this.Ge=i,this.di=s,this.Ak=e,this.HJ={},this.zJ={},this.KJ=!1,this.JJ=void 0,this.QJ=void 0,this.tQ=1,this.AJ="media",this.kJ="img",this.SJ="font",this.DJ="css",this.RJ="js",this.LJ="ajax",this.jJ="other",this.CJ=h.default.ve("png","gif","jpg","jpeg","svg","tif","tiff","bmp","webp"),this.IJ=h.default.ve("woff","woff2","ttf","otf","eot"),this.PJ=h.default.ve("xmlhttprequest","fetch","beacon"),this.MJ=h.default.ve("css"),this.Lr.navigator.connection&&(this.JJ=this.Lr.navigator.connection.effectiveType,this.QJ=this.Lr.navigator.connection.rtt),this.iQ=this.xJ}}var li=s("./src/js/config/enableByChances.js");class di{constructor(t,i){if(this.sQ=()=>{const t=this.Lr.performance.getEntriesByType("resource");t&&t.length>=this.hQ&&this.eQ()},this.eQ=()=>{if(this.te.resourceBufferIncreaseBy&&this.te.resourceBufferIncreaseBy>0&&this.Lr.performance.setResourceTimingBufferSize){const t=this.Lr.performance.getEntriesByType("resource").length;t>this.rQ&&(this.rQ=t),this.rQ+=this.te.resourceBufferIncreaseBy,this.hQ+=this.te.resourceBufferIncreaseBy,this.Lr.performance.setResourceTimingBufferSize(this.rQ)}else this.Lr.performance.clearResourceTimings()},this.Lr=t,this.te=h.default.Li(i,{resourceBufferCheckTime:5e3,nQ:140,resourceBufferIncreaseBy:100}),this.rQ=150,this.hQ=this.te.maxResourcesBeforeFlush,this.Lr.performance)if(Object.getOwnPropertyDescriptor(this.Lr.Performance.prototype,"onresourcetimingbufferfull"))this.Lr.performance.onresourcetimingbufferfull=this.eQ;else if(this.Lr.PerformanceObserver){new this.Lr.PerformanceObserver(this.sQ).observe({oQ:["resource"]})}else setInterval(this.sQ,this.te.resourceBufferCheckTime)}}class ui{constructor(t,i,s,e,r,n,o){this.Or=()=>{const t=this.te.versionResources&&!this.te.resourceTimingRecordEnabled;if(t||this.te.resourcesRecordEnabled&&void 0!==window.XMLHttpRequest){const i=5e3;this.aQ=new ai(this.Lr,this.jo,this.Ge,{pJ:this.te.resourcesRecordChance,wJ:this.te.versionResourcesEnabledByChance,gJ:this.te.resourcesRecordCount,vJ:5,resourceRecordCssOnly:this.te.resourceRecordCssOnly,dJ:this.te.resourcesRecordEnabled,fJ:t,electResourcesOnClear:this.te.electResourcesOnClear,resourcesRecordAllowCors:this.te.resourcesRecordAllowCors,resourceIgnoreWhenUrlContains:this.te.resourceIgnoreWhenUrlContains,reportByFetch:this.te.reportByFetch,xhrBypassOnReadyStateChange:this.te.xhrBypassOnReadyStateChange,oJ:this.jo.cQ},this.pk,this.FD),this.Ge.once("domInit:loaded",(()=>{setTimeout(this.aQ.lJ,i)})),this.Ge.on("event:unload",this.aQ.mJ)}if(this.te.resourceTimingRecordEnabled&&(new li.default).apply(this.te.resourceTimingRecordEnabledByChance,this.lQ,this.Ya,"performanceRecord",this.te.saveChancesByCookie)&&(this.dQ=new ci(this.Lr,this.Ge,[{type:"resource",properties:["name","startTime","requestStart","responseStart","responseEnd","duration","decodedBodySize","loadMode","nextHopProtocol","initiatorType","transferSize","redirectStart","fetchStart","domainLookupStart","domainLookupEnd","redirectEnd","connectStart","resourceType","entryType","connectEnd","secureConnectionStart","isSuccessful"],ZJ:"initiatorType",$J:this.te.resourceTimingRecordAjax?h.default.ve("link","css","font","img","input","script","xmlhttprequest","fetch","beacon"):h.default.ve("link","css","font","img","input","body","script")}],this.te.reportURI),this.Ge.once("domInit:loaded",(()=>this.dQ.XJ(!1,"pageload"))),this.Ge.on("segmentChanged",(()=>this.dQ.XJ(!1,"segment"))),this.Ge.on("event:unload",(()=>this.dQ.XJ(!1,"unload")))),this.dQ||this.aQ){if(this.te.electResourcesOnClear)if(this.Lr.Performance.prototype.clearResourceTimings){const t=this.Lr.Performance.prototype.clearResourceTimings,i=this;this.Lr.Performance.prototype.clearResourceTimings=function(){try{i.dQ&&i.dQ.XJ(!0,"clearResources"),i.aQ&&i.aQ.mJ()}catch(t){d.default.error("failed to run hook on Performance.clearResourceTimings: "+t)}t.apply(this,arguments)}}else if(this.Lr.Performance.prototype.webkitClearResourceTimings){const t=i.Lr.Performance.prototype.webkitClearResourceTimings,i=this;this.Lr.Performance.prototype.webkitClearResourceTimings=function(){try{i.dQ&&i.dQ.XJ(!0,"clearResources"),i.aQ&&i.aQ.mJ()}catch(t){d.default.error("failed to run hook on Performance.webkitClearResourceTimings: "+t)}t.apply(this,arguments)}}this.te.isCheckResourceBuffer&&new di(this.Lr,{resourceBufferCheckTime:this.te.resourceBufferCheckTime,maxResourcesBeforeFlush:this.te.maxResourcesBeforeFlush,resourceBufferIncreaseBy:this.te.resourceBufferIncreaseBy})}},this.uQ=()=>{this.aQ?(console.log("Exiting full resources recording mode."),this.aQ.yJ()):console.log("Please allow resource recording first.")},this.fQ=()=>{this.aQ?(console.log("Entering full resources recording mode."),this.aQ.bJ()):console.log("Please allow resource recording first.")},this.initialize=()=>{},this.Lr=t,this.Ge=i,this.lQ=s,this.FD=e,this.jo=r,this.Ya=n,this.te=o,this.aQ=void 0,this.dQ=void 0,this.pk={},this.Or(),this.startRecordingAll=this.fQ,this.stopRecordingAll=this.uQ,this.stats=()=>this.pk}}var fi=s("./src/js/libs/asmcrypto.aes.cbc.js"),mi=s("./src/js/censor/CompositeValueCensor.js"),gi=s("./src/js/censor/valueCensorScheme.js");class vi{constructor(t,i,s){this.mQ=(()=>{let t=0;return{gQ:()=>++t,vQ:()=>--t}})(),this.pQ=t=>{let i;for(i=0;i<this.te.wQ.length;i++)if(t.indexOf(this.te.wQ[i])>=0)return!0;return!1},this.bQ=t=>{t.visible?this.yQ(t):this.TQ(t)},this.yQ=t=>{!0===t.visible&&this.EQ.Wr()||t.CQ&&this.pQ(t.frame.contentWindow.location.href)&&1===this.mQ.gQ()&&this.Ge.emit("frame:blackoutEnter",t.frame)},this.TQ=t=>{(!1!==t.visible||this.EQ.Wr())&&t.CQ&&this.pQ(t.frame.contentWindow.location.href)&&0===this.mQ.vQ()&&this.Ge.emit("frame:blackoutLeave",t.frame)},this.Ge=t,this.EQ=i,this.te=h.default.Li(s,{wQ:[]}),this.Ge.on("frame:wired",this.yQ),this.Ge.on("frame:load",this.yQ),this.Ge.on("frame:unload",this.TQ),this.Ge.on("frame:visibilityChange",this.bQ)}}var pi=s("./src/js/iframe/iframeHelper.js");class wi{constructor(t,i,s,e,r,n,o,a,c,l,d,u,f,m,g){this.kQ=()=>{const t=this;this.IQ&&this.IQ.kQ((function(i,s){s?t.pk.injected++:t.pk.injectionFailed++}))},this.SQ=t=>{this.MQ(t);const i=this.jQ.DQ(t);this.options.xQ&&this.IQ&&i&&this.IQ.inject(t),this.pk.detected++},this.RQ=()=>{this.ni.emit("pageUpdate"),this.AQ()},this.AQ=()=>{this.domTrackingStarted&&this.LQ.PQ({type:"pageUpdate"})},this.OQ=(t,i)=>{this.FQ=t,this.FQ.origin=i,this.FQ.dh&&this.ni.emit("clseUpdate",this.FQ.dh),this.FQ.NQ&&this.ni.emit("rtoUpdate",this.FQ.NQ),this.ni.emit("parentWindowInfo",this.FQ),t.BQ&&this.blackoutManager.forceBlackoutEnter(),this.pk.handshakeWithParent.completedAt=h.default.Vn(),this.pk.handshakeWithParent.info=this.FQ,this.LQ._Q(),this.VQ(t.parentPageId,t.containerId),this.ni.emit("iframesHandshakeDone",this.FQ)},this.zQ=()=>{this.ni.emit("clsDebug","handshake timeout"),this.pk.handshakeWithParent.timeout=!0,this.VQ()},this.Fm=()=>{this.UQ.start(),this.TH&&(this.pk.handshakeWithParent.startedAt=h.default.Vn(),this.WQ.HQ(this.window.parent,this.OQ,this.zQ))},this.GQ=()=>{this.domTrackingStarted=!0,this.qQ({type:"domTrackingStarted"})},this.qQ=t=>{this.FQ&&this.LQ.notify(this.window.parent,t,this.FQ.origin)},this.YQ=t=>{this.domTrackingStarted&&"pageUpdate"!==t.type&&-1!==this.Pd.H_.indexOf(t.type)&&this.AQ()},this.XQ=t=>{t.frame.KQ=!1,setTimeout((()=>{this.ni.emit("sendStoragePendingReports")}),1e3)},this.ZQ=t=>{var i=t.frame;this.IQ&&this.options.xQ&&t.CQ&&this.IQ.inject(i)},this.$Q=t=>{this.options.xQ&&!t.frame.KQ&&t.visible&&this.IQ.inject(t.frame)},this.JQ=()=>{this.ni.emit("local:forceBlackoutEnter"),this.LQ.PQ({type:"forceBlackoutEnter"})},this.QQ=()=>{this.ni.emit("local:forceBlackoutLeave"),this.LQ.PQ({type:"forceBlackoutLeave"})},this.t0=()=>{this.window===this.window.top?this.i0.onPossibleBlackoutEnter():this.LQ.notify(this.window.top,{type:"onPossibleBlackoutEnter"})},this.s0=()=>{this.window===this.window.top?this.i0.onPossibleBlackoutLeave():this.LQ.notify(this.window.top,{type:"onPossibleBlackoutLeave"})},this.onFramePort=t=>{this.LQ.notify(this.window.top,{type:"onFramePort",wx:t.wx,xT:t.xT})},this.h0=t=>{this.LQ.PQ({type:"queryParamUpdate",wx:t})},this.e0=t=>{this.LQ.PQ({type:"clseUpdate",wx:t})},this.r0=t=>{this.LQ.PQ({type:"rtoUpdate",wx:t})},this.n0=()=>{this.LQ.PQ({type:"notifyStopRecording"})},this.o0=()=>{this.LQ.PQ({type:"notifyStartRecording"})},this.forceFlush=()=>{this.LQ.PQ({type:"forceFlush"})},this.a0=()=>{this.ni.on("frame:visibilityChange",this.$Q)},this.c0=t=>{this.FQ=t},this.l0=()=>this.domTrackingStarted,this.d0=()=>{this.domTrackingStarted=!0},this.u0=()=>{this.TH=!0},this.f0=()=>{this.TH=!1},this.window=t,this.ni=i,this.GE=s,this.Pd=e,this.options={},this.options.m0=g.iframesSkipHidden,this.options.xQ=g.iframesAutoInject,this.i0=r,this.UQ=n,this.jQ=o,this.IQ=a,this.LQ=c,this.blackoutManager=l,this.WQ=d,this.g0=u,this.MQ=f,this.VQ=m,new vi(i,l,{wQ:g.iframesBlackoutWhenLocationContains}),this.pk={detected:0,injected:0,injectionFailed:0,handshakesWithChildren:{success:0,error:0},handshakeWithParent:{startedAt:-1,completedAt:-1,timeout:!1}},this.FQ,this.TH=t.top!==t,this.kQ(),this.domTrackingStarted,this.WQ.v0((t=>{this.pk.handshakesWithChildren.success+=t?1:0,this.pk.handshakesWithChildren.error+=t?0:1,this.domTrackingStarted&&i.emit("pageUpdate")})),this.initialize=()=>{this.TH||this.VQ()},this.stats=()=>this.pk,this.IQ&&this.options.m0&&i.on("frame:visibilityChange",this.$Q),i.on("saveEvent",this.YQ),i.on("frame:detected",this.SQ),i.on("frame:domChange",this.RQ),i.once("domInit:loaded",this.Fm),i.on("domTrackingStarted",this.GQ),i.on("frame:unload",this.XQ),i.on("frame:load",this.ZQ),i.on("frame:blackoutEnter",this.t0),i.on("frame:blackoutLeave",this.s0),i.on("frame:port",this.onFramePort),i.on("notifyAll:blackoutEnter",this.JQ),i.on("notifyAll:blackoutLeave",this.QQ),i.on("iFramesForceFlush",this.forceFlush),i.on("session:new",this.h0),i.on("remoteClseConf",this.e0),i.on("remoteRtoConf",this.r0),i.on("recordingStopped",this.n0),i.on("recordingStarted",this.o0)}}class bi{constructor(t,i,s,e,r){this.mD=()=>{try{const t=this.Vm.Um(!0);t||this.p0("Failed creating XHR object for fetching external configuration");const i=()=>{if(4===t.readyState)if(200===t.status){const i=t.getResponseHeader("Content-Type");i&&-1!==i.indexOf("application/json")&&this.w0(t.response)}else{const i="Failed getting external configuration for url : "+this.we+" status:"+t.status+"  "+t.statusText;this.p0(i)}};this.te.xhrBypassOnReadyStateChange?(h.default.Nr(t,"load",i),h.default.Nr(t,"error",i),h.default.Nr(t,"abort",i)):t.onreadystatechange=i,t.open("GET",this.we,!0),setTimeout((()=>{try{t.send()}catch(t){d.default.error("Failed sending request to url "+this.we+": "+t.message,t)}}),0)}catch(t){d.default.error("error was detected "+t.message,t),console.log("Failed getting external configuration for url: "+this.we+": "+t.message,t),this.p0(t.message)}},this.Vm=t,this.we=i,this.te=s,this.w0=e,this.p0=r,this.mD()}}class yi{constructor(t,i,s,e,r,n){if(this.b0=t=>{var i;try{i=JSON.parse(t)}catch(t){return void d.default.error("Failed parsing external configuration JSON: "+t.message,t)}void 0!==this.y0&&void 0!==i["hash "]&&this.y0===i.hash||(this.a_.dr("js.conf",this.jx.encode(i)),this.T0(i),this.y0=i.hash)},this.Pd=t,this.a_=s,this.jx=e,this.options=n,this.E0=bi,this.ni=r,this.y0,this.Pd.G_&&this.Pd.G_.src&&this.options.configPath){this.C0();var o=h.default.Nb(this.Pd.G_.src);new this.E0(i,h.default.Bn(o,this.options.configPath),this.options,this.b0,this.k0.bind(this))}}k0(t){this.ni.emit("clsDebug",t)}C0(){var t,i=this.a_.ur("js.conf");if(i)try{t=this.jx.decode(i),this.y0=t.hash,this.T0(t)}catch(t){d.default.error("failed parsing JSON of external configuration: "+t.message,t)}}T0(t){if(t){for(var i in t)"hash"!==i&&(this.options[i]=t[i])}}}var Ti=s("./src/js/censor/mask/UriMasker.js"),Ei=s("./src/js/dom/cloners/DomCloningHook.js"),Ci=s("./src/js/censor/encrypt/encryptionUtils.js");class ki{constructor(t,i,s,h,e){this.I0=()=>{var t,i,s,h,e={passive:!0,capture:!0},r=new Date,n=function(){h=[],i=-1,t=null,l(addEventListener)},o=function(h,e){t||(t=e,i=h,s=new Date,l(removeEventListener),a())},a=function(){if(i>=0&&i<s-r){var e={entryType:"first-input",name:t.type,target:t.target,cancelable:t.cancelable,startTime:t.timeStamp,processingStart:t.timeStamp+i};h.forEach((function(t){t(e)})),h=[]}},c=function(t){if(t.cancelable){var i=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,i){var s=function(){o(t,i),r()},h=function(){r()},r=function(){removeEventListener("pointerup",s,e),removeEventListener("pointercancel",h,e)};addEventListener("pointerup",s,e),addEventListener("pointercancel",h,e)}(i,t):o(i,t)}},l=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach((function(i){return t(i,c,e)}))},d="hidden"===document.visibilityState?0:1/0;addEventListener("visibilitychange",(function t(i){"hidden"===document.visibilityState&&(d=i.timeStamp,removeEventListener("visibilitychange",t,!0))}),!0),n(),this.S0=this.S0||{},this.S0.M0=function(t){h.push(t),a()},this.S0.D0=n,Object.defineProperty(this.S0,"j0",{get:function(){return d},enumerable:!0,configurable:!0})},this.track=()=>{try{this.S0.x0((t=>{this.R0++,void 0!==t.value&&(this.A0[t.name]=t.value)}),!0)}catch(t){d.default.error("failed getting CLS. Is browser supported by lib? "+t.message,t)}try{this.S0.P0((t=>{void 0!==t.value&&t.value<this.L0&&(this.A0[t.name]=t.value)}))}catch(t){d.default.error("failed getting FCP. Is browser supported by lib? "+t.message,t)}try{this.S0.O0((t=>{this.F0++,t.value>this.N0&&void 0!==t.value&&t.value<this.B0&&(this.A0[t.name]=t.value)}),!0)}catch(t){d.default.error("failed getting LCP. Is browser supported by lib? "+t.message,t)}try{this.S0._0((t=>{void 0!==t.value&&(this.A0[t.name]=t.value)}))}catch(t){d.default.error("failed getting TTFB. Is browser supported by lib? "+t.message,t)}try{this.S0.V0((t=>{void 0!==t.value&&(this.A0[t.name]=t.value)}),{z0:!0,U0:0})}catch(t){d.default.error("failed getting INP. Is browser supported by lib? "+t.message,t)}},this.dg=()=>{const t={};this.A0.NCLS=this.R0,this.A0.NLCP=this.F0,this.A0.FID&&delete this.A0.FID,this.JJ&&(t.ect=this.JJ),this.QJ&&(t.rtt=this.QJ),t.Kv=JSON.stringify(this.A0),this.Ge.emit("webVitals",t)},this.Lr=t,this.Ge=i,this.L0=h,this.B0=e,this.A0={},this.N0=0,this.R0=0,this.F0=0,this.S0=s,this.Lr.navigator.connection&&(this.JJ=this.Lr.navigator.connection.effectiveType,this.QJ=t.navigator.connection.rtt)}}var Ii,Si,Mi,Di,ji,xi=-1,Ri=function(t){addEventListener("pageshow",(function(i){i.persisted&&(xi=i.timeStamp,t(i))}),!0)},Ai=function(){var t=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},Pi=function(){var t=Ai();return t&&t.activationStart||0},Li=function(t,i){var s=Ai(),h="navigate";return xi>=0?h="back-forward-cache":s&&(document.prerendering||Pi()>0?h="prerender":document.wasDiscarded?h="restore":s.type&&(h=s.type.replace(/_/g,"-"))),{name:t,value:void 0===i?-1:i,H0:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:h}},Oi=function(t,i,s){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var h=new PerformanceObserver((function(t){Promise.resolve().then((function(){i(t.getEntries())}))}));return h.observe(Object.assign({type:t,buffered:!0},s||{})),h}}catch(t){}},Fi=function(t,i,s,h){var e,r;return function(n){i.value>=0&&(n||h)&&((r=i.value-(e||0))||void 0===e)&&(e=i.value,i.delta=r,i.H0=function(t,i){return t>i[1]?"poor":t>i[0]?"needs-improvement":"good"}(i.value,s),t(i))}},Ni=function(t){requestAnimationFrame((function(){return requestAnimationFrame((function(){return t()}))}))},Bi=function(t){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&t()}))},_i=function(t){var i=!1;return function(){i||(t(),i=!0)}},Vi=-1,zi=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},Ui=function(t){"hidden"===document.visibilityState&&Vi>-1&&(Vi="visibilitychange"===t.type?t.timeStamp:0,Wi())},Hi=function(){addEventListener("visibilitychange",Ui,!0),addEventListener("prerenderingchange",Ui,!0)},Wi=function(){removeEventListener("visibilitychange",Ui,!0),removeEventListener("prerenderingchange",Ui,!0)},Gi=function(){return Vi<0&&(Vi=zi(),Hi(),Ri((function(){setTimeout((function(){Vi=zi(),Hi()}),0)}))),{get j0(){return Vi}}},qi=function(t){document.prerendering?addEventListener("prerenderingchange",(function(){return t()}),!0):t()},Yi=[1800,3e3],Xi=function(t,i){i=i||{},qi((function(){var s,h=Gi(),e=Li("FCP"),r=Oi("paint",(function(t){t.forEach((function(t){"first-contentful-paint"===t.name&&(r.disconnect(),t.startTime<h.j0&&(e.value=Math.max(t.startTime-Pi(),0),e.entries.push(t),s(!0)))}))}));r&&(s=Fi(t,e,Yi,i.z0),Ri((function(h){e=Li("FCP"),s=Fi(t,e,Yi,i.z0),Ni((function(){e.value=performance.now()-h.timeStamp,s(!0)}))})))}))},Ki=[.1,.25],Zi=0,$i=1/0,Ji=0,Qi=function(t){t.forEach((function(t){t.interactionId&&($i=Math.min($i,t.interactionId),Ji=Math.max(Ji,t.interactionId),Zi=Ji?(Ji-$i)/7+1:0)}))},ts=function(){"W0"in performance||Ii||(Ii=Oi("event",Qi,{type:"event",buffered:!0,U0:0}))},is=[],ss=new Map,hs=0,es=function(){return(Ii?Zi:performance.W0||0)-hs},rs=[],ns=function(t){if(rs.forEach((function(i){return i(t)})),t.interactionId||"first-input"===t.entryType){var i=is[is.length-1],s=ss.get(t.interactionId);if(s||is.length<10||t.duration>i.latency){if(s)t.duration>s.latency?(s.entries=[t],s.latency=t.duration):t.duration===s.latency&&t.startTime===s.entries[0].startTime&&s.entries.push(t);else{var h={id:t.interactionId,latency:t.duration,entries:[t]};ss.set(h.id,h),is.push(h)}is.sort((function(t,i){return i.latency-t.latency})),is.length>10&&is.splice(10).forEach((function(t){return ss.delete(t.id)}))}}},os=function(t){var i=self.requestIdleCallback||self.setTimeout,s=-1;return t=_i(t),"hidden"===document.visibilityState?t():(s=i(t),Bi(t)),s},as=[200,500],cs=[2500,4e3],ls={},ds=[800,1800],us=function t(i){document.prerendering?qi((function(){return t(i)})):"complete"!==document.readyState?addEventListener("load",(function(){return t(i)}),!0):setTimeout(i,0)},fs={passive:!0,capture:!0},ms=new Date,gs=function(t,i){Si||(Si=i,Mi=t,Di=new Date,ws(removeEventListener),vs())},vs=function(){if(Mi>=0&&Mi<Di-ms){var t={entryType:"first-input",name:Si.type,target:Si.target,cancelable:Si.cancelable,startTime:Si.timeStamp,processingStart:Si.timeStamp+Mi};ji.forEach((function(i){i(t)})),ji=[]}},ps=function(t){if(t.cancelable){var i=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,i){var s=function(){gs(t,i),e()},h=function(){e()},e=function(){removeEventListener("pointerup",s,fs),removeEventListener("pointercancel",h,fs)};addEventListener("pointerup",s,fs),addEventListener("pointercancel",h,fs)}(i,t):gs(i,t)}},ws=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach((function(i){return t(i,ps,fs)}))},bs=[100,300],ys={x0:function(t,i){i=i||{},Xi(_i((function(){var s,h=Li("CLS",0),e=0,r=[],n=function(t){t.forEach((function(t){if(!t.hadRecentInput){var i=r[0],s=r[r.length-1];e&&t.startTime-s.startTime<1e3&&t.startTime-i.startTime<5e3?(e+=t.value,r.push(t)):(e=t.value,r=[t])}})),e>h.value&&(h.value=e,h.entries=r,s())},o=Oi("layout-shift",n);o&&(s=Fi(t,h,Ki,i.z0),Bi((function(){n(o.takeRecords()),s(!0)})),Ri((function(){e=0,h=Li("CLS",0),s=Fi(t,h,Ki,i.z0),Ni((function(){return s()}))})),setTimeout(s,0))})))},P0:Xi,G0:function(t,i){i=i||{},qi((function(){var s,h=Gi(),e=Li("FID"),r=function(t){t.startTime<h.j0&&(e.value=t.processingStart-t.startTime,e.entries.push(t),s(!0))},n=function(t){t.forEach(r)},o=Oi("first-input",n);s=Fi(t,e,bs,i.z0),o&&(Bi(_i((function(){n(o.takeRecords()),o.disconnect()}))),Ri((function(){var h;e=Li("FID"),s=Fi(t,e,bs,i.z0),ji=[],Mi=-1,Si=null,ws(addEventListener),h=r,ji.push(h),vs()})))}))},V0:function(t,i){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(i=i||{},qi((function(){var s;ts();var h,e=Li("INP"),r=function(t){os((function(){t.forEach(ns);var i,s=(i=Math.min(is.length-1,Math.floor(es()/50)),is[i]);s&&s.latency!==e.value&&(e.value=s.latency,e.entries=s.entries,h())}))},n=Oi("event",r,{U0:null!==(s=i.U0)&&void 0!==s?s:40});h=Fi(t,e,as,i.z0),n&&(n.observe({type:"first-input",buffered:!0}),Bi((function(){r(n.takeRecords()),h(!0)})),Ri((function(){hs=0,is.length=0,ss.clear(),e=Li("INP"),h=Fi(t,e,as,i.z0)})))})))},O0:function(t,i){i=i||{},qi((function(){var s,h=Gi(),e=Li("LCP"),r=function(t){i.z0||(t=t.slice(-1)),t.forEach((function(t){t.startTime<h.j0&&(e.value=Math.max(t.startTime-Pi(),0),e.entries=[t],s())}))},n=Oi("largest-contentful-paint",r);if(n){s=Fi(t,e,cs,i.z0);var o=_i((function(){ls[e.id]||(r(n.takeRecords()),n.disconnect(),ls[e.id]=!0,s(!0))}));["keydown","click"].forEach((function(t){addEventListener(t,(function(){return os(o)}),!0)})),Bi(o),Ri((function(h){e=Li("LCP"),s=Fi(t,e,cs,i.z0),Ni((function(){e.value=performance.now()-h.timeStamp,ls[e.id]=!0,s(!0)}))}))}}))},_0:function(t,i){i=i||{};var s=Li("TTFB"),h=Fi(t,s,ds,i.z0);us((function(){var e=Ai();e&&(s.value=Math.max(e.responseStart-Pi(),0),s.entries=[e],h(!0),Ri((function(){s=Li("TTFB",0),(h=Fi(t,s,ds,i.z0))(!0)})))}))}};class Ts{constructor(t,i,s,h){this.initialize=()=>{},this.Ge=t,this.q0=i,this.Y0=new ki(window,t,ys,s,h),this.Y0.I0(),this.X0,this.K0=()=>{this.X0&&clearTimeout(this.X0),t.off("event:unload",this.K0),t.off("event:visibilitychange",this.K0),this.Y0.dg()},this.Z0=()=>{this.Y0.track(),t.on("event:unload",this.K0),t.on("event:visibilitychange",this.K0),this.X0=setTimeout(this.K0,this.q0)},this.Ge.on("domInit:loaded",this.Z0)}}class Es{constructor(t,i,s){this.$0=()=>{this.J0=this.Q0?h.default.es(this.pn.title,(t=>{this.t1(t)})):this.pn.title},this.ji=()=>{this.i1()||setTimeout((()=>{this.Ge.emit("titleChanged")}),0)},this.t1=(t,i)=>Y.default.ss(t,null,i),this.i1=()=>{const t=!this.J0||this.J0===document.title||this.Q0&&h.default.es(this.pn.title,(t=>{this.t1(t,this.pn.title)}))===this.J0;return this.J0=this.Q0?h.default.es(this.pn.title,this.t1):this.pn.title,t},this.s1=()=>this.J0,this.pn=t,this.Ge=i,this.Q0=s,this.J0=void 0,this.Ge.once("init:loaded",this.$0),this.Ge.on("domMutation",this.ji)}}var Cs=s("./src/js/detectorState.js");class ks{static h1(t,i,s){new Es(t,i,s.maskTitle)}static init(t,i,s,h,e){var r=this;s.on("domInit:plugins",(()=>{h(),i.qm()})),Cs.default.bm?s.emit("domInit:plugins"):s.once("init:plugins",(()=>{s.emit("domInit:plugins")})),Cs.default.wg?s.emit("domInit:domready"):s.once("init:domready",(function(){s.emit("domInit:domready")})),Cs.default.Lm?s.emit("domInit:preloaded"):s.once("init:preloaded",(function(){s.emit("domInit:preloaded")})),Cs.default.loaded?(r.h1(t,s,e),s.emit("domInit:loaded")):s.once("init:loaded",(function(){r.h1(t,s,e),s.emit("domInit:loaded")}))}}class Is{constructor(t,i,s){this.e1=()=>{const t={lastConfAt:this.mW,pageLoaded:this.n1,initPreloadedCalled:this.o1,resolvedForCurrentContext:this.a1};return this.l1.c1(t),t},this.d1=t=>{this.mW||this.uW(t)},this.uW=t=>{t.pageAttributeRules&&this.l1.ZH(t.pageAttributeRules),this.mW=h.default.Vn(),this.u1()},this.u1=()=>{if(void 0===this.mW||this.a1)return;const t=this.l1.resolve();(t.length>0||this.n1)&&(t.length>0&&this.cs.emit("pageAttributes",t),this.a1=!0)},this.initialize=()=>{},this.resolve=this.u1,this.cs=t,this.l1=i,this.f1=1500,this.n1=!1,this.o1=!1,this.a1=!1,this.mW=void 0,this.stats=this.e1,this.cs.once("plugin:newRemoteConfig",this.d1),this.cs.on("newRemoteConfig",this.uW),this.cs.on("segmentChanged",(()=>{this.a1=!1,this.u1()}),void 0,-1),this.cs.once("init:preloaded",(()=>{this.o1=!0,this.u1()})),this.cs.once("init:loaded",(()=>{this.n1=!0,this.u1()}));const e=()=>{const t=window.utag.view;"function"==typeof t&&(window.utag.view=i=>(i&&this.u1(),t.apply(window.utag,arguments)))};var r,n;s&&(window.utag?e():(r=e,n=this.f1,setTimeout((()=>{window.utag&&r()}),n)))}}class Ss{constructor(t,i,s,h,e,r){this.m1=t=>this.tW.test(t),this.g1=()=>this.BI,this.v1=()=>this.w1,this.b1=t=>{if(!this.m1(t))return;let i,s;const h=[];for(i=0;i<this.T1.length;i++)s=this.T1[i](),void 0!==s&&(!this.E1&&s.includes(this.C1)&&(s=s.split(this.C1).pop()),h.push(s));return h.length?h.join(this.C1||","):void 0},this.BI=t,this.w1=i,this.tW=s,this.C1=h,this.T1=e,this.E1=r}}class Ms{constructor(t,i,s,e){this.I1=t=>{if(!(t.id&&t.pageUrl&&t.rules&&t.rules.length))return void this.pk.badAttributeConf++;let i,s,h,e=t.pageUrl;t.pageHash&&(e+=("#"===t.pageHash.charAt(0)?"":"#")+t.pageHash);try{i=new RegExp("^"+e.split("*").join(".*")+"$")}catch(t){return d.default.error("Exception occurred during parsing regular expression. Error: "+t.message,t),void this.pk.badAttributePattern++}const r=[];for(s=0;s<t.rules.length;s++)h=this.S1[t.rules[s].type],h&&r.push(h(t.rules[s]));if(r.length)return new Ss(t.id,t.name,i,t.M1||",",r,this.E1);this.pk.badRules++},this.D1=()=>{const t=[];let i,s,e;const r=h.default.Jr(this.Lr.location.href);let n;for(n=0;n<this.j1.length;n++)try{e=this.j1[n].b1(r),void 0!==e&&(i=this.j1[n].g1(),s=this.j1[n].v1(),t.push({id:i,name:s,value:e}),this.pk.resolved++,this.pk.reportsByRule[i]=(this.pk.reportsByRule[i]||0)+1)}catch(t){d.default.error("Error while resolving page attribute attribute. id: "+this.j1[n].g1()+"  error: "+t.message,t),this.R1||(this.R1=!0,this.cs.emit("clsDebug","page attribute error (id="+this.j1[n].g1()+"): "+t.message))}return t},this.ZH=t=>{let i,s;for(this.pk.configurationLastUpdatedAt=h.default.Vn(),this.j1=[],i=0;i<t.length;i++)s=this.I1(t[i]),s&&(this.j1.push(s),this.pk.configured++);return this.j1.length>0},this.resolve=()=>this.D1(),this.c1=t=>{h.default.mC(t,this.pk)},this.Lr=t,this.cs=i,this.S1=s,this.j1=[],this.pk={resolved:0,configured:0,configurationLastUpdatedAt:0,badAttributeConf:0,badAttributePattern:0,reportsByRule:{},rulesList:[]},this.R1=!1,this.E1=e}}var Ds=s("./src/js/3rdPartyIntegration/objectCaptor.js");class js{constructor(t,i,s,r,n){this.A1=()=>{this.P1=[{body:{selector:"-",cssSelector:"body",name:"BODY",submitted:!1},L1:{}}]},this.O1=(t,i)=>{d.default.error(t+". Message: "+i.message,i),this.cs.emit("clsDebug",t+". Message: "+i.message)},this.F1=t=>{const i=this.Tc.ps(this.Lr.document.querySelector("BODY"));t[0].body.gbid=i.toString();for(let i=0;i<t.length;i++){const s=t[i].L1;if(Object.keys(s).length){t[i].inputs=[];for(const h in s)s.hasOwnProperty(h)&&t[i].inputs.push(s[h]),s[h].gbid=s[h].gbid.toString()}delete t[i].L1}return t},this.N1=()=>{let t;for(t=0;t<this.P1.length;t++)if(!h.default.kc(this.P1[t].L1))return!0;return!1},this.B1=()=>{try{this._1&&(this.P1[0].body.lastInput=this._1.toString()),this.N1()&&this.cs.emit("formAnalysis",this.F1(this.P1)),this.A1()}catch(t){this.O1("Exception while sending Form Analysis",t)}},this.V1=t=>{try{const i=t.element.type&&t.element.type.toLowerCase(),s=this.Tc.ps(t.element);if("SELECT"===t.element.tagName||"radio"===i||"checkbox"===i)this.P1[0].L1[s]||this.z1(t.element,s,t.cssSelector),this.P1[0].L1[s].metrics.entries++;else{const t=this.P1[0].L1[s];if("number"==typeof this.U1[s]){const i=h.default.Vn()-this.U1[s];i<0?this.cs.emit("clsDebug","form analysis - negative duration. Element gbid: "+s):t.metrics.duration+=i}}this._1=s}catch(t){this.O1("Exception while handling focus lost",t)}},this.H1=t=>("INPUT"===t.tagName&&t.type||t.tagName).toLowerCase(),this.z1=(t,i,s,h)=>{if(this.P1[0].L1[i]||"submit"===t.type.toLowerCase())return;const e={type:this.H1(t),gbid:i,metrics:{entries:0,duration:0,validationErrors:0}};try{this.W1(t,e,s,h),e.name=this.G1.pg(t),this.P1[0].L1[i]=e}catch(t){this.O1("Exception while adding a new input",t)}},this.q1=t=>{try{const i=this.Tc.ps(t.element);this.U1[i]=h.default.Vn();const s=this.P1[0].L1;s[i]||this.z1(t.element,i,t.cssSelector),s[i].metrics.entries++}catch(t){this.O1("Exception while handling focus in",t)}},this.W1=(t,i,s,h)=>{h||(h=this.zL.Kp(t)),i.selector=h.selector||e.default.encoding.sg,i.cssSelector=s,h.hostSelectorPath&&(i.shadowHostPath=h.hostSelectorPath),s&&"-"!==s&&(i.cssSelector=s)},this.Y1=t=>{this.z1(t.clone,t.gbid,t.cssSelector,t.fK)},this.X1=t=>{const i=this.Tc.ps(t.element);try{this.P1[0].L1[i]&&this.P1[0].L1[i].metrics.validationErrors++}catch(t){this.O1("Exception while updating validation error",t)}},this.Lr=t,this.cs=i,this.Tc=r,this.zL=n,this.P1=void 0,this._1=void 0,this.U1={},this.G1=s,this.A1(),this.cs.on("event:elementChange",this.V1),this.cs.on("event:focus",this.q1),this.cs.on("event:unload",this.B1),this.cs.on("segmentChanged",this.B1),this.cs.on("newInputElement",this.Y1),this.cs.on("formValidationError",this.X1)}}class xs{constructor(t,i,s,h,e){this.K1=()=>{new js(this.Lr,this.cs,this.G1,this.Tc,this.zL)},this.initialize=()=>{},this.Lr=t,this.cs=i,this.Tc=h,this.zL=e,this.G1=s,this.cs.once("domInit:preloaded",this.K1)}}class Rs{constructor(t,i,s,e,r,n,o){this.Z1=(t,i)=>{if(!this.fG.recordClipboardContent)return"";let s;const e=t.target;if(s="paste"===t.type?(t.clipboardData||this.Lr.clipboardData).getData("text"):(h.default.Fr()||h.default.PE())&&t.target.value?t.target.value:this.pn.getSelection().toString(),s&&s.length&&(i.gb=s.length,s=s.slice(0,this.fG.clipboardMaxValue)),this.J1[e.nodeName]&&this.cW.Ue(e)||this.UP.Ow(e,C.default.Xe,E.default.b_))s=this.rs.ss(s);else if(/\d/.test(s)){const t=s.match(/\d+/gm);s=this.rs.ss(s,0,"*",t)}s&&(i.content=s)},this.Q1=()=>{this.t2&&clearTimeout(this.t2);const t=this;setTimeout((function(){t.i2=null}),this.fG.clipboardMaxDuration)},this.s2=t=>{this.Q1();const i={type:t.type,timestamp:h.default.Vn(),element:t.target};this.i2={type:i.type,timestamp:i.timestamp,element:i.element},this.Z1(t,i),i.content&&(this.i2.content=i.content),this.Ge.emit("clipboardEvent",{data:i,element:t.target})},this.h2=t=>{this.Q1();const i={type:t.type,timestamp:h.default.Vn(),element:t.target};this.i2={type:i.type,timestamp:i.timestamp,element:i.element},this.Z1(t,i),i.content&&(this.i2.content=i.content),this.Ge.emit("clipboardEvent",{data:i,element:t.target})},this.e2=t=>{const i={type:t.type,timestamp:h.default.Vn()},s=(t.clipboardData||this.Lr.clipboardData).items;if(s&&s.length){i.contentType=s[0].kind;for(let t=0;t<s.length;++t)i.contentType!==s[t].kind&&(i.contentType="mix")}i.contentType=this.n2[i.contentType],this.Z1(t,i),i.content&&this.i2&&i.content===this.i2.content&&(delete this.i2.content,i.sourceData={type:this.i2.type,timestamp:this.i2.timestamp,element:this.i2.element},this.i2.content&&(i.sourceData.content=this.i2.content)),this.Ge.emit("clipboardEvent",{data:i,element:t.target})},this.Lr=t,this.pn=i,this.Ge=s,this.cW=e,this.UP=r,this.rs=n,this.fG=o,this.i2=void 0,this.t2=void 0,this.J1={TEXTAREA:!0,INPUT:!0,SELECT:!0},this.n2={file:"binary",string:"text",mix:"mix"}}}var As=s("./src/js/mask/CreateDomMasker.js");class Ps{constructor(t,i,s,e){this.nq=t=>{this.o2&&clearTimeout(this.o2);const i=h.default.Af()&&h.default.Df()?h.default.Qg():h.default.Kg(this.Lr),s=h.default.tj();let e=!1;null!==i&&(i.width<100||i.height<100)||(null===i||null===this.G1.page.ej||this.G1.page.ej.width===i.width&&this.G1.page.ej.height===i.height||(this.G1.page.ej=i,e=!0),null===s||null===this.G1.page.Wa||this.G1.page.Wa.width===s.width&&this.G1.page.Wa.height===s.height||(this.G1.page.Wa=s,e=!0),this.Lr.devicePixelRatio!==this.G1.state.sj&&(this.Lr.devicePixelRatio>this.G1.state.sj?t.yh(t.ij,this.G1.nj.rj):t.yh(t.ij,this.G1.nj.oj),this.G1.state.sj=this.Lr.devicePixelRatio),t.value={},t.value.sj=this.G1.state.sj,t.value.window=this.G1.page.ej,t.value.screen=this.G1.page.Wa,e&&(this.a2=t,this.fG.c2?this.o2=setTimeout(this.l2,this.fG.c2):this.l2()))},this.Lr=t,this.G1=i,this.Ge=s,this.fG=e,this.a2=null,this.o2=null,this.l2=()=>{i.d2&&(this.a2.type="tilt",this.a2.value.orientation=this.G1.orientation,this.G1.d2=!1),this.G1.tf(this.a2)}}}class Ls{constructor(t,i,s,r,n,o,a,c){this.initialize=()=>{if(this.fG.recordClipboardEvents){const t=new As.default(e.default).create(),i=new Rs(this.Lr,this.pn,this.Ge,this.cW,t,this.rs,this.fG);h.default.Nr(this.Lr,"copy",i.s2),h.default.Nr(this.Lr,"cut",i.h2),h.default.Nr(this.Lr,"paste",i.e2)}if(!h.default.Tg()){const t=new Ps(this.Lr,this.G1,this.Ge,this.fG);this.Ge.on("event:resize",t.nq)}},this.Lr=t,this.pn=i,this.G1=s,this.Ge=r,this.cW=n,this.rs=o,this.fG=c}}class Os{constructor(t,i){this.globalObject=t=>()=>{const i=this.u2.capture(this.BG,t.paths);if(!i)return;let s;const h=[];for(s in i)i.hasOwnProperty(s)&&h.push(i[s]);return h.join(t.M1||",")},this.u2=i,this.BG=t}}class Fs{constructor(t){this.mQ=(()=>{let t=0;return{gQ:()=>++t,vQ:()=>--t}})(),this.f2=()=>{1===this.mQ.gQ()&&this.Ge.emit("notifyAll:blackoutEnter")},this.m2=()=>{0===this.mQ.vQ()&&this.Ge.emit("notifyAll:blackoutLeave")},this.onPossibleBlackoutEnter=()=>{this.f2()},this.onPossibleBlackoutLeave=()=>{this.m2()},this.Ge=t}}class Ns{constructor(t){this.g2=(t,i,s)=>{const h=i.value.xT;return delete i.value.xT,t.postMessage(i,s,[h])},this.sendMessage=(t,i,s)=>t.postMessage(i,s),this.onMessage=t=>{const i=i=>{t(i)&&i.stopImmediatePropagation()};return this.v2.push(i),h.default.Nr(this.Lr,"message",i)},this.close=()=>{let t;for(t=0;t<this.v2.length;t++)this.Lr.removeEventListener("message",this.v2[t]);this.v2=[]},this.Lr=t,this.v2=[],this.name="postMessage"}}class Bs{constructor(t,i,s){this.w2=t=>{let i;for(i=0;i<this.cD.length;i++)this.cD[i](t)},this.b2=t=>{try{return t.location.href,!1}catch(t){return!0}},this.name="direct",this.sendMessage=(t,i)=>{if(this.b2(t))return void pi.default.Fb("failed sending message over direct channel: cross origin.");const s=t[this.T2];s&&s.E2?setTimeout((()=>{s.E2({source:this.Lr,data:i,origin:this.C2})}),0):pi.default.Fb("failed sending message over direct channel: remote facade is invalid.")},this.onMessage=t=>{this.cD.push(t)},this.close=()=>{this.cD=[]},this.Lr=t,this.G1=i,this.T2=s,this.cD=[],this.C2=this.Lr.location.origin||h.default.Nb(h.default.Jr(this.Lr.location.href)),this.G1.E2=this.w2}}class _s{constructor(t,i,s,h){this.I2=()=>{if(this.te.directChannel)return new Bs(this.Lr,this.G1,this.T2);if(this.te.directChannelWhenUriContainer){let t;for(t=0;t<this.te.directChannelWhenUriContainer.length;t++)if(this.Lr.location.href.indexOf(this.te.directChannelWhenUriContainer[t])>=0)return new Bs(this.Lr,this.G1,this.T2)}return new Ns(this.Lr)},this.Lr=t,this.G1=i,this.T2=s,this.te=h||{}}}class Vs{constructor(t,i,s,h){this.sc=t=>{if(!t.getAttribute)return!1;const i=(t.getAttribute("data")||"").toLowerCase();return this.S2[t.tagName]&&("OBJECT"!==t.tagName||"text/html"===(t.getAttribute("type")||"").toLowerCase()||i.indexOf(".html")===i.length-5||i.indexOf(".htm")===i.length-4)},this.M2=t=>{this.Ge.emit("frame:detected",t)},this.D2=(t,i)=>{this.j2<=0?this.Ge.emit("frame:domChange",{target:t,attributeName:i}):(this.R2={target:t,attributeName:i},this.A2&&clearTimeout(this.A2),this.A2=setTimeout((()=>{this.R2&&(this.Ge.emit("frame:domChange",this.R2),this.R2=null),this.A2=null}),this.j2))},this.ji=t=>{if("childList"===t.type){let i;const s=[];for(i=0;i<t.addedNodes.length;i++)this.sc(t.addedNodes[i])?s.push(t.addedNodes[i]):"function"==typeof t.addedNodes[i].getElementsByTagName&&Array.prototype.push.apply(s,t.addedNodes[i].querySelectorAll(this.P2));for(i=0;i<s.length;i++)this.M2(s[i]);s.length}else"attributes"===t.type&&this.sc(t.aG)&&(this.sc(t.aG)||"function"==typeof t.aG.getElementsByTagName&&t.aG.querySelectorAll(this.P2).length>0)&&this.D2(t.aG,t.attributeName)},this.start=()=>{let t;const i=this.pn.querySelectorAll(this.P2);for(t=0;t<i.length;t++)this.M2(i[t]);this.Ge.on("domMutation",this.ji)},this.pn=t,this.Ge=i,this.YY=s.framesetRecordEnabled,this.L2=s.htmlObjectRecordEnabled,this.P2=h,this.j2=s.iframesPageUpdateDebounceMs||-1,this.A2=null,this.R2=null,this.S2={IFRAME:!0,FRAME:!!this.YY,OBJECT:!!this.L2}}}class zs{constructor(t,i,s,h){this.O2=t=>{try{return t.contentWindow.location.href,!0}catch(t){return!1}},this.F2=t=>!pi.default.Lb(t,document.location.origin)&&this.O2(t),this.N2=t=>{var i=this;t.contentWindow.addEventListener("beforeunload",(()=>{i.Ge.emit("frame:unload",{CQ:i.F2(t),frame:t})}))},this.$n=t=>{const i=this.F2(t.target);i&&this.N2(t.target),this.Ge.emit("frame:load",{CQ:i,frame:t.target})},this.B2=t=>{if("style"===t.attributeName){const i="none"!==this.Lr.getComputedStyle(t.target).display,s=this.Tc.ps(t.target);this._2[s]||this.V2(t.target,this.F2(t.target)),this._2[s].visible!==i&&this.Ge.emit("frame:visibilityChange",{visible:i,frame:t.target,CQ:this._2[s].CQ}),this._2[s].visible=i}},this.V2=(t,i)=>{this._2[this.Tc.ps(t)]={visible:"none"!==this.Lr.getComputedStyle(t).display,CQ:i}},this.DQ=t=>{const i=this.F2(t);return t.z2||(t.addEventListener("load",this.$n),this.V2(t,i),i&&this.N2(t),t.z2=!0,this.Ge.emit("frame:wired",{CQ:i,frame:t})),i},this.Lr=t,this.pn=i,this.Ge=s,this.Tc=h,this._2={},this.Ge.on("frame:domChange",this.B2)}}const Us={hidden:function(t,i){let s=t,e=0;if(0===i)return"none"===getComputedStyle(s).display||"hidden"===getComputedStyle(s).visibility;for(;s&&s!==document&&e<=i;){if("none"===getComputedStyle(s).display||"hidden"===getComputedStyle(s).visibility)return!0;e++,s=h.default.parentNode(s)}return!1}};class Hs{constructor(t,i,s,e,r,n){var o,a;this.U2=t=>()=>{const i=h.default.mC({},t);return i.storageBackedReporting=!0,i.iframesParentOrigin=this.pn.location.origin||h.default.Nb(h.default.Jr(this.pn.location.href)),this.te.H2&&(i.iframesDirectChannel=!0),i.idleEventTimeInterval=-1,i},this.W2=(t,i)=>{let s;const h=i===this.jo.iframesAutoInjectMode.er;for(s=0;s<this.te.G2.length;s++)if(t.indexOf(this.te.G2[s])>=0)return h;return!h},this.q2=t=>(!this.te.m0||!Us.hidden(t,this.te.iframeVisibilityMaxLevels))&&(!(!t.contentDocument||!t.contentDocument.body||!t.contentDocument.body.hasChildNodes()&&"about:blank"!==t.contentWindow.location.href)&&(!("about:blank"===t.contentWindow.location.href&&!this.te.injectIframesAboutBlank)&&(!this.W2(t.contentWindow.location.href,this.te.Y2)&&"complete"===t.contentDocument.readyState))),this.X2=t=>{const i=t.contentWindow;return!i[this.K2]&&!t.KQ&&(i._cls_config_forced=this.Z2(t),i.document.head.appendChild(this.J2(i.document)),t.KQ=!0,this.Q2&&setTimeout((()=>this.Q2(t,!0)),0),!0)},this.t3=t=>{try{return this.q2(t)&&this.X2(t)}catch(i){return pi.default.Fb("failed injecting frame window. error:"+i),this.Q2&&this.Q2(t,!1),!1}},this.inject=t=>this.t3(t),this.kQ=t=>{this.Q2=t},this.pn=t,this.jo=i,this.i3=e,this.K2=r,this.te=h.default.Li(n,{m0:!0,H2:!1,G2:[],Y2:this.jo.iframesAutoInjectMode.er,injectIframesAboutBlank:!1,iframeVisibilityMaxLevels:3}),this.Q2=void 0,this.s3=this.i3.getAttribute("id"),this.h3=h.default._C(this.i3.getAttribute("src")),this.J2=(o=this.s3,a=this.h3,t=>{const i=t.createElement("script");return i.setAttribute("type","module"),o&&i.setAttribute("id",o),i.setAttribute("src",a),i.setAttribute("data-clsautoinjected","true"),i}),this.Z2=this.U2(s)}}class Ws{constructor(t,i,s,e,r,n){this.e3=(t,i,s,h)=>{this.r3(i.type)||(h&&(h.postMessage({type:"ack"}),i.wx&&(i.wx.port=h)),this.n3[i.type]&&this.n3[i.type](i.wx),this.o3(t,i))},this.r3=t=>{if("onFramePort"===t)return!1;const i=h.default.Vn(),s=this.a3[t];return!!(s&&i-s<this.te.c3)||(this.a3[t]=i,!1)},this.l3=(t,i,s)=>{t&&this.Lr!==t&&this.d3.send(t,"frame:notification",i,s)},this.u3=t=>!!t.f3,this.o3=(t,i)=>{if(i.m3){let s;const h=this.Lr.document.querySelectorAll(this.P2);for(s=0;s<h.length;s++)t!==h[s].contentWindow&&this.u3(h[s])&&this.l3(h[s].contentWindow,{type:i.type,wx:i.wx,m3:!0})}i.g3&&this.v3&&this.l3(this.Lr.parent,{type:i.type,wx:i.wx,g3:!0,m3:!0})},this._Q=()=>{this.v3=!0},this.notify=(t,i,s)=>{this.te.disabled||this.l3(t,{type:i.type,wx:i.wx,xT:i.xT},s)},this.PQ=t=>{this.te.disabled||this.o3(void 0,{type:t.type,wx:t.wx,m3:!0,g3:!0})},this.Lr=t,this.d3=i,this.w3=s,this.n3=e,this.te=h.default.Li(r,{c3:300,disabled:!1}),this.P2=n,this.v3=!1,this.a3={},this.w3.onMessage("frame:notification",this.e3)}}class Gs{constructor(t,i,s){this.b3=t=>t&&!this.y3[t],this.send=(t,i,s,h)=>{h=this.b3(h)?h:this.T3,s.xT?this.E3.g2(t,{message:i,value:s},h):this.E3.sendMessage(t,{message:i,value:s},h)},this.Lr=t,this.E3=i,this.T3=s||"*",this.y3=h.default.ve("javascript:","data:")}}class qs{constructor(t,i){this.kT=t=>{if(!window.Node)return;const i=t.data.message,s=this.cD[i];if(s){try{this.qT=t.ports&&t.ports[0],s(t.source,t.data.value,t.origin,this.qT)}catch(i){pi.default.Fb("message (origin:"+t.origin+") handler raised an error.",i)}return!0}return!1},this.onMessage=(t,i)=>{this.cD[t]=i},this.Lr=t,this.E3=i,this.cD={},this.qT=void 0,i.onMessage(this.kT)}}class Ys{constructor(t,i,s,h,e,r,n,o){this.onPossibleBlackoutEnter=h.onPossibleBlackoutEnter,this.onPossibleBlackoutLeave=h.onPossibleBlackoutLeave,this.forceBlackoutEnter=s.blackoutManager.forceBlackoutEnter,this.forceBlackoutLeave=s.blackoutManager.forceBlackoutLeave,this.queryParamUpdate=e,this.onFramePort=r,this.notifyStopRecording=()=>{try{s.$d().stop()}catch(t){console.warn("Unable to stop recording in iframe ("+s.page.url+" "+s.page.id+")")}},this.notifyStartRecording=()=>{try{s.$d().start()}catch(t){console.warn("Unable to start recording in iframe ("+s.page.url+" "+s.page.id+")")}},this.domTrackingStarted=()=>{i().PZ()},this.pageUpdate=()=>{s.ef()},this.forceFlush=()=>{t.emit("forceFlush")},this.clseUpdate=t=>{n(t)},this.rtoUpdate=t=>{o(t)}}}class Xs{constructor(t,i,s,h,e,r,n,o,a){this.C3=(t,i,s)=>{let h,e;const r=this.te.searchIframesInShadowDom?this.I3(document):document.querySelectorAll(this.P2);for(h=0;h<r.length;h++)if(t===r[h].contentWindow){e=r[h];break}if(!e)return void(this.S3&&this.S3());const n=this.M3(e);this.S3&&this.S3(n,i.D3),e.f3=!0,this.d3.send(e.contentWindow,"parent:hello",{ih:this.j3.ih,th:this.j3.th,containerId:n,parentPageId:this.x3.id,UN:this.x3.name,BQ:this.EQ.Wr(),Lv:this.x3.Lv,dh:this.j3.dh,NQ:this.j3.NQ},s)},this.R3=(t,i,s)=>{this.A3&&clearTimeout(this.A3),this.P3&&this.P3(i,s),this.P3=void 0},this.HQ=(t,i,s)=>{this.P3=i,this.d3.send(t,"child:hello",{D3:this.x3.id}),-1!==this.te.L3&&(this.A3=setTimeout(s,this.te.L3))},this.v0=t=>{this.S3=t},this.pn=t,this.x3=i,this.EQ=s,this.d3=h,this.w3=e,this.M3=r,this.j3=n,this.te=o||{O3:"gb_cid",L3:o.L3||2e3},this.P2=a,this.P3=void 0,this.S3=void 0,this.A3=void 0,this.w3.onMessage("child:hello",this.C3),this.w3.onMessage("parent:hello",this.R3)}I3(t){let i=[];return function t(s){"IFRAME"===s.tagName&&i.push(s),s.shadowRoot&&t(s.shadowRoot),s.childNodes.forEach(t)}(t),i}}class Ks{constructor(t,i,s){this.F3=()=>{this.N3||(this.B3[this.te._3]&&this.V3.yh(this.te._3,this.B3[this.te._3]),this.B3[this.te.z3]&&this.V3.yh(this.te.z3,this.B3[this.te.z3]),this.N3=!0,this.fi())},this.VQ=(t,i)=>{this.B3={parentPageId:t,containerId:i},this.V3&&this.fi&&this.F3()},this.Ge=t,this.G1=i,this.te=s||{_3:"containerId",z3:"parentPageId"},this.V3=void 0,this.fi=void 0,this.B3=void 0,this.N3=!1,this.Ge.on("event:unload",(()=>{this.V3&&(this.B3={},this.F3())}),void 0,-100),this.Ge.on("sessionTimeoutExpired",(()=>{this.N3=!1})),this.G1.mv=(t,i)=>{this.V3=t,this.fi=i,this.B3&&this.F3()}}}class Zs{constructor(t,i,s,e,r,n){this.U3=()=>{const t=this.H3(),i=Math.max(screen.width,screen.height),s=Math.min(screen.width,screen.height);return t?i:s},this.H3=()=>(this.W3?this.G3=this.W3.matches?0:90:this.Lr&&void 0!==this.Lr.orientation?this.G3=90===Math.abs(window.orientation)?90:0:screen&&screen.orientation&&void 0!==screen.orientation.type?this.G3=0===screen.orientation.type.indexOf("landscape")?90:0:this.G3=this.pn.documentElement.clientHeight>this.pn.documentElement.clientWidth?0:90,this.G3),this.q3=t=>{void 0!==t&&t!==this.G3&&(this.G1.orientation=this.G3,this.G1.d2=!0)},this.Y3=()=>{const t=this.G3;this.H3(),this.q3(t)},this.initialize=()=>{h.default.hm()||(this.W3?this.W3.addListener((t=>{const i=self.G3;self.G3=t.matches?0:90,this.q3(i)})):(this.H3(),h.default.Nr(this.Lr,"orientationchange",this.Y3,!0)))},this.kv=()=>this.G3,this.Lr=t,this.pn=i,this.cs=s,this.te=e,this.G1=n,this.W3=t.matchMedia?t.matchMedia("(orientation: portrait)"):void 0,this.G3=this.W3?this.W3.matches?0:90:void 0,this.X3=!1}}class $s{constructor(t,i,s,h,n,o,a,c,l,d,u,f,m,g){this.KU=()=>{this.GE&&(this.K3(),this.Z3(),this.J3(),this.Q3(),this.t5(),window===window.top&&this.i5(),this.s5(),this.h5(),this.e5(),this.r5(),this.n5(),this.o5(),this.a5(),this.c5(),this.start())},this.GE=s,this.global=t,this.document=i,this.dV=n,this.ni=h,this.fG=r.default,this.l_=o,this.Vd=a,this.gm=c,this.a_=l,this.tg=d,this.eg=u,this.jV=f,new fi.default(this.jV),this.bV=new Ci.default(this.global,this.jV),this.Gj=new mi.default(this.global,new gi.default(this.jV,this.bV,this.ni,e.default,this.fG)),this._V=g,this.sv=new Ti.default(this.fG.maskQueryParameters,this.fG.maskUrlPath,{urlMaskingChar:this.fG.urlMaskingChar,queryMaskingChar:this.fG.queryMaskingChar}),this.wV=new Ei.default,this.vV=m,new yi(e.default,this.vV,this.a_,new oi.default(e.default.Is),this.ni,this.fG)}init(){ks.init(this.document,this.GE,this.ni,this.KU,this.fG)}Q3(){void 0!==this.GE&&this.GE.zm("eventsDetectionPlugin",new Ls(this.global,this.document,this.GE,this.ni,this.Gj,Y.default,this.tg,this.fG))}c5(){void 0!==this.GE&&this.fG.recordOrientation&&"ontouchstart"in this.global&&this.GE.zm("mobileEventsPlugin",new Zs(this.global,this.document,this.ni,this.fG,this.GE))}J3(){this.fG.clientAttributesEnabled&&(h.default.time("initializeAttributesPlugin",this.fG.timingMode),this.GE.zm("attributePlugin",new I(this.global,this.ni,this.GE,this.Gj,new l.default(this.document),this.tg,this.dV)),h.default.timeEnd("initializeAttributesPlugin",this.fG.timingMode))}Z3(){this.fG.collectStruggles&&(h.default.time("initializeStrugglePlugin",this.fG.timingMode),this.GE.zm("strugglesPlugin",new b(this.global,this.ni,this._V,this.wV,this.tg,this.eg,this.Vd,this.GE,this.fG)),h.default.timeEnd("initializeStrugglePlugin",this.fG.timingMode))}t5(){if(this.fG.recordShadowDom&&this.fG.domRecordEnabled&&(this.global.ShadowRoot||h.default.pj(this.fG.forceShadowDomTrackingWhenUrlContains,h.default.Jr(this.global.location.href)))){h.default.time("initializeShadowDomPlugin",this.fG.timingMode);var t=new S.default(e.default,this.fG);this.GE.zm("shadowDomPlugin",new F(this.global,document,this.ni,this.Gj,this._V,this.GE.plugins.domRecordingPlugin,t,this.fG)),h.default.timeEnd("initializeShadowDomPlugin",this.fG.timingMode)}}i5(){this.global&&this.global===this.global.top&&this.fG.devToolsDetectionEnabled&&!h.default.Jm()&&(h.default.time("initializeDevtoolsTrackingPlugin",this.fG.timingMode),this.GE.zm("devToolsTrackingPlugin",new V(this.global,this.ni,{devToolsDetectionMessage:this.fG.devToolsDetectionMessage,devToolsDetectionWorkerTimeout:this.fG.devToolsDetectionWorkerTimeout,devToolsDebuggerBasedDetection:this.fG.devToolsDebuggerBasedDetection})),h.default.timeEnd("initializeDevtoolsTrackingPlugin",this.fG.timingMode))}s5(){h.default.Jm()||!this.fG.domTamperingDetectionEnabled||"undefined"==typeof MutationObserver&&"undefined"==typeof WebKitMutationObserver||(h.default.time("initializeDomTamperingPlugin",this.fG.timingMode),this.GE.zm("domTamperingPlugin",new z(this.global,this.ni,this._V,{Sq:this.fG.domTamperingGraceTime,domTamperingIgnorePages:this.fG.domTamperingIgnorePages,Nq:this.fG.domTamperingIgnorableTags})),h.default.timeEnd("initializeDomTamperingPlugin",this.fG.timingMode))}e5(){this.fG.domFormAnalysisReporting&&(h.default.time("initializeFormAnalysisPlugin",this.fG.timingMode),this.GE.zm("formAnalysisPlugin",new xs(this.global,this.ni,this.GE,this._V,this.tg)),h.default.timeEnd("initializeFormAnalysisPlugin",this.fG.timingMode))}h5(){var t;this.fG.reportValidationErrors&&null!==(t=this.GE.plugins)&&void 0!==t&&t.domRecordingPlugin&&(h.default.time("initializeFormValidationPlugin",this.fG.timingMode),this.GE.zm("formValidationPlugin",new ei(this.global,this.ni,this._V,this.GE.plugins.domRecordingPlugin.$G(),{domFormValidationTracking:this.fG.domFormValidationTracking,m$:this.fG.domFormValidationRedComponentMin,g$:this.fG.domFormValidationRedComponentDelta,O$:this.fG.domFormValidationSubmissionIds,x$:this.fG.domFormValidationSubmissionSelectors,j$:this.fG.domFormViolationsAllowFormLevel,v$:this.fG.domFormValidationConsiderBG,F$:this.fG.domFormValidationAdditionalTagNames,ignorableText:this.fG.domFormValidationIgnorableText,ignorableTextRegex:this.fG.domFormValidationIgnorableTextRegex,Nq:this.fG.domFormValidationIgnorableTags,Y$:this.fG.domFormValidationIgnorePagesPredicates,P$:this.fG.domFormValidationCheckUrls,L$:this.fG.domFormValidationTitlesToCheck,domFormValidationCheckAfterPageLoad:this.fG.domFormValidationCheckAfterPageLoad,domFormValidationErrorRelatedText:this.fG.domFormValidationErrorRelatedText,html5FormValidation:this.fG.html5FormValidation,domFormValidationTraverseParentsForVisibility:this.fG.domFormValidationTraverseParentsForVisibility,minVisibleElementOpacity:this.fG.minVisibleElementOpacity,jQueryFormValidationEnabled:this.fG.jQueryFormValidationEnabled,domFormValidationTextByRGB:this.fG.domFormValidationTextByRGB})),h.default.timeEnd("initializeFormValidationPlugin",this.fG.timingMode))}K3(){if(this.fG.domRecordEnabled){h.default.time("initializeDomRecordingPlugin",this.fG.timingMode);const t=(t,i)=>{this.GE.sm("domPlugin",{name:i,message:t})};this.GE.zm("domRecordingPlugin",new Jt(this.global,this.document,this.GE,this.ni,e.default,this._V,this.sv,this.bV,this.wV,this.Gj,this.tg,this.eg,t,this.fG)),h.default.timeEnd("initializeDomRecordingPlugin",this.fG.timingMode)}}n5(){(this.fG.versionResources||this.fG.resourcesRecordEnabled||this.fG.resourceTimingRecordEnabled)&&this.global.performance&&void 0!==this.global.performance.getEntriesByType&&void 0!==this.global.MutationObserver&&(h.default.time("initializeResourceRecorderPlugin",this.fG.timingMode),this.GE.zm("resourceRecorderPlugin",new ui(this.global,this.ni,this.gm,this.a_,e.default,this.Vd,{electResourcesOnClear:this.fG.electResourcesOnClear,isCheckResourceBuffer:this.fG.isCheckResourceBuffer,maxResourcesBeforeFlush:this.fG.maxResourcesBeforeFlush,resourceBufferCheckTime:this.fG.resourceBufferCheckTime,resourceBufferIncreaseBy:this.fG.resourceBufferIncreaseBy,resourceTimingRecordAjax:this.fG.resourceTimingRecordAjax,versionResources:this.fG.versionResources,versionResourcesEnabledByChance:this.fG.versionResourcesEnabledByChance,resourcesRecordAllowCors:this.fG.resourcesRecordAllowCors,resourceIgnoreWhenUrlContains:this.fG.resourceIgnoreWhenUrlContains,resourcesRecordChance:this.fG.resourcesRecordChance,resourcesRecordCount:this.fG.resourcesRecordCount,resourceRecordCssOnly:this.fG.resourceRecordCssOnly,resourceTimingRecordEnabledByChance:this.fG.resourceTimingRecordEnabledByChance,resourceTimingRecordEnabled:this.fG.resourceTimingRecordEnabled,resourcesRecordEnabled:this.fG.resourcesRecordEnabled,reportURI:this.fG.reportURI,saveChancesByCookie:this.fG.saveChancesByCookie,reportByFetch:this.fG.reportByFetch,xhrBypassOnReadyStateChange:this.fG.xhrBypassOnReadyStateChange})),h.default.timeEnd("initializeResourceRecorderPlugin",this.fG.timingMode))}r5(){h.default.time("webVitalsPlugin",this.fG.timingMode),this.GE.zm("webVitalsPlugin",new Ts(this.ni,this.fG.webVitalsReportTimeout,this.fG.webVitalsMaxFCP,this.fG.webVitalsMaxLCP)),h.default.timeEnd("webVitalsPlugin",this.fG.timingMode)}o5(){if(this.fG.iframesRecordEnabled){h.default.time("initializeIFramesPlugin",this.fG.timingMode);const t="frame",i="object[type='text/html'],object[data$='.htm'],object[data$='.html']";let s="iframe";this.fG.framesetRecordEnabled&&this.fG.htmlObjectRecordEnabled?this.l5+=","+t+","+i:this.fG.framesetRecordEnabled?this.l5+=","+t:this.fG.htmlObjectRecordEnabled&&(this.l5+=","+i);const n=new Fs(this.ni),o=new _s(this.global,this.GE,this.dV,{directChannel:this.fG.iframesDirectChannel,directChannelWhenUriContainer:this.fG.iframesDirectChannelWhenUriContains}).I2(),a=new Vs(this.document,this.ni,{framesetRecordEnabled:this.fG.framesetRecordEnabled,htmlObjectRecordEnabled:this.fG.htmlObjectRecordEnabled,iframesPageUpdateDebounceMs:this.fG.iframesPageUpdateDebounceMs},s),c=new zs(this.global,this.document,this.ni,this._V),l=e.default.G_?new Hs(this.document,e.default,this.fG,e.default.G_,this.dV,{m0:this.fG.iframesSkipHidden,H2:"direct"===o.name,G2:this.fG.iframesSkipWhenLocationContains,Y2:this.fG.iframesAutoInjectMode,injectIframesAboutBlank:this.fG.injectIframesAboutBlank,iframeVisibilityMaxLevels:this.fG.iframeVisibilityMaxLevels}):void 0,d=new Gs(window,o,this.fG.iframesParentOrigin),u=new qs(window,o),f=new Ys(this.ni,(()=>this.GE.plugins.domRecordingPlugin),this.GE,n,(t=>{this.ni.emit("parentWindowInfo",t)}),(t=>{this.ni.emit("iframePortReceived",t)}),(t=>{this.ni.emit("clseUpdate",t)}),(t=>{this.ni.emit("rtoUpdate",t)})),m=new Ws(window,d,u,f,{disabled:r.default.iframesDisableNotifications},s),g=t=>""+this._V.ps(t),v=new Xs(this.document,this.GE.page,this.GE.blackoutManager,d,u,g,this.GE,{L3:this.fG.iframesHandshakeTimeout,searchIframesInShadowDom:this.fG.searchIframesInShadowDom},s),p=new Ks(this.ni,this.GE,{z3:"parentPageId",_3:"containerId"}).VQ,w=this.GE.blackoutManager,b=()=>this.GE.reporter;this.GE.zm("iframes",new wi(this.global,this.ni,this.GE,e.default,n,a,c,l,m,w,v,b,g,p,this.fG)),h.default.timeEnd("initializeIFramesPlugin",this.fG.timingMode)}}a5(){this.fG.pageAttributesEnabled&&(h.default.time("initializePageAttributesPlugin",this.fG.timingMode),this.GE.zm("pageAttributesPlugin",new Is(this.ni,new Ms(this.global,this.ni,new Os(this.global,new Ds.default),this.fG.allowMultiplePageNames),this.fG.listenToUtagData)),h.default.timeEnd("initializePageAttributesPlugin",this.fG.timingMode))}start(){this.GE.ev(this.GE.page.initializationTimestamp)}}}}]);