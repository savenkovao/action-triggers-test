/*!
 * Version: [Local_version_prod] (2025-04-28)
 * Copyright (c) 2025 Glassbox https://www.glassboxdigital.com
 */
"use strict";(self.webpackChunkdetector=self.webpackChunkdetector||[]).push([[92],{"./node_modules/core-js/internals/not-a-nan.js":t=>{var i=RangeError;t.exports=function(t){if(t==t)return t;throw new i("NaN is not allowed")}},"./node_modules/core-js/modules/es.iterator.take.js":(t,i,s)=>{var h=s("./node_modules/core-js/internals/export.js"),e=s("./node_modules/core-js/internals/function-call.js"),r=s("./node_modules/core-js/internals/an-object.js"),n=s("./node_modules/core-js/internals/get-iterator-direct.js"),o=s("./node_modules/core-js/internals/not-a-nan.js"),a=s("./node_modules/core-js/internals/to-positive-integer.js"),c=s("./node_modules/core-js/internals/iterator-create-proxy.js"),l=s("./node_modules/core-js/internals/iterator-close.js"),d=s("./node_modules/core-js/internals/is-pure.js"),u=c((function(){var t=this.iterator;if(!this.t--)return this.done=!0,l(t,"normal",void 0);var i=r(e(this.next,t));return(this.done=!!i.done)?void 0:i.value}));h({target:"Iterator",Xt:!0,Qt:!0,vt:d},{take:function(t){r(this);var i=a(o(+t));return new u(n(this),{t:i})}})},"./src/js/DetectorDomBootstrap.js":(t,i,s)=>{s.r(i),s.d(i,{default:()=>$s});var h=s("./src/js/utils.js"),e=s("./src/js/env.js"),r=s("./src/js/config.js"),n=(s("./node_modules/core-js/modules/es.array.push.js"),s("./node_modules/core-js/modules/es.iterator.constructor.js"),s("./node_modules/core-js/modules/es.iterator.for-each.js"),{INPUT:!0,SELECT:!0,TEXTAREA:!0,A:!0,q:!0});class o{constructor(t,i,s,e){var r;if(this.ga=()=>{clearTimeout(this.by)},this.TD=t=>{var i;if(this.TR&&this.TR.length)for(i=0;i<this.TR.length;++i)if(this.lV.matches(t,this.TR[i]))return!0;return!1},this.dV=t=>{let i;try{i=t.element.closest("a")}catch(t){return!1}return!(!i||"_blank"!=i.target)},this.uV=t=>{let i=4;for(;t&&i--;){if("BUTTON"===t.tagName&&t.disabled)return!0;t=h.default.parentNode(t)}return!1},this.fV=t=>{if(clearTimeout(this.by),(t.element.disabled||t.element.ariaDisabled||!n[t.element.tagName])&&!h.default.zE(t)&&!this.dV(t)&&!this.TD(t.element)&&!this.se.observeRightClick&&t.lg&&!t.lg.button&&2!==t.lg.button){const i=t.id,s=t,h={element:t.element,dataToEncode:{type:"deadClick",mV:i},relatedEvent:s};this.se.struggleCaptureDeadClickOnDisabledElements&&(t.element.disabled||t.element.ariaDisabled)?this.gV(h,"deadClick - disabledElement"):this.uV(t.element)?this.gV(h,"deadClick - disabledButtonParent"):this.by=setTimeout((()=>{this.gV(h,"deadClick - enabledButtonParent")}),this.vV)}},this.lV=s,this.gV=i,this.He=t,this.se=e,this.by=null,this.vV=e.pV,this.TR=e.elementsToIgnoreBySelector,e.additionalTagNamesToIgnore&&e.additionalTagNamesToIgnore.length)for(r=0;r<e.additionalTagNamesToIgnore.length;++r)n[e.additionalTagNamesToIgnore[r]]=!0;this.He.on("domMutation",this.ga),this.He.on("segmentChanged",this.ga),this.He.on("event:change",this.ga),this.He.on("ajax:send",this.ga),this.He.on("pageError",this.ga),this.He.on("event:unload",this.ga),this.He.on("window:open",this.ga),"undefined"!=typeof Element&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var i=this;do{if(i.matches(t))return i;i=i.parentElement||h.default.parentNode(i)}while(null!==i&&1===i.nodeType);return null}))}}s("./node_modules/core-js/modules/es.iterator.filter.js");class a{constructor(t,i,s,h,e){this.fV=t=>{if(!this.wV.zE(t)){if(this.yV.length>0)for(var i=0;i<this.yV.length;i++)if(this.lV.matches(t.element,this.yV[i]))return;var s=this.bV.js(t.element);if(this.TV[s]){if(this.TV[s].EV.push({time:t.timestamp,CV:t.id}),this.TV[s].EV.length>=this.kV){var h=this;this.TV[s].EV=this.TV[s].EV.filter((function(i){return t.timestamp-i.time<h.SV}))}this.TV[s].EV.length>=this.kV?(t.indexInRage=this.kV+this.TV[s].count,t.rageSequence=this.IV,this.TV[s].MV||this.gV({element:t.element,dataToEncode:{type:"rageClick",startEventRelatedId:this.TV[s].EV[0].CV,endEventRelatedId:t.id,rageSequence:this.IV},relatedEvent:t},"rageClickStruggle"),this.TV[s].MV=!0,this.TV[s].count=this.TV[s].count+1):this.TV[s].MV&&(this.TV={},this.TV[s]={},this.TV[s].EV=[],this.TV[s].EV.push({time:t.timestamp,CV:t.id}),this.TV[s].count=0,++this.IV)}else this.TV[s]={},this.TV[s].EV=[],this.TV[s].EV.push({time:t.timestamp,CV:t.id}),this.TV[s].count=0;this.DV&&this.TV[this.DV]&&this.TV[this.DV].MV&&!this.TV[s].MV&&(this.TV[this.DV].MV=!1,this.TV[this.DV].count=0,++this.IV),this.DV=s}},this.wV=t,this.gV=s,this.bV=i,this.SV=e.SV||3e3,this.kV=e.jV||5,this.yV=e.elementsToIgnoreBySelector||[],this.TV={},this.IV=1,this.DV=null,this.lV=h}}s("./node_modules/core-js/modules/es.iterator.map.js"),s("./node_modules/core-js/modules/es.regexp.constructor.js"),s("./node_modules/core-js/modules/es.regexp.dot-all.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.replace.js");class c{constructor(t,i,s){this.xV=t=>{const i=this.RV.map((t=>{const i=t.toLowerCase().replace(/[-/\\^$+?.()|[\]{}]/g,"\\$&");return new RegExp(`^${i.replace(/\*/g,".*")}`)}));for(let s of i)if(s.test(t.toLowerCase()))return!0;return!1},this.PV=t=>{this.by&&(t.AV=!1,this.LV.push(t.error),this.OV=!0)},this.fV=t=>{clearTimeout(this.by);var i=t.id;this.by=setTimeout((()=>{this.OV&&(this.LV=this.LV.filter(((t,i,s)=>s.indexOf(t)===i)),this.LV=this.LV.filter((t=>!this.xV(t))),this.LV.length>0&&(this.OV=!1,this.gV({element:t.element,dataToEncode:{mV:i,type:"errorClick"},Mv:this.LV,relatedEvent:t},"errorClickStruggle")),this.LV=[]),this.by=null}),this.FV)},this.gV=i,this.by=null,this.OV=!1,this.LV=[],this.FV=s.NV,this.RV=s.struggleErrorClickBlacklist,t.on("pageError",this.PV)}}var l=s("./src/js/resolving/ElementResolver.js"),d=s("./src/js/logger.js");class u{constructor(t,i,s,h,e){if(this.BV=()=>{clearTimeout(this._V)},this.TD=t=>{const i=this.se.elementsToIgnoreBySelector;if(i&&i.length)for(let s=0;s<i.length;++s)if(this.VV.matches(t,i[s]))return!0;return!1},this.zV=t=>{let i=this.Fr.getComputedStyle(t.element).overflow;if(i&&(i=i.toLowerCase()),"scroll"!==i&&"auto"!==i)return!1;try{const i=t.element.getBoundingClientRect(),s=i.right-i.width,h=this.Fr.getComputedStyle(t.element).direction;if("ltr"===h){if(t.value.dj.x>s+t.element.clientWidth)return!0}else if("rtl"===h&&t.value.dj.x<s+i.width-t.element.clientWidth)return!0;const e=i.bottom-i.height;if(t.value.dj.y>e+t.element.clientHeight)return!0}catch(t){d.default.error("Error while intercepting right click. Error: "+t.message,t)}return!1},this.dV=t=>{try{if(!t.element.closest("a"))return!1}catch(t){return!1}return"_blank"==t.element.closest("a").target},this.fV=t=>{if(2===t.lg.button&&(clearTimeout(this._V),!this.UV[t.element.tagName]&&!this.zV(t)&&!this.dV(t))){const i=t.id,s=t;this._V=setTimeout((()=>{this.TD(t.element)||this.HV({element:t.element,dataToEncode:{type:"rightClick",mV:i},relatedEvent:s},"rightClickStruggle")}),this.WV)}},this.Fr=t,this.us=i,this.HV=s,this.VV=h,this.se=e,this._V=void 0,this.WV=e.rightClickTimeout,this.UV={INPUT:!0,SELECT:!0,TEXTAREA:!0,A:!0},e.additionalTagNamesToIgnore&&e.additionalTagNamesToIgnore.length)for(let t=0;t<e.additionalTagNamesToIgnore.length;++t)this.UV[e.additionalTagNamesToIgnore[t]]=!0;i.on("domMutation",this.BV),i.on("segmentChanged",this.BV),i.on("event:change",this.BV),i.on("ajax:send",this.BV),i.on("pageError",this.BV),i.on("event:unload",this.BV),"undefined"!=typeof Element&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var i=this;do{if(i.matches(t))return i;i=i.parentElement||i.parentNode}while(null!==i&&1===i.nodeType);return null}))}}var f=s("./src/js/utils/hookingUtils.js");class m{constructor(t,i,s,e,r){if(this.GV=()=>{try{f.default.oS(this.Fr).aS("open",(function(){this.He.emit("window:open")}))}catch(t){d.default.error("Failed hooking window.open method. "+t.message,t)}},this.fV=t=>{this.qV.forEach((function(i){i(t)}))},this.qV=[],this.VV=new l.default(r.document),this.He=i,this.Fr=r,e.struggleCaptureRightClick&&e.domRecordEnabled){const t=new u(r,i,s,this.VV,{rightClickTimeout:e.struggleRightClickInterval||1e3,elementsToIgnoreBySelector:e.struggleRightClickIgnoreBySelector||[],additionalTagNamesToIgnore:e.struggleRightClickIgnoreByTagNames||[]});this.qV.push(t.fV)}if(e.domRecordEnabled&&e.interceptAjax&&e.struggleCaptureDeadClick){this.GV();const t=new o(i,s,this.VV,{pV:e.struggleDeadClickInterval||1e3,elementsToIgnoreBySelector:e.struggleDeadClickIgnoreBySelector||[],additionalTagNamesToIgnore:e.struggleDeadClickIgnoreByTagNames||[],struggleCaptureDeadClickOnDisabledElements:e.struggleCaptureDeadClickOnDisabledElements||!1});this.qV.push(t.fV)}const n=new a(h.default,t,s,this.VV,{SV:e.struggleRageClickInterval,jV:e.struggleRageClickMinCount,elementsToIgnoreBySelector:e.struggleRageClickIgnoreBySelector});if(this.qV.push(n.fV),e.struggleCaptureErrorClick){const t=new c(i,s,{NV:e.struggleErrorClickInterval||1e3,struggleErrorClickBlacklist:e.struggleErrorClickBlacklist||[]});this.qV.push(t.fV)}}}class g{constructor(t,i,s){this.YV=()=>{this.XV=this.wm(),this.XV&&this.KV&&this.HV({element:document,dataToEncode:{type:"reload"}},"pageStruggle - reload")},this.ZV=()=>{var t,i=this.Fr.performance.getEntriesByType?this.Fr.performance.getEntriesByType("navigation"):[];if(i.length>0)for(t=0;t<i.length;t++){if("reload"===i[t].type)return this.KV=!0,void this.YV();if("back_forward"===i[t].type)return this.$V=!0,void this.JV()}this.Fr.performance.navigation&&this.Fr.PerformanceNavigation&&(this.Fr.performance.navigation.type===this.Fr.PerformanceNavigation.TYPE_RELOAD&&(this.KV=!0,this.YV()),this.Fr.performance.navigation.type===this.Fr.PerformanceNavigation.TYPE_BACK_FORWARD&&(this.$V=!0,this.JV()))},this.QV=()=>{this.ZV()},this.tz=()=>{this.JV(),this.YV()},this.Fr=t,this.HV=i,this.XV=!1,this.$V=!1,this.iz=!1,this.wm=s,this.KV=!1,this.sz=!1}JV(){this.XV=this.wm(),this.XV&&this.$V&&!this.iz&&this.HV({element:document,dataToEncode:{type:"backForward"}},"pageStruggle - backForward")}}s("./node_modules/core-js/modules/es.iterator.some.js");class v{constructor(t,i,s){this.hz=t=>{(0===t.status&&!this.ajaxStruggleIgnoreCancel&&!this.ez(this.ajaxStruggleExcludedUrls,t.url)||t.status>=400)&&this.gV({Ov:t.Bv,cssSelector:t.Pv,dataToEncode:{type:0===t.status?t.aborted?"ajaxAborted":"ajaxCanceled":"ajaxError",xhrStatus:t.status,url:t.url,sn:t.sn}},"ajaxStruggle - checkXhr")},this.gV=t,this.ajaxStruggleIgnoreCancel=i,this.ajaxStruggleExcludedUrls=s,this.ez=(t,i)=>!!t&&t.some((t=>0==i.indexOf(t)))}}class p{constructor(t,i,s,e,r,n){this.rz=()=>{this.gV({dataToEncode:{type:"blankPage"}},"domStruggle - blankPage")},this.nz=()=>{try{return this.VE.plugins.domRecordingPlugin.oz("ShadowRoot")}catch(t){return[]}},this.az=t=>{for(var i=h.default.childNodes(t.shadowRoot),s=0;s<i.length;s++){if(i[s].nodeType===Node.ELEMENT_NODE&&0!==i[s].innerText.trim().length)return!1;if(i[s].nodeType===Node.TEXT_NODE&&0!==i[s].wholeText.trim().length)return!1}return!0},this.cz=t=>t.shadowRoot?this.az(t):0===t.innerText.trim().length,this.lz=()=>{try{var t=this.nz();t.push(this.window.document);for(var i=0;i<t.length;i++)for(var s=t[i].querySelectorAll(this.options.dz),h=0;h<s.length;h++)if(this.cz(s[h]))return void this.rz()}catch(t){}},this.Sx=()=>{this.uz&&this.options.fz?this.rz():this.options.dz&&this.lz()},this.mz=t=>{if(this.uz&&t.nodeType===this.window.Node.TEXT_NODE){var i=t.textContent;i&&i.trim()&&h.default.isVisible(h.default.parentNode(t))&&(this.uz=!1)}},this.gz=t=>{this.options.fz&&this.mz(t)},this.window=t,this.VE=i,this.options=r.Fi(n,{fz:!0,dz:""}),this.gV=s,this.vz=0,this.uz=!0,this.ai=e,this.wV=r,e.on("pageSnapshot:report",this.Sx)}}class w{constructor(t,i,s,e,r,n){this.pz=t=>{let i,s=!1,h=0;for(;!s&&h<this.wz.length;){const e=document.querySelectorAll(this.wz[h]);for(i=0;!s&&i<e.length;)t===e[i]&&(s=!0),i++;h++}return s},this.yz=t=>{for(;t;){if(this.pz(t))return h.default.isVisible(t)?t:null;t=h.default.parentNode(t)||t.host}return null},this.bz=t=>{const i=t.querySelectorAll("input, select, button, textarea");for(let t=0;t<i.length;t++)switch(i[t].type){case"radio":i[t].checked&&(i[t].gbPrepop=!0);break;case"select":case"select-one":i[t].selectedIndex>-1&&(i[t].gbPrepop=!0);break;default:i[t].value&&(i[t].gbPrepop=!0)}t.gbPrepopCheck=!0},this.Tz=t=>{if("INPUT"===t.element.tagName||"TEXTAREA"===t.element.tagName){const i=t.element;i.Ez&&!this.Cz[this.Ac.js(i)]&&h.default.UC(t.lg)&&(this.Cz[this.Ac.js(i)]=!0,this.HV({element:i,dataToEncode:{type:"inputCharsExceeded",mV:t.id},relatedEvent:t},"formStruggle - checkLimit"));const s=parseInt(i.getAttribute("maxLength"));i.Ez=s<=i.value.length}},this.kz=(t,i)=>{if(!t)return!0;if(this.Sz&&(t.gbPrepop||t.getAttribute("value")))return!0;if(this.Iz.length){const t=i?i.outerHTML.toLowerCase():"";for(let i=0;i<this.Iz.length;i++)if(t.indexOf(this.Iz[i].toLowerCase())>=0)return!0}return!1},this.Mz=t=>{const i=this.yz(t.element),s=t.element,h=s?parseInt(s.getAttribute("tabindex")):void 0,e=this.Dz?parseInt(this.Dz.getAttribute("tabindex")):void 0;if(this.Sz&&i&&!i.gbPrepopCheck&&this.bz(i),"radio"===s.type){if(s.name===this.jz)return;this.jz=s.name}else this.jz=null;if(this.Dz&&i===this.xz&&!this.kz(s,i)&&!this.kz(this.Dz))if(h&&e&&h<e)this.HV({element:s,dataToEncode:{type:"formZigzag",reason:"tabindex",mV:t.id},relatedEvent:t},"formStruggle - zigZag1");else{const i=s.getBoundingClientRect(),h=this.Dz&&this.Dz.getBoundingClientRect(),e=i.top-h.top==0;if(i.top-h.top<0)this.HV({element:s,dataToEncode:{type:"formZigzag",reason:"vertical",mV:t.id},relatedEvent:t},"formStruggle - zigZag2");else{const r="rtl"===this.Fr.getComputedStyle(s).getPropertyValue("direction")||"rtl"===this.Fr.getComputedStyle(document.body).getPropertyValue("direction");e&&!r&&i.left-h.left<0?this.HV({element:s,dataToEncode:{type:"formZigzag",reason:"horizontal",mV:t.id},relatedEvent:t},"formStruggle - zigZag3"):e&&r&&i.right-h.right>0&&this.HV({element:s,dataToEncode:{type:"formZigzag",reason:"horizontal-rtl",mV:t.id},relatedEvent:t},"formStruggle - zigZag4")}}this.xz=i,this.Dz=s},this.Rz=t=>{if(h.default.Pr())return!1;const i=this.yz(t.element);if(!i)return!1;const s=this.Ac.js(i);if(i.querySelectorAll("input:not([type]), input[type=text], textarea").length<this.se.struggleUncompletedFormMinFields)return!1;this.Pz[s]||(this.Pz[s]={selector:this.AL.eg(i),cssSelector:this.ML.eg(i),CV:t.id,relatedEvent:t})},this.Az=t=>{const i=this.yz(t.element);if(!i)return;const s=this.Ac.js(i);i&&this.Pz[s]&&delete this.Pz[s]},this.Lz=()=>{for(const t in this.Pz)this.Pz.hasOwnProperty(t)&&this.HV({Ov:this.Pz[t].selector,cssSelector:this.Pz[t].cssSelector,dataToEncode:{type:"uncompletedForm",mV:this.Pz[t].CV},relatedEvent:this.Pz[t].relatedEvent},"formStruggle - uncompletedForm")},this.Oz=t=>{const i=t.extraInfo&&Math.floor(t.extraInfo.focusTime||0);i>this.Fz&&this.HV({element:this.Dz,dataToEncode:{type:"longFocusTime",duration:i,mV:t.id},relatedEvent:this.vI},"formStruggle - longFocus"),this.vI=t},this.Nz=t=>{const i=this.yz(t.element);if(!i)return;const s=this.Ac.js(i);this.Bz[s]?(this.Bz[s].count++,this.Bz[s]._z=t.id,this.Bz[s].relatedEvent=t):this.Bz[s]={count:1,Vz:t.id,relatedEvent:t},this.Bz[s].count>1&&this.HV({element:i,dataToEncode:{type:"formResubmitted",count:this.Bz[s].count,startEventRelatedId:this.Bz[s].Vz,endEventRelatedId:this.Bz[s]._z},relatedEvent:this.Bz[s].relatedEvent},"formStruggle - resubmitted")},this.zz=t=>{this.Az(t),this.Nz(t)},this.Uz=t=>{this.Tz(t)},this.Wz=t=>{this.Rz(t),this.Mz(t),this.Oz(t)},this.Gz=()=>{this.Lz()},this.Fr=t,this.Ac=i,this.HV=s,this.AL=e,this.ML=r,this.se=n,this.Bz={},this.Pz={},this.Dz=null,this.xz=null,this.jz=null,this.Cz={},this.Fz=n.qz||3e4,this.vI=void 0,this.wz=n.formStruggleZigzagFormSelectors||["form"],this.Iz=n.formStruggleZigzagIgnoreFormsWithText||[],this.Sz=n.formStruggleZigzagIgnorePrepopulated}}class y{constructor(t,i,s,e,r,n,o,a,c){this.Yz=(t,i)=>{t.dataToEncode?this.Xz?this.ai.emit("reportStruggle",t):setTimeout((()=>{this.ai.emit("reportStruggle",t)}),0):this.ai.emit("clsDebug","reportStruggle missing dataToEncode. Came from: "+i)},this.Kz=()=>{this.Zz.QV.call(this.Zz)},this.tz=()=>{this.Zz.tz()},this.$z=t=>{this.Jz.zz.call(this.Jz,t)},this.Qz=t=>{this.Jz.Uz.call(this.Jz,t)},this.tH=t=>{this.Jz.Wz.call(this.Jz,t)},this.iH=()=>{this.Xz=!0,this.Jz.Gz.call(this.Jz)},this.sH=t=>{this.hH.fV.call(this.hH,t)},this.eH=t=>{this.rH.hz.call(this.rH,t)},this.initialize=()=>{this.ai.once("domInit:loaded",this.Kz),this.ai.on("event:click",this.sH),this.ai.on("rightclick",this.sH),this.ai.once("sessionCookieSet",this.tz),this.ai.once("plugin:sessionCookieSet",this.tz),this.config.struggleCaptureAjaxErrors&&(this.rH=new v(this.Yz,this.config.ajaxStruggleIgnoreCancel,this.config.ajaxStruggleExcludedUrls),this.ai.on("ajax:end",this.eH)),this.config.collectFormStruggles&&(this.Jz=new w(this.window,this.bV,this.Yz,this.sg,this.ig,{qz:this.config.struggleMaxLongFocusTime,struggleUncompletedFormMinFields:this.config.struggleUncompletedFormMinFields,formStruggleZigzagIgnoreFormsWithText:this.config.formStruggleZigzagIgnoreFormsWithText,formStruggleZigzagIgnorePrepopulated:this.config.formStruggleZigzagIgnorePrepopulated,formStruggleZigzagFormSelectors:this.config.formStruggleZigzagFormSelectors}),this.ai.on("event:submit",this.$z),this.ai.on("event:keyup",this.Qz),this.ai.on("event:elementChange",this.tH),this.ai.on("event:unload",this.iH))},this.nH=t!==t.top,this.config=c,this.window=t,this.bV=s,this.ai=i,this.VE=a,this.sg=r,this.ig=n,this.Jz={},this.hH=new m(this.bV,this.ai,this.Yz,this.config,this.window),this.Zz=new g(this.window,this.Yz,this.VE.wm),this.rH=void 0,this.oH=new p(this.window,this.VE,this.Yz,this.ai,h.default,{fz:!this.nH&&this.config.struggleCaptureBlankPage,dz:c.struggleCaptureBlankPageTargetsSelector}),e.j_(this.oH.gz),this.Xz=!1}}class b{constructor(t,i,e,r,n,o,a,c){this.aH=t=>{this.Uk[t.type]&&setTimeout((()=>{this.cH(this.kh,!1)}),0)},this.lH=()=>!(void 0!==this.dH&&this.dH>-1&&(++this.uH,this.fH&&clearTimeout(this.fH),this.fH=setTimeout((()=>{this.uH=0}),500),this.uH>this.dH)),this.mH=(t,i)=>{this.nk.badRules.push({rule:t,msg:i})},this.gH=t=>{for(var i=0;i<this.vH.length;i++)if(!t[this.vH[i]])return void this.mH(t,"missing mandatory property: "+this.vH[i]);if(this.pH[t.accessorMethod])if(this.VV.aE(t.selector)){var s,e=t.pageUrl;t.pageHash&&(e+=("#"===t.pageHash.charAt(0)?"":"#")+t.pageHash);try{s=new RegExp("^"+e.split("*").join(".*")+"$")}catch(i){return d.default.error("Exception occurred during parsing regular expression. Error: "+i.message,i),void this.mH(t,"Exception occurred during parsing regular expression: "+i.message)}if(s.test(h.default.$r(this.Fr.location.href)))return t.selector=t.selector.replace(/\s*>\s*/g,">"),new this.wH(t,this.VV,this.pH,s)}else this.mH(t,"invalid selector");else this.mH(t,"invalid accessorMethod")},this.yH=t=>{for(var i,s=0;s<t.length;s++)(i=this.gH(t[s]))&&this.bH.push(i);this.nk.configured=t.length},this.TH=t=>{var i;return()=>(i||(i=this.AL.eg(t,!1).selector),i)},this.cH=(t,i)=>{try{for(var e,r,n=h.default.$r(this.Fr.location.href),o={},a=0;a<this.bH.length;a++)if(e=this.bH[a].evaluate(t,n,i,o,this.TH(t)),r=this.bH[a].EH(),e&&e.Eb&&this.CH[r]!==e.Eb){if(e.EP())this.nk.masked++;else{var c=this.bH[a].kH()||this.se.clientAttributeMaxLength;this.He.emit("clientAttribute",{name:r,Eb:e.Eb.substring(0,c)}),this.nk.reportsByRule[r]=(this.nk.reportsByRule[r]||0)+1,this.nk.reported++,this.bH[a].SH.sessionTerminator&&s.g[this.IH].invalidateSession()}this.CH[r]=e.Eb}}catch(t){d.default.error("Exception occurred during rule evaluation. Error: "+t.message,t)}},this.MH=t=>{if(!this.se.ClientAttributesOnUserInteraction)if(this.DH)if(this.lH()){let i="characterData"===t.type;const s=!i&&"attributes"===t.type,e=i?h.default.parentNode(t.target):t.target;i||"childList"!==t.type||(i=1===t.addedNodes.length&&t.addedNodes[0].nodeType===window.Node.TEXT_NODE),e&&this.cH(e,i||s)}else this.jH();else this.jH()},this.jH=()=>{!this.se.ClientAttributesOnUserInteraction&&void 0!==this.xH&&this.xH>-1&&(this.RH&&clearTimeout(this.RH),this.DH=!1,this.RH=setTimeout((()=>{this.DH=!0,this.cH(this.kh,!1)}),this.xH))},this.PH=()=>{this.bH=[],!this.se.ClientAttributesOnUserInteraction&&this.AH&&(this.He.off("domMutation",this.MH),this.AH=!1)},this.LH=(t,i)=>{var s,h;for(s=0;s<i.length;++s){var e=!1;for(h=0;h<t.length;++h)if(t[h].name===i[s].name){e=!0;break}e||t.push(i[s])}},this.OH=t=>{this.PH(),this.CH={},this.nk.configurationLastUpdatedAt=h.default.zn(),this.LH(this.FH,t),h.default.assign(this.nk.rulesList,this.FH),this.yH(this.FH),this.se.ClientAttributesOnUserInteraction||this.AH||!this.bH.length||(this.He.on("domMutation",this.MH),this.AH=!0),this.NH&&this.cH(this.kh,!1)},this.getStats=()=>this.nk,this.evaluateAttributes=()=>{this.cH(this.kh,!1)},this.Fr=t,this.kh=this.Fr.document,this.He=i,this.wH=r,this.VV=n,this.AL=o,this.pH=a,this.se=c,this.CH={},this.IH=e,this.bH=[],this.FH=[],this.vH=["name","pageUrl","selector","accessorMethod","accessor"],this.NH=!1,this.nk={masked:0,reported:0,configured:0,configurationLastUpdatedAt:0,badRules:[],reportsByRule:{},rulesList:[]},this.Uk=h.default.ye("mousedown","scroll","touchstart","touchend","keydown","drag","dragstart","dragend","navigation","unload","beforeunload"),this.AH=!1,this.xH=c.clientAttributeFuseWaitTime,this.DH=!0,this.RH=0,this.dH=c.clientAttributeMaxMutations,this.uH=0,this.fH=0,i.once("domInit:loaded",(()=>{this.cH(this.kh,!1),this.NH=!0})),this.se.ClientAttributesOnUserInteraction?i.on("saveEvent",this.aH):i.on("segmentChanged",this.jH),this.BH=this.gH}}class T{constructor(t,i,s,h){this.VV=i,this.pH=s,this.SH=t,this._H=h,this.VH=-1!==t.selector.indexOf(">")}zH(t){return this._H.test(t)}EH(){return this.SH.name}kH(){return this.SH.maxLength}evaluate(t,i,s,e,r){if(this.zH(i)){var n=e[this.SH.selector];if(n||(s?this.VV.matches(t,this.SH.selector)&&(n=t):n=this.VV.querySelector(t,this.SH.selector)),!n&&this.VH){var o=r();if(h.default.startsWith(this.SH.selector,o)){var a=this.SH.selector.substring(o.length+1);if(a)try{s?this.VV.matches(t,a)&&(n=t):n=this.VV.querySelector(t,a)}catch(t){}}}if(n)return e[this.SH.selector]=n,this.pH[this.SH.accessorMethod](n,this.SH.accessor)}}}var E=s("./src/js/enums/domMaskerTypes.js"),C=s("./src/js/censor/domCensorDirection.js");class k{constructor(t,i,s,e){this.UH=t=>{for(;t;){if(t.nodeType===window.Node.ELEMENT_NODE&&t.hasAttribute(this.Mw))return!0;t=h.default.parentNode(t)}return!1},this.HH=t=>!("value"!==t.accessor||!this.kP.Dw(t.WH,C.default.Xe,E.default.w_))||(!!this.kP.Dw(t.WH,C.default.Je,E.default.E_)||!(!this.GH[t.accessor]||!this.qH[t.WH.tagName.toLowerCase()]||t.WH.hasAttribute&&t.WH.hasAttribute(this.Mw))),this.YH=t=>{if(this.kP.Dw(t.WH,C.default.Je,E.default.E_))return!0;if(this.XH&&"value"===t.accessor){if(this.se.valueMaskIgnoreAttribute&&t.WH&&t.WH.nodeType===window.Node.ELEMENT_NODE&&t.WH.hasAttribute(this.se.valueMaskIgnoreAttribute))return!1;if(this.XH.We(t.WH))return!0}return("innerText"!==t.accessor&&"textContent"!==t.accessor&&"innerHTML"!==t.accessor&&"outerHTML"!==t.accessor||!this.Mw||!this.UH(t.WH))&&(!("innerText"!==t.accessor&&"textContent"!==t.accessor||!(this.kP.Dw(t.WH,C.default.$e,E.default.y_)||this.kP.Dw(t.WH,C.default.Je,E.default.y_)||this.KH.ts(t.WH,C.default.$e)||this.KH.ts(t.WH,C.default.Je)))||(!("innerHTML"!==t.accessor||!(this.kP.Dw(t.WH,C.default.$e,E.default.y_,E.default.b_)||this.kP.Dw(t.WH,C.default.Je,E.default.y_,E.default.b_)||this.KH.ts(t.WH,C.default.$e)||this.KH.ts(t.WH,C.default.Je)))||!("outerHTML"!==t.accessor||!(this.kP.Dw(t.WH,C.default.$e,E.default.y_,E.default.b_)||this.kP.Dw(t.WH,C.default.Je,E.default.y_,E.default.b_)||this.KH.ts(t.WH,C.default.$e)||this.KH.ts(t.WH,C.default.Je)))))},this.ZH=t=>!!this.kP.Dw(t.WH,C.default.Je,E.default.E_),this.kP=t,this.KH=i,this.XH=s,this.se=e,this.GH=h.default.ye.apply(null,this.se.domMaskedAttributes),this.qH=h.default.ye.apply(null,this.se.domMaskAttributesByTag),this.Mw=this.se.domMaskIgnoreAttribute,this.attribute=(t,i)=>{var s={accessor:i,WH:t,Eb:t.getAttribute&&t.getAttribute(i)};return s.EP=()=>this.HH(s),s},this.property=(t,i)=>{var s={accessor:i,WH:t,Eb:""+(t[i]||"")};return s.EP=()=>this.YH(s),s},this.constant=(t,i)=>{var s={WH:t,Eb:i};return s.EP=()=>this.ZH(s),s}}}class S{constructor(t,i,s,e,n,o,a){this.$H=t=>{t.attributeRules&&(this.JH.OH(t.attributeRules),this.bO=t.attributeRules),this.QH=h.default.zn()},this.tW=t=>{this.QH||(this.$H(t),this.iW=!0)},this.sW=()=>{this.bO&&this.JH.OH(this.bO)},this.initialize=function(){};var c=s.plugins.domRecordingPlugin&&s.plugins.domRecordingPlugin.Xk(),l=s.plugins.domRecordingPlugin&&s.plugins.domRecordingPlugin.hW();c||(c={Dw:function(){return!1}}),l||(l={ts:function(){return!1}}),this.JH=new b(t,i,a,T,n,o,new k(c,l,e,{domMaskedAttributes:r.default.domMaskedAttributes,domMaskAttributesByTag:r.default.domMaskAttributesByTag,domMaskIgnoreAttribute:r.default.domMaskIgnoreAttribute,valueMaskIgnoreAttribute:r.default.valueMaskIgnoreAttribute}),{clientAttributeMaxLength:r.default.clientAttributeMaxLength,clientAttributeFuseWaitTime:r.default.clientAttributeFuseWaitTime,clientAttributeMaxMutations:r.default.clientAttributeMaxMutations,ClientAttributesOnUserInteraction:r.default.ClientAttributesOnUserInteraction}),this.bO=void 0,this.stats=()=>this.JH.getStats(),this.evaluateAttributes=()=>{this.JH.evaluateAttributes()},this.iW=!1,this.QH=void 0,i.once("plugin:newRemoteConfig",this.tW),i.on("newRemoteConfig",this.$H),i.on("segmentChanged",this.sW)}}var I=s("./src/js/resolving/SelectorResolver.js");const M={SHOW_ALL:0,eW:1};class D{constructor(t,i,s){this.rW=t=>{for(;t&&!t[this.nW];)t[this.nW]=!0,t=h.default.parentNode(t)?h.default.parentNode(t):t.host},this.oW=t=>{const i=this,s=this.Fr.Element.prototype[t];s&&(this.Fr.Element.prototype[t]=function(){const t=s.apply(this,arguments);try{h.default._j(this)?(i.He.emit("shadow:rootAttached",t),i.He.emit("shadow:rootDetected",t)):i.He.emit("shadow:rootDetected",t),this[i.aW]=!0,i.rW(this),i.nk.hookInvocationsCount++,i.nk.totalShadowRootCount++}catch(t){}return t})},this.cW=t=>{let i;for(i=0;i<t.length;i++)this.rW(t[i]),this.He.emit("shadow:rootDetected",t[i]),this.nk.initialShadowRootCount++,this.nk.totalShadowRootCount++},this.lW=t=>{if("childList"===t.type){let i;for(i=0;i<t.addedNodes.length;i++)t.addedNodes[i][this.nW]&&this.uW.dW(t.addedNodes[i],(t=>{t.shadowRoot&&!t[this.aW]&&this.He.emit("shadow:rootDetected",t.shadowRoot)}),M.eW);for(i=0;i<t.removedNodes.length;i++)t.removedNodes[i][this.nW]&&this.uW.dW(t.removedNodes[i],(t=>{t.shadowRoot&&(this.He.emit("shadow:rootRemoved",t.shadowRoot),this.nk.totalShadowRootCount--,this.nk.totalShadowRootRemoved++)}),M.eW)}},this.fW=t=>{this.cW(t||[]),["attachShadow","createShadowRoot"].forEach(this.oW)},this.stats=()=>this.nk,this.Fr=t,this.He=i,this.uW=s,this.nW="_gbHasShadow",this.aW="_gbHasObserver",this.nk={initialShadowRootCount:0,hookInvocationsCount:0,totalShadowRootCount:0,totalShadowRootRemoved:0},this.He.on("domMutation",this.lW)}}class j{constructor(t,i,s){this.element=t,this.id=i,this.addedNodes={},this.mW=[],this.Ac=s}gW(t){this.addedNodes[t]=!0}}class x{constructor(t,i,s){this.vW=(t,i,s)=>{const h=this.pW(t);if(!h)return;const e=(this.wW[i]||{})[h],r=t[h];(t.yW||(this.bW?r!==this.defaultValue(t,h):e!==r))&&(s[i]||(s[i]=new j(t,i,this.Ac),s[i].properties=[]),s[i].properties.push(h));const n={};n[h]=r,this.wW[i]=n},this.TW=t=>!(!t.id||!this.EW[t.id])||"hidden"===t.getAttribute("type"),this.start=()=>{},this.track=()=>{let t,i;const s={},h={},e=this.CI.querySelectorAll("input,select,textarea");for(t=0;t<e.length;t++)this.TW(e[t])||(i=this.Ac.js(e[t]),this.vW(e[t],i,s),h[i]=!0);let r;for(r in this.wW)h[r]||delete this.wW[r];return this.bW=!1,s},this.kW=()=>this.CI,this.pW=t=>{if("SELECT"===t.tagName)return"selectedIndex";if("TEXTAREA"===t.tagName)return"value";if("INPUT"===t.tagName){const i=t.getAttribute("type")&&t.getAttribute("type").toLowerCase();return!i||"checkbox"!==i&&"radio"!==i?"value":"checked"}},this.defaultValue=(t,i)=>{if("checked"===i)return t.hasAttribute("checked");if("selectedIndex"===i){const i=t.querySelector("option[selected]");return i?i.index:null!==t.querySelector("option")?0:-1}const s=t.getAttribute(i);return s||"value"!==i?s:""},this.SW=()=>Object.keys(this.wW).length,this.CI=t,this.Ac=i,this.EW=h.default.ye.apply(null,s||[]),this.bW=!0,this.wW={}}}s("./node_modules/core-js/modules/es.error.cause.js");class R{constructor(t,i,s,e,r,n){this.IW=()=>{this.MW&&(this.MW=!1,this.start())},this.DW=()=>{if(!this.jW){if(this.xW=this.RW(this.xW),!this.xW)throw new Error("cannot start DomObserver: native interface not supported by the browser.");this.se.handleAttributeMutationsAsChunks>=0?this.jW=new this.xW(this.PW):this.jW=new this.xW((t=>{this.se.domIgnoreLargeMutationsChunks>0&&t&&t.length>this.se.domIgnoreLargeMutationsChunks||t.forEach(this.AW)}))}},this.LW=()=>this.Fr.document&&this.Fr.document.body,this.OW=t=>!!t.toString&&-1!==t.toString().toLowerCase().indexOf("[native code]"),this.RW=t=>{if(!this.LW())return t;if(this.se.reinstateNativeMutationObserver&&"undefined"!=typeof __zone_symbol__MutationObserver)return __zone_symbol__MutationObserver;const i=t.toString().toLowerCase();return this.se.reinstateNativeMutationObserver&&i.indexOf("[native code]")<0?h.default.WC("MutationObserver"):t},this.FW=t=>{var i;for(i=0;i<t.length;i++)if(this.NW(t[i]))return!1;return!0},this.BW=t=>{var i,s=[];for(i=0;i<t.length;i++)h.default._j(t[i])&&s.push(t[i]);return s.length===t.length?void 0:s},this.PW=t=>{if(!window.Node)return;let i;this._W&&window.clearTimeout(this.VW);for(let s=0;s<t.length;s++){if(i=t[s],this.se.domIgnoreSameValueAttributesModification&&"attributes"===i.type&&i.target.getAttribute(i.attributeName)===i.oldValue)return;if("attributes"===i.type){if(this.zW[i.attributeName])continue;i.target.UW=i.target.UW||this.HW++;const t=i.target.UW+"_"+i.attributeName,s=this.WW[t];s&&(s.XP=!0),this.WW[t]=i,this.GW.push(i),this._W=!0}else this.Bx(),this.MH(i)}this._W&&(this.VW=setTimeout(this.Bx,this.se.handleAttributeMutationsAsChunks))},this.AW=t=>{window.Node&&(this.se.domIgnoreSameValueAttributesModification&&"attributes"===t.type&&t.target.getAttribute(t.attributeName)===t.oldValue||"attributes"===t.type&&this.zW[t.attributeName]||this.MH(t))},this.MH=t=>{let i=t.target;if(this.NW(i)&&(!this.se.ignoreMutationsOnNotAttachedElements||h.default._j(i))){if("characterData"===t.type){try{if((null===t.oldValue||""===t.oldValue||"string"==typeof t.oldValue&&""===t.oldValue.trim())&&""===t.target.nodeValue.trim())return}catch(t){}i instanceof CharacterData&&(i=h.default.parentNode(i)||i)}if(this.se.domOmitInvisibleElements&&i.nodeType===this.Fr.Node.ELEMENT_NODE&&!i.qW&&h.default.isVisible(i)&&(t={type:"childList",target:h.default.parentNode(t.target),YW:h.default.parentNode(t.target),addedNodes:[i],removedNodes:[]},i.qW=!0,i=h.default.parentNode(i)),"childList"===t.type){if(this.FW(t.addedNodes)&&this.FW(t.removedNodes))return;if(this.se.addBaseDomainToRelativeUrls)for(var s=0;s<t.target.children.length;s++){var e=t.target.children[s].attributes.href;e&&e.value&&0===e.value.indexOf("/")&&1!==e.value.indexOf("//")&&(e.value=h.default.jC(e.value))}var r=this.BW(t.addedNodes);if(r){if(!r.length&&!t.removedNodes.length)return;t={type:t.type,target:t.target,YW:t.YW,addedNodes:r,removedNodes:t.removedNodes}}}if(t.YW=i,!this.KW.XW(t)){if(this.se.domIgnoreSameValueAttributesModification&&"attributes"===t.type&&"class"===t.attributeName&&t.target.classList&&t.target.classList.value===t.oldValue)return;if(this.se.delayDomMutationEvent>=0)setTimeout((()=>{this.He.emit("domMutation",t)}),this.se.delayDomMutationEvent);else if(t.addedNodes.length>0&&h.default.zC(this.se.domDelayAddedNodesByClass,t.addedNodes)){const i=this;setTimeout((function(){i.He.emit("domMutation",t)}),0)}else this.He.emit("domMutation",t)}}},this.Bx=()=>{if(!this._W)return;const t=this.GW;this.WW={},this.GW=[];for(let i=0;i<t.length;i++)t[i].XP||this.MH(t[i]);this._W=!1},this.ZW=()=>{this.$W=!1,this.jW&&this.jW.disconnect()},this.getName=()=>"MutationObserver based",this.start=()=>{this.MW||this.$W||(this.DW(),this.jW.observe(this.CI,this.JW),this.$W=!0)},this.stop=()=>{this.ZW()},this.Fr=t,this.He=i,this.KW=s,this.CI=e,this.NW=r,this.se=n,this.jW,this.$W=!1,this.MW=!1,this.zW=h.default.ye.apply(null,this.se.domIgnoreAttributes||[]),this.HW=1,this.WW={},this.GW=[],this._W=!1,this.VW=void 0,this.xW=this.Fr.MutationObserver||this.Fr.WebKitMutationObserver||null,this.se.initialObserverFirst&&this.DW(),this.JW={attributes:!this.se.characterDataOnly,childList:!this.se.characterDataOnly,characterData:!0,subtree:!this.se.characterDataOnly,attributeOldValue:!this.se.characterDataOnly&&this.se.domIgnoreSameValueAttributesModification,characterDataOldValue:!0},!this.se.characterDataOnly&&this.se.domFilterAttributes&&this.se.domFilterAttributes.length&&(this.JW.attributeFilter=this.se.domFilterAttributes),this.He.once("init:domready",(()=>{this.xW=this.RW(this.xW)})),this.He.on("quotaBreach",(()=>{this.MW=!0,this.ZW()})),this.He.on("recordingStarted",this.IW),this.He.on("stopDomRecording",this.stop)}}class P{constructor(t,i,s,e,r){this.QW=t=>{h.default.Br(t,"DOMCharacterDataModified",this.AW,!1),this.se.characterDataOnly||(h.default.Br(t,"DOMNodeInserted",this.AW,!1),h.default.Br(t,"DOMNodeRemoved",this.AW,!1),h.default.Br(t,"DOMAttrModified",this.AW,!1))},this.IW=()=>{this.MW&&(this.MW=!1,this.start())},this.AW=t=>{let i,s,e;const r=[],n=[],o=t.type;if("DOMNodeInserted"===t.type){if(i="childList",s=h.default.parentNode(t.target),s&&(r.push(t.target),!this.NW(t.target)))return}else if("DOMNodeRemoved"===t.type){if(i="childList",s=h.default.parentNode(t.target),s&&(n.push(t.target),!this.NW(t.target)))return}else if("DOMCharacterDataModified"===t.type)i="characterData",s=h.default.parentNode(t.target);else{if("DOMAttrModified"!==t.type)return;i="attributes",s=t.target,e=t.attrName}if(!this.NW(s))return;if(!s)return;const a={tG:o,type:i,target:t.target,YW:s,attributeName:e,addedNodes:r,removedNodes:n};this.KW.XW(a)||this.He.emit("domMutation",a)},this.ZW=()=>{this.$W&&(this.$W=!1,this.CI.removeEventListener("DOMCharacterDataModified",this.AW,!1),this.se.characterDataOnly||(this.CI.removeEventListener("DOMNodeRemoved",this.AW,!1),this.CI.removeEventListener("DOMAttrModified",this.AW,!1),this.CI.removeEventListener("DOMNodeInserted",this.AW,!1)))},this.iG=()=>{this.MW=!0,this.ZW()},this.getName=()=>"DOM events based",this.supported=()=>"undefined"!=typeof MutationEvent,this.start=()=>{this.MW||this.$W||(this.QW(this.CI),this.$W=!0)},this.stop=()=>{this.ZW()},this.isActive=()=>this.$W,this.He=t,this.KW=i,this.CI=s,this.NW=e,this.$W=!1,this.MW=!1,this.He.on("quotaBreach",this.iG),this.He.on("recordingStarted",this.IW),this.He.on("stopDomRecording",this.stop),this.se=r}}class A{constructor(t,i,s){this.sG=t=>{for(;t;)this.hG[this.Ac.js(t)]=!0,t=h.default.parentNode(t)},this.eG=(t,i)=>{for(var s,e,r=[t];r.length;)if(i(t=r.shift()),e=this.Ac.js(t),h.default.children(t)&&this.hG[e])for(delete this.hG[e],s=0;s<h.default.children(t).length;s++)r.push(h.default.children(t)[s])},this.rG=(t,i,s)=>{function h(t){var i;for(i=0;i<t.length;i++)if("STYLE"===t[i].tagName)return!0;return!1}return!t.ownerDocument.head.contains(t)&&!h(i||[])&&!h(s||[])},this.nG=t=>{var i=this.Ac.js(t);if(this.Nh[i]){delete this.Nh[i];var s,e=[],r=h.default.childNodes(t)||[];for(s=0;s<r.length;s++)r[s].oG&&(delete r[s].oG,e.push(r[s]));this.He.emit("domMutation",{tG:"childList",type:"childList",target:t,YW:t,addedNodes:e,removedNodes:[]})}},this.yi=t=>{var i=this.Ac.js(t.YW),s=h.default.isVisible(t.YW);if("childList"===t.type&&this.rG(t.YW,t.addedNodes,t.removedNodes)&&!s){var e;for(e=0;e<t.addedNodes.length;e++)t.addedNodes[e].oG=!0;return this.Nh[i]=!0,this.nk.aG+=t.addedNodes.length,this.nk.cG++,this.sG(t.YW),!0}return this.hG[i]&&s&&this.eG(t.YW,this.nG),!1},this.He=i,this.Ac=s,this.Nh={},this.hG={},this.nk={cG:0,aG:0},this.lG=h.default.ye("DIV","UL","OL","LI","NAV","SPAN","STRONG","LABEL","A"),this.XW=this.yi}}class L{constructor(t,i,s,e,r,n){this.nc=t=>this.NW(t)&&!h.default.eC(t,this.se.domIgnoreChangesByTag)&&!h.default.$s(t,this.se.domIgnoreChangesByClass)&&this.se.domIgnoreChangesById.indexOf(h.default.Ys(t))<0,this.Fr=t,this.NW=e,this.se=h.default.Fi(n,{domIgnoreChangesByTag:[],domIgnoreChangesByClass:[],domIgnoreChangesById:[]});let o,a=this.se.dG||this.se.uG&&this.fG()?new A(t,i,r):{XW:function(){return!1}};this.se.domForceMutationEventsHandler?(o=new P(i,a,s,this.nc,{characterDataOnly:!!this.se.characterDataOnly}),o.supported()||(o=void 0)):o=new R(t,i,a,s,this.nc,{domTamperingDetectionEnabled:this.se.domTamperingDetectionEnabled,delayDomMutationEvent:this.se.delayDomMutationEvent,domDelayAddedNodesByClass:this.se.domDelayAddedNodesByClass,domFilterAttributes:this.se.domFilterAttributes,domIgnoreAttributes:this.se.domIgnoreAttributes,domOmitInvisibleElements:this.se.domOmitInvisibleElements,handleAttributeMutationsAsChunks:this.se.handleAttributeMutationsAsChunks,ignoreMutationsOnNotAttachedElements:this.se.ignoreMutationsOnNotAttachedElements,characterDataOnly:!!this.se.characterDataOnly,reinstateNativeMutationObserver:this.se.reinstateNativeMutationObserver,initialObserverFirst:this.se.initialObserverFirst,addBaseDomainToRelativeUrls:this.se.addBaseDomainToRelativeUrls,domIgnoreSameValueAttributesModification:this.se.domIgnoreSameValueAttributesModification,domIgnoreLargeMutationsChunks:this.se.domIgnoreLargeMutationsChunks}),this.mG=o}}class O{constructor(t,i){this.apply=(t,i)=>{if(!this.TW(t.element)&&t.properties&&t.properties.length>0){let s,e,r=this.gG[t.element.tagName];if(r){let n=h.default.cC(i,r,t.id);for(s=0;s<t.properties.length;s++)e=this.vG(t.element,t.properties[s]),n[e]=this.pG(t.element,e);return n}}},this.pG=(t,i)=>this.XH&&"value"===i?this.XH.Ue(t):t[i],this.TW=t=>this.wG[h.default.Ys(t)],this.vG=(t,i)=>"SELECT"===t.tagName?"selectedIndex":"INPUT"===t.tagName&&this.yG[t.getAttribute("type")||""]?"checked":i,this.XH=t,this.se=i||{},this.yG=h.default.ye("checkbox","radio"),this.wG=h.default.ye.apply(null,this.se.bG||[]),this.gG={INPUT:"inputs",SELECT:"selects",TEXTAREA:"textareas"}}}class F{constructor(t,i,s,h,e,r,n,o){this.TG=t=>{const i=new L(this.EG,this.He,t,this.kG.CG,this.SG,{semiDomEnabled:this.se.semiDomEnabled,domForceIEMutationEventsHandler:this.se.domForceIEMutationEventsHandler,domForceMutationEventsHandler:this.se.domForceMutationEventsHandler,domTamperingDetectionEnabled:this.se.domTamperingDetectionEnabled,domDelayAddedNodesByClass:this.se.domDelayAddedNodesByClass,domFilterAttributes:this.se.domFilterAttributes,domIgnoreAttributes:this.se.domIgnoreAttributes,domIgnoreChangesById:this.se.domIgnoreChangesById,domIgnoreChangesByClass:this.se.domIgnoreChangesByClass,domIgnoreChangesByTag:this.se.domIgnoreChangesByTag,handleAttributeMutationsAsChunks:this.se.handleAttributeMutationsAsChunks,ignoreMutationsOnNotAttachedElements:this.se.ignoreMutationsOnNotAttachedElements,reinstateNativeMutationObserver:this.se.reinstateNativeMutationObserver,initialObserverFirst:this.se.initialObserverFirst,addBaseDomainToRelativeUrls:this.se.addBaseDomainToRelativeUrls,domIgnoreSameValueAttributesModification:this.se.domIgnoreSameValueAttributesModification,domIgnoreLargeMutationsChunks:this.se.domIgnoreLargeMutationsChunks}).mG;this.IG[this.Ac.js(t)]=i,this.kG.DG().MG({name:"property",jG:new x(t,this.Ac,this.AL,this.se.domIgnoredFormElements),xG:[new O(this.XH,{bG:this.se.domIgnoredFormElements}).apply]}),i.start()},this.PG=t=>{const i=this.Ac.js(t);this.IG[i]&&(this.IG[i].stop(),delete this.IG[i]),this.kG.DG().AG(t)},this.LG=()=>{this.OG.fW(this.kG.oz("ShadowRoot"))},this.Bh=()=>{for(let t in this.IG)this.IG.hasOwnProperty(t)&&this.IG[t]&&(this.IG[t].stop(),this.IG[t]=void 0);this.IG=void 0},this.initialize=()=>{},this.stats=()=>this.OG.stats(),this.EG=t,this.jn=i,this.He=s,this.XH=h,this.SG=e,this.kG=r,this.AL=n,this.se=o,this.IG={},this.Ac=e,this.OG=new D(this.EG,this.He,this.kG.FG()),this.He.on("shadow:rootDetected",this.TG),this.He.on("shadow:rootRemoved",this.PG),this.He.on("domTrackingStarted",this.LG),this.He.on("event:unload",this.Bh)}}class N{constructor(t,i){this.NG=()=>{this.BG||(this.Fr.outerHeight===this._G&&window.Math.abs(this.Fr.innerHeight-this.VG)>this.zG?(this.He.emit("devToolsVisibilityChanged",{value:!0,size:"oh_"+this.Fr.outerHeight+"_ih_"+this.Fr.innerHeight}),this.BG=!0):this.Fr.outerWidth===this.UG&&window.Math.abs(this.Fr.innerWidth-this.HG)>this.zG?(this.He.emit("devToolsVisibilityChanged",{value:!0,size:"ow_"+this.Fr.outerWidth+"_iw_"+this.Fr.innerWidth}),this.BG=!0):this.Fr.outerHeight!==this._G?(this._G=this.Fr.outerHeight,this.VG=this.Fr.innerHeight):(this.UG=this.Fr.outerWidth,this.HG=this.Fr.innerWidth))},this.WG=()=>{this.He.on("window:resize",this.NG)},this.Fr=t,this.He=i,this.BG=!1,this.zG=150,this._G=t.outerHeight,this.VG=t.innerHeight,this.UG=t.outerWidth,this.HG=t.innerWidth}}class B{constructor(t,i,s){this.GG=()=>this.Fr.outerHeight!==this._G?(this._G=this.Fr.outerHeight,!0):this.Fr.outerWidth!==this.UG&&(this.UG=this.Fr.outerWidth,!0),this.NG=t=>{this.qG||t&&this.GG()||this.Fr.console.log(this.YG)},this.WG=()=>{this.He.on("event:unload",(()=>this.NG(!1))),this.He.once("init:preloaded",(()=>this.NG(!1))),this.He.once("plugin:init:preloaded",(()=>this.NG(!1))),this.He.on("window:resize",(()=>this.NG(!0)))},this.Fr=t,this.He=i,this.se=s||{XG:""},this.qG=!1,this.YG=t.document.createElement("div"),this.YG.textContent=this.se.XG,this._G=t.outerHeight,this.UG=t.outerWidth;const h=this;Object.defineProperty(this.YG,"id",{get:function(){h.qG||(h.qG=!0,h.He.emit("devToolsVisibilityChanged",{value:!0,size:"oh_"+h.Fr.outerHeight+"_ih_"+h.Fr.innerHeight+"_ow_"+h.Fr.outerWidth+"_iw_"+h.Fr.innerWidth}))}})}}s("./node_modules/core-js/modules/web.self.js"),s("./node_modules/core-js/modules/web.url-search-params.delete.js"),s("./node_modules/core-js/modules/web.url-search-params.has.js"),s("./node_modules/core-js/modules/web.url-search-params.size.js");class _{constructor(t,i,s,h){this.KG=()=>{this.ZG=!0;try{this.ix=new this.Fr.Worker(this.$G),this.ix.onmessage=t=>{t.data&&"gbDTDWorkerReady"===t.data?(this.ix.postMessage("gbDTDHello"),setTimeout((()=>{this.ix.terminate(),this.ZG&&!this.qG&&(this.qG=!0,URL.revokeObjectURL(this.$G),this.us.emit("devToolsVisibilityChanged",{value:!0,size:"oh_"+this.Fr.outerHeight+"_ih_"+this.Fr.innerHeight+"_ow_"+this.Fr.outerWidth+"_iw_"+this.Fr.innerWidth}))}),this.JG)):t.data&&"gbDTDHi"===t.data&&(this.ZG=!1)}}catch(t){d.default.error("Failed checking Devtools visibility: "+t.message,t),this.us.emit("clsDebug","Failed checking Devtools visibility")}},this.NG=()=>{this.QG&&(this.qG||setTimeout(this.KG,this.tq))},this.WG=()=>{this.us.on("event:unload",this.NG),this.us.once("domInit:preloaded",this.NG),this.us.on("window:resize",this.NG)},this.Fr=t,this.us=i,this.tq=s,this.JG=h,this.qG=!1,this.ZG=void 0,this.ix=void 0,this.QG=!0;try{this.$G=URL.createObjectURL(new Blob(["(",function(){self.postMessage("gbDTDWorkerReady");
debugger;

self.onmessage=function(t){t.data&&"gbDTDHello"===t.data&&self.postMessage("gbDTDHi")}}.toString(),")()"],{type:"application/javascript"}))}catch(t){this.QG=!1,d.default.error("Failed creating blob for worker: "+t.message,t),this.us.emit("clsDebug","Failed creating blob for worker during Devtools detection. Detection will not work.")}}}class V{constructor(t,i,s){this.initialize=()=>{this.iq=!0},this.Fr=t,this.He=i,this.se=s,this.sq=void 0,this.hq=this.Fr.navigator.userAgent,/firefox/i.test(this.hq)?this.sq=new N(this.Fr,this.He):h.default.LE(this.hq)&&h.default.UE(this.hq,89,"chrome/")?this.se.devToolsDebuggerBasedDetection?this.sq=new _(this.Fr,this.He,this.se.devToolsDetectionWorkerTimeout,this.se.devToolsDetectionCallbackTimeout||567):this.sq=new N(this.Fr,this.He):this.sq=new B(t,i,{XG:this.se.devToolsDetectionMessage}),this.sq.WG()}}class z{constructor(t,i,s,e){this.eq=()=>{this.rq=h.default.zn()},this.nq=()=>(this.rq=this.rq||h.default.zn(),h.default.zn()-this.rq),this.oq=t=>t.nodeType===window.Node.TEXT_NODE&&h.default.parentNode(t)&&this.aq[h.default.parentNode(t).nodeName],this._c=t=>{if(t.target&&"characterData"===t.type&&!this.oq(t.target)){var i=t.target.data;this.cq();var s=this.nq();this.lq=this.lq||s>=this.se.dq,(this.uq||this.fq)&&this.lq&&this.mq<this.gq&&this.vq[this.Ac.js(t.target)]!==i&&t.oldValue.replace(/\s/g,"")!==i.replace(/\s/g,"")&&(++this.mq,this.He.emit("domTampered",{element:h.default.parentNode(t.target),xv:i,Rv:t.oldValue})),this.uq=!0}},this.pq=()=>{this.lq=!1,this.rq=h.default.zn()},this.cq=()=>{var t=document.querySelector("title");document.documentElement.className.match("translated-rtl")||document.documentElement.className.match("translated-ltr")?(this.wq||this.pq(),this.wq=!0):this.wq&&(this.wq=!1,this.pq()),t&&t.getAttribute&&t.getAttribute("_msthash")&&t.getAttribute("_msttexthash")&&t.getAttribute("_msthidden")?(this.yq||this.pq(),this.yq=!0):this.yq&&(this.yq=!1,this.pq())},this.bq=()=>{var t=f.default.oS(this.Fr.CharacterData.prototype),i=f.default.oS(this.Fr.Text.prototype),s=f.default.oS(this.Fr.Node.prototype);f.default.oS(this.Fr.HTMLElement.prototype);let h=this;var e=function(){h.mq<h.gq&&(h.vq[h.Ac.js(this)]=this.data)},r=function(){this&&this.nodeType===window.Node.TEXT_NODE&&h.mq<h.gq&&(h.vq[h.Ac.js(this)]=this.data)};t.hS("replaceData",e),t.hS("appendData",e),t.hS("insertData",e),t.hS("deleteData",e),t.cS("data",e),i.hS("splitText",e),s.cS("textContent",r),s.cS("nodeValue",r)},this.Tq=t=>{var i;var s=document.implementation.createHTMLDocument("test");(i=new MutationObserver((function(s){i&&i.disconnect(),"characterData"!==s[0].type&&t()}))).observe(s,{attributes:!1,childList:!0,characterData:!0,subtree:!0,attributeOldValue:!1,characterDataOldValue:!1}),s.body.innerText="text1"},this.initialize=()=>{var t;if(this.se.domTamperingIgnorePages&&this.se.domTamperingIgnorePages.length)for(t=0;t<this.se.domTamperingIgnorePages.length;++t)if(h.default.rC(this.se.domTamperingIgnorePages[t],h.default.$r(this.Fr.location.href)))return;var i=!(!h.default.LE()&&!h.default.BE()||this.Fr.opr);const s=()=>{this.bq(),this.He.on("domMutation",this._c)};if(this.He.once("domInit:domready",this.eq),i){var e=h.default.PE();if(e&&e<70)return;this.Tq(s)}else s()},this.Fr=t,this.He=i,this.Ac=s,this.se=h.default.Fi(e,{dq:2e3,Eq:["TITLE","STYLE","SCRIPT"]}),this.aq=h.default.ye.apply(null,this.se.Eq),this.vq={},this.gq=5,this.mq=0,this.wq=!1,this.yq=!1,this.lq=!1,this.rq=void 0,this.uq=!1,this.fq=!1,this.He.on("devToolsVisibilityChanged",(t=>{this.fq=t.value}))}}s("./node_modules/core-js/modules/es.iterator.take.js");var U=s("./src/js/mask/DomMasker.js"),H=s("./src/js/mask/DomRegexMasker.js"),W=s("./src/js/censor/encrypt/DomEncryptor.js"),G=s("./src/js/censor/SelectorValidator.js");class q{constructor(t,i,s){this.EG=t,this.Cq=i,this.kq=s,this.Nr()}Nr(){if(!this.EG.WebSocket)return;const t=this.EG.WebSocket,i=function(i,s){const h=s?new t(i,s):new t(i);try{this.kq?(this.EG.Sq=this.EG.Sq||[],this.EG.Sq.push(h)):h.addEventListener("message",this.Cq)}catch(t){d.default.error("failed intercepting WebSocket constructor: "+t.message,t)}return h}.bind(this);if(this.kq&&this.EG.opener&&this.EG.opener.Sq&&this.EG.opener.Sq.length)for(let t=0;t<this.EG.opener.Sq.length;t++)this.EG.opener.Sq[t].addEventListener("message",this.Cq);i.prototype=t.prototype,i.prototype.constructor=t,i.CONNECTING=0,i.OPEN=1,i.CLOSING=2,i.CLOSED=3,this.EG.WebSocket=i}}var Y=s("./src/js/censor/mask/maskingUtils.js");class X{constructor(t){this.Iq=t=>{if(!t||!this.Mq)return t;var i,s,h,e,r,n=t.split(";"),o=[];for(i=0;i<n.length;i++)-1!==(h=(s=n[i]).indexOf("="))?(e=s.substring(0,h).trim(),r=s.substring(h+1),o.push(e+"="+(r&&this.Mq.hasOwnProperty(e)?Y.default.ns(r):r))):o.push(s);return o.join("; ")},this.se=t,this.Mq=this.se&&this.se.Dq?h.default.ye.apply(null,this.se.Dq):null}}X.prototype.jq=function(t){return this.Iq(t)};class K{constructor(t){this.apply=(t,i)=>{if("INPUT"===t.tagName){i.value&&t.setAttribute("value",i.value),i.checked&&t.setAttribute("checked","");const s=this;i.addEventListener("invalid",(function(t){s.us.emit("html5FormValidation:invalid",t)}))}},this.us=t}}class Z{constructor(t){this.apply=(t,i)=>{"TEXTAREA"===t.tagName&&i.firstChild&&i.value!==i.firstChild.textContent&&(t.firstChild?t.xq?i.ri?t.firstChild.textContent=Y.default.ns(i.value,void 0,void 0,i.ri):t.firstChild.textContent=Y.default.ns(i.value):t.firstChild.textContent=i.value:this.us.emit("clsDebug","textareaElementValueSetter",void 0,"cannot set firstChild.textContent as firstChild does not exist on clone of "+i.tagName+" element with _gbid "+(i._gbid||"not assigned")),i.addEventListener("invalid",(function(t){this.us.emit("html5FormValidation:invalid",t)})))},this.us=t}}class ${constructor(t){this.apply=(t,i)=>{if("SELECT"===t.tagName){const s=i.selectedIndex;let h=t.getElementsByTagName("option");h.length?h[s]&&h[s].setAttribute("selected",""):(h=i.getElementsByTagName("option"),h[s]&&(h[s].Rq=!0)),i.addEventListener("invalid",(t=>{this.us.emit("html5FormValidation:invalid",t)}))}"OPTION"===t.tagName&&i.Rq&&t.setAttribute("selected","")},this.us=t}}s("./node_modules/core-js/modules/es.array.includes.js");class J{constructor(t,i,s){this.apply=t=>{if("STYLE"!==t.tagName||!t.ownerDocument)return;const i=t.ownerDocument.createElement("style");if(this.Pq&&h.default.OC(t,i),t.media&&i.setAttribute("media",t.media),t.sheet){let s;const h=t.sheet.cssRules;let e="";if(h&&h.length)for(s=0;s<h.length;s++)"string"!=typeof h[s].cssText||this.Aq&&h[s]instanceof CSSFontFaceRule||(this.Lq&&h[s].cssText.includes(":defined")?e+=h[s].cssText.replaceAll(":defined",""):e+=h[s].cssText);i.textContent=e}return i},this.Pq=t,this.Aq=i,this.Lq=s}}class Q{constructor(t,i){this.apply=t=>{if("STYLE"!==t.tagName)return;const i=t.ownerDocument.createElement("style");if(this.Pq&&h.default.OC(t,i),t.media&&i.setAttribute("media",t.media),i.textContent=(t.textContent||"")+(t.Oq||""),!i.textContent&&t.sheet){const s=t.sheet.cssRules,h=[];let e;if(s&&s.length){for(e=0;e<s.length;e++)"string"==typeof s[e].cssText&&h.push(s[e].cssText);i.textContent=h.join("")}}return this.Lq&&i.textContent.includes(":defined")&&(i.textContent=i.textContent.replaceAll(":defined","")),i},this.Pq=t,this.Lq=i}}class tt{constructor(t){this.Fq=()=>this.Nq?new J(this.Bq,this._q,this.Lq):new Q(this.Bq,this.Lq),this.Nq=t.domPreciseStyleSheetCloning,this.Bq=t.domRecordStyleAttributes,this._q=t.removeBase64Fonts,this.Lq=t.removeCustomElementsDefinitionFromStyle}}class it{constructor(t,i){this.apply=(t,i)=>{if("CANVAS"===t.tagName){var s=h.default.NC(this.He,i,this.JW.canvasQuality);s&&(t.innerHTML=s)}},this.He=t,this.JW=i}}class st{constructor(t,i,s,h,e,r){this.toString=()=>"seq:"+this.By+"referrer"+this.referrer+"charset:"+this.charset+"cookie-len"+(this.cookie?this.cookie.length:0)+(this.Ly.length>20?"html length: "+this.Ly.length:"html: "+this.Ly),this.Ly=t,this.referrer=r?i.replace(/\s/g,"%20"):i,this.By=s,this.charset=e,this.cookie=h}}class ht{constructor(t){this.apply=t=>{if(this.Vq&&t&&t.attributes&&t.removeAttribute)for(let i=0;i<this.Vq.length;i++)t.removeAttribute(this.Vq[i])},this.Vq=t}}class et{constructor(){this.apply=(t,i)=>{t&&("IMG"===t.tagName&&t.getAttribute("src")?t.setAttribute("src",i.src):"LINK"===t.tagName&&t.getAttribute("href")&&t.setAttribute("href",i.href))}}}class rt{constructor(){this.apply=t=>{t&&("IMG"===t.tagName&&t.getAttribute("src")?t.setAttribute("src",h.default.XC(t.getAttribute("src"))):"LINK"===t.tagName&&t.getAttribute("href")&&t.setAttribute("href",h.default.XC(t.getAttribute("href"))))}}}class nt{constructor(){this.apply=t=>{t&&("IMG"===t.tagName&&t.getAttribute("src")?t.setAttribute("src",h.default.bg(t.getAttribute("src"))):"LINK"===t.tagName&&t.getAttribute("href")&&t.setAttribute("href",h.default.bg(t.getAttribute("href"))))}}}s("./node_modules/core-js/modules/es.set.difference.v2.js"),s("./node_modules/core-js/modules/es.set.intersection.v2.js"),s("./node_modules/core-js/modules/es.set.is-disjoint-from.v2.js"),s("./node_modules/core-js/modules/es.set.is-subset-of.v2.js"),s("./node_modules/core-js/modules/es.set.is-superset-of.v2.js"),s("./node_modules/core-js/modules/es.set.symmetric-difference.v2.js"),s("./node_modules/core-js/modules/es.set.union.v2.js");class ot{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.apply=t=>{if(this.Vq.has(t.nodeName)&&null!=t&&t.attributes&&t.removeAttribute){let i=[],s=!1;for(let h=0;h<t.attributes.length;h++){let e=t.attributes[h];if(e.name.startsWith("="))s=!0,i.push(e.name);else if(s){if(e.value&&""!==e.value.trim())break;i.push(e.name)}}i.forEach((i=>{t.removeAttribute(i)}))}},this.Vq=new Set(t.map((t=>t.toUpperCase())))}}class at{constructor(t,i,s,e,r,n,o){this.take=(t,i,s)=>{this.zq=t,this.Uq=s,null===this.kh.body&&s(void 0);try{if(this.se.snapshotAsync)this.Hq.cloneNode(this.kh.documentElement,this.Wq,this.Gq,i,this.Hq.qq(),this.Yq);else{const t=this.Hq.cloneNode(this.kh.documentElement,this.Wq,this.Gq,i);this.Yq(t)}}catch(t){this.Xq(t)}},this.Yq=t=>{try{if(t&&t.error===this.Kq)this.lastError=this.Kq,this.Uq({error:{visibility:this.Kq}});else{var i=this.Zq+(this.se.fixChromeBackgroundClipCSS?t.outerHTML.replace(/ background-clip/g," -webkit-background-clip"):t.outerHTML),s=this.$q?this.$q.jq(this.kh.cookie):this.kh.cookie;this.Uq(new st(i,this.Dn.mask(this.kh.referrer),this.zq,s,this.kh.characterSet,this.se.encodeReferrer))}}catch(t){this.Xq(t)}},this.Xq=t=>{d.default.error("could not obtain page snapshot. error: "+t),this.lastError=t,this.Uq(void 0)},this.kh=i,this.Hq=e,this.Dn=r,this.se=o||{},this.$q=new X({Dq:this.se.maskCookies});let a=new $(s),c=new Z(s),l=new K(s),u=new ht(this.se.domRemoveAttributes);var f=h.default.yC().add(l.apply).add(c.apply).add(a.apply).add(u.apply);this.se.domRecordAbsoluteResourcesURLs&&f.add((new et).apply),this.se.removeUnnamedAttributesByTags&&this.se.removeUnnamedAttributesByTags.length&&f.add(new ot(this.se.removeUnnamedAttributesByTags).apply),this.se.protocolsToSwitch&&f.add((new nt).apply),this.se.domRemoveDuplicatedSlashResourcesUrl&&f.add((new rt).apply),this.se.recordCanvas&&f.add(new it(s,this.se).apply),t.ShadowRoot&&this.se.recordShadowDom&&f.add(n.__),this.Gq=f.bC();let m=new tt({domPreciseStyleSheetCloning:this.se.domPreciseStyleSheetCloning,domRecordStyleAttributes:this.se.domRecordStyleAttributes,removeBase64Fonts:this.se.removeBase64Fonts,removeCustomElementsDefinitionFromStyle:this.se.removeCustomElementsDefinitionFromStyle});this.Wq=m.Fq().apply,this.Kq="page is empty or not visible",this.Zq="<!DOCTYPE html>\n"}}class ct{constructor(t,i,s,h){this.Jq=()=>{let t,i,s,h,e,r,n={timestamp:this.Qq++,propertiesMode:"modifiedOnly",version:this.se.tY},o=0;for(t=0;t<this.iY.length;t++){for(i in e=this.iY[t],s=e.jG.track(),r=0,s)h=s[i],this.sY(e.xG,h,n)&&r++;o+=r}return 0===o&&(n=void 0),n},this.start=()=>{let t;for(t=0;t<this.iY.length;t++)this.iY[t].jG.start()},this.MG=t=>{this.iY.push(t)},this.AG=t=>{let i;for(i=this.iY.length-1;i>=0;i--)if(this.iY[i].jG.kW()===t){this.iY.splice(i,1);break}},this.iY=t||[],this.AL=i,this._o=s,this.se=h||{},this.Qq=0}sY(t,i,s){if(i.removed)return!1;let h,e,r=!1;for(h=0;h<t.length;h++)e=t[h](i,s),!e||r||!this.se.setSelectorToAttributes&&i.attributes||(e.selector=this.AL.eg(i.element,!1).selector,r=!0);return!0}}class lt{constructor(t,i){this.hY=()=>{let t,i,s,e=0;for(t in this.eY)if(this.eY.hasOwnProperty(t)&&(s=this.eY[t],!s.removed)){for(i=s.element;h.default.parentNode(i);){if(this.rY[this.Ac.js(i)]){e++,s.removed=!0;break}i=h.default.parentNode(i)}s.removed||i.nodeType===window.Node.DOCUMENT_FRAGMENT_NODE||i.nodeType===window.Node.DOCUMENT_NODE||(s.removed=!0,e++)}return e},this.nY=t=>{const i=this.Ac.js(t);let s=this.eY[i];return s||(s=new j(t,i,this.Ac),this.eY[i]=s),s},this.yi=t=>{const i=this.oY++,s=this.nY(t.YW);if("characterData"===t.type)s.aY=t.target;else if("childList"===t.type){if(s.cY=i,t.addedNodes.length){let i,h;for(h=0;h<t.addedNodes.length;h++)i=this.Ac.js(t.addedNodes[h]),this.rY[i]=!0,s.gW(i),t.lY&&s.mW.push(t.addedNodes[h])}}else"attributes"===t.type&&(s.attributes||(s.attributes={}),s.attributes[t.attributeName]=i)},this.dY=t=>{const i=this.Ac.js(t),s=this.nY(t.host);s.cY=this.oY++,this.rY[i]=!0,s.gW(i)},this.start=()=>{this.He.on("domMutation",this.yi)},this.track=()=>{const t=this.eY;return this.hY(t),this.oY=0,this.eY={},this.rY={},t},this.kW=()=>!1,this.He=t,this.Ac=i,this.eY={},this.rY={},this.oY=0,this.He.on("shadow:rootAttached",this.dY)}}class dt{constructor(t){this.ps=(t,i)=>{for(let s=0;s<this.uY.length;s++)this.uY[s].ps(t,i)},this.vs=(t,i)=>{let s,h;for(let e=0;e<this.uY.length;e++)h=this.uY[e].vs(t,i),s=s||h;return s},this._s=(t,i)=>{for(let s=0;s<this.uY.length;s++)this.uY[s]._s(t,i)},this.ys=()=>{for(let t=0;t<this.uY.length;t++)this.uY[t].ys()},this.uY=t}}class ut{constructor(t,i){this.next=()=>{let t=h.default.childNodes(this.fY)[++this.mY];for(;t&&!this.AN(t);)t=h.default.childNodes(this.fY)[++this.mY];return t},this.fY=t,this.AN=i,this.mY=-1}}class ft{constructor(){this.clone=(t,i,s,e)=>{const r=[];if(t.getRootNode().adoptedStyleSheets&&(t===t.getRootNode()||t.adoptedStyleSheets||"HEAD"===t.nodeName)){const n=t.adoptedStyleSheets||t.getRootNode().adoptedStyleSheets,o=t===t.getRootNode()?i:s.js(t);n&&n.length&&n.forEach((n=>{const a=h.default.xC(n,i,o),c=s.js(a);n.gY&&a.setAttribute("gbRemoveId",n.gY),n.vY=o,n.gY=c,a.setAttribute("gbid",n.gY),n.pY&&!n.pY[i]?n.pY[i]=!0:n.pY||(n.pY={},n.pY[i]=!0),e[i]=t.getRootNode(),r.push(a)}))}return r}}}class mt{constructor(t,i,s,e,r,n,o,a,c,l,d,u,f,m,g,v,p,w,y,b,T){this.wY=function(t,i){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:11;for(;t&&i&&s>0;){if("BODY"===t.tagName||"HTML"===t.tagName)return!1;if(i===t.tagName)return!0;t=h.default.parentNode(t)||t.host,s--}},this.yY=t=>t&&"SLOT"===t.tagName&&this.bY.some((i=>this.wY(t,i,5))),this.TY=t=>t instanceof this.Fr.ShadowRoot,this.EY=t=>t?this.kY.CY.createElement(this.SY):this.kY.CY.createElement("gb-shadow"),this.IY=t=>/{\s+\[native code]/.test(Function.prototype.toString.call(t.constructor)),this.clone=(t,i,s,e,r,n)=>{const o=this.MY++;n&&(this.$M[o]=n);const a=r||this.uW,c={},l=this.kY.CY.createElement("gb-root");let d=0;const u=this.jY.DY();this.xY=!this.RY||e||void 0===e;let f=t.ownerDocument.querySelector("HTML>BODY");return!f&&this.PY&&(f=t.ownerDocument.querySelector("HTML>FRAMESET")),this.xY||f&&h.default.yj(f)?(a.dW(t,((t,r)=>{if(u.AY)return!0;!this.xY&&(t&&t.nodeType===this.Fr.Node.TEXT_NODE||this.RY&&!e&&h.default.isVisible(t))&&(this.xY=!0);let n,o=!0;const a=this.Ac.js(t);if(!!this.Fr.ShadowRoot&&this.TY(t))this.LY&&this.OY[t.host.nodeName]||this.FY&&!this.IY(t)?(n=this.EY(!0),t.host.ZB=!0):n=this.EY();else try{if(n=i&&i(t,r)||this.Wq&&this.Wq(t,r),n)o=!1;else{if("BODY"===t.tagName&&t.parentElement&&"HTML"!==t.parentElement.tagName&&this.NY){let i,s;for(n=this.kY.CY.createElement("gb-body"),i=0;i<t.attributes.length;i++)s=t.attributes[i],n.setAttribute(s.name,s.value)}else n=this.kY.cloneNode(t);this.yY(t)&&(n.textContent=t.innerText,this.So.log("renderSlotsInCustomElements: ",t))}}catch(t){this.He.emit("clsDebug","Error: NodeCloner, error message:"+t.message)}if(n){if(s&&s(n,t),this.Gq&&this.Gq(n,t),this.BY&&this.BY(n,t),t.nodeType===this.Fr.Node.ELEMENT_NODE&&(t.qW=!0),this._Y&&t&&t.getRootNode&&t.nodeType!==this.Fr.Node.DOCUMENT_NODE){const i=(new ft).clone(t,a,this.Ac,this.VY);if(i.length){let t;for(t=0;t<i.length;++t)n.appendChild(i[t])}}(t.shadowRoot||h.default.childNodes(t)&&h.default.childNodes(t).length)&&(c[a]=n);const i=h.default.parentNode(t)||t.host;try{let t=i&&c[this.Ac.js(i)]||l;("HEAD"===t.nodeName&&n.nodeType!==window.Node.TEXT_NODE||"HEAD"!==t.nodeName)&&t.appendChild(n)}catch(t){this.He.emit("clsDebug","Error: NodeCloner, error message:"+t.message)}}return t&&t.nodeType===this.Fr.Node.ELEMENT_NODE&&d++%100==0&&u.zY(d),o&&!u.AY}),void 0,void 0,this.UY,l,o),n?void 0:this.UY(l,o)):(this.He.emit("clsDebug","BODY element is not visible during snapshot"),this.UY(null,o))},this.UY=(t,i)=>{let s=null;if(t&&h.default.childNodes(t)&&h.default.childNodes(t).length>1){if(this.He.emit("clsDebug","Error: NodeCloner, cloneRoot.childNodes have more then one child"),this.HY){let i,e=h.default.childNodes(t);for(i=0;i<e.length;++i)"HTML"===e[i].nodeName&&(s=e[i])}}else this.xY?t&&(s=t.lastChild):s={error:"page is empty or not visible"};if(!this.$M[i])return s;this.$M[i](s),delete this.$M[i]},this.Fr=t,this.He=i,this.kY=s,this.jY=e,this.Ac=r,this.uW=n,this.Wq=o,this.Gq=a,this.BY=c,this._Y=l,this.VY=d,this.HY=u,this.RY=f,this.PY=m,this.FY=g,this.So=v,this.bY=p,this.NY=w,this.SY=y,this.OY=h.default.ye.apply(null,b),this.LY=T,this.MY=0,this.$M={}}}class gt{constructor(t,i,s){this.dW=(t,i,s,e)=>{let r,n,o=t;const a=s?"children":"childNodes",c=[o],l={};for(this.WY.ps(t,l);c.length;)if(o=c.pop(),o.GY)this.WY._s(o.parent,l);else if(this.qY(o,e)&&(n=i(o,l),!1!==n)){const t=h.default[a](o);if(null!=t&&t.length)for(this.WY.vs(o,l)&&c.push({parent:o,GY:!0}),r=t.length-1;r>=0;r--)c.push(t[r]);this.se.YY&&o.shadowRoot&&(t&&t.length||this.WY.vs(o,l)&&c.push({parent:o,GY:!0}),c.push(o.shadowRoot))}this.WY.ys()},this.qY=t,this.WY=i,this.se=h.default.Fi(s,{YY:!1})}}class vt{constructor(t,i,s){this.XY=()=>{let t=!1,i=0,s=0;for(;!t&&this.KY.length;){s=h.default.zn();var e=this.KY.pop();if(e.GY)this.WY._s(e.parent,this.ZI);else if(this.qY(e,this.ZY)&&!1!==this.$Y(e,this.ZI)){if(e[this.JY]&&e[this.JY].length){this.WY.vs(e,this.ZI)&&this.KY.push({parent:e,GY:!0});for(var r=e[this.JY].length-1;r>=0;r--)this.KY.push(e[this.JY][r])}this.se.YY&&e.shadowRoot&&this.KY.push(e.shadowRoot)}i+=h.default.zn()-s,i>this.QY&&(t=!0)}this.KY.length?window.setTimeout(this.XY,0):(this.WY.ys(),this.tX(this.iX,this.sX))},this.dW=(t,i,s,h,e,r,n)=>{if(this.hX)throw"NodeVisitorAsync cannot be re-used";this.hX=!0,this.tX=e,this.iX=r,this.sX=n,this.JY=s?"children":"childNodes",this.KY=[t],this.ZI={},this.$Y=i,this.ZY=h,this.WY.ps(t,this.ZI),this.XY()},this.hX=!1,this.qY=t,this.WY=i,this.se=h.default.Fi(s,{YY:!1,visitorAsyncMaxChunkTime:50}),this.QY=this.se.visitorAsyncMaxChunkTime}}class pt{constructor(t,i){this.eX=(t,i)=>{if(!t.AY){const s=-1!==t.duration?t.duration:new Date-t.rX;t.AY=!0,this.us.emit("dom:fuseBlown",{reason:i,duration:s,elements:t.nX,oX:this.se.oX||-1,aX:this.se.aX||-1}),this.us.emit("clsDebug","DOM cloning fuse blown. reason:"+i+" elements:"+t.nX+" duration:"+s)}},this.cX=(()=>{const t=this;return function(i){this.AY||(this.nX=i,t.lX&&(this.duration=new Date-this.rX,this.duration>=t.se.oX)?t.eX(this,"duration"):t.dX&&this.nX>=t.se.aX&&t.eX(this,"elementCount"))}})(),this.DY=()=>({AY:!1,rX:new Date,nX:-1,duration:-1,zY:this.cX}),this.us=t,this.se=i||{},this.dX=(this.se.aX||0)>0,this.lX=(this.se.oX||0)>0}}class wt{constructor(t,i){this.apply=t=>{if("TITLE"===t.nodeName){const i=t.ownerDocument.createElement("title");return i.textContent=h.default.rs(t.textContent,(t=>this.hs.ns(t,null,this.se.titleMaskingChar))),i}},this.hs=t,this.se=i||{}}}class yt{constructor(t,i,s,e){this.uX=t=>t.parentElement&&t.parentElement.tagName&&this.JW.renderSlotsInCustomElements.some((function(i){return i===t.parentElement.tagName})),this.apply=(t,i)=>{if(t&&t.nodeType===window.Node.TEXT_NODE&&i){if(this.JW.renderSlotsInCustomElements.length&&this.uX(t))return t.ownerDocument.createTextNode("");if(i.Bw)return t.ownerDocument.createTextNode(h.default.rs(t.textContent,(t=>this.hs.ns(t,null,this.JW.fX))));if(i.fs){const i=this.KH.encrypt(t.textContent);return t.ownerDocument.createTextNode(i)}if(i.Ww){const i=this.hs.Bs(t.textContent,this.JW.domRegexPatternForMasking,this.JW.domRegexMaskingChar);return t.ownerDocument.createTextNode(i)}}},this.hs=t,this.KH=i,this.xP=s,this.JW=e}}class bt{constructor(t,i){this.apply=t=>{if(this.Tw[t.tagName]&&"function"==typeof t.getAttribute&&!t.hasAttribute(this.Mw)){for(let i in this.Rw)if(this.Rw.hasOwnProperty(i)){const s=t.getAttribute(i);s&&(this.mX[t.tagName]&&"src"===i?t.setAttribute(i,this.mX[t.tagName]):t.setAttribute(i,this.hs.ns(s,void 0,this.se.attributeMaskingChar)))}if(this.gX&&t.dataset)for(let i in t.dataset)t.dataset[i]=this.hs.ns(t.dataset[i],void 0,this.se.attributeMaskingChar)}},this.hs=t,this.se=i,this.mX={IMG:"data:image/gif;base64,"},this.Rw=h.default.ye.apply(null,i.domMaskedAttributes),this.Tw=h.default.ye.apply(null,(i.bw||[]).map((t=>t.toUpperCase()))),this.gX=!!i.domMaskDataAttributes,this.Mw=i.domMaskIgnoreAttribute}}class Tt{constructor(t){this.apply=t=>{if("TEXTAREA"===t.tagName&&t.firstChild){let i;if(t.firstChild.textContent&&(i=this.XH.Ue(t),i!==t.firstChild.textContent)){const s=t.cloneNode(!0);return s.firstChild.textContent=i,s.xq=!0,s}}},this.XH=t}}class Et{constructor(t){this.apply=t=>{if("INPUT"===t.tagName){t.getAttribute("value")&&t.setAttribute("value",this.XH.Ue(t))}},this.XH=t}}class Ct{constructor(t,i,s,e){this.CY=void 0,this.cloneNode=void 0,this.vX=h.default.ye.apply(null,["TEXTAREA"]),this.importNodeWhenUrlContains=e||[];var r=t,n=[];try{s.forEach((t=>{var i=t?new RegExp(t,"i"):void 0;i&&n.push(i)}))}catch(t){}if(this.pX=()=>{this.CY=r.document.implementation.createHTMLDocument("cloner-doc"),this.cloneNode=function(t){return this.CY.importNode(t,!!this.vX[t.tagName])}},Array.isArray(n)&&n.some((t=>t.test(r.navigator.userAgent)))||h.default.dl(r.navigator.userAgent)||h.default.BE(r.navigator.userAgent)){this.CY=r.document.implementation.createHTMLDocument("cloner-doc");var o=r.document.documentElement?r.document.documentElement.namespaceURI:null;this.cloneNode=function(t){var i;return!this.vX[t.tagName]&&t&&t.nodeType===r.Node.ELEMENT_NODE?(i=t.namespaceURI!==o?this.CY.createElementNS(t.namespaceURI,t.tagName.toLowerCase()):this.CY.createElement(t.tagName),Array.prototype.slice.call(t.attributes).forEach((function(t){try{i.setAttribute(t.name,t.value)}catch(t){}}))):i=this.CY.importNode(t,!!this.vX[t.tagName]),i}}else this.pX()}}class kt{constructor(t,i){this.apply=(t,i)=>{t&&t.nodeType===window.Node.ELEMENT_NODE&&t.setAttribute(this.wX,i[this.yX])},this.wX=t,this.yX=i}}class St{constructor(t){this.bX=()=>{let t;const i=new Map;for(t in this.se.TX)i.set(t,new Set(this.se.TX[t]));return i},this.EX=()=>{let t;const i=new Map;for(t in this.se.CX)i.set(t,new RegExp(this.se.CX[t]));return i},this.accept=(t,i)=>{var s;if(this.se.domOmitInvisibleElements&&!t.qW&&t.nodeType===window.Node.ELEMENT_NODE&&"HTML"!==t.tagName&&"LINK"!==t.tagName&&"STYLE"!=t.tagName&&h.default.parentNode(t)&&"HTML"!==h.default.parentNode(t).tagName&&"HEAD"!==h.default.parentNode(t).tagName&&!h.default.isVisible(t)&&(i||t.outerHTML.indexOf("<style")<0&&!this.kX.test(t.outerHTML)))return!1;if(this.se.SX&&this.se.SX>-1&&this.IX.has(t.tagName)&&t.innerHTML.length>this.se.SX)return!1;if("HEAD"===(null===(s=h.default.parentNode(t))||void 0===s?void 0:s.tagName)&&this.MX.has(t.tagName))return!1;if(this.DX.has(t.id)||"OBJECT"===t.tagName&&this.jX.has(t.getAttribute("type"))||h.default.$s(t,this.se.xX))return!1;if(this.RX.has(t.tagName)){const i=this.PX.get(t.tagName);if(!i||!i.exec(t.textContent))return!1}if((null==t?void 0:t.nodeType)===window.Node.ELEMENT_NODE&&this.se.AX&&this.se.AX.length)for(const i of this.se.AX)if(t.matches(i))return!1;if(t&&"IFRAME"===t.tagName&&t.src&&this.se.domOmitAnalyticsIframes&&this.se.domOmitAnalyticsIframes.length){const i=1,s=1,e=0;for(let r=0;r<this.se.domOmitAnalyticsIframes.length;r++){const n=h.default.De(t.src);if(n&&n.indexOf(this.se.domOmitAnalyticsIframes[r])>-1&&t.width<=i&&t.height<=s&&("hidden"===t.style.visibility||"none"===t.style.display||t.style.opacity<=e))return!1}}return((null==t?void 0:t.nodeType)!==window.Node.COMMENT_NODE||!this.se.LX)&&(!this.OX.has(t.tagName)||"undefined"===t.id||!this.OX.get(t.tagName).has(t.id))},this.se=h.default.Fi(t,{FX:[],CX:{},TX:{},LX:!0,NX:[],BX:[],xX:[],_X:[],tagsToCheckLength:[],SX:-1,domOmitInvisibleElements:!1,domOmitAnalyticsIframes:[]}),this.OX=this.bX(),this.PX=this.EX(),this.RX=new Set(this.se.FX),this.MX=new Set(this.se.NX),this.DX=new Set(this.se.BX),this.jX=new Set(this.se._X),this.IX=new Set(this.se.tagsToCheckLength),this.kX=/<link[^>]+?rel\s*?=\s*?['"]stylesheet/gi}}class It{constructor(){this.clone=t=>{if("LINK"!==t.tagName||"import"!==t.getAttribute("rel"))return;const i=[],s={};let h,e,r,n,o=t.VX,a="";for(;o;){if(r=o.querySelectorAll("style"),r.length)for(h=0;h<r.length;h++)a+=r[h].textContent;for(n=o.querySelectorAll("link[rel='import']"),e=0;e<n.length;e++)n[e].VX&&!s[n[e].href]&&(i.push(n[e].VX),s[n[e].href]=!0);o=i.pop()}if(a){const i=t.ownerDocument.createElement("style");return i.textContent=a,i.setAttribute("gb-imported-from",t.href),i}}}}class Mt{constructor(t,i){this.zX=t=>{this.us.emit("clsDebug","base64ImageRemover",void 0,"removed image from "+t.nodeName+" node with _gbid "+(t._gbid||"not assigned"))},this.apply=(t,i,s)=>{if(this.UX[t.tagName]){if("IMG"===t.tagName&&t.src)return this.HX.test(t.src)?(this.zX(t),s?"":(t.src="",void t.setAttribute("gb-dataremoved",""))):t.src;if("STYLE"===t.tagName&&this.WX.test(t.innerText))return this.zX(t),s?t.innerText.replace(this.WX,"").replace(/(\r\n|\n|\r)/gm,""):(t.innerText=t.innerText.replace(this.WX,"").replace(/(\r\n|\n|\r)/gm,""),void t.setAttribute("gb-dataremoved",""));const i=t.getAttribute("style");if(i)return this.WX.test(i)?(this.zX(t),s?i.replace(this.WX,""):(t.style.backgroundImage="",void t.setAttribute("gb-dataremoved",""))):i}},this.us=t,this.UX=i||{},this.HX=/(url\()?"?data:image\/(svg\+xml|\.?(png|jpe?g));[a-zA-Z0-9\D]*;?base64/,this.WX=/(background)(-image)*:(.*)(url\()?(&quot;)?"?data:image\/(svg\+xml|(\.?(png|jpe?g)));(.)?(base64,).*(\s)*?(?=\))\)*;*/}}class Dt{constructor(t){this.apply=(t,i,s)=>{if("STYLE"===t.tagName&&this.GX.test(t.innerText)){if(this.zX(t),s)return t.innerText.replace(this.GX,"").replace(/(\r\n|\n|\r)/gm,"");t.innerText=t.innerText.replace(this.GX,"").replace(/(\r\n|\n|\r)/gm,""),t.setAttribute("gb-dataremoved","")}},this.us=t,this.GX=/@font-face\s*{[^}]*src:[^;]*url\([^)]*base64[^)]*\)[^}]*\}/g}zX(t){this.us.emit("clsDebug","base64FontRemover",void 0,"removed font data from "+t.nodeName+" node with _gbid "+(t._gbid||"not assigned"))}}class jt{constructor(t,i){this.clone=t=>{let i;if(t.tagName&&(i=t.tagName.toUpperCase()),this.qX[i])try{let s,h;const e=t.outerHTML,r=this.YX[e];if(r)h=t.ownerDocument.createElement(i),h.setAttribute(this.XX,r);else{for(this.YX[e]=this.KX,h=t.ownerDocument.createElement(i),h.innerHTML=t.innerHTML,s=0;s<t.attributes.length;s++){const i=t.attributes[s];h.setAttribute(i.name,i.value)}h.setAttribute(this.ZX,this.KX.toString()),this.KX++}return h}catch(t){d.default.error("Error while handling repetitive element: "+t.message,t),this.He.emit("clsDebug","error while handling repetitive element. Exception message: "+t.message)}},this.He=t,this.$X=i,this.KX=1,this.ZX="gb-proto",this.XX="gb-clone",this.YX={},this.$X=i.map((t=>t.toUpperCase())),this.qX=h.default.ye.apply(null,this.$X)}}class xt{constructor(){this.acceptNode=t=>{if(!t.getAttribute||"OBJECT"!==t.tagName)return!1;const i=(t.getAttribute("data")||"").toLowerCase();return"text/html"===(t.getAttribute("type")||"").toLowerCase()||i.indexOf(".html")===i.length-5||i.indexOf(".htm")===i.length-4},this.apply=t=>{this.acceptNode(t)&&t.setAttribute("_gbObject","")}}}class Rt{constructor(t,i,s,e){this.apply=(t,i)=>{t&&("INPUT"===t.tagName||"SELECT"===t.tagName)&&h.default.isVisible(i)&&this.us.emit("newInputElement",{gbid:this.Ac.js(i),clone:t,JX:this.AL.eg(i),cssSelector:this.ML.eg(i)})},this.us=t,this.Ac=i,this.AL=e,this.ML=s}}class Pt{constructor(t,i){this.apply=(t,i)=>{let s=this.QX;var e;if(i.nodeType===i.ELEMENT_NODE)for(e=0;e<this.tK.length;++e)if(h.default.Ye(i,this.tK[e])){var r=this.Fr.getComputedStyle(i);for(var n in s)if(r[n])if(s[n].iK&&s[n].iK!==r[n]){if(s[n].sK)break}else t.setAttribute(this.QX[n].hK,s[n].eK?r[n]:"");else if(s[n].sK)break;break}},this.Fr=t,this.tK=i,this.QX={"-webkit-appearance":{hK:"_gb-apple-pay",eK:!1,iK:"-apple-pay-button",sK:!0},"-apple-pay-button-type":{hK:"_gb-apple-pay-type",eK:!0,iK:!1,sK:!1},"-apple-pay-button-style":{hK:"_gb-apple-pay-style",eK:!0,iK:!1,sK:!1}}}}class At{constructor(t,i,s,e,r,n,o,a,c,l,u,f,m){this.rK=()=>this.se.valueMaskingMode===this._o.Yi.Gs||(!!(this.se.maskBlacklistValueByClass.length||this.se.maskBlacklistValueById.length||this.se.valueMaskByCategories.length||this.se.valueBlacklistMaskSimpleSelector.length)||(this.se.valueEncryptionMode===this._o.Yi.Gs||!(!this.se.valueEncryptById.length&&!this.se.valueEncryptByClass.length))),this.nK=t=>new ut(t,this.oK),this.qq=()=>new vt(this.qY,new dt(this.uY),{YY:this.se.recordShadowDom,visitorAsyncMaxChunkTime:this.se.visitorAsyncMaxChunkTime}),this._o=s,this.se=u,this.se.renderSlotsInCustomElements=u.renderSlotsInCustomElements,this.qY=new St({LX:!u.domKeepComments,FX:["SCRIPT","NOSCRIPT","DOM-IF","CODE"],TX:u.domIgnoredFormElements?{INPUT:u.domIgnoredFormElements}:{},CX:u.domKeepScriptMatching?{SCRIPT:u.domKeepScriptMatching}:{},NX:["IFRAME","FRAME","FRAMESET"],BX:u.domMaskOmitById||u.domOmitById,xX:u.domMaskOmitByClass||u.domOmitByClass,_X:u.domOmitObjectElementsByType,AX:u.domOmitBySelector,tagsToCheckLength:u.tagsToCheckLength,SX:u.tagMaxLength,domOmitInvisibleElements:u.domOmitInvisibleElements,domOmitAnalyticsIframes:u.domOmitAnalyticsIframes}).accept,this.uY=[],this.uY.push(o.ds(e)),this.uY.push(a.ds(e)),this.se.domRegexPatternForMasking.length&&this.se.domMaskContentByRegex.length&&this.uY.push(c.ds(e));var g=new gt(this.qY,new dt(this.uY),{YY:u.recordShadowDom}),v=h.default.yC(!0);u.domCompressRepetitiveElements.length&&v.add(new jt(i,u.domCompressRepetitiveElements).clone),v.add(new It);var p=new Q(u.domRecordStyleAttributes,u.removeCustomElementsDefinitionFromStyle);v.add(p.apply),u.struggleCaptureBlankPage&&v.add(n.__);var w=new yt(Y.default,a,c,this.se);if(v.add(w.apply),u.maskTitle){var y=new wt(Y.default,this.se);v.add(y.apply)}var b=h.default.yC(!0).add(new kt("gbid",e.nP).apply);u.domRemoveAttributes&&u.domRemoveAttributes.length&&b.add(new ht(u.domRemoveAttributes).apply),u.removeUnnamedAttributesByTags&&u.removeUnnamedAttributesByTags.length&&b.add(new ot(u.removeUnnamedAttributesByTags).apply),u.domRecordAbsoluteResourcesURLs&&b.add((new et).apply),u.protocolsToSwitch&&b.add((new nt).apply),u.domRemoveDuplicatedSlashResourcesUrl&&b.add((new rt).apply);var T=new Tt(r),E=new Et(r);this.rK()&&(b.add(E.apply),v.add(T.apply)),u.domMaskAttributesByTag.length&&(u.domMaskedAttributes.length||u.domMaskDataAttributes)&&b.add(new bt(Y.default,{domMaskedAttributes:u.domMaskedAttributes,bw:u.domMaskAttributesByTag,domMaskIgnoreAttribute:u.domMaskIgnoreAttribute,domMaskDataAttributes:u.domMaskDataAttributes,attributeMaskingChar:u.attributeMaskingChar}).apply),u.recordCanvas&&b.add(new it(i,u).apply),u.htmlObjectRecordEnabled&&b.add((new xt).apply),u.removeBase64ImageDataTagNames&&u.removeBase64ImageDataTagNames.length>0&&b.add(new Mt(i,h.default.ye.apply(null,u.removeBase64ImageDataTagNames)).apply),u.removeBase64Fonts&&b.add(new Dt(i).apply),u.domFormAnalysisReporting&&b.add(new Rt(i,e,f,m).apply);let C=h.default.yC(),k=u.applePaySelectors;k&&k.length&&(h.default.dl()||h.default.BE())&&C.add(new Pt(t,k).apply);var S=new pt(i,{aX:u.domFuseElementCount,oX:u.domFuseDuration}),I=new mt(t,i,new Ct(t,i,u.forceRenderingFixForMultipleUA,u.importNodeWhenUrlContains),S,e,g,v.bC(),b.bC(),C.bC(),u.enableAdoptedCss,l,u.checkForHtmlOnly,u.checkVisibility,u.framesetRecordEnabled,u.recordNonNativeShadowAsElementContainer,d.default,this.se.renderSlotsInCustomElements,u.domRecordInnerBody,u.customElementWrapperName,u.ignoreAdoptedForElements,u.enableAdoptedCss);this.oK=this.qY,this.dW=g.dW,this.cloneNode=I.clone}}class Lt{constructor(t,i){this.aK=t=>{const i=t.insertRule,s=this;t.insertRule=function(){const t=i.apply(this,arguments);try{const i=arguments[0];this.Oq?this.Oq+=i:this.Oq=i;const h=s.Ac.js(this.ownerNode);s.bO.push({selector:""+h,type:"added",rule:i,index:t})}catch(t){d.default.error("Exception occurred during CSS insertRule interception. Error: "+t.message,t)}return t}},this.cK=t=>{const i=t.deleteRule,s=this;t.deleteRule=function(){try{const t=arguments[0];if(void 0!==this.cssRules[t]){const i=s.Ac.js(this.ownerNode);s.bO.push({selector:""+i,type:"deleted",index:t})}}catch(t){d.default.error("Exception occurred during CSS deleteRule interception. Error: "+t.message,t)}return i.apply(this,arguments)}},this.start=()=>{},this.track=()=>{const t={};return this.bO.length&&(t.cssRules={rules:this.bO}),this.bO=[],t},this.kW=()=>!1,this.lK=this.aK,this.dK=this.cK,this.Fr=t,this.Ac=i,this.bO=[],this.aK(this.Fr.CSSStyleSheet.prototype),this.cK(this.Fr.CSSStyleSheet.prototype)}}class Ot{constructor(){this.apply=(t,i)=>{t.rules&&t.rules.length>0&&(h.default.cC(i,"cssRuleChanges").rules=t.rules)}}}class Ft{constructor(t,i){this.uK=t=>{const i=t.setProperty,s=this;t.setProperty=function(){const t=i.apply(this,arguments);try{if(this.parentRule&&this.parentRule.parentStyleSheet){const t=this.parentRule.parentStyleSheet.ownerNode;if(t){const i=s.Ac.js(t);s.bO.push({selector:""+i,type:"setProperty",selectorText:this.parentRule.selectorText,propertyName:arguments[0],value:arguments[1],priority:arguments[2]})}}}catch(t){d.default.error("Exception occurred during CSS set property interception. Error: "+t.message,t)}return t}},this.fK=t=>{const i=t.removeProperty,s=this;t.removeProperty=function(){const t=i.apply(this,arguments);try{if(this.parentRule&&this.parentRule.parentStyleSheet){const t=this.parentRule.parentStyleSheet.ownerNode;if(t){const i=s.Ac.js(t);s.bO.push({selector:""+i,type:"removeProperty",selectorText:this.parentRule.selectorText,propertyName:arguments[0]})}}}catch(t){d.default.error("Exception occurred during CSS remove property interception. Error: "+t.message,t)}return t}},this.start=()=>{},this.track=()=>{var t={};return this.bO.length&&(t.cssRules={rules:this.bO}),this.bO=[],t},this.kW=()=>!1,this.mK=this.uK,this.gK=this.fK,this.Fr=t,this.Ac=i,this.bO=[],this.uK(this.Fr.CSSStyleDeclaration.prototype),this.fK(this.Fr.CSSStyleDeclaration.prototype)}}class Nt{constructor(){this.apply=(t,i)=>{t.rules&&t.rules.length>0&&(h.default.cC(i,"cssPropertyChanges").props=t.rules)}}}class Bt{constructor(t,i,s){this.So=t,this.bO=i,this.qI=s}vK(){try{this.bO.forEach((t=>{if("object"==typeof t)for(const[i,s]of Object.entries(t)){if(!i||!s)return void this.So.log("[Glassbox] Invalid or missing rule for domTrackStyleChanges");const t=document.querySelector(i);if(!t)return void this.So.log("[Glassbox] Element for domTrackStyleChanges not found:",i);let h=getComputedStyle(t)[s];setInterval((()=>{const i=getComputedStyle(t)[s];i!==h&&(t.style[s]=i,h=i)}),this.qI)}else this.So.log('[Glassbox] Invalid style rule for domTrackStyleChanges - should be of form [{"el":"style"}]:',t)}))}catch(t){this.So.log("[Glassbox] Invalid rules provided for domTrackStyleChanges:",t)}}}class _t{constructor(t,i,s,e,r){this.pK=(t,i)=>{let s,h=-1,e={wK:-1,yK:!1,bK:""};for(;s=t.next();)h++,s.nodeType!==window.Node.TEXT_NODE?e.yK=!0:e.bK+=s.textContent,s===i&&(e.wK=h);return e},this.apply=(t,i)=>{if(void 0!==t.aY){let s=this.pK(this.TK(t.element),t.aY);if(s.wK>=0){let e=s.yK?t.aY.textContent:s.bK;this.kP&&this.kP.Dw(t.element,C.default.Je,E.default.y_)?e=Y.default.ns(e):this.xP&&this.xP.Dw(t.element,C.default.Je)?e=Y.default.Bs(e,this.se.domRegexPatternForMasking,this.se.domRegexMaskingChar):this.KH&&this.KH.ts(t.element,C.default.Je)&&(e=this.KH.encrypt(e));let r=h.default.cC(i,"domChanges",t.id);return r.characterData={value:e,child:s.yK?s.wK:0},r}}},this.TK=t,this.kP=i,this.KH=e,this.xP=s,this.se=r}}class Vt{constructor(t,i,s,e){this.apply=(t,i)=>{const s=t.attributes?Object.keys(t.attributes):[];if(s&&s.length>0){let e,r,n,o,a={};for(this.se&&this.se.removeBase64ImageDataTagNames&&this.se.removeBase64ImageDataTagNames.length>0&&(o=h.default.ye.apply(null,this.se.removeBase64ImageDataTagNames),n=new Mt(this.us,o)),e=0;e<s.length;e++)r=t.element.getAttribute(s[e]),"INPUT"===t.element.tagName&&"value"===s[e]?r="password"===t.element.getAttribute("type")?Y.default.ns(r):this.XH.Ue(t.element):this.kP.xw(t.element,s[e])?r=Y.default.ns(r):("style"===s[e]||"src"===s[e])&&n&&o[t.element.tagName]&&(r=n.apply(t.element,null,!0),""===r&&"src"===s[e]&&(a["gb-dataremoved"]={value:"",ordinal:s.length+1})),a[s[e]]={value:r,ordinal:t.attributes[s[e]]};const c=h.default.cC(i,"domChanges",t.id);return c.attributes=a,c}},this.XH=t,this.kP=i,this.se=s,this.us=e}}class zt{constructor(t,i,s,e,r,n,o){this.init=(t,i)=>{if(void 0!==t.cY){if(this.kP.Dw(t.element,C.default.Je,E.default.E_))return;let e,r,n,o=[],a=this.TK(t.element);if(h.default.childNodes(t.element).length>1&&"STYLE"===t.element.nodeName){const i=t.element.sheet.rules;let h="";for(var s=0;s<i.length;s++)h+=i[s].cssText+"\n";h=h.replace(/<svg.*svg>/gi,""),o.push("text:"+h)}else for(;e=a.next();)r=this.Ac.js(e),this.EK[e.tagName]||t.addedNodes&&t.addedNodes[r]||this.se.domChildListUpdateExistingElements&&this.CK(t,r)?(n=this.Hq.cloneNode(e),o.push(this.SK.kK(n))):o.push(this.SK.IK(e));"SELECT"!=t.element.nodeName||t.element.selectedIndex||t.element.querySelector("option[selected]")||(t.element.yW=!0);const c=t.element.shadowRoot;if(c&&t.addedNodes[this.Ac.js(c)]&&o.push(this.SK.kK(this.Hq.cloneNode(c))),!c&&t.mW&&t.mW.length){let i=this;t.mW.forEach((function(t){o.push(i.SK.kK(t))}))}const l=h.default.cC(i,"domChanges",t.id);return l.children={ordinal:t.cY,childList:o},l}},this.CK=(t,i)=>!(!t.aY||t.aY._gbid!==i||"#text"!==t.aY.nodeName),this.Hq=t,this.Ac=i,this.SK=s,this.TK=e,this.kP=r,this.xP=n,this.se=o||{},this.EK=h.default.ye.apply(null,this.se.domChildListUpdateExistingElementsList)}}class Ut{constructor(t){this.MK=t=>h.default.nC(t),this.kK=t=>(t&&t.nodeType===window.Node.TEXT_NODE?"text:":"el:")+this.MK(t),this.IK=t=>t&&t.nodeType===window.Node.TEXT_NODE?"text-ref:"+h.default.ky(t.textContent):"id:"+this.Ac.js(t),this.Ac=t}}class Ht{constructor(t,i,s){this.DK=()=>{setTimeout((()=>{this.jK={}}),this.se.xK)},this.__=(t,i)=>{let s;for(s=0;s<this.se.RK.length;s++)if(i instanceof this.Fr[this.se.RK[s]]){this.jK[this.se.RK[s]]||(this.jK[this.se.RK[s]]=[]),this.jK[this.se.RK[s]].push(i);break}},this.PK=t=>{const i=this.jK[t];return delete this.jK[t],i||[]},this.Fr=t,this.He=i,this.se=h.default.Fi(s,{xK:100,RK:[]}),this.jK={},this.He.on("domTrackingStarted",this.DK)}}class Wt{constructor(t,i){this.Fr=t,this.Ac=i;let s=[],h={};function e(t){const s=t.animate;t.animate=function(){const t=s.apply(this,arguments);try{const t=i.js(this);h[t]=arguments[0]}catch(t){d.default.error("Exception occurred during animation interception. Error: "+t.message,t)}return t}}function r(t){const e=t.play;e&&(t.play=function(){const t=e.apply(this,arguments);try{if(this.effect){const t=i.js(this.effect.target);h[t]&&s.push({selector:""+t,type:"animate",rule:[h[t],this.effect.getTiming()]})}}catch(t){d.default.error("Exception occurred during animation interception. Error: "+t.message,t)}return t})}t.Animation&&(r(t.Animation.prototype),e(HTMLElement.prototype)),this.start=()=>{},this.track=()=>{let t={};return s.length&&(t.cssRules={rules:s}),s=[],t},this.kW=()=>!1,this.AK=e,this.LK=r}}class Gt{constructor(){this.apply=(t,i)=>{t.rules&&t.rules.length>0&&(h.default.cC(i,"animationApply").rules=t.rules)}}}class qt{constructor(t,i,s,e){this.FK=(t,i)=>{var s=Object.getOwnPropertyDescriptor(t,"adoptedStyleSheets")&&Object.getOwnPropertyDescriptor(t,"adoptedStyleSheets").set,h=Object.getOwnPropertyDescriptor(i,"adoptedStyleSheets")&&Object.getOwnPropertyDescriptor(i,"adoptedStyleSheets").set;let e=this;s&&Object.defineProperty(t,"adoptedStyleSheets",{set:function(){s.apply(this,arguments);try{e.NK(this,arguments)}catch(t){d.default.error("error during method 'adoptedStyleSheets' hook invocation. error: "+t.message,t)}}}),h&&Object.defineProperty(i,"adoptedStyleSheets",{set:function(){h.apply(this,arguments);try{e.NK(this,arguments)}catch(t){d.default.error("error during method 'adoptedStyleSheets' hook invocation. error: "+t.message,t)}}})},this.NK=(t,i)=>{if(!(t&&t.host&&this.OY[t.host.nodeName])&&t&&i&&i[0]&&i[0].length){var s=i[0],e=[],r=t.nodeType===window.Node.DOCUMENT_NODE?t.getElementsByTagName("HEAD")[0]:t,n=this.Ac.js(r),o=t===r?n:this.Ac.js(t);s.forEach((t=>{var i=h.default.xC(t,n,o),s=this.Ac.js(i);t.gY&&i.setAttribute("gbRemoveId",t.gY),t.vY=o,t.gY=s,i.setAttribute("gbid",t.gY),t.pY&&!t.pY[n]?t.pY[n]=!0:t.pY||(t.pY={},t.pY[n]=!0),e.push(i)})),this.VY[n]=r,this.He.emit("domMutation",{type:"childList",target:r,YW:r,addedNodes:e,removedNodes:[],lY:!0})}},this.He=t,this.Ac=i,this.VY=s,this.OY=h.default.ye.apply(null,e);let r=this;if(window.CSSStyleSheet){this.FK(window.Document.prototype,window.ShadowRoot.prototype);var n=window.CSSStyleSheet.prototype.replaceSync;n&&(window.CSSStyleSheet.prototype.replaceSync=function(){var t=n.apply(this,arguments);try{if(arguments){var i=this.pY;if(i)for(var s in i)if(r.VY[s]){var e=h.default.xC(this,s,this.vY);e.setAttribute("gbremoveid",this.gY),this.gY=r.Ac.js(e),e.setAttribute("gbid",this.gY),r.He.emit("domMutation",{type:"childList",YW:r.VY[s],addedNodes:[e],removedNodes:[],lY:!0})}}}catch(t){d.default.error("error during method 'CSSStyleSheet.replaceSync' hook invocation. error: "+t.message,t)}return t});var o=window.CSSStyleSheet.prototype.replace;o&&(window.CSSStyleSheet.prototype.replace=function(){return Promise.resolve(o.apply(this,arguments).then((function(t){var i=t.pY;if(i)for(var s in i)if(r.VY[s]){var e=h.default.xC(t,s,t.vY);e.setAttribute("gbremoveid",t.gY),t.gY=r.Ac.js(e),e.setAttribute("gbid",t.gY),r.He.emit("domMutation",{type:"childList",YW:r.VY[s],addedNodes:[e],removedNodes:[],lY:!0})}return t})).catch((function(t){return d.default.error("error during method 'CSSStyleSheet.replace' hook invocation. error: "+t),Promise.reject(t)})))})}}}class Yt{constructor(){this.apply=(t,i)=>{t.rules&&t.rules.length>0&&(h.default.cC(i,"canvas").rules=t.rules)}}}class Xt{constructor(t,i,s,e){var r=this;this.BK=(()=>{const t=this;return function(){const i=t.Ac.js(this.canvas,!0);i&&(t._K[i]=!0)}})(),this.VK=t=>{f.default.oS(t).hS("getContext",this.zK,!0)},this.zK=function(){var t;const i=(t=arguments.length-1)<0||arguments.length<=t?void 0:arguments[t],s=f.default.oS(i);s.hS("clearRect",r.BK),s.hS("strokeRect",r.BK),s.hS("beginPath",r.BK),s.hS("rect",r.BK),s.hS("fill",r.BK),s.hS("drawImage",r.BK),s.hS("fillRect",r.BK),s.hS("putImageData",r.BK),s.hS("scale",r.BK),s.hS("translate",r.BK),s.hS("enable",r.BK),s.hS("scissor",r.BK),s.hS("clearColor",r.BK),s.hS("clear",r.BK)},this.UK=t=>{let i;const s=this.Fr.document.querySelectorAll("canvas");for(let h=0;h<s.length;h++)s[h]._gbid==t&&(i=s[h]);if(i)return h.default.NC(this.He,i,this.se&&this.se.canvasQuality)},this.start=function(){},this.track=()=>{const t=[],i={};for(let i in this._K)if(this._K.hasOwnProperty(i)){const s=this.UK(i);s&&t.push({selector:i,type:"snapshot",rule:s})}return this._K={},t.length&&(i.canvasRules={rules:t}),i},this.kW=()=>!1,this.HK=this.VK,this.Fr=t,this.Ac=i,this.He=s,this.se=e,this._K={},this.Fr.HTMLCanvasElement&&this.VK(this.Fr.HTMLCanvasElement.prototype)}}class Kt{constructor(t,i,s,h,e){this.WK=t=>{if(!t.sheet||!t.sheet.cssRules)return"";let i,s="";const h=t.sheet.cssRules;for(i=0;i<h.length;i++)h[i].cssText&&(s+=h[i].cssText);return s},this.GK=()=>{let t,i,s,h,e;const r=document.querySelectorAll("style");for(t=0;t<r.length;t++){if(h=r[t],!h.parentNode)return;if(s=this.Ac.js(h),i=this.WK(h),i&&i!==this.qK[s]){e=h.ownerDocument.createElement("STYLE"),e.textContent=i+h.textContent,e._gbid=s;const t={addedNodes:[e],type:"childList",tG:"childList",target:h.parentNode,YW:h.parentNode,removedNodes:[h]};this.qK[s]=i,this.us.emit("domMutation",t)}}},this.start=()=>{const t=this.Fr.setInterval(this.GK,this.YK);-1!==this.XK&&this.Fr.setTimeout((()=>{this.Fr.clearInterval(t)}),this.XK)},this.track=()=>{},this.kW=()=>!1,this.Fr=t,this.Ac=i,this.us=s,this.YK=h,this.XK=e,this.qK={}}}class Zt{constructor(t,i){this.Fr=t,this.Ac=i;let s=[];function h(t){var h=t.showModal;t.showModal=function(){const t=h.apply(this,arguments);try{const t=i.js(this);s.push({selector:""+t,type:"showModal",rule:["showModal"]})}catch(t){d.default.error("Exception occurred during showModal interception. Error: "+t.message,t)}return t}}"function"==typeof HTMLDialogElement&&h(HTMLDialogElement.prototype),this.start=()=>{},this.track=()=>{var t={};return s.length&&(t.cssRules={rules:s}),s=[],t},this.kW=()=>!1,this.KK=h}}class $t{constructor(){this.apply=(t,i)=>{t.rules&&t.rules.length>0&&(h.default.cC(i,"dialog").rules=t.rules)}}}class Jt{constructor(t,i,s,e,r,n,o,a,c,l,u,f,m,g){this.ZK=(t,i)=>{var s;for(s=0;s<i.length;s++)if(-1!==t.indexOf(i[s]))return!0;return!1},this.$K=()=>{var t=new Ut(this.bV),i=[{name:"DOM-mutations",jG:new lt(this.ai,this.bV),xG:[new _t(this.JK.nK,this.QK,this.cV,this.hV,this.options).apply,new Vt(this.tZ,this.QK,{removeBase64ImageDataTagNames:this.options.removeBase64ImageDataTagNames},this.He).apply,new zt(this.JK,this.bV,t,this.JK.nK,this.QK,null,this.options).init]},{name:"property",jG:new x(this.document,this.bV,this.options.domIgnoredFormElements),xG:[new O(this.tZ,{bG:this.options.domIgnoredFormElements}).apply]}];if(this.options.domRecordCssRules&&i.push({name:"css",jG:new Lt(this.window,this.bV),xG:[(new Ot).apply]}),this.options.domCaptureCssText&&i.push({name:"cssText",jG:new Kt(window,this.bV,this.ai,this.options.domCaptureCssTextInterval,this.options.domCaptureCssTextTermination),xG:[]}),this.options.domRecordCssProps&&i.push({name:"cssProp",jG:new Ft(this.window,this.bV),xG:[(new Nt).apply]}),this.options.domTrackStyleChanges&&this.options.domTrackStyleChanges.length>0){new Bt(d.default,this.options.domTrackStyleChanges,this.options.domTrackStyleChangesInterval).vK()}return this.options.recordAnimation&&i.push({name:"animate",jG:new Wt(this.window,this.bV),xG:[(new Gt).apply]}),this.options.recordCanvas&&i.push({name:"canvas",jG:new Xt(this.window,this.bV,this.ai,this.options),xG:[(new Yt).apply]}),this.options.interceptDialogShowModal&&i.push({name:"dialog",jG:new Zt(this.window,this.bV),xG:[(new $t).apply]}),i},this.reset=()=>{this.status.iZ=!1,this.status.sZ=!1,this.status.aborted=!1,this.status.hZ=0,this.status.eZ=!1},this.rZ=t=>{this.nZ=new Date,this.status.sZ=!0,this.oZ.take(this.status.aZ,!!t,this.cZ)},this.cZ=t=>(this.status.sZ=!1,t&&!t.error?(this.nk.snapshotDuration=new Date-this.nZ,this.status.aZ++,this.ai.emit("pageSnapshot:report",t),this.ai.emit("pageSnapshot:save",t),"hidden"===this.document.visibilityState&&this.ai.emit("clsDebug","Error: snapshot was taken while document was hidden"),this.lZ.start(),this.status.iZ=!0,this.ai.emit("domTrackingStarted")):(++this.status.hZ,this.dZ("pageSnapshotError("+this.status.hZ+")",this.oZ.lastError),this.status.hZ>=this.uZ?t.error&&t.error.visibility?this.fZ(!0):this.status.aborted=!0:this.options.reTakeSnapshotAfterTime&&this.options.reTakeSnapshotAfterTime>0&&setTimeout(this.fZ,this.options.reTakeSnapshotAfterTime)),this.VE.mf||(this.options.performanceDebugEnabled&&this.ai.emit("clsDebug",h.default.df("_snapshotCallback: Attempting to send performance event via snapshot callback event. isPerformanceEventSent: {0}",this.VE.mf)),this.VE.ff()),this.options.performanceDebugEnabled&&!this.VE.mf&&this.ai.emit("clsDebug","_snapshotCallback: trySendPerformanceEvent was unable to send performance event"),t),this.mZ=()=>{this.reset(),this.status.eZ=!0,this.fZ(!0)},this.gZ=t=>()=>{var i;if(this.options.allowWaitForElementsUrls&&this.options.allowWaitForElementsUrls.length&&null===t)for(i=0;i<this.options.allowWaitForElementsUrls.length;++i)if(h.default.rC(this.options.allowWaitForElementsUrls[i],h.default.$r(this.window.location.href))){t=!0;break}return t=!!t},this.vZ=()=>{var t=!1;this.status.pZ=!1,this.status.eZ=!0,this.options.delaySnapshotAfterElementFound&&this.options.delaySnapshotAfterElementFound>-1&&setTimeout((()=>{t||(t=!0,this.fZ())}),this.options.delaySnapshotAfterElementFound),this.options.delaySnapshotAfterElementFound&&-1!==this.options.delaySnapshotAfterElementFound||this.options.snapshotWaitForPageHidden||this.fZ(!0)},this.fZ=t=>{if(!(this.status.aborted||this.status.iZ||this.status.sZ||this.status.pZ))try{if(this.options.snapshotWaitForElement&&this.options.snapshotWaitForElement.length&&!this.status.eZ&&this.wZ())return h.default.wn(this.VE,this.options.snapshotWaitForElement,this.vZ,this.options.elMustBeShown),this.status.pZ=!0,!1;this.yZ&&(this.domObserver.start(),this.bZ&&(this.bZ.stop(),delete this.bZ)),this.rZ(t)}catch(t){this.dZ("startingError",t),d.default.error("error during DOM recording plugin starting. error: "+t)}return this.status.iZ},this.TZ=t=>{var i;if(this.status.EZ)for(i=0;i<this.options.domNewPageAjaxTriggers.length;i++)if(-1!==t.url.indexOf(this.options.domNewPageAjaxTriggers[i]))return void this.mZ()},this.CZ=t=>{this.status.EZ&&-1!==this.options.domNewPageTriggers.indexOf(t.kZ)&&this.mZ()},this.Kn=()=>{this.yZ&&(this.options.startMutationObserverOnLoad?this.domObserver.start():this.bZ&&this.bZ.start(),!this.status.EZ||this.status.iZ||this.status.aborted||void 0===this.options.domStartAfter||-1===this.options.domStartAfter||setTimeout(this.fZ,this.options.domStartAfter))},this.SZ=()=>{var t;if(this.status.EZ&&this.options.snapshotImmediatePages&&this.options.snapshotImmediatePages.length){var i,s=h.default.$r(this.window.location.href);for(t=0;t<this.options.snapshotImmediatePages.length;++t)if(h.default.rC(this.options.snapshotImmediatePages[t],s)){this.status.eZ=!0,(i=this.document.querySelector("BODY"))&&!h.default.yj(i)&&this.ai.emit("clsDebug","BODY element not visible during immediate snapshot"),this.VE.Sv="immediate",this.fZ(!0);break}}},this.Bh=()=>{this.domObserver&&(this.domObserver.stop(),this.domObserver=void 0),this.bZ&&(this.bZ.stop(),this.bZ=void 0)},this.IZ=()=>{++this.status.MZ%this.options.domUpdateEveryWsMsgIn==0&&(this.options.isWsSendCustom&&this.ai.emit("customEvent",{name:"customDomUpdate",Eb:"WsDomUpdate",Zv:void 0,zk:!0}),this.ai.emit("pageUpdate"))},this.initialize=t=>(t.on("event:mousedown",this.CZ),t.on("ajax:send",this.TZ),t.once("domInit:loaded",this.Kn),t.on("session:new",this.mZ),t.once("domInit:domready",this.SZ),t.on("event:unload",this.Bh),this.yZ,-1!==this.options.domUpdateEveryWsMsgIn&&(this.status.DZ=new q(this.window,this.IZ,this.options.isWsSupportOpener)),this.options.domCompress,this.jZ,this.options.enableAdoptedCss&&this.window.ShadowRoot&&this.window.ShadowRoot.prototype&&new qt(t,this.bV,this.xZ,this.options.ignoreAdoptedForElements),this.status.EZ=!0,!0),this.Hk=()=>{if(this.status.EZ&&!this.status.aborted&&this.fZ()&&this.yZ){var t=new Date,i=this.lZ.Jq();return this.nk.domUpdateDuration+=new Date-t,this.nk.domUpdateCount++,i}},this.RZ=()=>!this.yZ,this._v=()=>this.status.iZ,this.PZ=()=>this.JK,this.Xk=()=>this.QK,this.hW=()=>this.hV,this.FG=()=>this.JK,this.oz=t=>this.lA?this.lA.PK(t):[],this.DG=()=>this.lZ;var v=g.valueMaskingMode===r.Yi.Gs,p=g.domMaskingMode===r.Yi.Gs;this.window=t,this.document=i,this.VE=s,this.ai=e,this.Vd=r,this.bV=n,this.tZ=l,this.ig=f,this.sg=u,this.dZ=m||function(){},this.options=g||{},this.xZ={},this.QK=new U.default(r,{valueMaskingMode:this.options.valueMaskingMode,fw:v?this.options.maskWhitelistValueById:this.options.maskBlacklistValueById,pw:v?this.options.maskWhitelistValueByClass:this.options.maskBlacklistValueByClass,valueMaskIgnoreAttribute:this.options.valueMaskIgnoreAttribute,domMaskingMode:this.options.domMaskingMode,gw:p?this.options.domWhitelistMaskContentById:this.options.domBlacklistMaskContentById,jw:p?this.options.domWhitelistMaskContentByClass:this.options.domBlacklistMaskContentByClass,_w:this.options.domMaskOmitById||this.options.domOmitById,yw:this.options.domMaskOmitByClass||this.options.domOmitByClass,domMaskedAttributes:this.options.domMaskedAttributes,bw:this.options.domMaskAttributesByTag,domMaskIgnoreAttribute:this.options.domMaskIgnoreAttribute,domMaskSimpleSelector:p?this.options.domWhitelistMaskSimpleSelector:this.options.domBlacklistMaskSimpleSelector,recordShadowDom:this.options.recordShadowDom}),this.hV=new W.default(e,a,{bs:this.options.domEncryptById,ws:this.options.domEncryptByClass,domEncryptorMaskingChar:this.options.domEncryptorMaskingChar}),this.cV=new H.default(new G.default,{domMaskContentByRegex:this.options.domMaskContentByRegex,domRegexPatternForMasking:this.options.domRegexPatternForMasking,domRegexMaskingChar:this.options.domRegexMaskingChar}),this.JK=new At(this.window,e,r,this.bV,this.tZ,c,this.QK,this.hV,this.cV,this.xZ,this.options,this.ig,this.sg),!this.options.startMutationObserverOnLoad&&this.options.domTamperingDetectionEnabled&&(this.bZ=new L(this.window,e,this.document,this.JK.oK,this.bV,{semiDomEnabled:this.options.semiDomEnabled,domForceIEMutationEventsHandler:this.options.domForceIEMutationEventsHandler,domForceMutationEventsHandler:this.options.domForceMutationEventsHandler,domTamperingDetectionEnabled:this.options.domTamperingDetectionEnabled,dG:this.options.domThrottleChanges,uG:this.options.domThrottleChangesIE11Only,delayDomMutationEvent:this.options.delayDomMutationEvent,domDelayAddedNodesByClass:this.options.domDelayAddedNodesByClass,domFilterAttributes:this.options.domFilterAttributes,domIgnoreAttributes:this.options.domIgnoreAttributes,domIgnoreChangesById:this.options.domIgnoreChangesById,domIgnoreChangesByClass:this.options.domIgnoreChangesByClass,domIgnoreChangesByTag:this.options.domIgnoreChangesByTag,domOmitInvisibleElements:this.options.domOmitInvisibleElements,handleAttributeMutationsAsChunks:this.options.handleAttributeMutationsAsChunks,ignoreMutationsOnNotAttachedElements:this.options.ignoreMutationsOnNotAttachedElements,characterDataOnly:!0,reinstateNativeMutationObserver:this.options.reinstateNativeMutationObserver,initialObserverFirst:this.options.initialObserverFirst,addBaseDomainToRelativeUrls:this.options.addBaseDomainToRelativeUrls,domIgnoreSameValueAttributesModification:this.options.domIgnoreSameValueAttributesModification,domIgnoreLargeMutationsChunks:this.options.domIgnoreLargeMutationsChunks}).mG),this.CG=this.JK.oK,this.domObserver=new L(this.window,e,this.document,this.JK.oK,this.bV,{semiDomEnabled:this.options.semiDomEnabled,domForceIEMutationEventsHandler:this.options.domForceIEMutationEventsHandler,domForceMutationEventsHandler:this.options.domForceMutationEventsHandler,domTamperingDetectionEnabled:this.options.domTamperingDetectionEnabled,dG:this.options.domThrottleChanges,uG:this.options.domThrottleChangesIE11Only,delayDomMutationEvent:this.options.delayDomMutationEvent,domDelayAddedNodesByClass:this.options.domDelayAddedNodesByClass,domFilterAttributes:this.options.domFilterAttributes,domIgnoreAttributes:this.options.domIgnoreAttributes,domIgnoreChangesById:this.options.domIgnoreChangesById,domIgnoreChangesByClass:this.options.domIgnoreChangesByClass,domIgnoreChangesByTag:this.options.domIgnoreChangesByTag,domOmitInvisibleElements:this.options.domOmitInvisibleElements,handleAttributeMutationsAsChunks:this.options.handleAttributeMutationsAsChunks,ignoreMutationsOnNotAttachedElements:this.options.ignoreMutationsOnNotAttachedElements,reinstateNativeMutationObserver:this.options.reinstateNativeMutationObserver,initialObserverFirst:this.options.initialObserverFirst,addBaseDomainToRelativeUrls:this.options.addBaseDomainToRelativeUrls,domIgnoreSameValueAttributesModification:this.options.domIgnoreSameValueAttributesModification,domIgnoreLargeMutationsChunks:this.options.domIgnoreLargeMutationsChunks}).mG,this.jZ=this.ZK(h.default.$r(this.document.location.href),this.options.domPartialWhenLocationContains||[]);var w=this.$K();(this.options.recordShadowDom&&this.window.ShadowRoot||h.default.jj(this.options.forceShadowDomTrackingWhenUrlContains,h.default.$r(this.window.location.href)))&&(this.lA=new Ht(this.window,e,{RK:["ShadowRoot"]})),this.lZ=new ct(w,this.options.domIncludeSelectorOnUpdate?u:{eg:function(){return{}}},r,{tY:"2",setSelectorToAttributes:this.options.setSelectorToAttributes}),this.oZ=new at(this.window,this.document,e,this.JK,o,this.lA,this.options),this.nk={snapshotDuration:-1,domUpdateDuration:-1,domUpdateCount:0,domObserver:this.domObserver?this.domObserver.getName():"NONE"},this.stats=()=>this.nk,this.yZ=!!this.domObserver||!!this.bZ,this.uZ=3,this.nZ=0,this.status={EZ:!1,iZ:!1,sZ:!1,aborted:!1,pZ:!1,eZ:!1,hZ:0,aZ:0,MZ:0,DZ:void 0},this.ai.on("stopDomRecording",(()=>{this.status.aborted=!0})),this.wZ=this.gZ(null)}}class Qt{constructor(t,i,s,e,r,n){this.AZ=t=>{let i,s=[];for(i=0;i<t.length;i++)s.push(t[i].toLowerCase());return s},this.yz=t=>{for(;t;){if("FORM"===t.tagName||this.LZ[t.tagName])return h.default.isVisible(t)?t:null;t=h.default.parentNode(t)||t.host}return null},this.OZ=(t,i)=>{const s=this;setTimeout((()=>{s.He.emit("formValidationError",{element:t,message:i})}),0)},this.FZ=t=>"childList"===t.type?t.addedNodes:"attributes"===t.type?[t.YW]:[],this.NZ=t=>{const i=this.Fr.getComputedStyle(t);return h.default.isVisible(t)&&"hidden"!==i.visibility&&i.opacity>this.se.minVisibleElementOpacity},this.BZ=t=>{let i=this.se.domFormValidationTraverseParentsForVisibility;for(;i&&t;){if(!this.NZ(t))return!1;t=t.parentElement||t.host,i--}return!0},this._Z=(t,i)=>{if(t.nodeType===this.Fr.Node.ELEMENT_NODE&&!this.se.ignoreNodesVisibility&&!this.BZ(t))return!1;t.nodeType===this.Fr.Node.TEXT_NODE?h.default.parentNode(t)&&this.VZ(t)&&(this.se.ignoreNodesVisibility||!this.se.ignoreNodesVisibility&&this.BZ(h.default.parentNode(t)))&&i.push(t):this.uW.dW(t,(t=>{if(t)if(t.nodeType===this.Fr.Node.TEXT_NODE&&this.VZ(t))i.push(t);else if(t.nodeType===this.Fr.Node.ELEMENT_NODE&&!this.se.ignoreNodesVisibility&&!this.NZ(t))return!1}),!1,!0)},this.zZ=t=>{try{let i=h.default.parentNode(t);if(i&&i.nodeType===this.Fr.Node.ELEMENT_NODE){const t=this.Fr.getComputedStyle(i).color,s=/\d+/g;return t.match(s).join(",")}}catch(t){this.He.emit("clsDebug","failed getting text color:"+t.message)}return null},this.UZ=t=>{if(this.HZ[h.default.parentNode(t).tagName])return!1;if(this.WZ.length&&h.default.jj(this.WZ,t.textContent.toLowerCase()))return!0;if(this.GZ){let i=this.zZ(t);return!(null===i||!this.qZ[i])}this.YZ=t=>{const i=t.match(/\d+/g);return i&&parseInt(i[0])>this.se.XZ&&i[0]>Math.max(parseInt(i[1]),parseInt(i[2]))+this.se.KZ};let i=h.default.parentNode(t);if(i&&i.nodeType===this.Fr.Node.ELEMENT_NODE){const t=this.Fr.getComputedStyle(i);return this.YZ(t.color)||this.se.ZZ&&this.YZ(t.backgroundColor)}return!1},this.$Z=t=>{let i;for(i=0;i<this.se.ignorableTextRegex.length;i++)if(new RegExp(this.se.ignorableTextRegex[i]).test(t))return!0;for(t=t.replace(/\s+/g," ").toLowerCase(),i=0;i<this.JZ.length;i++)if(-1!==t.indexOf(this.JZ[i]))return!0;return!1},this.QZ=t=>!this.$Z(t.textContent)&&t.textContent.trim().length>this.se.t$,this.i$=(t,i)=>{let s=h.default.parentNode(t),e=s.previousElementSibling;for(;e;){if(this.s$[e.tagName])return e;e=e.previousElementSibling}let r,n=this.h$,o=s.parentElement;for(;o&&n--;){if(r=o.querySelectorAll(this.e$),1===r.length)return r[0];if(r.length>1)break;if(o===i)break;o=h.default.parentNode(o)}return i},this.VZ=t=>!this.r$[this.Ac.js(t)]&&this.QZ(t)&&this.UZ(t),this.n$=t=>{const i=this.Ac.js(t),s=void 0===this.o$[i]||this.o$[i]!==t.value;return this.o$[i]=t.value,!s},this.lW=t=>{if(!this.a$)return;const i=this.yz(t.YW);i&&setTimeout((()=>{let s,h,e=this.FZ(t),r=[];for(s=0;s<e.length;s++)this._Z(e[s],r);for(s=0;s<r.length;s++){if(h=this.i$(r[s],i),!this.se.c$&&h===i)continue;const t=!this.n$(h);this.s$[h.tagName]&&!t||(this.r$[this.Ac.js(r[s])]=!0,this.OZ(h,r[s].textContent.trim()))}}),1)},this.intercept=t=>{var i=!1;if(this.se.l$.length>0)for(let s=0;s<this.se.l$.length;s++)if(this.VV.matches(t,this.se.l$[s])){i=!0;break}this.a$=this.d$[t.id]||!!this.yz(t)||i,this.a$&&(this.r$={})},this.u$=()=>{let t;if(this.se.f$.length)for(t=0;t<this.se.f$.length;++t)if(h.default.rC(this.se.f$[t],h.default.$r(this.Fr.location.href)))return void this.OZ(document.body,"url contain form validation signs: "+this.se.f$[t]);if(this.se.m$.length)for(t=0;t<this.se.m$.length;++t)if(h.default.rC(this.se.m$[t],this.Fr.document.title))return void this.OZ(document.body,"title contain form validation signs: "+this.se.m$[t])},this.Fr=t,this.He=i,this.Ac=s,this.uW=e,this.VV=r,this.se=h.default.Fi(n,{XZ:120,KZ:80,t$:10,g$:[],l$:[],ignoreNodesVisibility:!1,c$:!0,ZZ:!0,v$:[],ignorableText:["characters left","characters remaining"],ignorableTextRegex:[],f$:[],m$:[],domFormValidationErrorRelatedText:[],domFormValidationTraverseParentsForVisibility:1,minVisibleElementOpacity:.5}),this.JZ=this.AZ(this.se.ignorableText),this.d$=h.default.ye.apply(null,this.se.g$),this.LZ=h.default.ye.apply(null,this.se.v$),this.HZ=h.default.ye.apply(null,this.se.Eq),this.s$=h.default.ye("INPUT","SELECT","TEXTAREA"),this.e$='input:not([type="hidden"]),select,textarea',this.h$=2,this.a$=!1,this.r$={},this.o$={},this.WZ=h.default.Ms(this.se.domFormValidationErrorRelatedText),this.qZ=h.default.ye.apply(null,this.se.domFormValidationTextByRGB),this.GZ=!h.default.xc(this.qZ),this.He.on("domMutation",this.lW)}}var ti=s("./src/js/libs/lru.js");class ii{constructor(t,i){this.$Z=t=>{for(let i=0;i<this.se.ignorableTextRegex.length;i++)if(new RegExp(this.se.ignorableTextRegex[i]).test(t))return!0;t=t.replace(/\s+/g," ").toLowerCase();for(let i=0;i<this.JZ.length;i++)if(-1!==t.indexOf(this.JZ[i]))return!0;return!1},this.intercept=()=>{const t=jQuery.validator.prototype.showErrors,i=this;jQuery.validator.prototype.showErrors=function(s){try{if(this.errorList&&this.errorList.length>0)for(let t of this.errorList){const s=t.element,e=t.message;if(!i.$Z(e)){let t="SAME - NOT REPORTING";s.gbLocalId||(s.gbLocalId=i.p$++);const r=i.w$.pr(s.gbLocalId,e);if(null===r||h.default.ha(r))t="NEW";else if(r!==e)t="UPDATE";else if(r===e){const i=this.y$(s);i&&i.length>0&&!h.default.ha(i[0].innerHTML)&&(i[0].innerHTML===e&&jQuery(i[0]).is(":visible")||(t="SHOW"))}"NEW"!==t&&"UPDATE"!==t&&"SHOW"!==t||i.He.emit("formValidationError",{element:s,message:e.length>0?e:"NONE"})}}}catch(t){d.default.error("Failed intercepting showErrors for validation error report. "+t.message,t)}t.call(this,s)}},this.He=t,this.se=h.default.Fi(i,{ignorableText:[],ignorableTextRegex:[]}),this.JZ=h.default.Ms(this.se.ignorableText),this.p$=1,this.w$=new ti.default(20)}}var si=s("./src/js/ajaxRecorder/AjaxPredicateFactory.js");class hi{constructor(t,i){this.$Z=t=>{for(let i=0;i<this.se.ignorableTextRegex.length;i++)if(new RegExp(this.se.ignorableTextRegex[i]).test(t))return!0;t=t.replace(/\s+/g," ").toLowerCase();for(let i=0;i<this.JZ.length;i++)if(-1!==t.indexOf(this.JZ[i]))return!0;return!1},this.b$=t=>{if(h.default.zn()-this.T$<1e3)return;const i=t.target.validationMessage||"NONE";this.$Z(i)||(this.T$=h.default.zn(),this.us.emit("formValidationError",{element:t.target,message:i}))},this.E$=t=>{for(var i=0;i<t.addedNodes.length;i++)if(window.Node.ELEMENT_NODE==t.addedNodes[i].nodeType){if(t.addedNodes[i][this.C$]||!t.addedNodes[i].matches(this.k$))continue;t.addedNodes[i].addEventListener("invalid",this.b$),t.addedNodes[i][this.C$]=!0}},this.init=()=>{this.us.on("html5FormValidation:invalid",this.b$),this.us.on("domMutation",(t=>{setTimeout((()=>{this.E$(t)}),0)}))},this.us=t,this.se=h.default.Fi(i,{ignorableText:[],ignorableTextRegex:[]}),this.JZ=h.default.Ms(this.se.ignorableText),this.T$=0,this.k$="input, textarea, select",this.C$="_gb_hasValidationListener"}}class ei{constructor(t,i,s,e,r){this.eD=()=>{const t=["always","never","fqdn","tld","statusGte"];let i;this.S$=()=>"undefined"!=typeof jQuery&&void 0!==jQuery.validator,this.I$=()=>{const i=this.se.M$.filter((i=>{for(let s=0;s<t.length;++s)if(-1!==i.indexOf(t[s]))return!1;return!0}));let s;if(i&&i.length){const t=new si.default(this.Fr.location.hostname);for(s=0;s<i.length;++s){if(t.create(i[s])({url:h.default.$r(this.Fr.location.href)}))return!1}}return!0},this.He.once("domInit:loaded",(()=>{if(i&&(i.u$(),this.se.domFormValidationCheckAfterPageLoad)){let t=document.querySelector("FORM");t&&i.intercept(t)}if(this.se.jQueryFormValidationEnabled&&this.S$()){new ii(this.He,{ignorableText:this.se.ignorableText,ignorableTextRegex:this.se.ignorableTextRegex}).intercept()}})),this.He.once("domInit:preloaded",(()=>{if(this.se.html5FormValidation){new hi(this.He,{ignorableText:this.se.ignorableText,ignorableTextRegex:this.se.ignorableTextRegex}).init()}this.se.domFormValidationTracking&&this.I$()&&(i=new Qt(this.Fr,this.He,this.Ac,this.uW,new l.default(this.Fr.document),{XZ:this.se.XZ,KZ:this.se.KZ,g$:this.se.g$,l$:this.se.l$,c$:this.se.c$,ZZ:this.se.ZZ,v$:this.se.v$,ignorableText:this.se.ignorableText,ignorableTextRegex:this.se.ignorableTextRegex,Eq:this.se.Eq,f$:this.se.f$,m$:this.se.m$,domFormValidationErrorRelatedText:this.se.domFormValidationErrorRelatedText,domFormValidationTraverseParentsForVisibility:this.se.domFormValidationTraverseParentsForVisibility,minVisibleElementOpacity:this.se.minVisibleElementOpacity,domFormValidationTextByRGB:this.se.domFormValidationTextByRGB}),this.He.on("event:mousedown",(t=>i.intercept(t.element))),this.He.on("element:focus",(t=>i.intercept(t))))}))},this.initialize=()=>{},this.Fr=t,this.He=i,this.Ac=s,this.uW=e,this.se=r,this.eD()}}class ri{constructor(){this.fetch=(t,i,s,r)=>{const n={url:t};if(r.reportByFetch&&window.fetch)try{let h=new Headers,r=new Request(t,{method:"GET",headers:h,mode:"cors",credentials:"include",cls_own:!0});fetch(r).then((function(h){h.ok?h.headers&&(n.headers=Object.fromEntries(h.headers.entries()),n.type=h.headers.get("Content-Type"),h.text().then((t=>{n.content=e.default.eb.tb(t),i(n)})).catch((()=>{d.default.error("Failed to read resource text by fetch for url : "+t)}))):s(t)})).catch((function(s){d.default.error("Failed getting resource data by fetch for url : "+t),n.error=s,i(n)}))}catch(i){return d.default.error("error was detected "+i.message,i),console.log("Failed getting resource data by Ajax for url: "+t+": "+i.message,i),!1}else{const o=new XMLHttpRequest;if(!o)return!1;try{const a=()=>{if(4===o.readyState)if(200===o.status){n.type=o.getResponseHeader("Content-Type"),n.headers={};const t=o.getAllResponseHeaders().split("\n");for(let i=0;i<t.length;i++){const s=t[i].split(":");let h=s[0];if(h&&(h=h.trim()),h){s.splice(0,1);const t=s.join(":");n.headers[h]=t.trim()}}n.content=e.default.eb.tb(o.response),i(n)}else 0===o.status?s(n.url):(d.default.error("Failed getting resource data by Ajax for url : "+t+" status:"+o.status+"  "+o.statusText),n.error="status: "+o.statusText+" ("+o.status+")",i(n))};return r.xhrBypassOnReadyStateChange?(h.default.Br(o,"load",a),h.default.Br(o,"error",a),h.default.Br(o,"abort",a)):o.onreadystatechange=a,o.cls_own=!0,o.open("GET",t,!0),o.responseType="arraybuffer",o.send(),!0}catch(i){return d.default.error("error was detected "+i.message,i),console.log("Failed getting resource data by Ajax for url: "+t+": "+i.message,i),!1}}}}}class ni{constructor(t,i){this.apply=t=>{if(t.match(this.D$))return!0;if(!h.default.startsWith(t,"http")||!this.j$&&h.default.Lb(t)!==window.location.origin)return!0;for(let i=0;i<this.x$.length;i++)if(-1!==t.indexOf(this.x$[i]))return!0;return!1},this.j$=t,this.x$=i||[],this.D$=new RegExp(/.js$/i)}}var oi=s("./src/js/utils/Base64JsonCodec.js");class ai{constructor(t,i,s,e,r,n){if(this.getStats=t=>(t.countRecorded=0,t.countCorsDenied=0,t.recordingAll=!!this.CD.mr("res.all"),t),this.R$=t=>{const i=this.CD.mr(t?this.P$:this.fN);let s;if(this.CD.remove(t?this.P$:this.fN),i)try{s=this.nD.decode(i)}catch(t){d.default.error("Failed parsing JSON for pending resources: "+t.message,t)}return s},this.A$=(t,i)=>{let s=[];for(let h=0;h<t.length;h++){const e=t[h];!i&&this.L$(e.name)||(i&&this.O$(e.name)||("fetch"!==t[h].initiatorType||this.F$(e.name))&&(("xmlhttprequest"===e.initiatorType||"other"===e.initiatorType)&&e.name.indexOf(".svg")>-1?!i&&this.se.resourceRecordCssOnly||s.push(e):(i&&this.N$[e.initiatorType]||!i&&this.B$[e.initiatorType])&&s.push(e)))}return s},this._$=t=>{const i=[];for(let s=0;s<t.length;s++)i.indexOf(t[s])<0&&i.push(t[s]);return i},this.V$=t=>{var i;if(t.error||t.content&&t.content.length){if((null==t||null===(i=t.content)||void 0===i?void 0:i.byteLength)>this.se.z$){var s,h=null==t||null===(s=t.content)||void 0===s?void 0:s.byteLength;return t.content=`*** REMOVED because content length of ${h} bytes exceeded the configured max payload size of ${this.se.z$} bytes ***`,void this.He.emit("clsDebug",`Data not sent because request would result in 413 Entity Too Large. DATA: ${JSON.stringify(t)}`)}this.stats.countRecorded++,this.He.emit("saveResourceEvent",t)}},this.U$=t=>{this.stats.countCorsDenied++,this.He.emit("saveCorsDeniedEvent",t)},this.H$=t=>{this.He.emit("saveResourceUrls",t)},this.W$=()=>{let t;if(this.se.G$&&(t=this.R$(),t))for(let i=0;i<t.length;i++)if(!this.q$.fetch(t[i],this.V$,this.U$,this.se)){d.default.error("Failed executing an XHR request for fetching a resource. Breaking the fetch loop.");break}this.se.Y$&&(t=this.R$(!0),t&&this.H$(this._$(t)))},this.X$=()=>{let t,i=!1,s=!1,h=this.se.K$,e=this.se.Z$;if(this.CD.mr("res.all")&&(i=!0,s=!0,h=Number.MAX_VALUE,e=Number.MAX_VALUE),i|=this.se.G$&&Math.random()<this.se.$$,s|=this.se.Y$&&Math.random()<this.se.J$,i||s){const r=this.HR.performance.getEntriesByType("resource");let n=[],o=[];i&&(n=this.A$(r,!1)),s&&(o=this.A$(r,!0));let a,c=this.R$(!1)||[],l=this.R$(!0)||[];if(i){for(t=0;t<h&&n.length>0&&!(c.length>=e);t++)a=Math.floor(Math.random()*n.length),c.push(n[a].name),n.splice(a,1);this.CD.pr(this.fN,this.nD.encode(c))}if(s){for(t=0;t<o.length;t++)l.indexOf(o[t].name)<0&&l.push(o[t].name);this.CD.pr(this.P$,this.nD.encode(l))}}},this.Q$=()=>{this.CD.pr("res.all","true")},this.tJ=()=>{this.CD.remove("res.all")},this.iJ=this.V$,this.HR=t,this.He=s,this.CD=n,this.q$=new ri,this.L$=new ni(e.resourcesRecordAllowCors,e.resourceIgnoreWhenUrlContains).apply,this.O$=new ni(!0,e.resourceIgnoreWhenUrlContains).apply,this.nD=new oi.default(i.Ts),this.stats=this.getStats(r||{}),this.fN="res.pending",this.P$="resurl.pending",this.se=e,e.resourceRecordCssOnly?this.B$=h.default.ye("link","css"):this.B$=h.default.ye("link","css","font","img","input","use","fetch"),this.N$=h.default.ye("link","css","font","img","input","use","fetch"),e.electResourcesOnClear)if(this.HR.Performance.prototype.clearResourceTimings){const t=this.HR.Performance.prototype.clearResourceTimings,i=this;this.HR.Performance.prototype.clearResourceTimings=function(){try{i.X$()}catch(t){d.default.error("faild to run hook on Performance.clearResourceTimings: "+t)}t.apply(this,arguments)}}else if(this.HR.Performance.prototype.webkitClearResourceTimings){const t=this.HR.Performance.prototype.webkitClearResourceTimings,i=this;this.HR.Performance.prototype.webkitClearResourceTimings=function(){try{i.X$()}catch(t){d.default.error("faild to run hook on Performance.webkitClearResourceTimings: "+t)}t.apply(this,arguments)}}this.F$=t=>/\.(jpg|jpeg|png|webp|avif|gif|svg)$/.test(t)}}class ci{constructor(t,i,s,e){this.sJ=t=>this.hJ[t]?this.eJ:this.rJ[t]?this.nJ:this.oJ[t]?this.aJ:this.cJ,this.lJ=(t,i)=>{const s=t.split(".");let h=s[s.length-1].toLowerCase();return h.indexOf("?")>-1&&(h=h.split("?")[0]),"script"===i?this.dJ:"video"===i||"audio"===i?this.uJ:"img"===i||"svg"===i?this.eJ:this.fJ[i]?this.mJ:"link"===i||"css"===i||"other"!==i?this.sJ(h):this.cJ},this.gJ=t=>{let i;t.hostname=h.default.De(t.name),t.path=h.default.qw(t.name),i=t.path.split("/"),t.fileName=i[i.length-1]},this.vJ=t=>{if(t.name){if(!t.resourceType){const i=this.lJ(t.name,t.initiatorType);i&&(t.resourceType=i.toLowerCase())}this.gJ(t),t.isSameTLD=h.default.Me(this.Fr.location.host)===h.default.Me(t.hostname)}t.nextHopProtocol&&(t.protocol=t.nextHopProtocol),delete t.nextHopProtocol,t.isFromCache=0===t.transferSize&&window.location.host===t.hostname},this.pJ=t=>{delete t.loadMode,delete t.isSuccessful,delete t.resourceType},this.wJ=(t,i,s)=>{const h={};for(let s=0;s<i.length;s++)void 0!==t[i[s]]&&(h[i[s]]=t[i[s]]);return"resource"===s&&"document"!==h.name&&this.vJ(h),this.pJ(t),h},this.yJ=()=>{const t={},i=this.Fr.document.querySelectorAll('script[src][async],script[src][defer],link[rel="preload"],img[loading]');for(let s=0;s<i.length;s++)switch(i[s].tagName){case"SCRIPT":t[i[s].src]=i[s].async?"async":i[s].defer?"defer":"sync";break;case"LINK":t[i[s].href]="preload";break;case"IMG":t[i[s].src]="lazy"}return t},this.bJ=()=>{let t,i;const s=this.Fr.document.querySelectorAll('link[rel="stylesheet"]');for(t=0;t<s.length;t++)i=s[t].href||s[t].name,this.TJ[i]=!0},this.EJ=t=>{if(!t)return!1;const i=t.name;return-1===i.indexOf(this._k)&&(!this.CJ[i]||this.CJ[i].startTime!==t.startTime)},this.kJ=t=>{t.initiatorType=t.initiatorType||t.entryType,t.isSuccessful=!0,t.isSameTLD=!0,t.resourceType="other",t.duration=t.duration||t.responseEnd-t.redirectStart,"document"===t.name&&(t.name=h.default.$r(window.location.href)||t.name,this.gJ(t))},this.SJ=t=>({startTime:0,connectEnd:t.connectEnd,connectStart:t.connectStart,domainLookupEnd:t.domainLookupEnd,domainLookupStart:t.domainLookupStart,entryType:"navigation",fetchStart:t.fetchStart,initiatorType:"navigation",name:h.default.$r(window.location.href),redirectEnd:t.redirectEnd,redirectStart:t.redirectStart,requestStart:t.requestStart,responseEnd:t.responseEnd,responseStart:t.responseStart,secureConnectionStart:t.secureConnectionStart}),this.IJ=(t,i,s,e,r)=>{let n=[];const o=this.Fr.performance.getEntriesByType(i);let a,c;if(n=e&&r?o.filter((t=>void 0!==r[t[e]])):o,"resource"===i){let t=this.yJ();for(this.bJ(),"function"==typeof this.Fr.performance.getEntriesByType&&this.Fr.performance.getEntriesByType("navigation")[0]?n.push(this.Fr.performance.getEntriesByType("navigation")[0]):h.default.dl(this.Fr.navigator.userAgent)&&n.push(this.SJ(this.Fr.performance.timing)),a=0;a<n.length;a++)this.EJ(n[a])&&(c=n[a],"script"===c.initiatorType?c.loadMode=t[c.name]||"sync":"link"!==c.initiatorType&&"img"!==c.initiatorType||(t[c.name]&&(c.loadMode=t[c.name]),"link"===c.initiatorType&&this.TJ[c.name]&&(c.resourceType=this.aJ)),c.isSuccessful=!(c.transferSize>0&&0===c.duration));this.TJ={}}for(t[i]=[],a=0;a<n.length;a++){const h=n[a];let e;this.EJ(h)&&(e=this.wJ(h,s,i),this.CJ[h.name]={startTime:h.startTime},"navigation"!==e.initiatorType&&"navigation"!==e.entryType||this.kJ(e),t[i].push(e))}},this.MJ=()=>this.Fr.performance.timing,this.DJ=(t,i)=>{try{const s={};this.jJ="pageload"===i;for(let t=0;t<this.fi.length;t++)this.IJ(s,this.fi[t].type,this.fi[t].properties,this.fi[t].xJ,this.fi[t].RJ);if(0===Object.keys(s).length||s.resource&&0===s.resource.length)return;t&&(this.CJ={}),this.jJ=!1,this.PJ&&(s.ect=this.PJ),this.AJ&&(s.rtt=this.AJ),s.pagePerformance=this.MJ(),s.version=this.LJ,s.causedBy=i,this.He.emit("resourcesWaterfall",s)}catch(t){d.default.error("Exception while trying to report resources waterfall. Error: "+t.message,t),this.He.emit("clsDebug","error trying to report resources waterfall. Exception message: "+t.message)}},this.Fr=t,this.He=i,this.fi=s,this._k=e,this.CJ={},this.TJ={},this.jJ=!1,this.PJ=void 0,this.AJ=void 0,this.LJ=1,this.uJ="media",this.eJ="img",this.nJ="font",this.aJ="css",this.dJ="js",this.mJ="ajax",this.cJ="other",this.hJ=h.default.ye("png","gif","jpg","jpeg","svg","tif","tiff","bmp","webp"),this.rJ=h.default.ye("woff","woff2","ttf","otf","eot"),this.fJ=h.default.ye("xmlhttprequest","fetch","beacon"),this.oJ=h.default.ye("css"),this.Fr.navigator.connection&&(this.PJ=this.Fr.navigator.connection.effectiveType,this.AJ=this.Fr.navigator.connection.rtt),this.OJ=this.lJ}}var li=s("./src/js/config/enableByChances.js");class di{constructor(t,i){if(this.FJ=()=>{const t=this.Fr.performance.getEntriesByType("resource");t&&t.length>=this.NJ&&this.BJ()},this.BJ=()=>{if(this.se.resourceBufferIncreaseBy&&this.se.resourceBufferIncreaseBy>0&&this.Fr.performance.setResourceTimingBufferSize){const t=this.Fr.performance.getEntriesByType("resource").length;t>this._J&&(this._J=t),this._J+=this.se.resourceBufferIncreaseBy,this.NJ+=this.se.resourceBufferIncreaseBy,this.Fr.performance.setResourceTimingBufferSize(this._J)}else this.Fr.performance.clearResourceTimings()},this.Fr=t,this.se=h.default.Fi(i,{resourceBufferCheckTime:5e3,VJ:140,resourceBufferIncreaseBy:100}),this._J=150,this.NJ=this.se.maxResourcesBeforeFlush,this.Fr.performance)if(Object.getOwnPropertyDescriptor(this.Fr.Performance.prototype,"onresourcetimingbufferfull"))this.Fr.performance.onresourcetimingbufferfull=this.BJ;else if(this.Fr.PerformanceObserver){new this.Fr.PerformanceObserver(this.FJ).observe({zJ:["resource"]})}else setInterval(this.FJ,this.se.resourceBufferCheckTime)}}class ui{constructor(t,i,s,e,r,n,o){this.Nr=()=>{const t=this.se.versionResources&&!this.se.resourceTimingRecordEnabled;if(t||this.se.resourcesRecordEnabled&&void 0!==window.XMLHttpRequest){const i=5e3;this.UJ=new ai(this.Fr,this._o,this.He,{$$:this.se.resourcesRecordChance,J$:this.se.versionResourcesEnabledByChance,K$:this.se.resourcesRecordCount,Z$:5,resourceRecordCssOnly:this.se.resourceRecordCssOnly,G$:this.se.resourcesRecordEnabled,Y$:t,electResourcesOnClear:this.se.electResourcesOnClear,resourcesRecordAllowCors:this.se.resourcesRecordAllowCors,resourceIgnoreWhenUrlContains:this.se.resourceIgnoreWhenUrlContains,reportByFetch:this.se.reportByFetch,xhrBypassOnReadyStateChange:this.se.xhrBypassOnReadyStateChange,z$:this._o.HJ},this.nk,this.CD),this.He.once("domInit:loaded",(()=>{setTimeout(this.UJ.W$,i)})),this.He.on("event:unload",this.UJ.X$)}if(this.se.resourceTimingRecordEnabled&&(new li.default).apply(this.se.resourceTimingRecordEnabledByChance,this.WJ,this.Qa,"performanceRecord",this.se.saveChancesByCookie)&&(this.GJ=new ci(this.Fr,this.He,[{type:"resource",properties:["name","startTime","requestStart","responseStart","responseEnd","duration","decodedBodySize","loadMode","nextHopProtocol","initiatorType","transferSize","redirectStart","fetchStart","domainLookupStart","domainLookupEnd","redirectEnd","connectStart","resourceType","entryType","connectEnd","secureConnectionStart","isSuccessful"],xJ:"initiatorType",RJ:this.se.resourceTimingRecordAjax?h.default.ye("link","css","font","img","input","script","xmlhttprequest","fetch","beacon"):h.default.ye("link","css","font","img","input","body","script")}],this.se.reportURI),this.He.once("domInit:loaded",(()=>this.GJ.DJ(!1,"pageload"))),this.He.on("segmentChanged",(()=>this.GJ.DJ(!1,"segment"))),this.He.on("event:unload",(()=>this.GJ.DJ(!1,"unload")))),this.GJ||this.UJ){if(this.se.electResourcesOnClear)if(this.Fr.Performance.prototype.clearResourceTimings){const t=this.Fr.Performance.prototype.clearResourceTimings,i=this;this.Fr.Performance.prototype.clearResourceTimings=function(){try{i.GJ&&i.GJ.DJ(!0,"clearResources"),i.UJ&&i.UJ.X$()}catch(t){d.default.error("failed to run hook on Performance.clearResourceTimings: "+t)}t.apply(this,arguments)}}else if(this.Fr.Performance.prototype.webkitClearResourceTimings){const t=i.Fr.Performance.prototype.webkitClearResourceTimings,i=this;this.Fr.Performance.prototype.webkitClearResourceTimings=function(){try{i.GJ&&i.GJ.DJ(!0,"clearResources"),i.UJ&&i.UJ.X$()}catch(t){d.default.error("failed to run hook on Performance.webkitClearResourceTimings: "+t)}t.apply(this,arguments)}}this.se.isCheckResourceBuffer&&new di(this.Fr,{resourceBufferCheckTime:this.se.resourceBufferCheckTime,maxResourcesBeforeFlush:this.se.maxResourcesBeforeFlush,resourceBufferIncreaseBy:this.se.resourceBufferIncreaseBy})}},this.qJ=()=>{this.UJ?(console.log("Exiting full resources recording mode."),this.UJ.tJ()):console.log("Please allow resource recording first.")},this.YJ=()=>{this.UJ?(console.log("Entering full resources recording mode."),this.UJ.Q$()):console.log("Please allow resource recording first.")},this.initialize=()=>{},this.Fr=t,this.He=i,this.WJ=s,this.CD=e,this._o=r,this.Qa=n,this.se=o,this.UJ=void 0,this.GJ=void 0,this.nk={},this.Nr(),this.startRecordingAll=this.YJ,this.stopRecordingAll=this.qJ,this.stats=()=>this.nk}}var fi=s("./src/js/libs/asmcrypto.aes.cbc.js"),mi=s("./src/js/censor/CompositeValueCensor.js"),gi=s("./src/js/censor/valueCensorScheme.js");class vi{constructor(t,i,s){this.XJ=(()=>{let t=0;return{KJ:()=>++t,ZJ:()=>--t}})(),this.$J=t=>{let i;for(i=0;i<this.se.JJ.length;i++)if(t.indexOf(this.se.JJ[i])>=0)return!0;return!1},this.QJ=t=>{t.visible?this.tQ(t):this.iQ(t)},this.tQ=t=>{!0===t.visible&&this.sQ.Gr()||t.hQ&&this.$J(t.frame.contentWindow.location.href)&&1===this.XJ.KJ()&&this.He.emit("frame:blackoutEnter",t.frame)},this.iQ=t=>{(!1!==t.visible||this.sQ.Gr())&&t.hQ&&this.$J(t.frame.contentWindow.location.href)&&0===this.XJ.ZJ()&&this.He.emit("frame:blackoutLeave",t.frame)},this.He=t,this.sQ=i,this.se=h.default.Fi(s,{JJ:[]}),this.He.on("frame:wired",this.tQ),this.He.on("frame:load",this.tQ),this.He.on("frame:unload",this.iQ),this.He.on("frame:visibilityChange",this.QJ)}}var pi=s("./src/js/iframe/iframeHelper.js");class wi{constructor(t,i,s,e,r,n,o,a,c,l,d,u,f,m,g){this.eQ=()=>{const t=this;this.rQ&&this.rQ.eQ((function(i,s){s?t.nk.injected++:t.nk.injectionFailed++}))},this.nQ=t=>{this.oQ(t);const i=this.cQ.aQ(t);this.options.lQ&&this.rQ&&i&&this.rQ.inject(t),this.nk.detected++},this.dQ=()=>{this.ai.emit("pageUpdate"),this.uQ()},this.uQ=()=>{this.domTrackingStarted&&this.mQ.fQ({type:"pageUpdate"})},this.gQ=(t,i)=>{this.vQ=t,this.vQ.origin=i,this.vQ.fh&&this.ai.emit("clseUpdate",this.vQ.fh),this.vQ.pQ&&this.ai.emit("rtoUpdate",this.vQ.pQ),this.ai.emit("parentWindowInfo",this.vQ),t.wQ&&this.blackoutManager.forceBlackoutEnter(),this.nk.handshakeWithParent.completedAt=h.default.zn(),this.nk.handshakeWithParent.info=this.vQ,this.mQ.yQ(),this.bQ(t.parentPageId,t.containerId),this.ai.emit("iframesHandshakeDone",this.vQ)},this.TQ=()=>{this.ai.emit("clsDebug","handshake timeout"),this.nk.handshakeWithParent.timeout=!0,this.bQ()},this.Pm=()=>{this.EQ.start(),this.nH&&(this.nk.handshakeWithParent.startedAt=h.default.zn(),this.kQ.CQ(this.window.parent,this.gQ,this.TQ))},this.SQ=()=>{this.domTrackingStarted=!0,this.IQ({type:"domTrackingStarted"})},this.IQ=t=>{this.vQ&&this.mQ.notify(this.window.parent,t,this.vQ.origin)},this.MQ=t=>{this.domTrackingStarted&&"pageUpdate"!==t.type&&-1!==this.Vd.q_.indexOf(t.type)&&this.uQ()},this.DQ=t=>{t.frame.jQ=!1,setTimeout((()=>{this.ai.emit("sendStoragePendingReports")}),1e3)},this.xQ=t=>{var i=t.frame;this.rQ&&this.options.lQ&&t.hQ&&this.rQ.inject(i)},this.RQ=t=>{this.options.lQ&&!t.frame.jQ&&t.visible&&this.rQ.inject(t.frame)},this.PQ=()=>{this.ai.emit("local:forceBlackoutEnter"),this.mQ.fQ({type:"forceBlackoutEnter"})},this.AQ=()=>{this.ai.emit("local:forceBlackoutLeave"),this.mQ.fQ({type:"forceBlackoutLeave"})},this.LQ=()=>{this.window===this.window.top?this.OQ.onPossibleBlackoutEnter():this.mQ.notify(this.window.top,{type:"onPossibleBlackoutEnter"})},this.FQ=()=>{this.window===this.window.top?this.OQ.onPossibleBlackoutLeave():this.mQ.notify(this.window.top,{type:"onPossibleBlackoutLeave"})},this.onFramePort=t=>{this.mQ.notify(this.window.top,{type:"onFramePort",nx:t.nx,gT:t.gT})},this.NQ=t=>{this.mQ.fQ({type:"queryParamUpdate",nx:t})},this.BQ=t=>{this.mQ.fQ({type:"clseUpdate",nx:t})},this._Q=t=>{this.mQ.fQ({type:"rtoUpdate",nx:t})},this.VQ=()=>{this.mQ.fQ({type:"notifyStopRecording"})},this.zQ=()=>{this.mQ.fQ({type:"notifyStartRecording"})},this.forceFlush=()=>{this.mQ.fQ({type:"forceFlush"})},this.UQ=()=>{this.ai.on("frame:visibilityChange",this.RQ)},this.HQ=t=>{this.vQ=t},this.WQ=()=>this.domTrackingStarted,this.GQ=()=>{this.domTrackingStarted=!0},this.qQ=()=>{this.nH=!0},this.YQ=()=>{this.nH=!1},this.window=t,this.ai=i,this.VE=s,this.Vd=e,this.options={},this.options.XQ=g.iframesSkipHidden,this.options.lQ=g.iframesAutoInject,this.OQ=r,this.EQ=n,this.cQ=o,this.rQ=a,this.mQ=c,this.blackoutManager=l,this.kQ=d,this.KQ=u,this.oQ=f,this.bQ=m,new vi(i,l,{JJ:g.iframesBlackoutWhenLocationContains}),this.nk={detected:0,injected:0,injectionFailed:0,handshakesWithChildren:{success:0,error:0},handshakeWithParent:{startedAt:-1,completedAt:-1,timeout:!1}},this.vQ,this.nH=t.top!==t,this.eQ(),this.domTrackingStarted,this.kQ.ZQ((t=>{this.nk.handshakesWithChildren.success+=t?1:0,this.nk.handshakesWithChildren.error+=t?0:1,this.domTrackingStarted&&i.emit("pageUpdate")})),this.initialize=()=>{this.nH||this.bQ()},this.stats=()=>this.nk,this.rQ&&this.options.XQ&&i.on("frame:visibilityChange",this.RQ),i.on("saveEvent",this.MQ),i.on("frame:detected",this.nQ),i.on("frame:domChange",this.dQ),i.once("domInit:loaded",this.Pm),i.on("domTrackingStarted",this.SQ),i.on("frame:unload",this.DQ),i.on("frame:load",this.xQ),i.on("frame:blackoutEnter",this.LQ),i.on("frame:blackoutLeave",this.FQ),i.on("frame:port",this.onFramePort),i.on("notifyAll:blackoutEnter",this.PQ),i.on("notifyAll:blackoutLeave",this.AQ),i.on("iFramesForceFlush",this.forceFlush),i.on("session:new",this.NQ),i.on("remoteClseConf",this.BQ),i.on("remoteRtoConf",this._Q),i.on("recordingStopped",this.VQ),i.on("recordingStarted",this.zQ)}}class yi{constructor(t,i,s,e,r){this.eD=()=>{try{const t=this.zm.Wm(!0);t||this.$Q("Failed creating XHR object for fetching external configuration");const i=()=>{if(4===t.readyState)if(200===t.status){const i=t.getResponseHeader("Content-Type");i&&-1!==i.indexOf("application/json")&&this.JQ(t.response)}else{const i="Failed getting external configuration for url : "+this.Ce+" status:"+t.status+"  "+t.statusText;this.$Q(i)}};this.se.xhrBypassOnReadyStateChange?(h.default.Br(t,"load",i),h.default.Br(t,"error",i),h.default.Br(t,"abort",i)):t.onreadystatechange=i,t.open("GET",this.Ce,!0),setTimeout((()=>{try{t.send()}catch(t){d.default.error("Failed sending request to url "+this.Ce+": "+t.message,t)}}),0)}catch(t){d.default.error("error was detected "+t.message,t),console.log("Failed getting external configuration for url: "+this.Ce+": "+t.message,t),this.$Q(t.message)}},this.zm=t,this.Ce=i,this.se=s,this.JQ=e,this.$Q=r,this.eD()}}class bi{constructor(t,i,s,e,r,n){if(this.QQ=t=>{var i;try{i=JSON.parse(t)}catch(t){return void d.default.error("Failed parsing external configuration JSON: "+t.message,t)}void 0!==this.t0&&void 0!==i["hash "]&&this.t0===i.hash||(this.h_.pr("js.conf",this.QI.encode(i)),this.i0(i),this.t0=i.hash)},this.Vd=t,this.h_=s,this.QI=e,this.options=n,this.s0=yi,this.ai=r,this.t0,this.Vd.z_&&this.Vd.z_.src&&this.options.configPath){this.h0();var o=h.default.Lb(this.Vd.z_.src);new this.s0(i,h.default.Un(o,this.options.configPath),this.options,this.QQ,this.e0.bind(this))}}e0(t){this.ai.emit("clsDebug",t)}h0(){var t,i=this.h_.mr("js.conf");if(i)try{t=this.QI.decode(i),this.t0=t.hash,this.i0(t)}catch(t){d.default.error("failed parsing JSON of external configuration: "+t.message,t)}}i0(t){if(t){for(var i in t)"hash"!==i&&(this.options[i]=t[i])}}}var Ti=s("./src/js/censor/mask/UriMasker.js"),Ei=s("./src/js/dom/cloners/DomCloningHook.js"),Ci=s("./src/js/censor/encrypt/encryptionUtils.js");class ki{constructor(t,i,s,h,e){this.r0=()=>{var t,i,s,h,e={passive:!0,capture:!0},r=new Date,n=function(){h=[],i=-1,t=null,l(addEventListener)},o=function(h,e){t||(t=e,i=h,s=new Date,l(removeEventListener),a())},a=function(){if(i>=0&&i<s-r){var e={entryType:"first-input",name:t.type,target:t.target,cancelable:t.cancelable,startTime:t.timeStamp,processingStart:t.timeStamp+i};h.forEach((function(t){t(e)})),h=[]}},c=function(t){if(t.cancelable){var i=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,i){var s=function(){o(t,i),r()},h=function(){r()},r=function(){removeEventListener("pointerup",s,e),removeEventListener("pointercancel",h,e)};addEventListener("pointerup",s,e),addEventListener("pointercancel",h,e)}(i,t):o(i,t)}},l=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach((function(i){return t(i,c,e)}))},d="hidden"===document.visibilityState?0:1/0;addEventListener("visibilitychange",(function t(i){"hidden"===document.visibilityState&&(d=i.timeStamp,removeEventListener("visibilitychange",t,!0))}),!0),n(),this.n0=this.n0||{},this.n0.o0=function(t){h.push(t),a()},this.n0.a0=n,Object.defineProperty(this.n0,"c0",{get:function(){return d},enumerable:!0,configurable:!0})},this.track=()=>{try{this.n0.l0((t=>{this.d0++,void 0!==t.value&&(this.u0[t.name]=t.value)}),!0)}catch(t){d.default.error("failed getting CLS. Is browser supported by lib? "+t.message,t)}try{this.n0.f0((t=>{void 0!==t.value&&t.value<this.m0&&(this.u0[t.name]=t.value)}))}catch(t){d.default.error("failed getting FCP. Is browser supported by lib? "+t.message,t)}try{this.n0.g0((t=>{this.v0++,t.value>this.p0&&void 0!==t.value&&t.value<this.w0&&(this.u0[t.name]=t.value)}),!0)}catch(t){d.default.error("failed getting LCP. Is browser supported by lib? "+t.message,t)}try{this.n0.y0((t=>{void 0!==t.value&&(this.u0[t.name]=t.value)}))}catch(t){d.default.error("failed getting TTFB. Is browser supported by lib? "+t.message,t)}try{this.n0.b0((t=>{void 0!==t.value&&(this.u0[t.name]=t.value)}),{T0:!0,E0:0})}catch(t){d.default.error("failed getting INP. Is browser supported by lib? "+t.message,t)}},this.fg=()=>{const t={};this.u0.NCLS=this.d0,this.u0.NLCP=this.v0,this.u0.FID&&delete this.u0.FID,this.PJ&&(t.ect=this.PJ),this.AJ&&(t.rtt=this.AJ),t.t_=JSON.stringify(this.u0),this.He.emit("webVitals",t)},this.Fr=t,this.He=i,this.m0=h,this.w0=e,this.u0={},this.p0=0,this.d0=0,this.v0=0,this.n0=s,this.Fr.navigator.connection&&(this.PJ=this.Fr.navigator.connection.effectiveType,this.AJ=t.navigator.connection.rtt)}}var Si,Ii,Mi,Di,ji,xi=-1,Ri=function(t){addEventListener("pageshow",(function(i){i.persisted&&(xi=i.timeStamp,t(i))}),!0)},Pi=function(){var t=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},Ai=function(){var t=Pi();return t&&t.activationStart||0},Li=function(t,i){var s=Pi(),h="navigate";return xi>=0?h="back-forward-cache":s&&(document.prerendering||Ai()>0?h="prerender":document.wasDiscarded?h="restore":s.type&&(h=s.type.replace(/_/g,"-"))),{name:t,value:void 0===i?-1:i,C0:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:h}},Oi=function(t,i,s){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var h=new PerformanceObserver((function(t){Promise.resolve().then((function(){i(t.getEntries())}))}));return h.observe(Object.assign({type:t,buffered:!0},s||{})),h}}catch(t){}},Fi=function(t,i,s,h){var e,r;return function(n){i.value>=0&&(n||h)&&((r=i.value-(e||0))||void 0===e)&&(e=i.value,i.delta=r,i.C0=function(t,i){return t>i[1]?"poor":t>i[0]?"needs-improvement":"good"}(i.value,s),t(i))}},Ni=function(t){requestAnimationFrame((function(){return requestAnimationFrame((function(){return t()}))}))},Bi=function(t){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&t()}))},_i=function(t){var i=!1;return function(){i||(t(),i=!0)}},Vi=-1,zi=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},Ui=function(t){"hidden"===document.visibilityState&&Vi>-1&&(Vi="visibilitychange"===t.type?t.timeStamp:0,Wi())},Hi=function(){addEventListener("visibilitychange",Ui,!0),addEventListener("prerenderingchange",Ui,!0)},Wi=function(){removeEventListener("visibilitychange",Ui,!0),removeEventListener("prerenderingchange",Ui,!0)},Gi=function(){return Vi<0&&(Vi=zi(),Hi(),Ri((function(){setTimeout((function(){Vi=zi(),Hi()}),0)}))),{get c0(){return Vi}}},qi=function(t){document.prerendering?addEventListener("prerenderingchange",(function(){return t()}),!0):t()},Yi=[1800,3e3],Xi=function(t,i){i=i||{},qi((function(){var s,h=Gi(),e=Li("FCP"),r=Oi("paint",(function(t){t.forEach((function(t){"first-contentful-paint"===t.name&&(r.disconnect(),t.startTime<h.c0&&(e.value=Math.max(t.startTime-Ai(),0),e.entries.push(t),s(!0)))}))}));r&&(s=Fi(t,e,Yi,i.T0),Ri((function(h){e=Li("FCP"),s=Fi(t,e,Yi,i.T0),Ni((function(){e.value=performance.now()-h.timeStamp,s(!0)}))})))}))},Ki=[.1,.25],Zi=0,$i=1/0,Ji=0,Qi=function(t){t.forEach((function(t){t.interactionId&&($i=Math.min($i,t.interactionId),Ji=Math.max(Ji,t.interactionId),Zi=Ji?(Ji-$i)/7+1:0)}))},ts=function(){"k0"in performance||Si||(Si=Oi("event",Qi,{type:"event",buffered:!0,E0:0}))},is=[],ss=new Map,hs=0,es=function(){return(Si?Zi:performance.k0||0)-hs},rs=[],ns=function(t){if(rs.forEach((function(i){return i(t)})),t.interactionId||"first-input"===t.entryType){var i=is[is.length-1],s=ss.get(t.interactionId);if(s||is.length<10||t.duration>i.latency){if(s)t.duration>s.latency?(s.entries=[t],s.latency=t.duration):t.duration===s.latency&&t.startTime===s.entries[0].startTime&&s.entries.push(t);else{var h={id:t.interactionId,latency:t.duration,entries:[t]};ss.set(h.id,h),is.push(h)}is.sort((function(t,i){return i.latency-t.latency})),is.length>10&&is.splice(10).forEach((function(t){return ss.delete(t.id)}))}}},os=function(t){var i=self.requestIdleCallback||self.setTimeout,s=-1;return t=_i(t),"hidden"===document.visibilityState?t():(s=i(t),Bi(t)),s},as=[200,500],cs=[2500,4e3],ls={},ds=[800,1800],us=function t(i){document.prerendering?qi((function(){return t(i)})):"complete"!==document.readyState?addEventListener("load",(function(){return t(i)}),!0):setTimeout(i,0)},fs={passive:!0,capture:!0},ms=new Date,gs=function(t,i){Ii||(Ii=i,Mi=t,Di=new Date,ws(removeEventListener),vs())},vs=function(){if(Mi>=0&&Mi<Di-ms){var t={entryType:"first-input",name:Ii.type,target:Ii.target,cancelable:Ii.cancelable,startTime:Ii.timeStamp,processingStart:Ii.timeStamp+Mi};ji.forEach((function(i){i(t)})),ji=[]}},ps=function(t){if(t.cancelable){var i=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,i){var s=function(){gs(t,i),e()},h=function(){e()},e=function(){removeEventListener("pointerup",s,fs),removeEventListener("pointercancel",h,fs)};addEventListener("pointerup",s,fs),addEventListener("pointercancel",h,fs)}(i,t):gs(i,t)}},ws=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach((function(i){return t(i,ps,fs)}))},ys=[100,300],bs={l0:function(t,i){i=i||{},Xi(_i((function(){var s,h=Li("CLS",0),e=0,r=[],n=function(t){t.forEach((function(t){if(!t.hadRecentInput){var i=r[0],s=r[r.length-1];e&&t.startTime-s.startTime<1e3&&t.startTime-i.startTime<5e3?(e+=t.value,r.push(t)):(e=t.value,r=[t])}})),e>h.value&&(h.value=e,h.entries=r,s())},o=Oi("layout-shift",n);o&&(s=Fi(t,h,Ki,i.T0),Bi((function(){n(o.takeRecords()),s(!0)})),Ri((function(){e=0,h=Li("CLS",0),s=Fi(t,h,Ki,i.T0),Ni((function(){return s()}))})),setTimeout(s,0))})))},f0:Xi,S0:function(t,i){i=i||{},qi((function(){var s,h=Gi(),e=Li("FID"),r=function(t){t.startTime<h.c0&&(e.value=t.processingStart-t.startTime,e.entries.push(t),s(!0))},n=function(t){t.forEach(r)},o=Oi("first-input",n);s=Fi(t,e,ys,i.T0),o&&(Bi(_i((function(){n(o.takeRecords()),o.disconnect()}))),Ri((function(){var h;e=Li("FID"),s=Fi(t,e,ys,i.T0),ji=[],Mi=-1,Ii=null,ws(addEventListener),h=r,ji.push(h),vs()})))}))},b0:function(t,i){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(i=i||{},qi((function(){var s;ts();var h,e=Li("INP"),r=function(t){os((function(){t.forEach(ns);var i,s=(i=Math.min(is.length-1,Math.floor(es()/50)),is[i]);s&&s.latency!==e.value&&(e.value=s.latency,e.entries=s.entries,h())}))},n=Oi("event",r,{E0:null!==(s=i.E0)&&void 0!==s?s:40});h=Fi(t,e,as,i.T0),n&&(n.observe({type:"first-input",buffered:!0}),Bi((function(){r(n.takeRecords()),h(!0)})),Ri((function(){hs=0,is.length=0,ss.clear(),e=Li("INP"),h=Fi(t,e,as,i.T0)})))})))},g0:function(t,i){i=i||{},qi((function(){var s,h=Gi(),e=Li("LCP"),r=function(t){i.T0||(t=t.slice(-1)),t.forEach((function(t){t.startTime<h.c0&&(e.value=Math.max(t.startTime-Ai(),0),e.entries=[t],s())}))},n=Oi("largest-contentful-paint",r);if(n){s=Fi(t,e,cs,i.T0);var o=_i((function(){ls[e.id]||(r(n.takeRecords()),n.disconnect(),ls[e.id]=!0,s(!0))}));["keydown","click"].forEach((function(t){addEventListener(t,(function(){return os(o)}),!0)})),Bi(o),Ri((function(h){e=Li("LCP"),s=Fi(t,e,cs,i.T0),Ni((function(){e.value=performance.now()-h.timeStamp,ls[e.id]=!0,s(!0)}))}))}}))},y0:function(t,i){i=i||{};var s=Li("TTFB"),h=Fi(t,s,ds,i.T0);us((function(){var e=Pi();e&&(s.value=Math.max(e.responseStart-Ai(),0),s.entries=[e],h(!0),Ri((function(){s=Li("TTFB",0),(h=Fi(t,s,ds,i.T0))(!0)})))}))}};class Ts{constructor(t,i,s,h){this.initialize=()=>{},this.He=t,this.I0=i,this.M0=new ki(window,t,bs,s,h),this.M0.r0(),this.D0,this.j0=()=>{this.D0&&clearTimeout(this.D0),t.off("event:unload",this.j0),t.off("event:visibilitychange",this.j0),this.M0.fg()},this.x0=()=>{this.M0.track(),t.on("event:unload",this.j0),t.on("event:visibilitychange",this.j0),this.D0=setTimeout(this.j0,this.I0)},this.He.on("domInit:loaded",this.x0)}}class Es{constructor(t,i,s){this.R0=()=>{this.P0=this.A0?h.default.rs(this.jn.title,(t=>{this.L0(t)})):this.jn.title},this.yi=()=>{this.O0()||setTimeout((()=>{this.He.emit("titleChanged")}),0)},this.L0=(t,i)=>Y.default.ns(t,null,i),this.O0=()=>{const t=!this.P0||this.P0===document.title||this.A0&&h.default.rs(this.jn.title,(t=>{this.L0(t,this.jn.title)}))===this.P0;return this.P0=this.A0?h.default.rs(this.jn.title,this.L0):this.jn.title,t},this.F0=()=>this.P0,this.jn=t,this.He=i,this.A0=s,this.P0=void 0,this.He.once("init:loaded",this.R0),this.He.on("domMutation",this.yi)}}var Cs=s("./src/js/detectorState.js");class ks{static N0(t,i,s){new Es(t,i,s.maskTitle)}static init(t,i,s,h,e){var r=this;s.on("domInit:plugins",(()=>{h(),i.Xm()})),Cs.default.Em?s.emit("domInit:plugins"):s.once("init:plugins",(()=>{s.emit("domInit:plugins")})),Cs.default.Cg?s.emit("domInit:domready"):s.once("init:domready",(function(){s.emit("domInit:domready")})),Cs.default.Fm?s.emit("domInit:preloaded"):s.once("init:preloaded",(function(){s.emit("domInit:preloaded")})),Cs.default.loaded?(r.N0(t,s,e),s.emit("domInit:loaded")):s.once("init:loaded",(function(){r.N0(t,s,e),s.emit("domInit:loaded")}))}}class Ss{constructor(t,i,s){this.B0=()=>{const t={lastConfAt:this.QH,pageLoaded:this._0,initPreloadedCalled:this.V0,resolvedForCurrentContext:this.z0};return this.H0.U0(t),t},this.W0=t=>{this.QH||this.$H(t)},this.$H=t=>{t.pageAttributeRules&&this.H0.OH(t.pageAttributeRules),this.QH=h.default.zn(),this.G0()},this.G0=()=>{if(void 0===this.QH||this.z0)return;const t=this.H0.resolve();(t.length>0||this._0)&&(t.length>0&&this.us.emit("pageAttributes",t),this.z0=!0)},this.initialize=()=>{},this.resolve=this.G0,this.us=t,this.H0=i,this.q0=1500,this._0=!1,this.V0=!1,this.z0=!1,this.QH=void 0,this.stats=this.B0,this.us.once("plugin:newRemoteConfig",this.W0),this.us.on("newRemoteConfig",this.$H),this.us.on("segmentChanged",(()=>{this.z0=!1,this.G0()}),void 0,-1),this.us.once("init:preloaded",(()=>{this.V0=!0,this.G0()})),this.us.once("init:loaded",(()=>{this._0=!0,this.G0()}));const e=()=>{const t=window.utag.view;"function"==typeof t&&(window.utag.view=i=>(i&&this.G0(),t.apply(window.utag,arguments)))};var r,n;s&&(window.utag?e():(r=e,n=this.q0,setTimeout((()=>{window.utag&&r()}),n)))}}class Is{constructor(t,i,s,h,e,r){this.Y0=t=>this._H.test(t),this.X0=()=>this.kI,this.K0=()=>this.Z0,this.$0=t=>{if(!this.Y0(t))return;let i,s;const h=[];for(i=0;i<this.J0.length;i++)s=this.J0[i](),void 0!==s&&(!this.Q0&&s.includes(this.t1)&&(s=s.split(this.t1).pop()),h.push(s));return h.length?h.join(this.t1||","):void 0},this.kI=t,this.Z0=i,this._H=s,this.t1=h,this.J0=e,this.Q0=r}}class Ms{constructor(t,i,s,e){this.i1=t=>{if(!(t.id&&t.pageUrl&&t.rules&&t.rules.length))return void this.nk.badAttributeConf++;let i,s,h,e=t.pageUrl;t.pageHash&&(e+=("#"===t.pageHash.charAt(0)?"":"#")+t.pageHash);try{i=new RegExp("^"+e.split("*").join(".*")+"$")}catch(t){return d.default.error("Exception occurred during parsing regular expression. Error: "+t.message,t),void this.nk.badAttributePattern++}const r=[];for(s=0;s<t.rules.length;s++)h=this.s1[t.rules[s].type],h&&r.push(h(t.rules[s]));if(r.length)return new Is(t.id,t.name,i,t.h1||",",r,this.Q0);this.nk.badRules++},this.e1=()=>{const t=[];let i,s,e;const r=h.default.$r(this.Fr.location.href);let n;for(n=0;n<this.n1.length;n++)try{e=this.n1[n].$0(r),void 0!==e&&(i=this.n1[n].X0(),s=this.n1[n].K0(),t.push({id:i,name:s,value:e}),this.nk.resolved++,this.nk.reportsByRule[i]=(this.nk.reportsByRule[i]||0)+1)}catch(t){d.default.error("Error while resolving page attribute attribute. id: "+this.n1[n].X0()+"  error: "+t.message,t),this.o1||(this.o1=!0,this.us.emit("clsDebug","page attribute error (id="+this.n1[n].X0()+"): "+t.message))}return t},this.OH=t=>{let i,s;for(this.nk.configurationLastUpdatedAt=h.default.zn(),this.n1=[],i=0;i<t.length;i++)s=this.i1(t[i]),s&&(this.n1.push(s),this.nk.configured++);return this.n1.length>0},this.resolve=()=>this.e1(),this.U0=t=>{h.default.lC(t,this.nk)},this.Fr=t,this.us=i,this.s1=s,this.n1=[],this.nk={resolved:0,configured:0,configurationLastUpdatedAt:0,badAttributeConf:0,badAttributePattern:0,reportsByRule:{},rulesList:[]},this.o1=!1,this.Q0=e}}var Ds=s("./src/js/3rdPartyIntegration/objectCaptor.js");class js{constructor(t,i,s,r,n){this.a1=()=>{this.c1=[{body:{selector:"-",cssSelector:"body",name:"BODY",submitted:!1},l1:{}}]},this.d1=(t,i)=>{d.default.error(t+". Message: "+i.message,i),this.us.emit("clsDebug",t+". Message: "+i.message)},this.u1=t=>{const i=this.Ac.js(this.Fr.document.querySelector("BODY"));t[0].body.gbid=i.toString();for(let i=0;i<t.length;i++){const s=t[i].l1;if(Object.keys(s).length){t[i].inputs=[];for(const h in s)s.hasOwnProperty(h)&&t[i].inputs.push(s[h]),s[h].gbid=s[h].gbid.toString()}delete t[i].l1}return t},this.f1=()=>{let t;for(t=0;t<this.c1.length;t++)if(!h.default.xc(this.c1[t].l1))return!0;return!1},this.m1=()=>{try{this.g1&&(this.c1[0].body.lastInput=this.g1.toString()),this.f1()&&this.us.emit("formAnalysis",this.u1(this.c1)),this.a1()}catch(t){this.d1("Exception while sending Form Analysis",t)}},this.v1=t=>{try{const i=t.element.type&&t.element.type.toLowerCase(),s=this.Ac.js(t.element);if("SELECT"===t.element.tagName||"radio"===i||"checkbox"===i)this.c1[0].l1[s]||this.w1(t.element,s,t.cssSelector),this.c1[0].l1[s].metrics.entries++;else{const t=this.c1[0].l1[s];if("number"==typeof this.b1[s]){const i=h.default.zn()-this.b1[s];i<0?this.us.emit("clsDebug","form analysis - negative duration. Element gbid: "+s):t.metrics.duration+=i}}this.g1=s}catch(t){this.d1("Exception while handling focus lost",t)}},this.T1=t=>("INPUT"===t.tagName&&t.type||t.tagName).toLowerCase(),this.w1=(t,i,s,h)=>{if(this.c1[0].l1[i]||"submit"===t.type.toLowerCase())return;const e={type:this.T1(t),gbid:i,metrics:{entries:0,duration:0,validationErrors:0}};try{this.E1(t,e,s,h),e.name=this.C1.jg(t),this.c1[0].l1[i]=e}catch(t){this.d1("Exception while adding a new input",t)}},this.S1=t=>{try{const i=this.Ac.js(t.element);this.b1[i]=h.default.zn();const s=this.c1[0].l1;s[i]||this.w1(t.element,i,t.cssSelector),s[i].metrics.entries++}catch(t){this.d1("Exception while handling focus in",t)}},this.E1=(t,i,s,h)=>{h||(h=this.AL.eg(t)),i.selector=h.selector||e.default.encoding.rg,i.cssSelector=s,h.hostSelectorPath&&(i.shadowHostPath=h.hostSelectorPath),s&&"-"!==s&&(i.cssSelector=s)},this.I1=t=>{this.w1(t.clone,t.gbid,t.cssSelector,t.JX)},this.M1=t=>{const i=this.Ac.js(t.element);try{this.c1[0].l1[i]&&this.c1[0].l1[i].metrics.validationErrors++}catch(t){this.d1("Exception while updating validation error",t)}},this.Fr=t,this.us=i,this.Ac=r,this.AL=n,this.c1=void 0,this.g1=void 0,this.b1={},this.C1=s,this.a1(),this.us.on("event:elementChange",this.v1),this.us.on("event:focus",this.S1),this.us.on("event:unload",this.m1),this.us.on("segmentChanged",this.m1),this.us.on("newInputElement",this.I1),this.us.on("formValidationError",this.M1)}}class xs{constructor(t,i,s,h,e){this.D1=()=>{new js(this.Fr,this.us,this.C1,this.Ac,this.AL)},this.initialize=()=>{},this.Fr=t,this.us=i,this.Ac=h,this.AL=e,this.C1=s,this.us.once("domInit:preloaded",this.D1)}}class Rs{constructor(t,i,s,e,r,n,o){this.j1=(t,i)=>{if(!this.JW.recordClipboardContent)return"";let s;const e=t.target;if(s="paste"===t.type?(t.clipboardData||this.Fr.clipboardData).getData("text"):(h.default.Pr()||h.default.NE())&&t.target.value?t.target.value:this.jn.getSelection().toString(),s&&s.length&&(i.pb=s.length,s=s.slice(0,this.JW.clipboardMaxValue)),this.R1[e.nodeName]&&this.XH.We(e)||this.kP.Dw(e,C.default.Je,E.default.y_))s=this.hs.ns(s);else if(/\d/.test(s)){const t=s.match(/\d+/gm);s=this.hs.ns(s,0,"*",t)}s&&(i.content=s)},this.P1=()=>{this.A1&&clearTimeout(this.A1);const t=this;setTimeout((function(){t.L1=null}),this.JW.clipboardMaxDuration)},this.O1=t=>{this.P1();const i={type:t.type,timestamp:h.default.zn(),element:t.target};this.L1={type:i.type,timestamp:i.timestamp,element:i.element},this.j1(t,i),i.content&&(this.L1.content=i.content),this.He.emit("clipboardEvent",{data:i,element:t.target})},this.F1=t=>{this.P1();const i={type:t.type,timestamp:h.default.zn(),element:t.target};this.L1={type:i.type,timestamp:i.timestamp,element:i.element},this.j1(t,i),i.content&&(this.L1.content=i.content),this.He.emit("clipboardEvent",{data:i,element:t.target})},this.N1=t=>{const i={type:t.type,timestamp:h.default.zn()},s=(t.clipboardData||this.Fr.clipboardData).items;if(s&&s.length){i.contentType=s[0].kind;for(let t=0;t<s.length;++t)i.contentType!==s[t].kind&&(i.contentType="mix")}i.contentType=this.B1[i.contentType],this.j1(t,i),i.content&&this.L1&&i.content===this.L1.content&&(delete this.L1.content,i.sourceData={type:this.L1.type,timestamp:this.L1.timestamp,element:this.L1.element},this.L1.content&&(i.sourceData.content=this.L1.content)),this.He.emit("clipboardEvent",{data:i,element:t.target})},this.Fr=t,this.jn=i,this.He=s,this.XH=e,this.kP=r,this.hs=n,this.JW=o,this.L1=void 0,this.A1=void 0,this.R1={TEXTAREA:!0,INPUT:!0,SELECT:!0},this.B1={file:"binary",string:"text",mix:"mix"}}}var Ps=s("./src/js/mask/CreateDomMasker.js");class As{constructor(t,i,s,e){this.GG=t=>{this._1&&clearTimeout(this._1);const i=h.default.Df()&&h.default.Lf()?h.default.tj():h.default.ej(this.Fr),s=h.default.sj();let e=!1;null!==i&&(i.width<100||i.height<100)||(null===i||null===this.C1.page.ij||this.C1.page.ij.width===i.width&&this.C1.page.ij.height===i.height||(this.C1.page.ij=i,e=!0),null===s||null===this.C1.page.Ga||this.C1.page.Ga.width===s.width&&this.C1.page.Ga.height===s.height||(this.C1.page.Ga=s,e=!0),this.Fr.devicePixelRatio!==this.C1.state.rj&&(this.Fr.devicePixelRatio>this.C1.state.rj?t.wh(t.nj,this.C1.aj.oj):t.wh(t.nj,this.C1.aj.hj),this.C1.state.rj=this.Fr.devicePixelRatio),t.value={},t.value.rj=this.C1.state.rj,t.value.window=this.C1.page.ij,t.value.screen=this.C1.page.Ga,e&&(this.V1=t,this.JW.z1?this._1=setTimeout(this.U1,this.JW.z1):this.U1()))},this.Fr=t,this.C1=i,this.He=s,this.JW=e,this.V1=null,this._1=null,this.U1=()=>{i.H1&&(this.V1.type="tilt",this.V1.value.orientation=this.C1.orientation,this.C1.H1=!1),this.C1.sf(this.V1)}}}class Ls{constructor(t,i,s,r,n,o,a,c){this.initialize=()=>{if(this.JW.recordClipboardEvents){const t=new Ps.default(e.default).create(),i=new Rs(this.Fr,this.jn,this.He,this.XH,t,this.hs,this.JW);h.default.Br(this.Fr,"copy",i.O1),h.default.Br(this.Fr,"cut",i.F1),h.default.Br(this.Fr,"paste",i.N1)}if(!h.default.Ag()){const t=new As(this.Fr,this.C1,this.He,this.JW);this.He.on("event:resize",t.GG)}},this.Fr=t,this.jn=i,this.C1=s,this.He=r,this.XH=n,this.hs=o,this.JW=c}}class Os{constructor(t,i){this.globalObject=t=>()=>{const i=this.W1.capture(this.EG,t.paths);if(!i)return;let s;const h=[];for(s in i)i.hasOwnProperty(s)&&h.push(i[s]);return h.join(t.h1||",")},this.W1=i,this.EG=t}}class Fs{constructor(t){this.XJ=(()=>{let t=0;return{KJ:()=>++t,ZJ:()=>--t}})(),this.G1=()=>{1===this.XJ.KJ()&&this.He.emit("notifyAll:blackoutEnter")},this.q1=()=>{0===this.XJ.ZJ()&&this.He.emit("notifyAll:blackoutLeave")},this.onPossibleBlackoutEnter=()=>{this.G1()},this.onPossibleBlackoutLeave=()=>{this.q1()},this.He=t}}class Ns{constructor(t){this.Y1=(t,i,s)=>{const h=i.value.gT;return delete i.value.gT,t.postMessage(i,s,[h])},this.sendMessage=(t,i,s)=>t.postMessage(i,s),this.onMessage=t=>{const i=i=>{t(i)&&i.stopImmediatePropagation()};return this.X1.push(i),h.default.Br(this.Fr,"message",i)},this.close=()=>{let t;for(t=0;t<this.X1.length;t++)this.Fr.removeEventListener("message",this.X1[t]);this.X1=[]},this.Fr=t,this.X1=[],this.name="postMessage"}}class Bs{constructor(t,i,s){this.K1=t=>{let i;for(i=0;i<this.$M.length;i++)this.$M[i](t)},this.Z1=t=>{try{return t.location.href,!1}catch(t){return!0}},this.name="direct",this.sendMessage=(t,i)=>{if(this.Z1(t))return void pi.default.Nb("failed sending message over direct channel: cross origin.");const s=t[this.J1];s&&s.Q1?setTimeout((()=>{s.Q1({source:this.Fr,data:i,origin:this.t2})}),0):pi.default.Nb("failed sending message over direct channel: remote facade is invalid.")},this.onMessage=t=>{this.$M.push(t)},this.close=()=>{this.$M=[]},this.Fr=t,this.C1=i,this.J1=s,this.$M=[],this.t2=this.Fr.location.origin||h.default.Lb(h.default.$r(this.Fr.location.href)),this.C1.Q1=this.K1}}class _s{constructor(t,i,s,h){this.i2=()=>{if(this.se.directChannel)return new Bs(this.Fr,this.C1,this.J1);if(this.se.directChannelWhenUriContainer){let t;for(t=0;t<this.se.directChannelWhenUriContainer.length;t++)if(this.Fr.location.href.indexOf(this.se.directChannelWhenUriContainer[t])>=0)return new Bs(this.Fr,this.C1,this.J1)}return new Ns(this.Fr)},this.Fr=t,this.C1=i,this.J1=s,this.se=h||{}}}class Vs{constructor(t,i,s,h,e){this.nc=t=>{if(!t.getAttribute)return!1;const i=(t.getAttribute("data")||"").toLowerCase();return this.s2[t.tagName]&&("OBJECT"!==t.tagName||"text/html"===(t.getAttribute("type")||"").toLowerCase()||i.indexOf(".html")===i.length-5||i.indexOf(".htm")===i.length-4)},this.h2=t=>{this.He.emit("frame:detected",t)},this.e2=(t,i)=>{this.He.emit("frame:domChange",{target:t,attributeName:i})},this.yi=t=>{if("childList"===t.type){let i;const s=[];for(i=0;i<t.addedNodes.length;i++)this.nc(t.addedNodes[i])?s.push(t.addedNodes[i]):"function"==typeof t.addedNodes[i].getElementsByTagName&&Array.prototype.push.apply(s,t.addedNodes[i].querySelectorAll(this.n2));for(i=0;i<s.length;i++)this.h2(s[i]);s.length}else"attributes"===t.type&&this.nc(t.YW)&&(this.nc(t.YW)||"function"==typeof t.YW.getElementsByTagName&&t.YW.querySelectorAll(this.n2).length>0)&&this.e2(t.YW,t.attributeName)},this.start=()=>{let t;const i=this.jn.querySelectorAll(this.n2);for(t=0;t<i.length;t++)this.h2(i[t]);this.He.on("domMutation",this.yi)},this.jn=t,this.He=i,this.PY=s,this.o2=h,this.n2=e,this.s2={IFRAME:!0,FRAME:!!this.PY,OBJECT:!!this.o2}}}class zs{constructor(t,i,s,h){this.a2=t=>{try{return t.contentWindow.location.href,!0}catch(t){return!1}},this.c2=t=>!pi.default.Ob(t,document.location.origin)&&this.a2(t),this.l2=t=>{t.contentWindow.addEventListener("beforeunload",(()=>{this.He.emit("frame:unload",{hQ:this.c2(t),frame:t})}))},this.Kn=t=>{const i=this.c2(t.target);i&&this.l2(t.target),this.He.emit("frame:load",{hQ:i,frame:t.target})},this.d2=t=>{if("style"===t.attributeName){const i="none"!==this.Fr.getComputedStyle(t.target).display,s=this.Ac.js(t.target);this.u2[s]||this.f2(t.target,this.c2(t.target)),this.u2[s].visible!==i&&this.He.emit("frame:visibilityChange",{visible:i,frame:t.target,hQ:this.u2[s].hQ}),this.u2[s].visible=i}},this.f2=(t,i)=>{this.u2[this.Ac.js(t)]={visible:"none"!==this.Fr.getComputedStyle(t).display,hQ:i}},this.aQ=t=>{const i=this.c2(t);return t.m2||(t.addEventListener("load",this.Kn),this.f2(t,i),i&&this.l2(t),t.m2=!0,this.He.emit("frame:wired",{hQ:i,frame:t})),i},this.Fr=t,this.jn=i,this.He=s,this.Ac=h,this.u2={},this.He.on("frame:domChange",this.d2)}}const Us={hidden:function(t,i){let s=t,e=0;if(0===i)return"none"===getComputedStyle(s).display||"hidden"===getComputedStyle(s).visibility;for(;s&&s!==document&&e<=i;){if("none"===getComputedStyle(s).display||"hidden"===getComputedStyle(s).visibility)return!0;e++,s=h.default.parentNode(s)}return!1}};class Hs{constructor(t,i,s,e,r,n){var o,a;this.g2=t=>()=>{const i=h.default.lC({},t);return i.storageBackedReporting=!0,i.iframesParentOrigin=this.jn.location.origin||h.default.Lb(h.default.$r(this.jn.location.href)),this.se.v2&&(i.iframesDirectChannel=!0),i.idleEventTimeInterval=-1,i},this.w2=(t,i)=>{let s;const h=i===this._o.iframesAutoInjectMode.ir;for(s=0;s<this.se.b2.length;s++)if(t.indexOf(this.se.b2[s])>=0)return h;return!h},this.T2=t=>(!this.se.XQ||!Us.hidden(t,this.se.iframeVisibilityMaxLevels))&&(!(!t.contentDocument||!t.contentDocument.body||!t.contentDocument.body.hasChildNodes()&&"about:blank"!==t.contentWindow.location.href)&&(!("about:blank"===t.contentWindow.location.href&&!this.se.injectIframesAboutBlank)&&(!this.w2(t.contentWindow.location.href,this.se.E2)&&"complete"===t.contentDocument.readyState))),this.C2=t=>{const i=t.contentWindow;return!i[this.S2]&&!t.jQ&&(i._cls_config_forced=this.I2(t),i.document.head.appendChild(this.M2(i.document)),t.jQ=!0,this.D2&&setTimeout((()=>this.D2(t,!0)),0),!0)},this.j2=t=>{try{return this.T2(t)&&this.C2(t)}catch(i){return pi.default.Nb("failed injecting frame window. error:"+i),this.D2&&this.D2(t,!1),!1}},this.inject=t=>this.j2(t),this.eQ=t=>{this.D2=t},this.jn=t,this._o=i,this.R2=e,this.S2=r,this.se=h.default.Fi(n,{XQ:!0,v2:!1,b2:[],E2:this._o.iframesAutoInjectMode.ir,injectIframesAboutBlank:!1,iframeVisibilityMaxLevels:3}),this.D2=void 0,this.P2=this.R2.getAttribute("id"),this.A2=h.default.gC(this.R2.getAttribute("src")),this.M2=(o=this.P2,a=this.A2,t=>{const i=t.createElement("script");return i.setAttribute("type","module"),o&&i.setAttribute("id",o),i.setAttribute("src",a),i.setAttribute("data-clsautoinjected","true"),i}),this.I2=this.g2(s)}}class Ws{constructor(t,i,s,e,r,n){this.L2=(t,i,s,h)=>{this.O2(i.type)||(h&&(h.postMessage({type:"ack"}),i.nx&&(i.nx.port=h)),this.F2[i.type]&&this.F2[i.type](i.nx),this.N2(t,i))},this.O2=t=>{if("onFramePort"===t)return!1;const i=h.default.zn(),s=this.B2[t];return!!(s&&i-s<this.se._2)||(this.B2[t]=i,!1)},this.V2=(t,i,s)=>{t&&this.Fr!==t&&this.z2.send(t,"frame:notification",i,s)},this.U2=t=>!!t.H2,this.N2=(t,i)=>{if(i.W2){let s;const h=this.Fr.document.querySelectorAll(this.n2);for(s=0;s<h.length;s++)t!==h[s].contentWindow&&this.U2(h[s])&&this.V2(h[s].contentWindow,{type:i.type,nx:i.nx,W2:!0})}i.G2&&this.q2&&this.V2(this.Fr.parent,{type:i.type,nx:i.nx,G2:!0,W2:!0})},this.yQ=()=>{this.q2=!0},this.notify=(t,i,s)=>{this.se.disabled||this.V2(t,{type:i.type,nx:i.nx,gT:i.gT},s)},this.fQ=t=>{this.se.disabled||this.N2(void 0,{type:t.type,nx:t.nx,W2:!0,G2:!0})},this.Fr=t,this.z2=i,this.Y2=s,this.F2=e,this.se=h.default.Fi(r,{_2:300,disabled:!1}),this.n2=n,this.q2=!1,this.B2={},this.Y2.onMessage("frame:notification",this.L2)}}class Gs{constructor(t,i,s){this.X2=t=>t&&!this.K2[t],this.send=(t,i,s,h)=>{h=this.X2(h)?h:this.Z2,s.gT?this.J2.Y1(t,{message:i,value:s},h):this.J2.sendMessage(t,{message:i,value:s},h)},this.Fr=t,this.J2=i,this.Z2=s||"*",this.K2=h.default.ye("javascript:","data:")}}class qs{constructor(t,i){this.fT=t=>{if(!window.Node)return;const i=t.data.message,s=this.$M[i];if(s){try{this.DT=t.ports&&t.ports[0],s(t.source,t.data.value,t.origin,this.DT)}catch(i){pi.default.Nb("message (origin:"+t.origin+") handler raised an error.",i)}return!0}return!1},this.onMessage=(t,i)=>{this.$M[t]=i},this.Fr=t,this.J2=i,this.$M={},this.DT=void 0,i.onMessage(this.fT)}}class Ys{constructor(t,i,s,h,e,r,n,o){this.onPossibleBlackoutEnter=h.onPossibleBlackoutEnter,this.onPossibleBlackoutLeave=h.onPossibleBlackoutLeave,this.forceBlackoutEnter=s.blackoutManager.forceBlackoutEnter,this.forceBlackoutLeave=s.blackoutManager.forceBlackoutLeave,this.queryParamUpdate=e,this.onFramePort=r,this.notifyStopRecording=()=>{try{s.Kd().stop()}catch(t){console.warn("Unable to stop recording in iframe ("+s.page.url+" "+s.page.id+")")}},this.notifyStartRecording=()=>{try{s.Kd().start()}catch(t){console.warn("Unable to start recording in iframe ("+s.page.url+" "+s.page.id+")")}},this.domTrackingStarted=()=>{i().fZ()},this.pageUpdate=()=>{s.if()},this.forceFlush=()=>{t.emit("forceFlush")},this.clseUpdate=t=>{n(t)},this.rtoUpdate=t=>{o(t)}}}class Xs{constructor(t,i,s,h,e,r,n,o,a){this.Q2=(t,i,s)=>{let h,e;const r=this.se.searchIframesInShadowDom?this.t3(document):document.querySelectorAll(this.n2);for(h=0;h<r.length;h++)if(t===r[h].contentWindow){e=r[h];break}if(!e)return void(this.i3&&this.i3());const n=this.s3(e);this.i3&&this.i3(n,i.h3),e.H2=!0,this.z2.send(e.contentWindow,"parent:hello",{nh:this.e3.nh,sh:this.e3.sh,containerId:n,parentPageId:this.r3.id,xN:this.r3.name,wQ:this.sQ.Gr(),Nv:this.r3.Nv,fh:this.e3.fh,pQ:this.e3.pQ},s)},this.n3=(t,i,s)=>{this.o3&&clearTimeout(this.o3),this.a3&&this.a3(i,s),this.a3=void 0},this.CQ=(t,i,s)=>{this.a3=i,this.z2.send(t,"child:hello",{h3:this.r3.id}),-1!==this.se.c3&&(this.o3=setTimeout(s,this.se.c3))},this.ZQ=t=>{this.i3=t},this.jn=t,this.r3=i,this.sQ=s,this.z2=h,this.Y2=e,this.s3=r,this.e3=n,this.se=o||{l3:"gb_cid",c3:o.c3||2e3},this.n2=a,this.a3=void 0,this.i3=void 0,this.o3=void 0,this.Y2.onMessage("child:hello",this.Q2),this.Y2.onMessage("parent:hello",this.n3)}t3(t){let i=[];return function t(s){"IFRAME"===s.tagName&&i.push(s),s.shadowRoot&&t(s.shadowRoot),s.childNodes.forEach(t)}(t),i}}class Ks{constructor(t,i,s){this.d3=()=>{this.u3||(this.f3[this.se.m3]&&this.g3.wh(this.se.m3,this.f3[this.se.m3]),this.f3[this.se.v3]&&this.g3.wh(this.se.v3,this.f3[this.se.v3]),this.u3=!0,this.gi())},this.bQ=(t,i)=>{this.f3={parentPageId:t,containerId:i},this.g3&&this.gi&&this.d3()},this.He=t,this.C1=i,this.se=s||{m3:"containerId",v3:"parentPageId"},this.g3=void 0,this.gi=void 0,this.f3=void 0,this.u3=!1,this.He.on("event:unload",(()=>{this.g3&&(this.f3={},this.d3())}),void 0,-100),this.He.on("sessionTimeoutExpired",(()=>{this.u3=!1})),this.C1.fv=(t,i)=>{this.g3=t,this.gi=i,this.f3&&this.d3()}}}class Zs{constructor(t,i,s,e,r,n){this.w3=()=>{const t=this.y3(),i=Math.max(screen.width,screen.height),s=Math.min(screen.width,screen.height);return t?i:s},this.y3=()=>(this.b3?this.T3=this.b3.matches?0:90:this.Fr&&void 0!==this.Fr.orientation?this.T3=90===Math.abs(window.orientation)?90:0:screen&&screen.orientation&&void 0!==screen.orientation.type?this.T3=0===screen.orientation.type.indexOf("landscape")?90:0:this.T3=this.jn.documentElement.clientHeight>this.jn.documentElement.clientWidth?0:90,this.T3),this.E3=t=>{void 0!==t&&t!==this.T3&&(this.C1.orientation=this.T3,this.C1.H1=!0)},this.C3=()=>{const t=this.T3;this.y3(),this.E3(t)},this.initialize=()=>{h.default.um()||(this.b3?this.b3.addListener((t=>{const i=self.T3;self.T3=t.matches?0:90,this.E3(i)})):(this.y3(),h.default.Br(this.Fr,"orientationchange",this.C3,!0)))},this.Iv=()=>this.T3,this.Fr=t,this.jn=i,this.us=s,this.se=e,this.C1=n,this.b3=t.matchMedia?t.matchMedia("(orientation: portrait)"):void 0,this.T3=this.b3?this.b3.matches?0:90:void 0,this.S3=!1}}class $s{constructor(t,i,s,h,n,o,a,c,l,d,u,f,m,g){this.PU=()=>{this.VE&&(this.I3(),this.M3(),this.D3(),this.j3(),this.x3(),window===window.top&&this.R3(),this.P3(),this.A3(),this.L3(),this.O3(),this.F3(),this.N3(),this.B3(),this._3(),this.start())},this.VE=s,this.global=t,this.document=i,this.QU=n,this.ai=h,this.JW=r.default,this.u_=o,this.zd=a,this.vm=c,this.h_=l,this.sg=d,this.ig=u,this.sV=f,new fi.default(this.sV),this.oV=new Ci.default(this.global,this.sV),this.Hj=new mi.default(this.global,new gi.default(this.sV,this.oV,this.ai,e.default,this.JW)),this.rV=g,this.iv=new Ti.default(this.JW.maskQueryParameters,this.JW.maskUrlPath,{urlMaskingChar:this.JW.urlMaskingChar,queryMaskingChar:this.JW.queryMaskingChar}),this.aV=new Ei.default,this.iV=m,new bi(e.default,this.iV,this.h_,new oi.default(e.default.Ts),this.ai,this.JW)}init(){ks.init(this.document,this.VE,this.ai,this.PU,this.JW)}j3(){void 0!==this.VE&&this.VE.qm("eventsDetectionPlugin",new Ls(this.global,this.document,this.VE,this.ai,this.Hj,Y.default,this.sg,this.JW))}_3(){void 0!==this.VE&&this.JW.recordOrientation&&"ontouchstart"in this.global&&this.VE.qm("mobileEventsPlugin",new Zs(this.global,this.document,this.ai,this.JW,this.VE))}D3(){this.JW.clientAttributesEnabled&&(h.default.time("initializeAttributesPlugin",this.JW.timingMode),this.VE.qm("attributePlugin",new S(this.global,this.ai,this.VE,this.Hj,new l.default(this.document),this.sg,this.QU)),h.default.timeEnd("initializeAttributesPlugin",this.JW.timingMode))}M3(){this.JW.collectStruggles&&(h.default.time("initializeStrugglePlugin",this.JW.timingMode),this.VE.qm("strugglesPlugin",new y(this.global,this.ai,this.rV,this.aV,this.sg,this.ig,this.zd,this.VE,this.JW)),h.default.timeEnd("initializeStrugglePlugin",this.JW.timingMode))}x3(){if(this.JW.recordShadowDom&&this.JW.domRecordEnabled&&(this.global.ShadowRoot||h.default.jj(this.JW.forceShadowDomTrackingWhenUrlContains,h.default.$r(this.global.location.href)))){h.default.time("initializeShadowDomPlugin",this.JW.timingMode);var t=new I.default(e.default,this.JW);this.VE.qm("shadowDomPlugin",new F(this.global,document,this.ai,this.Hj,this.rV,this.VE.plugins.domRecordingPlugin,t,this.JW)),h.default.timeEnd("initializeShadowDomPlugin",this.JW.timingMode)}}R3(){this.global&&this.global===this.global.top&&this.JW.devToolsDetectionEnabled&&!h.default.$m()&&(h.default.time("initializeDevtoolsTrackingPlugin",this.JW.timingMode),this.VE.qm("devToolsTrackingPlugin",new V(this.global,this.ai,{devToolsDetectionMessage:this.JW.devToolsDetectionMessage,devToolsDetectionWorkerTimeout:this.JW.devToolsDetectionWorkerTimeout,devToolsDebuggerBasedDetection:this.JW.devToolsDebuggerBasedDetection})),h.default.timeEnd("initializeDevtoolsTrackingPlugin",this.JW.timingMode))}P3(){h.default.$m()||!this.JW.domTamperingDetectionEnabled||"undefined"==typeof MutationObserver&&"undefined"==typeof WebKitMutationObserver||(h.default.time("initializeDomTamperingPlugin",this.JW.timingMode),this.VE.qm("domTamperingPlugin",new z(this.global,this.ai,this.rV,{dq:this.JW.domTamperingGraceTime,domTamperingIgnorePages:this.JW.domTamperingIgnorePages,Eq:this.JW.domTamperingIgnorableTags})),h.default.timeEnd("initializeDomTamperingPlugin",this.JW.timingMode))}L3(){this.JW.domFormAnalysisReporting&&(h.default.time("initializeFormAnalysisPlugin",this.JW.timingMode),this.VE.qm("formAnalysisPlugin",new xs(this.global,this.ai,this.VE,this.rV,this.sg)),h.default.timeEnd("initializeFormAnalysisPlugin",this.JW.timingMode))}A3(){var t;this.JW.reportValidationErrors&&null!==(t=this.VE.plugins)&&void 0!==t&&t.domRecordingPlugin&&(h.default.time("initializeFormValidationPlugin",this.JW.timingMode),this.VE.qm("formValidationPlugin",new ei(this.global,this.ai,this.rV,this.VE.plugins.domRecordingPlugin.FG(),{domFormValidationTracking:this.JW.domFormValidationTracking,XZ:this.JW.domFormValidationRedComponentMin,KZ:this.JW.domFormValidationRedComponentDelta,g$:this.JW.domFormValidationSubmissionIds,l$:this.JW.domFormValidationSubmissionSelectors,c$:this.JW.domFormViolationsAllowFormLevel,ZZ:this.JW.domFormValidationConsiderBG,v$:this.JW.domFormValidationAdditionalTagNames,ignorableText:this.JW.domFormValidationIgnorableText,ignorableTextRegex:this.JW.domFormValidationIgnorableTextRegex,Eq:this.JW.domFormValidationIgnorableTags,M$:this.JW.domFormValidationIgnorePagesPredicates,f$:this.JW.domFormValidationCheckUrls,m$:this.JW.domFormValidationTitlesToCheck,domFormValidationCheckAfterPageLoad:this.JW.domFormValidationCheckAfterPageLoad,domFormValidationErrorRelatedText:this.JW.domFormValidationErrorRelatedText,html5FormValidation:this.JW.html5FormValidation,domFormValidationTraverseParentsForVisibility:this.JW.domFormValidationTraverseParentsForVisibility,minVisibleElementOpacity:this.JW.minVisibleElementOpacity,jQueryFormValidationEnabled:this.JW.jQueryFormValidationEnabled,domFormValidationTextByRGB:this.JW.domFormValidationTextByRGB})),h.default.timeEnd("initializeFormValidationPlugin",this.JW.timingMode))}I3(){if(this.JW.domRecordEnabled){h.default.time("initializeDomRecordingPlugin",this.JW.timingMode);const t=(t,i)=>{this.VE.rm("domPlugin",{name:i,message:t})};this.VE.qm("domRecordingPlugin",new Jt(this.global,this.document,this.VE,this.ai,e.default,this.rV,this.iv,this.oV,this.aV,this.Hj,this.sg,this.ig,t,this.JW)),h.default.timeEnd("initializeDomRecordingPlugin",this.JW.timingMode)}}F3(){(this.JW.versionResources||this.JW.resourcesRecordEnabled||this.JW.resourceTimingRecordEnabled)&&this.global.performance&&void 0!==this.global.performance.getEntriesByType&&void 0!==this.global.MutationObserver&&(h.default.time("initializeResourceRecorderPlugin",this.JW.timingMode),this.VE.qm("resourceRecorderPlugin",new ui(this.global,this.ai,this.vm,this.h_,e.default,this.zd,{electResourcesOnClear:this.JW.electResourcesOnClear,isCheckResourceBuffer:this.JW.isCheckResourceBuffer,maxResourcesBeforeFlush:this.JW.maxResourcesBeforeFlush,resourceBufferCheckTime:this.JW.resourceBufferCheckTime,resourceBufferIncreaseBy:this.JW.resourceBufferIncreaseBy,resourceTimingRecordAjax:this.JW.resourceTimingRecordAjax,versionResources:this.JW.versionResources,versionResourcesEnabledByChance:this.JW.versionResourcesEnabledByChance,resourcesRecordAllowCors:this.JW.resourcesRecordAllowCors,resourceIgnoreWhenUrlContains:this.JW.resourceIgnoreWhenUrlContains,resourcesRecordChance:this.JW.resourcesRecordChance,resourcesRecordCount:this.JW.resourcesRecordCount,resourceRecordCssOnly:this.JW.resourceRecordCssOnly,resourceTimingRecordEnabledByChance:this.JW.resourceTimingRecordEnabledByChance,resourceTimingRecordEnabled:this.JW.resourceTimingRecordEnabled,resourcesRecordEnabled:this.JW.resourcesRecordEnabled,reportURI:this.JW.reportURI,saveChancesByCookie:this.JW.saveChancesByCookie,reportByFetch:this.JW.reportByFetch,xhrBypassOnReadyStateChange:this.JW.xhrBypassOnReadyStateChange})),h.default.timeEnd("initializeResourceRecorderPlugin",this.JW.timingMode))}O3(){h.default.time("webVitalsPlugin",this.JW.timingMode),this.VE.qm("webVitalsPlugin",new Ts(this.ai,this.JW.webVitalsReportTimeout,this.JW.webVitalsMaxFCP,this.JW.webVitalsMaxLCP)),h.default.timeEnd("webVitalsPlugin",this.JW.timingMode)}N3(){if(this.JW.iframesRecordEnabled){h.default.time("initializeIFramesPlugin",this.JW.timingMode);const t="frame",i="object[type='text/html'],object[data$='.htm'],object[data$='.html']";let s="iframe";this.JW.framesetRecordEnabled&&this.JW.htmlObjectRecordEnabled?this.V3+=","+t+","+i:this.JW.framesetRecordEnabled?this.V3+=","+t:this.JW.htmlObjectRecordEnabled&&(this.V3+=","+i);const n=new Fs(this.ai),o=new _s(this.global,this.VE,this.QU,{directChannel:this.JW.iframesDirectChannel,directChannelWhenUriContainer:this.JW.iframesDirectChannelWhenUriContains}).i2(),a=new Vs(this.document,this.ai,this.JW.framesetRecordEnabled,this.JW.htmlObjectRecordEnabled,s),c=new zs(this.global,this.document,this.ai,this.rV),l=e.default.z_?new Hs(this.document,e.default,this.JW,e.default.z_,this.QU,{XQ:this.JW.iframesSkipHidden,v2:"direct"===o.name,b2:this.JW.iframesSkipWhenLocationContains,E2:this.JW.iframesAutoInjectMode,injectIframesAboutBlank:this.JW.injectIframesAboutBlank,iframeVisibilityMaxLevels:this.JW.iframeVisibilityMaxLevels}):void 0,d=new Gs(window,o,this.JW.iframesParentOrigin),u=new qs(window,o),f=new Ys(this.ai,(()=>this.VE.plugins.domRecordingPlugin),this.VE,n,(t=>{this.ai.emit("parentWindowInfo",t)}),(t=>{this.ai.emit("iframePortReceived",t)}),(t=>{this.ai.emit("clseUpdate",t)}),(t=>{this.ai.emit("rtoUpdate",t)})),m=new Ws(window,d,u,f,{disabled:r.default.iframesDisableNotifications},s),g=t=>""+this.rV.js(t),v=new Xs(this.document,this.VE.page,this.VE.blackoutManager,d,u,g,this.VE,{c3:this.JW.iframesHandshakeTimeout,searchIframesInShadowDom:this.JW.searchIframesInShadowDom},s),p=new Ks(this.ai,this.VE,{v3:"parentPageId",m3:"containerId"}).bQ,w=this.VE.blackoutManager,y=()=>this.VE.reporter;this.VE.qm("iframes",new wi(this.global,this.ai,this.VE,e.default,n,a,c,l,m,w,v,y,g,p,this.JW)),h.default.timeEnd("initializeIFramesPlugin",this.JW.timingMode)}}B3(){this.JW.pageAttributesEnabled&&(h.default.time("initializePageAttributesPlugin",this.JW.timingMode),this.VE.qm("pageAttributesPlugin",new Ss(this.ai,new Ms(this.global,this.ai,new Os(this.global,new Ds.default),this.JW.allowMultiplePageNames),this.JW.listenToUtagData)),h.default.timeEnd("initializePageAttributesPlugin",this.JW.timingMode))}start(){this.VE.sv(this.VE.page.initializationTimestamp)}}}}]);