/*!
 * Version: [Local_version_prod_es5] (2026-01-07)
 * Copyright (c) 2026 Glassbox https://www.glassboxdigital.com
 */!function(){"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var t={};function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}var i=function(){return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}),null,[{key:"isConsoleSupported",value:function(){var e="undefined"!=typeof window?window:self;return e&&e.console&&e.console.log}},{key:"error",value:function(){this.log.apply(this,arguments)}},{key:"log",value:function(){if(t.debugMode){var e=Array.prototype.slice.call(arguments,0);e.unshift((new Date).getTime()),this.isConsoleSupported()&&console.log.apply(console,e)}}},{key:"trace",value:function(){t.traceMode&&this.log.apply(this,arguments)}}])}();function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function c(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}var u=function(){return function(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,n,r,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=n,this.screenX=r,this.screenY=o,this.clientX=i,this.clientY=a}),[{key:"toString",value:function(){return"( pageX = "+this.x+", pageY = "+this.y+", screenX ="+this.screenX+", screenY ="+this.screenY+", clientX ="+this.clientX+", clientY ="+this.clientY+")"}}])}();function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}var d={INPUT:!0,TEXTAREA:!0,SELECT:!0,OPTION:!0,BUTTON:!0,A:!0},f={eventDetectionTagNames:{select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",unload:"img",abort:"img",readystatechange:"XMLHttpRequest"},objectAssign:function(){var e=arguments[0];if(null==e)throw new TypeError("Cannot convert undefined or null to object");var t,n,r,o=Object(e);for(t=1;t<arguments.length;t++)if(null!=(n=arguments[t]))for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r]);return o},helperAnchor:"undefined"!=typeof document&&document.createElement("a"),arrayToJson:void 0,hasNativeIsConnected:"undefined"!=typeof window&&window.Node&&Object.prototype.hasOwnProperty.call(window.Node.prototype,"isConnected"),fromComposedPath:"undefined"!=typeof window&&window&&(window.Event.prototype.composedPath?function(e){return e.composedPath()[0]}:function(e){return e.target}),cssEscapeIEPolyfill:function(e){if(!e)throw new TypeError("`CSS.escape` requires an argument.");for(var t,n=String(e),r=n.length,o=-1,i="",a=n.charCodeAt(0);++o<r;)0!==(t=n.charCodeAt(o))?i+=t>=1&&t<=31||127===t||0===o&&t>=48&&t<=57||1===o&&t>=48&&t<=57&&45===a?"\\"+t.toString(16)+" ":(0!==o||1!==r||45!==t)&&(t>=128||45===t||95===t||t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122)?n.charAt(o):"\\"+n.charAt(o):i+="ï¿½";return i},cssEscape:"undefined"!=typeof window&&window&&function(e,t){var n=e||window;if(/Trident|MSIE/i.test(navigator.userAgent))return f.cssEscapeIEPolyfill(t);if("object"!==l(n.CSS)||"function"!=typeof n.CSS.escape){var r;try{var o=document.createElement("IFRAME");document.body.appendChild(o),r=o.contentWindow.CSS.escape,document.body.removeChild(o)}catch(e){r=f.cssEscapeIEPolyfill,i.error("Failed creating iframe, returning polyfill: "+e.message,e)}return r(t)}return n.CSS.escape(t)},inClickableMap:function(e){for(var t=11;t&&e;){if("BODY"===e.tagName||"HTML"===e.tagName)return!1;if(d[e.tagName])return!0;e=L.parentNode(e)||e.host,t--}return!1},waitTimeHasPassed:!1,detector:null},p=f;function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function g(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m(t)?t:t+""}var v,b=g((function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._gbKey=function(e){return o._options.keysPrefix+e},this._get=function(e){try{return o._nativeStorage[o._gbKey(e)]}catch(e){return}},this._set=function(e,t){if(!o._destroyed)try{return o._nativeStorage[o._gbKey(e)]=t}catch(e){return void o._bus.emit("clsDebug","error writing to local storage, in StorageAccessor. Exception message: "+e.message)}},this._destroy=function(){for(var e in o._nativeStorage)0===e.indexOf(o._options.keysPrefix)&&delete o._nativeStorage[e];o._destroyed=!0},this.remove=function(e){try{return delete o._nativeStorage[o._gbKey(e)]}catch(e){return}},this.storageAvailable=function(){return void 0!==o._nativeStorage},this.validateAccessibility=function(e){return L.validateStorageAccessibility(o._nativeStorage,e)},this._bus=t,this._nativeStorage=n||{},this._options=r,this._destroyed=!1,this._bus.on("GDPR:optOut",this._destroy)}));function _(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof s?r:s,u=Object.create(c.prototype);return S(u,"_invoke",function(n,r,o){var i,s,c,u=0,l=o||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return i=t,s=0,c=e,f.n=n,a}};function p(n,r){for(s=n,c=r,t=0;!d&&u&&!o&&t<l.length;t++){var o,i=l[t],p=f.p,m=i[2];n>3?(o=m===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=n<2&&p<i[1])?(s=0,f.v=r,f.n=i[1]):p<m&&(o=n<3||i[0]>r||r>m)&&(i[4]=n,i[5]=r,f.n=m,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,l,m){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&p(l,m),s=l,c=m;(t=s<2?e:c)||!d;){i||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==a)break}catch(t){i=e,s=1,c=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function c(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(S(t={},r,(function(){return this})),t),d=u.prototype=s.prototype=Object.create(l);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,S(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,S(d,"constructor",u),S(u,"constructor",c),c.displayName="GeneratorFunction",S(u,o,"GeneratorFunction"),S(d),S(d,o,"Generator"),S(d,r,(function(){return this})),S(d,"toString",(function(){return"[object Generator]"})),(_=function(){return{w:i,m:f}})()}function S(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}S=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){S(e,t,(function(e){return this._invoke(t,n,e)}))};i("next",0),i("throw",1),i("return",2)}},S(e,t,n,r)}function w(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function E(){return C.apply(this,arguments)}function C(){return C=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){w(i,r,o,a,s,"next",e)}function s(e){w(i,r,o,a,s,"throw",e)}a(void 0)}))}}(_().m((function e(){return _().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,new Promise((function(e,t){function n(t){e(t)}function r(e){return e===eval.toString().length}function o(){void 0!==navigator.maxTouchPoints?function(){var e=String(Math.random());try{window.indexedDB.open(e,1).onupgradeneeded=function(t){var r,o=null===(r=t.target)||void 0===r?void 0:r.result;try{o.createObjectStore("test",{autoIncrement:!0}).put(new Blob),n(!1)}catch(e){var i,a=e;if(e instanceof Error&&(a=null!==(i=e.message)&&void 0!==i?i:e),"string"!=typeof a)return void n(!1);n(a.includes("BlobURLs are not yet supported"))}finally{o.close(),window.indexedDB.deleteDatabase(e)}}}catch(e){n(!1)}}():function(){var e=window.openDatabase,t=window.localStorage;try{e(null,null,null,null)}catch(e){return void n(!0)}try{t.setItem("test","1"),t.removeItem("test")}catch(e){return void n(!0)}n(!1)}()}function i(){navigator.webkitTemporaryStorage.queryUsageAndQuota((function(e,t){var r=Math.round(t/1048576),o=2*Math.round(function(){var e=window;return void 0!==e.performance&&void 0!==e.performance.memory&&void 0!==e.performance.memory.jsHeapSizeLimit?performance.memory.jsHeapSizeLimit:1073741824}()/1048576);n(r<o)}),(function(e){t(new Error("detectIncognito somehow failed to query storage quota: "+e.message))}))}function a(){void 0!==self.Promise&&void 0!==self.Promise.allSettled?i():(0,window.webkitRequestFileSystem)(0,1,(function(){n(!1)}),(function(){n(!0)}))}(function(){var e=navigator.vendor;return void 0!==e&&0===e.indexOf("Apple")&&r(37)})()?o():function(){var e=navigator.vendor;return void 0!==e&&0===e.indexOf("Google")&&r(33)}()?a():void 0!==document.documentElement&&void 0!==document.documentElement.style.MozAppearance&&r(37)?n(void 0===navigator.serviceWorker):void 0!==navigator.msSaveBlob&&r(39)?n(void 0===window.indexedDB):t(new Error("detectIncognito cannot determine the browser"))}));case 1:return e.a(2,e.v)}}),e)}))),C.apply(this,arguments)}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function I(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof s?r:s,u=Object.create(c.prototype);return A(u,"_invoke",function(n,r,o){var i,s,c,u=0,l=o||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return i=t,s=0,c=e,f.n=n,a}};function p(n,r){for(s=n,c=r,t=0;!d&&u&&!o&&t<l.length;t++){var o,i=l[t],p=f.p,m=i[2];n>3?(o=m===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=n<2&&p<i[1])?(s=0,f.v=r,f.n=i[1]):p<m&&(o=n<3||i[0]>r||r>m)&&(i[4]=n,i[5]=r,f.n=m,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,l,m){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&p(l,m),s=l,c=m;(t=s<2?e:c)||!d;){i||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==a)break}catch(t){i=e,s=1,c=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function c(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(A(t={},r,(function(){return this})),t),d=u.prototype=s.prototype=Object.create(l);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,A(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,A(d,"constructor",u),A(u,"constructor",c),c.displayName="GeneratorFunction",A(u,o,"GeneratorFunction"),A(d),A(d,o,"Generator"),A(d,r,(function(){return this})),A(d,"toString",(function(){return"[object Generator]"})),(I=function(){return{w:i,m:f}})()}function A(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}A=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){A(e,t,(function(e){return this._invoke(t,n,e)}))};i("next",0),i("throw",1),i("return",2)}},A(e,t,n,r)}function P(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,O(r.key),r)}}function O(e){var t=function(e,t){if("object"!=x(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==x(t)?t:t+""}function M(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}"undefined"!=typeof window&&(window.GBdetectIncognito=E);var N=0;function j(e){return"__private_"+N+++"_"+e}var D=j("protocolRegex"),L=function(){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n)}return function(e,t,n){return t&&R(e.prototype,t),n&&R(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(n,null,[{key:"currentTimestamp",value:function(){return Date.now.toString().indexOf("[native")>-1?Date.now():(new Date).getTime()}},{key:"isElement",value:function(e){return"hasAttribute"in e}},{key:"isDOMElement",value:function(e){return"object"===("undefined"==typeof HTMLElement?"undefined":x(HTMLElement))?e instanceof HTMLElement:e&&"object"===x(e)&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}},{key:"isEditableInput",value:function(e){if(!e)return!1;if("INPUT"===e.tagName){var t=(e.getAttribute("type")||"").toLowerCase();return"button"!==t&&"submit"!==t&&"reset"!==t}return!0}},{key:"isOldIE",value:function(){return!document.addEventListener}},{key:"hasTouch",value:function(){return"ontouchstart"in window}},{key:"isMobile",value:function(){var e=navigator.userAgent;return/Android|webOS|iPhone|iPad|iPod|Windows Phone|IEMobile|Opera Mini|Mobile|mobile|Tablet [^PC]|CriOS/i.test(e)}},{key:"isChrome",value:function(){return navigator.userAgent.toLowerCase().includes("chrome")}},{key:"isChromeDesktop",value:function(e){var t=e||navigator.userAgent,n=/Chrome/i.test(t);return!this.isMobile()&&n}},{key:"isSafari",value:function(e){var t=e||navigator.userAgent,n=/Safari/i.test(t),r=/Chrome/i.test(t);return n&&!r}},{key:"isSafariOnIos",value:function(e){var t=e||navigator.userAgent,n=!!t.match(/iPad/i)||!!t.match(/iPhone/i),r=!!t.match(/WebKit/i);return n&&r&&!t.match(/CriOS/i)}},{key:"isIE",value:function(e){var t=e||navigator.userAgent;return/Trident|MSIE/i.test(t)}},{key:"isFF",value:function(e){var t=e||navigator.userAgent;return/Firefox/i.test(t||navigator.ua)}},{key:"isEdge",value:function(e){var t=e||navigator.userAgent;return/Edg/i.test(t||navigator.ua)}},{key:"isChromeOnIos",value:function(e){var t=e||navigator.userAgent;return/CriOS/i.test(t)}},{key:"getChromeVersion",value:function(e){try{var t=(e||navigator.userAgent).match(/Chrom(e|ium)\/([0-9]+)\./);return!!t&&parseInt(t[2],10)}catch(e){return!1}}},{key:"browserVersionLargerOrEqual",value:function(e,t,n){try{var r=(e=e.toLowerCase()).split(n);if(r[1]){var o=r[1].split(".")[0],i=parseInt(o);return"number"==typeof i&&i>=t}return!1}catch(e){return p.detector.saveClsDebugErrorEvent("utils.js",{name:"browserVersionError",message:"failed to detect browser version "+e.message},""),!0}}},{key:"getAttributeForElement",value:function(e,t){return e&&this.isElement(e)?(e.hasAttribute(t.toLocaleLowerCase())?n=e.getAttribute(t.toLocaleLowerCase()):e.hasAttribute(t.toLocaleUpperCase())&&(n=e.getAttribute(t.toLocaleUpperCase())),n&&(n=n.trim()),n||null):null;var n}},{key:"getElementId",value:function(e){return e&&e.id?this.isString(e.id)||"function"!=typeof e.getAttribute?e.id:e.getAttribute("id"):null}},{key:"isDuplicateElementId",value:function(e,t){if(!t)return!1;try{return"querySelectorAll"in document&&document.querySelectorAll("[id='"+e+"']").length>1}catch(e){return!1}}},{key:"getMouseEnterTarget",value:function(){return"onmouseenter"in document?document:"onmouseenter"in window?window:document.body}},{key:"hasTimingAPI",value:function(e){return!this.isUndefined(e.performance)&&!this.isUndefined(e.performance.timing)}},{key:"startsWith",value:function(e,t){return!(!this.isString(e)||!this.isString(t))&&(self.String&&self.String.prototype&&this.isFunction(self.String.prototype.startsWith)?e.startsWith(t):e.slice(0,t.length)===t)}},{key:"truncateStr",value:function(e,t,n){var r=e;return e&&e.length>t&&(r=e.slice(0,t),n&&(r=r.concat("..."))),r}},{key:"getCoordinate",value:function(e){var t=e.changedTouches||e.touches,n=t&&t.length>0?t[0]:e,r=this.extractElementFromEvent(e);if(this.isHybrid()||"HTML"===r.nodeName.toUpperCase())return new u(n.clientX,n.clientY);if(this.isUndefined(n.pageX)||this.isUndefined(n.pageY)){var o=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,i=e.clientY+document.body.scrollTop+document.documentElement.scrollTop;return new u(o,i)}return new u(n.pageX,n.pageY,void 0,void 0,n.clientX,n.clientY)}},{key:"getScrollTopLeft",value:function(){try{return{top:void 0!==window.pageYOffset?window.pageYOffset:(window.document.documentElement||this.parentNode(window.document.body)||window.document.body).scrollTop,left:void 0!==window.pageXOffset?window.pageXOffset:(window.document.documentElement||this.parentNode(window.document.body)||window.document.body).scrollLeft}}catch(e){return i.error("Failed getting scroll values: "+e.message,e),{top:0,left:0}}}},{key:"scrollOnElement",value:function(e){try{if("HTML"===e.element.tagName)return!0;var t=e.element,n=t.scrollHeight>t.clientHeight,r=t.scrollWidth>t.clientWidth,o=window.getComputedStyle(t),a=t.getBoundingClientRect(),s=o.direction,c=(o.overflowY||"").toLowerCase(),u=(o.overflowX||"").toLowerCase();if("hidden"===c&&(n=!1),"hidden"===u&&(r=!1),!n&&!r)return!1;var l=e.value.coordinate;if(n){var d=l.clientX-a.left;if(("ltr"===s?a.width-d:d)<12)return!0}if(r){var f=l.clientY-a.top;if(a.height-f<12)return!0}return!1}catch(e){i.error("Error while in scrollOnElement. Error: "+e.message,e)}return!1}},{key:"getElementXYCoordinates",value:function(e){if(!e)return null;if(!("getBoundingClientRect"in e))return null;var t=e.getBoundingClientRect(),n=this.getScrollTopLeft();return new u(Math.round(t.left+n.left),Math.round(t.top+n.top))}},{key:"isSameCoordinates",value:function(e,t){return e.x===t.x&&e.y===t.y}},{key:"isCoordinatesDistLargerThan",value:function(e,t,n){return Math.abs(e.x-t.x)>n||Math.abs(e.y-t.y)>n}},{key:"getCurrentScrollReach",value:function(e){try{if(e)return e.currentY;var t=null!==window.top&&window.top!==window.self?window.top:window;return t.pageYOffset+(t.innerHeight||t.document.documentElement.clientHeight||t.document.body.clientHeight)}catch(e){return 0}}},{key:"getWindowSize",value:function(e){return e?this.validateSize(e.innerWidth,e.innerHeight):null}},{key:"getScreenSize",value:function(){return this.validateSize(screen.width,screen.height)}},{key:"getVisualViewportSize",value:function(){return this.validateSize(visualViewport.width,visualViewport.height)}},{key:"validateSize",value:function(e,t){return this.isNumber(e)&&this.isNumber(t)?{width:e,height:t}:null}},{key:"indexOfNode",value:function(e,t,n){for(var r=n||0;r<e.length;r++)if(e[r]===t)return r;return-1}},{key:"getLocationUrlSplitByHash",value:function(e){var t=this.validateHref(e.location.href),n=t.indexOf("#");return-1===n?{url:t,withoutHash:t,hash:null}:{url:t,withoutHash:t.slice(0,n),hash:t.slice(n+1,t.length)}}},{key:"getHashFromUrl",value:function(e){var t=e.indexOf("#");return-1===t?"":e.slice(t+1,e.length)}},{key:"stripHash",value:function(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}},{key:"getReferrerUrlWithoutHash",value:function(e){var t=this.validateReferrer(e.document.referrer);if(!t||0===t.length)return null;var n=t.indexOf("#");return-1!==n?t.slice(0,n):t}},{key:"decodeUri",value:function(e,t){if(e)try{return decodeURIComponent(t).replace(/\s/g,"%20")}catch(e){return t}return t}},{key:"encodeAsBase",value:function(e,t){return e.toString(t)}},{key:"sha1",value:function(e){var t=(new TextEncoder).encode(e),n=new DataView(t.buffer);return(window.crypto||window.msCrypto).subtle.digest("SHA-1",n).then((function(e){return new Uint8Array(e)}))}},{key:"byteToHex",value:function(e){return Array.from(e,(function(e){return e.toString(16).padStart(2,"0")})).join("")}},{key:"uuidv5",value:(r=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){P(i,r,o,a,s,"next",e)}function s(e){P(i,r,o,a,s,"throw",e)}a(void 0)}))}}(I().m((function e(t,n){var r,o,i,a,s;return I().w((function(e){for(;;)switch(e.n){case 0:return r=n.replace(/-/g,"").match(/.{1,2}/g).map((function(e){return parseInt(e,16)})),o=(new TextEncoder).encode(t),(i=new Uint8Array(r.length+o.length)).set(r),i.set(o,r.length),e.n=1,this.sha1(i);case 1:return(a=e.v)[6]=15&a[6]|80,a[8]=63&a[8]|128,s=this.byteToHex(a.slice(0,16)),e.a(2,"".concat(s.slice(0,8),"-").concat(s.slice(8,12),"-").concat(s.slice(12,16),"-").concat(s.slice(16,20),"-").concat(s.slice(20,32)))}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"uuid",value:function(){var e=(new Date).getTime(),t=window.performance&&window.performance.now&&1e3*window.performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){var r=16*Math.random();return e>0?(r=(e+r)%16|0,e=Math.floor(e/16)):(r=(t+r)%16|0,t=Math.floor(t/16)),("x"===n?r:3&r|8).toString(16)}))}},{key:"isValidUUID",value:function(e){if(!t.validateCookies)return!0;return/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}(:[01])?$/i.test(e)}},{key:"startsWithUUID",value:function(e){if(!t.validateCookies)return!0;return/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}/i.test(e)}},{key:"addEventHandler",value:function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on"+t,n)}},{key:"removeEventHandler",value:function(e,t,n){this.isUndefined(e.removeEventListener)?this.isUndefined(e.detachEvent)||e.detachEvent("on"+t,n):e.removeEventListener(t,n,!0)}},{key:"extractElementFromEvent",value:function(e){if("ionScroll"===e.type)return e.target.shadowRoot.querySelector("main")||e.target.shadowRoot.querySelector(".inner-scroll");void 0===e&&(e=window.event);var t=(e.target.shadowRoot?p.fromComposedPath(e):e.target)||e.srcElement;return null==t?null:3===t.nodeType?this.parentNode(t):t}},{key:"getAggregatedClickElement",value:function(e,t,n){var r,o;if(n[e.nodeName])return e;for(var i=0;i<t;i++){if(null==(r=r?this.parentNode(r)||r.host:this.parentNode(e)))return e;if("BODY"===(o=r.nodeName)||"HTML"===o)return e;if(n[o])return r}return e}},{key:"isEventSupported",value:function(e){if("touchstart"===e||"touchend"===e||"touchmove"===e)return this.hasTouch();var t="on"+e;if(t in window||t in window.document)return!0;var n=document.createElement(p.eventDetectionTagNames[t]||"div"),r=t in n;return r||(n.setAttribute(t,"return;"),r=this.isFunction(n[t])),n=null,r}},{key:"getReason",value:function(e){return this.isString(e)?"("+e+")":"(not specified)"}},{key:"hashcode",value:function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t}},{key:"consoleTimingSupported",value:function(){return window&&window.console&&window.console.time&&window.console.timeEnd&&window.console.timeStamp}},{key:"trimToSizeInBytes",value:function(e,t){if(!e||"string"!=typeof e)return e;var n;try{if((n=new Blob([e],{type:"text/plain"}).size)<=t)return e;var r=Math.round(n/e.length),o=Math.round(t/r);return e.substring(0,o)}catch(n){return i.error("failed trimming to size: "+n.message,n),e.substring(0,t)}}},{key:"time",value:function(e,t){t&&this.consoleTimingSupported&&window.console.time(e)}},{key:"timeEnd",value:function(e,t){t&&this.consoleTimingSupported&&window.console.timeEnd(e)}},{key:"timeStamp",value:function(e,t){t&&this.consoleTimingSupported&&window.console.timeStamp(e)}},{key:"arrayValueContainedInString",value:function(e,t){try{return"string"==typeof t&&e.some((function(e){return t.indexOf(e)>-1}))}catch(e){i.error("while try to find text in string counter an error : "+e.message,e)}}},{key:"getMatchingClassName",value:function(e,t){for(var n=" "+this.getClass(e)+" ",r=0;r<t.length;r++)if(n.indexOf(" "+t[r]+" ")>-1)return t[r]}},{key:"hasOneOfClassNames",value:function(e,t){try{var n=e.classList;return n?t.some((function(e){return n.contains(e)})):(n=this.getClassList(e))&&t.some((function(e){return n.indexOf(e)>-1}))}catch(e){return p.detector.saveClsDebugErrorEvent("utils.js",{name:"classList error",message:"failed to find in classList. "+e.message},""),!1}}},{key:"hasOneOfTagNames",value:function(e,t){return!(!e||"string"!=typeof e.tagName||!Array.isArray(t))&&t.some((function(t){return"string"==typeof t&&e.tagName.toLowerCase()===t.toLowerCase()}))}},{key:"getClass",value:function(e){return e.getAttribute&&e.getAttribute("class")||""}},{key:"getClassList",value:function(e){if(e.classList)return e.classList;var t=this.getClass(e);return t?t.split(" "):[]}},{key:"hasClassName",value:function(e,t){var r=n.getClassList(e);return!!r&&(r.indexOf?n.getClassList(e).indexOf(t)>-1:r.contains(t))}},{key:"getHybridType",value:function(){return"undefined"==typeof eyeViewHybridBridge?null:eyeViewHybridBridge.getHybridType()}},{key:"isHybrid",value:function(){return"undefined"!=typeof eyeViewHybridBridge}},{key:"isHybridAndroid",value:function(){return this.isHybrid()&&this.getHybridType()===eyeViewHybridBridge.HYBRID_ANDROID}},{key:"isHybridIOS",value:function(){return this.isHybrid()&&this.getHybridType()===eyeViewHybridBridge.HYBRID_IOS}},{key:"isBridge",value:function(){return!!(e.g&&e.g.glassboxMobileBridge||window.glassboxMobileBridge)}},{key:"isAndroidWebView",value:function(){return!(!n.isBridge()&&!n.isStringMatch("Android*wv"))}},{key:"immutableSet",value:function(){for(var e={},t=0;t<arguments.length;t++)e[arguments[t]]=!0;return e}},{key:"DOMElement2Str",value:function(e){return e instanceof CharacterData?e.textContent:e.outerHTML}},{key:"dateFromNow",value:function(e){return new Date(this.currentTimestamp()+e)}},{key:"getRootNode",value:function(e){if(!e)return e;if(e.getRootNode)return e.getRootNode();var t=e;for(e=this.parentNode(e);e;)t=e,e=this.parentNode(e);return t||e}},{key:"isAttachedToDOM",value:function(e){if(!e)return!1;if(p.hasNativeIsConnected)return e.isConnected;var t=e.ownerDocument;if(e.getRootNode)return t===e.getRootNode({composed:!0});for(;e;){if(e===t)return!0;e=this.parentNode(e)||e.host}return!1}},{key:"isVisible",value:function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects&&e.getClientRects().length)}},{key:"isInPageView",value:function(e){var t=e.getBoundingClientRect();return t.top>=-10&&t.left>=-10}},{key:"ensureProperty",value:function(e){for(var t=Array.prototype.slice.call(arguments,1),n=e,r=0;r<t.length;r++)Object.prototype.hasOwnProperty.call(n,t[r])||(n[t[r]]={}),n=n[t[r]];return n}},{key:"shallowExtend",value:function(e,t){if(!e)return e;var n;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}},{key:"isEmpty",value:function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}},{key:"assign",value:function(e,t,n,r){return Object.assign?Object.assign.call(null,e,t,n,r):p.objectAssign.call(null,e,t,n,r)}},{key:"extractHostname",value:function(e){if(!e)return"";var t=e.indexOf("//"),n=e.indexOf("/");if(-1!==t&&t<7&&t===n){var r=e.indexOf("/",t+2);return e.substring(t+2,-1!==r?r:void 0)}return""}},{key:"isHTTPS",value:function(e){if(!e)return!1;var t=e.indexOf("://");return-1!==t&&"https"===e.substring(0,t).toLowerCase()}},{key:"extractPathToFile",value:function(e){if(!e)return"./";var t=n.extractPath(e).split("/");return t.pop(),"//"+n.extractHostname(e)+t.join("/")+"/"}},{key:"isHostRelativeUrl",value:function(e){return!e||!("//"===e.substring(0,2)||e.indexOf("://")>-1)}},{key:"extractPath",value:function(e){if(!e)return"";p.helperAnchor.href=e;var t=p.helperAnchor.pathname;return"/"!==t.charAt(0)&&(t="/"+t),t}},{key:"extractSearch",value:function(e){if(!e)return"";p.helperAnchor.href=e;var t=p.helperAnchor.search.split("?");return t&&t.length>1&&(t=t[1]),t}},{key:"joinPath",value:function(e,t){var n="/"===e.charAt(e.length-1),r="/"===t.charAt(0);return n&&r?e+t.substring(1):n||r?e+t:e+"/"+t}},{key:"extractOrigin",value:function(e){if(!e)return"";p.helperAnchor.href=e;var t=p.helperAnchor.origin;if(!t){var n=e.indexOf("://"),r=-1!==n&&-1!==e.indexOf(":",n+3);return p.helperAnchor.hostname?p.helperAnchor.protocol+"//"+p.helperAnchor.hostname+(r&&p.helperAnchor.port?":"+p.helperAnchor.port:""):""}return t}},{key:"toAbsoluteUrl",value:function(e){return p.helperAnchor.href=e,p.helperAnchor.href}},{key:"prependCurrentDomain",value:function(e){return this.isHostRelativeUrl(e)?this.joinPath(this.extractOrigin(this.validateHref(window.location.href)),e):e}},{key:"arrayToJsonSafe",value:function(e){return p.arrayToJson||("function"==typeof Array.prototype.toJSON?p.arrayToJson=function(e){var t=Array.prototype.toJSON;delete Array.prototype.toJSON;var n=JSON.stringify(e);return Array.prototype.toJSON=t,n}:p.arrayToJson=JSON.stringify),p.arrayToJson(e)}},{key:"parseQuery",value:function(e){var t={};if(e){var n,r,o=e.replace("?","").split("&");for(n=0;n<o.length;n++)if((r=o[n].split("="))[0])try{t[r[0]]=r[1]?decodeURIComponent(r[1]):""}catch(e){}}return t}},{key:"optionsWithDefaults",value:function(e,t){var n;for(n in e=e||{},t=t||{})Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=void 0!==e[n]?e[n]:t[n]);return e}},{key:"strToBytes",value:function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return t}},{key:"strToUTF8Bytes",value:function(e){for(var t=[],n=0,r=0;r<e.length;r++){var o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):55296==(64512&o)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++r)),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t}},{key:"compositeFunctionBuilder",value:function(e){var t=[];return{add:function(e){return"function"==typeof e&&t.push(e),this},build:function(){if(t.length)return function(){var n,r;for(n=0;n<t.length;n++)if(r=t[n].apply(null,arguments),e&&r)return r}},buildBooleanAnd:function(){return t.length?function(){var e,n=!0;for(e=0;e<t.length;e++)n=n&&t[e].apply(null,arguments);return n}:function(){return!0}}}}},{key:"transformTextSegments",value:function(e,t){for(var n,r=0,o="",i=/\s+/gi;n=i.exec(e);)o+=t(e.substring(r,n.index)),o+=n[0],r=n.index+n[0].length;return o+=t(e.substring(r))}},{key:"waitForObjDefined",value:function(e,t,n,r){var o=!1;e[t]?n():Object.defineProperty(e,t,{configurable:!0,enumerable:!0,writeable:!0,get:function(){return this["_"+t]},set:function(e){this["_"+t]=e,o||(r&&(o=!0),n())}})}},{key:"waitingInterval",value:function(e,t,r,o,i){var a=o||1e3,s=void 0!==i?i:5;if(s)if(e&&e[t])r();else{setTimeout((function(){return n.waitingInterval(e,t,r,a,--s)}),a)}}},{key:"polyfillWindowMatches",value:function(){var e=window.Element.prototype;e.matches||(e.matches=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1})}},{key:"elementMatches",value:function(e,t){return!!window.Element&&("function"!=typeof e.matches&&this.polyfillWindowMatches(),e.matches(t))}},{key:"createAssociatedCss",value:function(e,n,r){var o=document.createElement("gb_adoptedStyle");o.setAttribute("gbrealid",r),o.setAttribute("gbAssociateId",n),o.setAttribute("gb-ignore","");for(var i=e.cssRules,a="",s=0;s<i.length;s++)if("string"==typeof i[s].cssText)if(t.adoptedStylesRemoveFontsFace&&i[s].cssText.indexOf("@font-face")>-1){a+=i[s].cssText.replace(/@font-face\s*{\s*.*?url\([^)]*\).*?}/,"")}else a+=i[s].cssText;return o.textContent=a,o}},{key:"arrayToLowerCase",value:function(e){return(e||[]).map((function(e){return e.toLowerCase()}))}},{key:"isElementShown",value:function(e){try{var n=getComputedStyle(e),r=e.getBoundingClientRect();return!("none"===n.display||"visible"!==n.visibility||n.opacity<t.minVisibleElementOpacity||e.offsetWidth*e.offsetHeight+r.height*r.width<t.minAreaTocountElementAsShown)}catch(e){return!1}}},{key:"waitForElementsOnPage",value:function(e,r,o,i){r.some((function(t){var r;if("string"!=typeof t||""===t.trim())return!1;var a=!1,s=!1;if((r=document.querySelectorAll(t)).length){if(i){for(var c=0;c<r.length;++c)if(n.isElementShown(r[c])){a=!0;break}if(a){var u=document.querySelector("BODY");(s=u&&n.isElementShown(u))||e.saveClsDebugErrorEvent("utils.js",{name:"visibility error",message:"element is visible but body is not"},"")}}(!i||a&&s)&&(e.snapshotType="waitForElement",setTimeout((function(){o(r[0])}),1))}return!(!r.length||i&&!a)}))||setTimeout((function(){return n.waitForElementsOnPage(e,r,o,i)}),t.waitForElementTime||1e3)}},{key:"isStringMatch",value:function(e,t){var n;try{e=e.replace(/[-\/\\^$+?()|[\]{}]/g,"\\$&"),n=new RegExp("^"+e.split("*").join(".*")+"$")}catch(e){return i.error("Exception occurred during parsing regular expression. Error: "+e.message,e),!1}if(n)return n.test(t)}},{key:"isClickable",value:function(e){return!(!e||!e.tagName)&&(!!p.inClickableMap(e)||("function"==typeof e.getAttribute&&!!e.getAttribute("onclick")||"function"==typeof e.onclick||!!e.getAttribute("href")))}},{key:"isFunction",value:function(e){return"function"==typeof e}},{key:"isNumber",value:function(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}},{key:"isBoolean",value:function(e){return"boolean"==typeof e||"[object Boolean]"===Object.prototype.toString.call(e)}},{key:"isString",value:function(e){return"string"==typeof e||"[object String]"===Object.prototype.toString.call(e)}},{key:"isUndefined",value:function(e){return void 0===e}},{key:"last",value:function(e){return e&&e[e.length-1]}},{key:"forOwn",value:function(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(e[n],n)}},{key:"fromArrayProto",value:function(e){return function(){return Array.prototype[e].apply(arguments[0],Array.prototype.slice.call(arguments,1))}}},{key:"indexBasedContains",value:function(e,t,n){return this.fromArrayProto("indexOf")(e,t,n)>-1}},{key:"pluck",value:function(e,t){return e?e.map((function(e){return e[t]})):[]}},{key:"reduce",value:function(e,t,n){return this.fromArrayProto("reduce")(e,t,n)}},{key:"contains",value:function(e,t,n){return"function"==typeof Array.prototype.includes?this.fromArrayProto("includes")(e,t):this.indexBasedContains(e,t,n)}},{key:"copyAttributes",value:function(e,t){for(var n=e.attributes||[],r=0;r<n.length;r++)t.setAttribute(n[r].nodeName,n[r].nodeValue)}},{key:"awaitWithTimeout",value:function(e,t){return new Promise((function(n,r){var o=setTimeout((function(){r(new Error("Timed out after ".concat(t," ms")))}),t);e.then((function(e){clearTimeout(o),n(e)}),(function(e){clearTimeout(o),r(e)}))}))}},{key:"formatToUUID",value:function(e){for(var t="",n=0;n<e.length;n++)t+=e.charCodeAt(n).toString(16);return(t=t.padEnd(32,"0")).substring(0,8)+"-"+t.substring(8,12)+"-"+t.substring(12,16)+"-"+t.substring(16,20)+"-"+t.substring(20,32)}},{key:"generateTabId",value:function(e,t,r,o){if(this.isHybrid()||this.isBridge())return"6cfdca4b-cbb1-4e43-9d09-9188979e37d0";var i=new b(r,e._gbSessionStorage,{keysPrefix:t.Storage.BoundKeyPrefix});try{var a=i._get("btabid"),s=i._get("unloaded");if(a&&e.top!==e)return a;if(void 0===a||void 0===s){var c=!1;if(o.passTabIdViaWinName&&e.name&&"string"==typeof e.name&&e.name.indexOf("gb.btabid")>-1){var u=e.name.split(";");if(2===u.length){var l=u[0].split("=")[1],d=u[1].split("=")[1];l&&"undefined"!==l&&p.detector._sessionId===d&&(i._set("btabid",a=l),c=!0),e.name=""}}c||(a=n.uuid(),i._set("btabid",a))}return i.remove("unloaded"),a}catch(t){return"string"==typeof e.name&&e.name.indexOf("gb.btabid")>-1&&(e.name=""),i._set("btabid",n.uuid()),i._get("btabid")}}},{key:"getUpperLevelDomain",value:function(e){if(!e)return"";var t=e.split(".");return t.length<=2?e:(t.shift(),t.join("."))}},{key:"isInfiniteScrollDetected",value:function(e,t){if(!e.scrollReach.height||!e.scrollReach.domElementsCount)return!1;var n=t.value.domElementsCount-e.scrollReach.domElementsCount,r=t.value.height-e.scrollReach.height;return p.waitTimeHasPassed=p.waitTimeHasPassed||t.timestamp>e.documentEvent.timestamp+e.config.infiniteScrollDetectionWaitTime,!!p.waitTimeHasPassed&&(!(n<e.config.infiniteScrollDetectionGrowElementsCount)&&!(r<e.config.infiniteScrollDetectionGrowPixels))}},{key:"getCanvasDataURL",value:function(e,t,n){try{return 10===n?t.toDataURL("image/png"):t.toDataURL("image/jpeg",n/10)}catch(n){e.emit("clsDebug","exception in getCanvasDataURL. "+(t._gbid?"canvas element with _gbid "+t._gbid:"")+". Exception message: "+n.message)}}},{key:"forEach",value:function(e,t){return this.fromArrayProto("forEach")(e,t)}},{key:"indexOf",value:function(e,t,n){if("number"==typeof n){var r=e?e.length:0;n=n<0?Math.max(0,r+n):n||0}else if(n){var o=this.sortedIndex(e,t);return e[o]===t?o:-1}return this.baseIndexOf(e,t,n)}},{key:"sortedIndex",value:function(e,t,n){var r=0,o=e?e.length:r;for(t=(n=this.identity)(t);r<o;){var i=r+o>>>1;n(e[i])<t?r=i+1:o=i}return r}},{key:"baseIndexOf",value:function(e,t,n){for(var r=(n||0)-1,o=e?e.length:0;++r<o;)if(e[r]===t)return r;return-1}},{key:"identity",value:function(e){return e}},{key:"gbCssEscape",value:function(e,t){return p.cssEscape(e,t)}},{key:"isCharKey",value:function(e){return!(!e||!e.key)&&1===e.key.length}},{key:"usePointerEvents",value:function(e,t){if(e){if(!e.PointerEvent)return!1;if(e._cls_config&&e._cls_config.disablePointerEvents)return!1;if(t)try{var n=t.getAttribute("data-clsconfig");if(n&&/disablePointerEvents *= *true/.test(n))return!1}catch(e){console.error("[Glassbox-411]: Error while getting data-clsconfig value")}return!0}return!1}},{key:"isDuplicateError",value:function(e,t,n){return!1!==n&&(!(!t.previousValidationErrorData||t.previousValidationErrorData.message!==e.message||t.previousValidationErrorData.element._gbid!==e.element._gbid)||(t.previousValidationErrorData=e,!1))}},{key:"visualNameConfigMerge",value:function(e,t){if(!t)return e;var n=this.assign(e.by||{},t.by||{}),r=this.assign(e,t);return r.by=n,r}},{key:"extractFromIframe",value:function(e){var t=document.createElement("IFRAME");t.sandbox="allow-same-origin",document.body.appendChild(t);var n=t.contentWindow[e];return document.body.removeChild(t),n}},{key:"isClassInNodeList",value:function(e,t){for(var r=0;r<t.length;r++)if(t[r].nodeType!==window.Node.TEXT_NODE&&n.hasOneOfClassNames(t[r],e))return!0;return!1}},{key:"isSamsungInternetBrowser",value:function(){return navigator.userAgent.match(/SamsungBrowser/i)}},{key:"isVocSurveyVisible",value:function(){var e=document.getElementsByTagName("gb-voc-survey")[0];if(!e)return!1;var t=window.getComputedStyle(e),n=t.getPropertyValue("visibility"),r=t.getPropertyValue("display");return!("hidden"===n||"none"===r)}},{key:"isValidCSSSelector",value:function(e){try{return document.querySelector(e),!0}catch(e){return!1}}},{key:"checkThirdPartyCookieSupport",value:function(e){return new Promise((function(t){try{if(e){var n="",r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===this.readyState)if(200===this.status)if(r.response){n=r.response;var o=new XMLHttpRequest;o.onreadystatechange=function(){4===this.readyState&&(200===this.status?o.response?t({thirdParty:JSON.parse(o.response)._cls_c,data:n}):(p.detector.saveClsDebugErrorEvent("utils.js",{name:"3rd party cookies",message:"no response for second GET to "+e},""),t({thirdParty:!1,data:n})):(p.detector.saveClsDebugErrorEvent("utils.js",{name:"3rd party cookies",message:"second GET to "+e+" failed"},""),t({thirdParty:!1,data:n})))},o.withCredentials=!0,o.open("GET",e,!0),o.send()}else p.detector.saveClsDebugErrorEvent("utils.js",{name:"3rd party cookies",message:"first GET to "+e+" did not receive a response. Aborting.."},""),t({thirdParty:!1,data:null});else p.detector.saveClsDebugErrorEvent("utils.js",{name:"3rd party cookies",message:"first GET to "+e+" failed"},""),t({thirdParty:!1})},r.withCredentials=!0,r.open("GET",e,!0),r.send()}else p.detector.saveClsDebugErrorEvent("utils.js",{name:"3rd party cookies",message:"failed creating endpoint"},""),t({thirdParty:!1})}catch(e){p.detector.saveClsDebugErrorEvent("utils.js",{name:"3rd party cookies - exception",message:e.message},""),t({thirdParty:!1})}}))}},{key:"isIncognito",value:function(){return new Promise((function(e){E().then((function(t){e(t)}))}))}},{key:"validateReferrer",value:function(e){if(!t.validateUrls)return e;var n=new RegExp("^(https?:\\/\\/)?((([a-zA-Z\\d]([a-zA-Z\\d-]*[a-zA-Z\\d])*)\\.?)+[a-zA-Z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-zA-Z\\d%_.~+]*)*(\\?[;&a-zA-Z\\d%_.~+=-]*)?(\\#[-a-zA-Z\\d_]*)?$","i");return""===e||n.test(e)?e:(p.detector.saveClsDebugErrorEvent("utils.js",{name:"referrer ERROR",message:"document.referrer is not valid, replace to empty string"},""),"")}},{key:"validateHref",value:function(e){return t.validateUrls?new RegExp("^(https?:\\/\\/|\\/\\/)?((([a-zA-Z\\d]([a-zA-Z\\d-]*[a-zA-Z\\d])*)\\.?)+[a-zA-Z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-zA-Z\\d%_.~+]*)*(\\?[;&a-zA-Z\\d%_.~+=-]*)?(\\#[-a-zA-Z\\d_]*)?$","i").test(e)||""===e||e.startsWith("#")?e:(p.detector.saveClsDebugErrorEvent("utils.js",{name:"referrer ERROR",message:"location.href is not valid, replace to empty string"},""),""):e}},{key:"stringFormat",value:function(e){for(var t=e,n=0;n<(arguments.length<=1?0:arguments.length-1);n++)t=t.replace("{"+n+"}",n+1<1||arguments.length<=n+1?void 0:arguments[n+1]);return t}},{key:"normalizeUrl",value:function(e){var t,n,r=e.includes("://");if(r){var o=T(e.split("://"),2);t=o[0],n=o[1]}else n=e;var i=n.replace(/\/{2,}/g,"/");return r?"".concat(t,"://").concat(i):i}},{key:"replaceProtocol",value:function(e){if(!t.protocolsToSwitch||!Array.isArray(t.protocolsToSwitch))return e;if(!M(this,D)[D]){var n=t.protocolsToSwitch.map((function(e){return e.replace(/[:\/]/g,"\\$&")})).join("|");M(this,D)[D]=new RegExp("^(".concat(n,")/?"),"i")}return e.replace(M(this,D)[D],"https://")}},{key:"validateStorageAccessibility",value:function(e,t){var n=function(e){console.error(new Error(e),{inIframe:window.self!==window.top,isTopLevel:window.top===window})},r="__test__",o=!1;if(!e)return n("".concat(t," is not available.")),!1;try{e[r]=r}catch(e){return n("Unable to store data in ".concat(t,". Error: ").concat(e.message)),!1}try{o=e[r]===r}catch(e){return n("Unable to retrieve data from ".concat(t,". Error: ").concat(e.message)),!1}try{delete e[r]}catch(e){return n("Unable to delete data from ".concat(t,". Error: ").concat(e.message)),!1}return o}},{key:"validSelectorPattern",value:function(e){var t=function(e,t,n){var r=t.split("*").filter(Boolean);if("*="===n)return r.map((function(t){return"[".concat(e,'*="').concat(t,'"]')})).join("");if(1===r.length){var o=r[0];if(t.startsWith("*")&&t.endsWith("*"))return"[".concat(e,'*="').concat(o,'"]');if(t.startsWith("*"))return"[".concat(e,'$="').concat(o,'"]');if(t.endsWith("*"))return"[".concat(e,'^="').concat(o,'"]')}return r.map((function(t){return"[".concat(e,'*="').concat(t,'"]')})).join("")};return e.trim().split(/(\s*[>+~]\s*|\s+)/).filter(Boolean).map((function(e){if(/^[>+~]$/.test(e.trim())||/^\s+$/.test(e))return e;if(!e.includes("*"))return e;var n=e;return n=(n=(n=(n=(n=n.replace(/:(nth-(?:child|last-child|of-type|last-of-type))\(\*\)/g,(function(e,t){return":".concat(t,"(n)")}))).replace(/\[\s*([^\s~|^$*=\]]+)\s*([~|^$*]?=)\s*["']([^"']*\*[^\]"']*)["']\s*\]/g,(function(e,n,r,o){return t(n,o,r)}))).replace(/#([A-Za-z0-9_*-]*\*[A-Za-z0-9_*-]*)/g,(function(e,n){return t("id",n,"=")}))).replace(/\.([A-Za-z0-9_*-]*\*[A-Za-z0-9_*-]*)/g,(function(e,n){return t("class",n,"=")}))).replace(/^([A-Za-z0-9_*-]*\*[A-Za-z0-9_*-]*)/,(function(){return"*"}))})).join("")}}]);var r}();v=L,L.getPerformanceResourceEntry=function(e,t){if(!window.performance||!window.performance.getEntriesByName)return"notSupported";var n=performance.getEntriesByName(v.toAbsoluteUrl(e));if(n&&n.length){n.sort((function(e,t){return e.startTime-t.startTime}));var r=n[n.length-1];r&&(t.downloadTime=r.duration?Math.floor(r.duration):void 0,t.ttfb=r.responseStart&&r.fetchStart?Math.floor(r.responseStart-r.fetchStart):void 0)}},Object.defineProperty(L,D,{writable:!0,value:null});var B,F,U={},V="undefined"!=typeof window?window:self;(U.beaconVersion="2",V.document)&&(U.detectorScript=null!==(B=null!==(F=document.currentScript)&&void 0!==F?F:document.querySelector("[data-clsconfig]"))&&void 0!==B?B:document.getElementById("_cls_detector_es5"));U.thirdPartyCookiesSupported="gb_tps",U.incognitoMode="gb_im",U.mouseEvents=L.usePointerEvents(V,U.detectorScript)?{down:"pointerdown",up:"pointerup"}:{down:"mousedown",up:"mouseup"},U.eventTypes=[U.mouseEvents.down,U.mouseEvents.up,"touchstart","touchend","scroll","change","blur","focusout","keydown","keyup","submit","reset","load","ajaxComplete","hashchange","navigation","popstate","focus","focusin","mouseenter","mousemove","error","beforeunload","resize","pagehide","dragstart","dragend","visibilitychange","copy","paste","cut"],U.snapshotApplicableEventType=["pageUpdate","change","mousedown","scroll","touchstart","touchend","blur","submit","drag","dragstart","dragend","formValidationError","navigation","unload","beforeunload","segmentChanged","domTampered","visibilitychange"],U.reportBase64URLs=!1,U.nobelEventTypes=["pageSnapshot","segmentChanged"],U.socialNobelEventTypes=["resourceContent"],U.encryptionPrefix="__ENC_",U.encodeSelectors=!0,U.encodeEventTypes=!0,U.useClassesInSelectors=!1,U.encoding={numberBase:36,rootSelector:"-",rootCssSelector:"-",delimiters:{versionPayload:";",pages:"~~~",events:"~~",eventParts:"~",pageIdEvents:"_"},domSnapshotPrefix:"D",domSnapshotRefPrefix:"r",domSnapshotCompressedPrefix:"d",domSnapshotPlainPrefix:"P",valueEncodedPrefix:"E",valueNotEncodedPrefix:"N"},U.cookies={session:"_cls_s",visitor:"_cls_v",sub_session:"_cls_subs",optOut:"gb.OptOut",integrationId:"cls_e",rto:"rto",delay:"cls_delay_ignored"},U.censorMode={BlackList:"blacklist",WhiteList:"whitelist"},U.iframesAutoInjectMode={BlackList:"blacklist",WhiteList:"whitelist"},U.Storage={BoundKeyPrefix:"gb.",UnboundKeyPrefix:"gb_unbound."},U.dataLimit=4194304;var H=U;H.setup="dom";var W={maxReportSize:1900,reportInterval:3e3,reportByPost:!0,maxPostReportSize:15e4,reportPostInterval:1e4,reportPostRetry:!0,postRetry:void 0,reportMaxRetries:2,reportAbortAfter:-1,reportAddUriParams:["clsjsv","_cls_s","_cls_v","pid","sn","cfg","pv","cls_e","rto","o"],reportUseWorker:!1,reportInitializeWorkerAsBlob:!1,maxAggregateLookup:5,aggregatingElements:["BUTTON","A","HTML","BODY"],interceptAjax:!0,interceptFetch:!0,ajaxHashRecurrentUrls:!1,ajaxRecordMetadata:"always",ajaxResBodyOctetTypeFix:!1,domNewPageTriggers:[],domNewPageAjaxTriggers:[],domStartAfter:1e4,snapshotImmediatePages:[],minVisibleElementOpacity:.5,domExpireSnapshotAfter:114e4,sendDocumentLoadAfterSnapshotExpired:!0,clearExpiredEventsAfter:114e4,dropExpiredBeacons:!0,domUpdateEveryWsMsgIn:-1,isWsSupportOpener:!1,isWsSendCustom:!1,domForceUpdateOnClick:!1,flushEventsOnClick:!1,domCompress:!0,domRecordCssRules:!0,domRecordCssProps:!1,domCaptureCssText:!1,domTrackStyleChanges:[],domTrackStyleChangesInterval:500,domCaptureCssTextInterval:100,domCaptureCssTextTermination:-1,domCompressRepetitiveElements:[],recordAnimation:!1,domRecordEnabled:!0,domRecordInnerBody:!1,recordShadowDom:!0,recordNonNativeShadowAsElementContainer:!1,customElementWrapperName:"DIV",renderSlotsInCustomElements:[],forceShadowDomTrackingWhenUrlContains:[],domOmitInvisibleElements:!1,resourcesRecordEnabled:!1,resourceRecordCssOnly:!0,resourcesRecordCount:1,resourcesRecordChance:.5,electResourcesOnClear:!0,resourcesRecordAllowCors:!1,resourceIgnoreWhenUrlContains:[],resourceTimingRecordEnabled:!1,resourceTimingRecordEnabledByChance:.01,versionResources:!1,versionResourcesEnabledByChance:1e-4,resourceTimingRecordAjax:!0,resourceBufferCheckTime:5e3,maxResourcesBeforeFlush:140,resourceBufferIncreaseBy:100,isCheckResourceBuffer:!0,webVitalsReportTimeout:1e4,webVitalsMaxFCP:15e3,webVitalsMaxLCP:15e3,clientAttributesEnabled:!1,ClientAttributesOnUserInteraction:!1,pageAttributesEnabled:!1,allowMultiplePageNames:!0,listenToUtagData:!1,"clientAttributeFuseWaitTime ":-1,clientAttributeMaxMutations:-1,clientAttributeMaxLength:30,triggerActions:{},semiDomEnabled:!0,domIgnoredFormElements:["__VIEWSTATE"],ignoreClicksInsideElement:"",domIncludeSelectorOnUpdate:!0,domIncludeCSSSelector:!0,domWhitelistMaskContentById:[],domBlacklistMaskContentById:[],domOmitByClass:[],domOmitById:["gb-main-overlay","gbOverlay"],domOmitObjectElementsByType:[],domOmitBySelector:[],domOmitAnalyticsIframes:["doubleclick.net"],tagsToCheckLength:[],tagMaxLength:-1,domIgnoreChangesById:[],domIgnoreChangesByClass:[],domIgnoreChangesByTag:[],domWhitelistMaskContentByClass:[],domBlacklistMaskContentByClass:[],domMaskedAttributes:[],domMaskDataAttributes:!1,domMaskAttributesByTag:[],domMaskIgnoreAttribute:"",domWhitelistMaskSimpleSelector:[],domBlacklistMaskSimpleSelector:[],domRegexPatternForMasking:[],domRegexMaskingChar:"*",domMaskContentByRegex:[],dontMaskAutocompletePassword:!1,domMaskingMode:H.censorMode.BlackList,domMaskingChar:"*",domEncryptorMaskingChar:"*",domEncryptById:[],domEncryptByClass:[],domPartialWhenLocationContains:[],domFilterAttributes:[],domIgnoreAttributes:[],domIgnoreSameValueAttributesModification:!1,domIgnoreLargeMutationsChunks:-1,domRemoveAttributes:[],removeUnnamedAttributesByTags:[],domRecordAbsoluteResourcesURLs:!1,protocolsToSwitch:[],domRemoveDuplicatedSlashResourcesUrl:!1,cordovaSdkReporting:!1,domKeepComments:!1,domOmitAfterUnload:!1,domIE11ForceMutationObserver:!1,domForceIEMutationEventsHandler:!1,domForceMutationEventsHandler:!1,iframesRecordEnabled:!0,framesetRecordEnabled:!1,htmlObjectRecordEnabled:!1,iframesDebugEnabled:!1,iframesPageUpdateDebounceMs:-1,iframesAutoInject:!1,injectIframesAboutBlank:!1,searchIframesInShadowDom:!1,iframesAutoInjectMode:H.iframesAutoInjectMode.BlackList,blackoutIdleReporting:!1,domTamperingDetectionEnabled:!0,domTamperingIgnorePages:[],domTamperingIgnorableTags:["TITLE","STYLE","SCRIPT"],domTamperingGraceTime:2e3,iframesHandshakeTimeout:2e3,iframeWaitForHandshake:!1,iframesSkipHidden:!0,iframeVisibilityMaxLevels:3,iframeUseIndependentConfigs:!1,domFormValidationTracking:!0,domFormValidationMutationDelay:1,domFormValidationIgnorableText:["characters left","characters remaining"],domFormValidationIgnorableTextRegex:[],domFormValidationIgnorableTags:[],domFormValidationIgnorePagesPredicates:[],domFormValidationCheckUrls:[],domFormValidationTitlesToCheck:[],domFormValidationCheckAfterPageLoad:!1,domFormValidationErrorRelatedText:[],domFormAnalysisReporting:!0,html5FormValidation:!0,jQueryFormValidationEnabled:!0,domFormValidationTraverseParentsForVisibility:1,domFormValidationTextByRGB:[],removeDuplicateValidationErrors:!0,maskFormValidationErrors:!1,domThrottleChanges:!1,domThrottleChangesIE11Only:!0,domIEForceStyleCopyByRules:void 0,domPreciseStyleSheetCloning:!1,removeCustomElementsDefinitionFromStyle:!1,domRecordStyleAttributes:!1,collectStruggles:!0,collectFormStruggles:!0,formStruggleZigzagIgnoreFormsWithText:["sort","filter"],formStruggleZigzagIgnorePrepopulated:!0,formStruggleZigzagFormSelectors:["form"],struggleMaxLongFocusTime:3e4,struggleRageClickInterval:3e3,struggleRageClickMinCount:5,struggleRageClickIgnoreBySelector:[],struggleDeadClickIgnoreBySelector:[],struggleDeadClickIgnoreByTagNames:[],struggleCaptureAjaxErrors:!1,forceRenderingFixForUA:void 0,forceRenderingFixForMultipleUA:[],domFuseDuration:-1,domFuseElementCount:-1,domFuseDurationIE:800,domFuseElementCountIE:-1,domFormValidationAdditionalTagNames:[],removeBase64ImageDataTagNames:[],removeBase64Fonts:!0,delayDomMutationEvent:-1,domDelayAddedNodesByClass:[],startMutationObserverOnLoad:!0,handleAttributeMutationsAsChunks:-1,ignoreMutationsOnNotAttachedElements:!0,enableAdoptedCss:!1,adoptedStylesRemoveFontsFace:!1,checkForHtmlOnly:!0,allowWaitForElementsUrls:[],snapshotWaitForElement:[],snapshotWaitForElementMustShown:!0,snapshotAsync:!1,visitorAsyncMaxChunkTime:50,delaySnapshotAfterElementFound:-1,snapshotWaitForPageHidden:!1,takeNewSnapshotOnVisibilityShowAgain:!1,waitForElementTime:1e3,minAreaTocountElementAsShown:200,checkVisibility:!0,reTakeSnapshotAfterTime:5e3,enableEncodeSnapshotReferrer:!0,setSelectorToAttributes:!1,isDetectorDom:!0,reportLastPageEventsViaBeaconAPI:!1,struggleUncompletedFormMinFields:3,reinstateNativeMutationObserver:!1,importNodeWhenUrlContains:[],initialObserverFirst:!1,setDefaultPssn:!0,applePaySelectors:[],fixChromeBackgroundClipCSS:!1,recordClipboardEvents:!0,recordClipboardContent:!0,clipboardMaxValue:30,clipboardMaxDuration:1e4,domPath:"",recordSwipe:!1,noStorageRecDisable:!1,minValidWindowSize:100,ignoreHeightRatio:!1,domChildListUpdateExistingElementsList:[],autoCreateDoctype:!0},z={debugMode:!1,traceMode:!1,suppressMouseMovesDebug:!0,netgearSendDebugInfo:!1,reportFailures:!1,reportByPost:!1,reportByFetch:!1,reportUriGBCU:"",maxFailedBeaconCount:-1,failedBeaconCountBreachCallback:void 0,reportPreferSendBeaconAPI:!1,reportDisableCors:!1,xhrBypassOnReadyStateChange:!1,enableSessionizingByCors:!1,useFingerprint:!1,fingerprintApiTimeout:1e3,fingerprintIncludeUniqueIdentifier:!0,fingerprintSupportReturningUser:!1,thirdPartyCookieDetectionTimeout:2e3,reportEndpoint:"",recordMFEAsAjax:[],recordMFEAsAjaxTimeout:5e3,incognitoDetectionTimeout:-1,checkOptOutUsingCors:!1,timingMode:!1,useIdSelectors:!0,noIdSelectorsForClassNames:["skull_list"],noIdSelectorsForIDs:[],noIdSelectorsForAttrs:[],noMetaTagInSelector:!0,useNameInFormSelectors:!1,preferNamesInFormSelectors:!1,reportValidationErrors:!0,supportNativeAutoComplete:!1,recordEnterForInputs:!0,recordTypingAll:!1,recordTypingForAttrs:["bs-typeahead"],recordTypingForClasses:[],recordTypingForIDs:[],replayTypingBySelector:[],ignorableElementIds:["cls_logger","cls_logger_tab"],idleEventTimeInterval:-1,maxTimeForIdleEvent:42e4,validationValueForRenderTime:2e4,titleCharsLimit:150,recordAjaxCallsAnyway:!1,ajaxDebug:!1,recordSpaLoadTime:!0,spaLoadTimeLimit:18e4,ajaxHashRecurrentUrls:!0,reportVisualNames:!0,visualNameDebug:!1,maxVisualNamelookUp:0,visualName:{maxLimit:160,maxParentLevel:3,CLS_NAME_ATTR:"data-gb-name",filterNamingByTagName:["script","style"],maxDistance:20,eventsToCalcDistance:["mousedown"],by:{title:!0,alt:!0,ariaLabel:!0,labelTag:!0,inlineText:!0,placeholder:!0,inputConsts:!0,inputButtonsValue:!0,name:!0,id:!0,parent:!0,child:!0},elementListToCheckParent:["img","span","div"],elementListToCheckChild:["button"],filterInlineTextByClassName:[],wrapperElementList:["BUTTON","A","LI"]},visualNameLimit:60,valueEncryptionMode:H.censorMode.BlackList,valueEncryptById:[],valueEncryptByClass:[],valueMaskingMode:H.censorMode.WhiteList,valueMaskNonEditableInputTypes:[],maskWhitelistValueById:[],maskBlacklistValueById:[],maskWhitelistValueByClass:[],maskBlacklistValueByClass:[],valueWhitelistMaskSimpleSelector:[],valueBlacklistMaskSimpleSelector:[],valueMaskIgnoreAttribute:"",titleMaskingChar:"*",valueMaskingChar:"*",attributeMaskingChar:"*",urlMaskingChar:"*",queryMaskingChar:"*",ccMaskingChar:"*",vocMaskingChar:"*",formValidationMaskingChar:"*",valueCensorPrefixBySelector:[],valueCensorUnmaskedSuffixLength:0,valueCensorPrefixChar:"*",ajaxMaskRequestBody:[],ajaxMaskResponseBody:[],ajaxResponseBodyMaxLength:4096,ajaxRequestBodyMaxLength:4096,maxAjaxDownloadTime:6e4,ajaxStatsQueryParams:[],ajaxCaptureRequestCookie:!1,ajaxTimeoutForResourceData:-1,maskCookies:[],maskQueryParameters:[],maskUrlPath:[],ccAutoMask:!0,ccAutoMaskByContent:!0,ccAutoMaskNumberInString:!1,ccAutoMaskMode:"default",ccAutoMaskKeepLastDigits:-1,ccForceMaskContainer:!0,valueMaskByCategories:[],valueMaskingCharNumeric:"#",valueMaskingCharNumericLike:"#",maskTitle:!1,cookieAssignFQDN:!1,cookieTLDSegmentCount:-1,enableSecureCookie:!0,recordErrors:!0,recordCSPViolations:!1,recordConsoleErrors:!0,errorMessageMaxSize:4096,maxRecordedCountPerError:2,recordConsoleWarn:!1,recordConsoleInfo:!1,maxRecordedCountPerWarning:2,maxRecordedCountPerInfo:2,maxRecordedCountPerCSP:2,recordConsoleWarnWhitelist:[],recordConsoleInfoWhitelist:[],recordConsoleErrorWhitelist:[],recordCSPWhitelist:[],recordConsoleWarnBlacklist:[],recordConsoleInfoBlacklist:[],"recordConsoleErrorBlacklist ":[],"recordCSPBlacklist ":[],observeRightClick:!1,minDragPixels:10,botDetection:!1,devToolsDetectionEnabled:!0,devToolsDetectionMessage:"",devToolsDetectionWorkerTimeout:500,devToolsDetectionCallbackTimeout:500,devToolsDebuggerBasedDetection:!0,struggleCaptureBlankPage:!0,struggleCaptureBlankPageTargetsSelector:"",struggleCaptureDeadClick:!0,struggleCaptureRightClick:!1,struggleDeadClickInterval:1e3,struggleCaptureDeadClickOnDisabledElements:!1,struggleCaptureErrorClick:!0,struggleErrorClickInterval:1e3,struggleErrorClickBlacklist:[],ajaxStruggleIgnoreCancel:!0,ajaxStruggleExcludedUrls:[],reportDebugInfo:!0,reportEventsImmediately:["pageSnapshot"],DOMBeaconImg:!1,truncateEventsWithUnload:!0,recordScrolls:!1,recordIonScrolls:!1,recordScrollReach:!0,minStallingScrollTime:3e3,scrollDebug:!1,onLoadScrollReachHeightThreshold:.7,onLoadScrollReachMaxRetries:3,onLoadScrollReachRetryInterval:200,scrollReachMaxTop:1e4,disableScrollReachForIframes:!0,recordMouseMoves:!1,mmRecordTimes:!1,mmDiluteMinPixels:20,mmMaxMovesWithUnload:100,mmMaxMovesInEventNoTimes:180,mmMaxMovesInEventWithTimes:130,mmMinStallingMoveTime:1e4,mmMaxInMemoryMoves:600,mmDebug:!1,ignoreSelectorOnMouseMove:!1,SCIntegration:!1,SCIntegrationURLsContainList:[],SCIntegrationKeyList:["pageName","v25","v11","v39"],SCIntegrationCheckPayload:!0,SCIntegrationAjaxListen:!0,SCIntegrationInterceptSendBeacon:!0,interceptThirdPartyAttributes:!1,interceptThirdPartyAttributesDefaultUrlsPatterns:[],interceptABTesting:!1,interceptAdobeABEvent:!1,abTestingGlobalObject:"",enableOptimizelyIntegration:!1,enableABTastyIntegration:!1,enableAdobeAnalyticsIntegration:!1,adobeRsid:"",adobeEVarNumber:"",adobeAPIMaxAttempts:5,enableGoogleAnalyticsIntegration:!1,googleDimensionIndex:[],googleMeasurementId:[],interceptGAABTesting:!1,googleAPIMaxAttempts:5,ignoreDomUpdateOnClickClassList:["pac-item"],toggleTimestampOnClickClassList:["pac-target-input"],externalIdAttr:"id",externalIdUseGbId:!1,recordHovers:!1,mhDeepLevel:2,mhMaxListSize:10,mhMaxInMemeoryHovers:100,mhDebug:!1,reportHybrid:!1,domRecordEnabled:!1,reportAllResourcesLoad:!1,ignoreReportResourcesByTagNames:[],reportExternalResources:!1,reportMaxConcurrency:-1,reportTimingBetweenBeacons:-1,externalReporterObject:"",clsDebug:!0,clsDebugCharsLimit:1e3,clsDebugMaxReports:10,disable3rdPartyInterceptClsDebug:!1,reportEncoding:"formUrl",reportCompress:!1,cordovaSdkReporting:!1,reportAddUriParams:["clsjsv","_cls_s","_cls_v","pid","sn","cfg","pv","cls_e","rto","o"],reportAddUriParamAPI:!1,reportStorageBackedForUA:[".*"],reportViaTopWindow:!1,duplicateIdCheck:!1,blackoutWhenLocationContains:[],reportCorsForceSafelistedHeaders:!0,reportCorsTakeNativeCookies:[],resetCorsOnNativeCookieChange:!1,clsByNativeCookie:"",clsByAdobe:"",visitorDaysToExpiration:1825,reportIncludeReferrer:!0,reportCreateSubSessionCookie:!1,sessionIdByQueryParam:"_cls_s",visitorIdByQueryParam:"_cls_v",clseByQueryParam:"_cls_e",decodeSessionDataQueryParams:!1,sendStateInfo:!0,supportRemoteClientConfig:!1,remoteClientConfigAllowBlank:!1,delayRecording:!1,saveChancesByCookie:!1,debounceScrolls:500,debounceScrollReach:1e3,encryptionPublicKey:void 0,encryptionKeyId:"key1",encryptionTimeout:600,dataLayerPath:"",dataLayerBlockList:[],dataLayerValuesBlockList:[],dataLayerIncludeList:[],dataLayerValuesIncludeList:[],dataLayerCaptureEmptyStrings:!1,captureDataLayerArrayPushes:!1,dataLayerArrayName:"dataLayer",dedupeDataLayerValues:!1,collectDataLayerOnlyOnFirstPage:!1,sendDatalayerPushUsingCustomEvent:!1,captureGlobalObjects:[],captureGlobalObjectsEmptyStrings:!1,captureGlobalObjectsOnSegmentChange:!1,useFullPathForObjectCapturing:!1,segmentationTriggerBySimpleSelector:[],segmentationLabelBySimpleSelector:[],segmentationLabelByAttribute:"",segmentationLabelByInnerText:!1,segmentationTitleByAttribute:"",segmentationTitleByInnerText:!1,segmentationAlwaysSendTitleChange:!0,segmentationPrefix:"_logical_",segmentationParallelMechanism:!1,segmentationInitialLabelSelector:"",segmentationForceTryEnterSegment:!1,segmentationForceAddingListeners:!1,forceLogicalSegmentationOnHash:!1,waitForSegmentRender:-1,ignoreSegmentLoadEnd:!1,sendSegmentTitle:!1,waitForSegmentTitle:-1,useExtension:!0,ajaxRecordSessionLimit:-1,pageNameResolvingEnabled:!0,pageNameResolvingByElements:[],gbconsoledomain:"",decodeUri:!1,collectVoc:!0,sendTopURL:!0,collectUsabillaVoc:!1,waitForUsabillaObj:!0,interceptUsabillaUrl:"https://w.usabilla.com",enableSessionCamApi:!1,passTabIdViaWinName:!1,infiniteScrollDetectionWaitTime:1e4,infiniteScrollDetectionGrowElementsCount:10,infiniteScrollDetectionGrowPixels:1e3,recordCanvas:!1,interceptDialogShowModal:!0,canvasQuality:5,initDetectorOnInteractive:!0,recordOrientation:!1,resizeDebounceTime:300,allowCookies:!0,detectorScriptNameES5:"detector-bootstrap_es5.min.js",disablePointerEvents:!1,captureQueryStringParamsOnSegmentChange:!1,captureQueryStringParamsAsDataOnSegmentChange:!0,suppressEventsAfterSnapshotTimeout:["all"],onReadyCallback:void 0,onIntegrationCallback:void 0,onFail:void 0,forceHookFetch:!1,dontAttachBlurListenerWithCapture:!1,shouldReadClientAttributeOnCors:!1,addBaseDomainToRelativeUrls:!1,validateUrls:!1,validateCookies:!1,interceptAdobeSdkVariables:!1,acquirePerformanceTimingTimeout:300,performanceDebugEnabled:!1,domChildListUpdateExistingElements:!1,ajaxRecordStats:"never"};function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Y(r.key),r)}}function K(e,t,n){return t&&q(e.prototype,t),n&&q(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Y(e){var t=function(e,t){if("object"!=G(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=G(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==G(t)?t:t+""}var X=K((function e(t){var n,r,o,i,a,s,c,u,l,d,f;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"undefined"!=typeof window?window:self,n=void 0!==t?t:{},r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=String.fromCharCode,i=function(e){var t=e.charCodeAt(0);return t<128?e:t<2048?o(192|t>>>6)+o(128|63&t):o(224|t>>>12&15)+o(128|t>>>6&63)+o(128|63&t)},a=function(e){return e.replace(/[^\x00-\x7F]/g,i)},s=function(e){return btoa(a(e))},c=function(e,t){return t?s(e).replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"})):s(e)},u=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}/g,l=function(e){return o(e.length<3?(31&e.charCodeAt(0))<<6|63&e.charCodeAt(1):(15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2))},d=function(e){return e.replace(u,l)},f=function(e){return function(e){return d(atob(e))}(e.replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,""))},n.Base64={fromBase64:f,toBase64:c,bytesToBase64:function(e){for(var t,n="",o=0;o<e.length;o+=3)t=(252&e[o])>>2,n+=r.charAt(t),t=(3&e[o])<<4,o+1<e.length?(t|=(240&e[o+1])>>4,n+=r.charAt(t),t=(15&e[o+1])<<2,o+2<e.length?(t|=(192&e[o+2])>>6,n+=r.charAt(t),t=63&e[o+2],n+=r.charAt(t)):(n+=r.charAt(t),n+="=")):(n+=r.charAt(t),n+="==");return n},utob:a,encode:c,encodeURI:function(e){return c(e,!0)},btou:d,decode:f}}));function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$(r.key),r)}}function Q(e,t,n){return t&&Z(e.prototype,t),n&&Z(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function $(e){var t=function(e,t){if("object"!=J(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=J(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==J(t)?t:t+""}var ee=Q((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.encode=function(e){return e.constructor===Array?n._base64.encode(L.arrayToJsonSafe(e)):n._base64.encode(JSON.stringify(e))},this.decode=function(e){return JSON.parse(n._base64.decode(e))},this._base64=t}));function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,re(r.key),r)}}function re(e){var t=function(e,t){if("object"!=te(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=te(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==te(t)?t:t+""}var oe=function(){return function(e,t,n){return t&&ne(e.prototype,t),n&&ne(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,n,r,o){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._addIfSet=function(e,t,n,r){n?i._paramsAsSet[t]&&e.push(i._encodeKeyValue(t,n)):r&&i._paramsAsSet[t]&&e.push(t)},this.apply=function(e,t,n,r){var o,a,s=[];if(i._addIfSet(s,"clsjsv",i._detectorVersion),t&&(i._addIfSet(s,"_cls_s",t._sessionId),i._addIfSet(s,"_cls_v",t._visitorId),i._addIfSet(s,"_cls_subs",t.subSessionId),i._addIfSet(s,"pid",t.pageId),i._isPostReporting&&(i._addIfSet(s,"rto",t.rto),i._addIfSet(s,"cls_e",t.integrationId)),i._paramsAsSet.ref&&s.push(i._encodeKeyValue("ref",encodeURIComponent(t.referrer)))),i._addIfSet(s,"sn",n),i._isPostReporting&&i._addIfSet(s,"cfg",i._configurationHash,!0),i._addIfSet(s,"pv","2"),i._addIfSet(s,"o",i._ostype),r)for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&s.push(i._encodeKeyValue(o,r[o]));if(i._safariNativeCookies&&i._safariNativeCookies.length)for(a=0;a<i._safariNativeCookies.length;a++)s.push(i._encodeKeyValue(i._safariNativeCookies[a].key,i._safariNativeCookies[a].value));return s.length&&e?e+(-1!==e.indexOf("?")?"&":"?")+s.join("&"):e},this.updateNativeCookies=function(e){i._safariNativeCookies=e},this.setConfigurationHash=function(e){i._configurationHash=e},this._isPostReporting=o,this._safariNativeCookies=void 0,this._configurationHash=void 0,this._paramsAsSet=L.immutableSet.apply(null,r),this._detectorVersion=encodeURIComponent(n),this._ostype=void 0,t.on("updateSafariQueryString",(function(e){i._safariNativeCookies=e})),t.once("plugin:updateSafariQueryString",(function(e){this._safariNativeCookies=e})),t.on("newRemoteConfig",(function(e){i._configurationHash=e.hash})),t.once("ostype",(function(e){i._ostype=e}))}),[{key:"_encodeKeyValue",value:function(e,t){return e+"="+t}}])}();function ie(e){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ce(r.key),r)}}function se(e,t,n){return t&&ae(e.prototype,t),n&&ae(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ce(e){var t=function(e,t){if("object"!=ie(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ie(t)?t:t+""}var ue=se((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._doHandle=function(e,t){var n,o=e.metadata.pageId;for(n=0;n<t.length;n++)r._beaconMap[o]=r._beaconMap[o]||{},r._beaconMap[o][t[n].sn]={startIndex:t[n].startIndex,endIndex:t[n].endIndex,eventSetId:t[n].eventSetId,sn:t[n].sn}},this.setNext=function(e){r._nextInPipeline=e},this.handle=function(e,t,n){r._doHandle(e,t),r._nextInPipeline.handle(e,t,n)},this.onReporterMessage=function(e,t,n,o){n?n&&r._beaconMap[t]&&r._beaconMap[t][e]&&(r._onReportCallback(t,r._beaconMap[t][e],n),delete r._beaconMap[t][e]):r._onReportCallback(t,r._beaconMap[t][e],n,o)},this._beaconMap=t,this._onReportCallback=n,this._nextInPipeline=null})),le={FOCUS_TIME_ATTR:"focusTime",AUTO_COMPLETE_ATTR:"autoComplete",VISUAL_NAME:"visualName",PAGE_NAME:"pageName",WINDOW_DEPTH:"windowDepth",CONTAINER_ID:"containerId",PARENT_PAGE_ID:"parentPageId",HISTORY_LENGTH:"historyLen",TIME_SINCE_LAST_EVENT:"timeSinceLastIdle",COORDINATE_ATTR:"coordinate",SCROLL_REACH:"scrollReach",MOVES_TRUNCATED:"truncated",LOST_EVENTS_NUM:"lostEvents",TP_INTEGRATION_TYPE:"tpIntegrationType",EXTERNAL_ID:"externalId",SYNC_COORDINATE:"syncCoordinates",RAGE_SEQUENCE:"rageSequence",INDEX_IN_RAGE:"indexInRage",ZOOM:"zoom",MOBILE_HYBRID_ID:"mobileHybridId",DETECTOR_CONFIG_ID:"detectorCfg",AUTO_MASKING:"autoMasking",SCROLL_DEBOUNCED:"scrollDebounced",HOST_SELECTOR_PATH:"hostSelectorPath",SNAPSHOT_FUSE:"snapshotFuse",SNAPSHOT_TYPE:"snapshotType",EFFECTIVE_CONNECTION_TYPE:"ect",RTT:"rtt",PROVIDER_NAME:"providerName",METADATA_ONLY:"MetaDataOnly",IS_FIRST_CLICK:"isFirstClick",IS_CLICKABLE:"isClickable",BUTTON:"button",ABEVENTS:"ABTestingEvents",IS_INPUT_ELEMENT:"isInputElement",ORIENTATION:"orientation",SELECTOR_ACTION_COUNT:"selectorActionCount",EVENT_ID:"eventId",DEBUG_UNCONFIRMED_BEACONS:"unconfirmedBeacons",FINAL_CANCELLATION:"finalCancellation",ABORT_ON_TIMEOUT:"abortOnTimeout",DEBUG_STORAGE_PENDING:"storagePendingBeacons",FAIL_REQUEST_STATUS:"failedWithStatus",FAILED_STORAGE_FLUSH_BEACONS:"failedStorageFlushBeacons",STORAGE_SIZE_EXCEED:"storageSizeExceed",FAILED_SEND_FROM_STORAGE:"failedSendFromStorage",SENDING_FROM_STORAGE:"sendingFromStorage",RETRIED:"failed",DEVTOOLS_VALUES:"devToolsValues",DEBUG_PAGE_SN:"pageSn",DEBUG_BROWSER_TAB_ID:"browserTabId",USING_WORKER:"usingWorker",NAVIGATION_TIMING:"navigationTiming",CURRENT_VALUE:"currentValue",OLD_VALUE:"oldValue",ERROR_DATA:"errorData"},de={inMemoryMovesCounter:0,notifyEventsFlush:function(){de.inMemoryMovesCounter=0},diluteEvents:function(e,n,r,o){if(r){if("resize"===o.type)return!0;if("scroll"===o.type)return"scroll"===r.type||e.page.hasTouch&&"drag"===r.type?!(o.timestamp-r.timestamp>t.minStallingScrollTime)&&(o.selectorExpression=r.selectorExpression,t.scrollDebug,!0):!("mousemove"!==r.type||1!==r.value.length||!n||"scroll"!==n.type)&&(!(o.timestamp-n.timestamp>t.minStallingScrollTime)&&(t.scrollDebug,!0));if("mousemove"===o.type&&"mousemove"!==r.type)return!0;if("mousemove"===o.type&&"mousemove"===r.type){var i=t.reportByPost?3e3:t.mmMaxMovesInEventWithTimes,a=t.reportByPost?3e3:t.mmMaxMovesInEventNoTimes;return t.mmRecordTimes&&r.value.length>=i||!t.mmRecordTimes&&r.value.length>=a||!L.isUndefined(t.mmMinStallingMoveTime)&&o.timestamp-r.lastSingleMoveTimestamp>t.mmMinStallingMoveTime?(t.mmDebug,de.inMemoryMovesCounter++,!1):de.checkExceededInMemoryMoves()?(t.mmDebug,!0):(de.diluteMoveEvents(r,o)&&de.inMemoryMovesCounter++,!0)}}return"mousemove"===o.type&&(de.inMemoryMovesCounter++,!0)},checkExceededInMemoryMoves:function(){var e=t.reportByPost?3e3:t.mmMaxInMemoryMoves;return de.inMemoryMovesCounter>=e},diluteMoveEvents:function(e,n){var r=L.last(e.value),o=n.value[0],i=n.timestamp-e.lastSingleMoveTimestamp,a=e.getExtraInfo(le.FOCUS_TIME_ATTR);return Math.abs(r.x-o.x)>t.mmDiluteMinPixels||Math.abs(r.y-o.y)>t.mmDiluteMinPixels?(o.t=i,a+=i,n.setExtraInfo(le.FOCUS_TIME_ATTR,a),n.timestamp=e.timestamp,e.value.push(o),n.value=e.value,t.mmDebug,!0):(n.setExtraInfo(le.FOCUS_TIME_ATTR,a),n.timestamp=e.timestamp,n.value=e.value,n.lastSingleMoveTimestamp=e.lastSingleMoveTimestamp,t.mmDebug,!1)},truncateEventsForUnload:function(e){for(var n=[],r=t.mmMaxMovesWithUnload,o=0,i=!1,a=0;a<e.length;a++){var s=e[a];if("mousemove"===s.type){if(o>=t.mmMaxMovesWithUnload){i=!0;continue}var c=s.value.length,u=de.truncateMouseMoveEvent(s,r-o);o+=u,u<c&&(i=!0)}"unload"===s.type&&i&&s.setExtraInfo(s.MOVES_TRUNCATED,!0),n.push(s)}return n},truncateMouseMoveEvent:function(e,t){var n=e.value.length;return n<t?n:(e.value=e.value.slice(0,t),t)}},fe=de;function pe(e){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe(e)}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ge(r.key),r)}}function he(e,t,n){return t&&me(e.prototype,t),n&&me(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ge(e){var t=function(e,t){if("object"!=pe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pe(t)?t:t+""}var ye=he((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.setNext=function(e){n._nextInPipeline=e},this.handle=function(e,t,r){n._truncateWithUnload&&r&&(e.events=fe.truncateEventsForUnload(e.events)),n._nextInPipeline.handle(e,t,r)},this._truncateWithUnload=t,this._nextInPipeline=null}));function ve(e){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(e)}function be(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return _e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_e(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ee(r.key),r)}}function we(e,t,n){return t&&Se(e.prototype,t),n&&Se(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ee(e){var t=function(e,t){if("object"!=ve(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ve(t)?t:t+""}var Ce=we((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._doHandle=function(e,t,r){if(r&&n._omitAfterUnload){var o,i=be(e.events);try{for(i.s();!(o=i.n()).done;){var a=o.value;a.domSnapshot&&delete a.domSnapshot}}catch(e){i.e(e)}finally{i.f()}}},this.setNext=function(e){n._nextInPipeline=e},this.handle=function(e,t,r){n._doHandle(e,t,r),n._nextInPipeline.handle(e,t,r)},this._omitAfterUnload=t,this._nextInPipeline=null}));function Te(e){return Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Te(e)}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ae(r.key),r)}}function Ie(e,t,n){return t&&ke(e.prototype,t),n&&ke(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ae(e){var t=function(e,t){if("object"!=Te(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Te(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Te(t)?t:t+""}var Pe=Ie((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._doHandle=function(e,t){var n,o,i,a,s=e.encodedEvents,c=e.metadata.pageId;for(r._beaconPageMap[c]=r._beaconPageMap[c]||1,n=0;n<s.length;n++)a=(o=s[n]).length+r._env.encoding.delimiters.events.length,(!i||i.estimatedEncodedLength+a>r._maxBeaconSize)&&(i&&(i.endIndex=n),i={startIndex:n,metadata:e.metadata,encodedEvents:[],eventSetId:e.id,estimatedEncodedLength:0,sn:r._beaconPageMap[c],beaconStartTime:e.beaconStartTime},r._eventSetStorageMap[c]&&(i.storage=!0),r._beaconPageMap[c]++,t.push(i)),i.encodedEvents.push(o),i.estimatedEncodedLength+=a;i&&(i.endIndex=n)},this.setNext=function(e){r._nextInPipeline=e},this.handle=function(e,t,n){r._doHandle(e,t),r._nextInPipeline.handle(e,t,n)},this.onRestoreState=function(e,t){L.assign(r._beaconPageMap,e),L.assign(r._eventSetStorageMap,t)},this._env=t,this._maxBeaconSize=n||5e4,this._nextInPipeline=null,this._beaconPageMap={},this._eventSetStorageMap={}}));function xe(e){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}function Re(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Oe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Oe(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,je(r.key),r)}}function Ne(e,t,n){return t&&Me(e.prototype,t),n&&Me(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function je(e){var t=function(e,t){if("object"!=xe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=xe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xe(t)?t:t+""}var De=Ne((function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._safeEncodeEvent=function(e,t,n){try{return o._beaconEncoder.encodeEvent(e,t,n)}catch(t){i.error("ERROR: while encoding event: "+e.type+" . Exception: ",t.stack?t.stack:t.message),o._stats&&(o._stats.encodingErrors=o._stats.encodingErrors||[],o._stats.encodingErrors.length<100&&o._stats.encodingErrors.push(t.message))}},this.setNext=function(e){o._nextInPipeline=e},this.handle=function(e,t,n){var r,i=[],a=Re(e.events);try{for(a.s();!(r=a.n()).done;){var s=r.value,c=s.selectorExpression||o._env.encoding.rootSelector,u=s.cssSelector||o._env.encoding.rootSelector,l=o._safeEncodeEvent(s,c,u);l&&i.push(l)}}catch(e){a.e(e)}finally{a.f()}e.encodedEvents=i,e.beaconStartTime=e&&e.events&&e.events[0]&&e.events[0].timestamp,o._nextInPipeline.handle(e,t,n)},this._beaconEncoder=t,this._stats=n,this._env=r,this._nextInPipeline=null}));function Le(e){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Le(e)}function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fe(r.key),r)}}function Fe(e){var t=function(e,t){if("object"!=Le(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Le(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Le(t)?t:t+""}var Ue=function(){return function(e,t,n){return t&&Be(e.prototype,t),n&&Be(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}),[{key:"setNext",value:function(){}},{key:"handle",value:function(){}},{key:"onPipelineTick",value:function(){}}])}();function Ve(e){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ve(e)}function He(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ze(r.key),r)}}function We(e,t,n){return t&&He(e.prototype,t),n&&He(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ze(e){var t=function(e,t){if("object"!=Ve(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ve(t)?t:t+""}var Ge=We((function e(t,n,r,o,i,a){var s,c=this;for(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.handle=function(e,t){var n,r=[];for(n=0;n<e.length;n++)c._chainComponents[0].handle(e[n],r,t);return r},this.restoreState=function(e,t){c._splitter.onRestoreState(e,t)},this._splitter=new Pe(i,t.config.maxReportSize),this._chainComponents=[new ye(a.truncateEventsWithUnload),new Ce(a.domOmitAfterUnload),new De(r,o,i),this._splitter,n,new Ue],s=0;s<this._chainComponents.length;s++)this._chainComponents[s].setNext(this._chainComponents[s+1])}));function qe(e){return qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qe(e)}function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ye(r.key),r)}}function Ye(e){var t=function(e,t){if("object"!=qe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qe(t)?t:t+""}var Xe=function(){return function(e,t,n){return t&&Ke(e.prototype,t),n&&Ke(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._reportIdle=function(){if(o._idleEventsSent<o._maxIdleEvents){var e=L.currentTimestamp();o._bus.emit("reporter:idle",{idleBaseTime:o._idleBaseTime,latestEventTime:o._idleLatestEventTime||e}),o._idleEventsSent++,o._idleLatestEventTime=e,o._idleEventsSent>=o._maxIdleEvents&&(clearInterval(o._timer),o._timer=void 0)}},this.setNext=function(e){o._nextInPipeline=e},this.handle=function(e,t){e&&e.event&&"idle"===e.event.type||-1!==o._idleEventTimeInterval&&(o._timer&&clearInterval(o._timer),o._timer=setInterval(o._reportIdle,o._idleEventTimeInterval),o._idleBaseTime=L.currentTimestamp(),o._idleLatestEventTime=void 0,o._idleEventsSent=0),o._nextInPipeline.handle(e,t)},this._bus=t,this._idleEventTimeInterval=n,this._maxTimeForIdleEvent=r,this._nextInPipeline=null,this._idleLatestEventTime=void 0,this._idleBaseTime=L.currentTimestamp(),this._timer=void 0,this._idleEventsSent=0,this._maxIdleEvents=Math.floor(this._maxTimeForIdleEvent/this._idleEventTimeInterval),-1!==this._idleEventTimeInterval&&(this._timer=setInterval(this._reportIdle,this._idleEventTimeInterval))}),[{key:"onPipelineTick",value:function(){}}])}();function Je(e){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Je(e)}function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$e(r.key),r)}}function Qe(e,t,n){return t&&Ze(e.prototype,t),n&&Ze(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function $e(e){var t=function(e,t){if("object"!=Je(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Je(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Je(t)?t:t+""}var et=Qe((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.setNext=function(e){r._nextInPipeline=e},this.handle=function(e,t){r._detector&&r._detector.extensionInspectMode||(r._events.emit("extensionEvent",e.event),r._nextInPipeline.handle(e,t))},this.onPipelineTick=function(){},this._events=t,this._detector=n,this._nextInPipeline=null}));function tt(e){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tt(e)}function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rt(r.key),r)}}function rt(e){var t=function(e,t){if("object"!=tt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tt(t)?t:t+""}var ot=function(){return function(e,t,n){return t&&nt(e.prototype,t),n&&nt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._cloneMedata=function(){return{_sessionId:o._currentMetadata._sessionId,subSessionId:o._currentMetadata.subSessionId,_visitorId:o._currentMetadata._visitorId,pageId:o._currentMetadata.pageId,pssn:o._currentMetadata.pssn,referrer:o._currentMetadata.referrer,subPage:o._currentMetadata.subPage,segment:o._currentMetadata.segment,reportURI:o._reportURI,integrationId:o._currentMetadata.integrationId,rto:o._currentMetadata.rto,pageAttributes:o._currentMetadata.pageAttributes}},this._onPreloaded=function(e){o._currentMetadata.pssn?o._cloneMedata():o._createMetadata(),o._currentMetadata._sessionId=e._sessionId,o._currentMetadata._visitorId=e._visitorId,o._currentMetadata.pageId=e.pageId},this._onSessionNew=function(e){o._currentMetadata=o._createMetadata(),o._currentMetadata._sessionId=e._sessionId,o._currentMetadata._visitorId=e._visitorId,o._currentMetadata.pageId=e.pageId},this._onSessionNewSubSessionId=function(e){o._currentMetadata=o._cloneMedata(),o._currentMetadata.pssn=e.pageSnapshotSN,o._currentMetadata.subSessionId=e.subSessionId},this._onPageSnapshotReport=function(e){o._currentMetadata=o._cloneMedata(),o._currentMetadata.pssn=e.seq},this._onSessionSetSessionId=function(e){o._currentMetadata=o._cloneMedata(),e._sessionId&&(o._currentMetadata._sessionId=e._sessionId),e._visitorId&&(o._currentMetadata._visitorId=e._visitorId)},this._onRemoteClseConf=function(e){o._currentMetadata=o._cloneMedata(),o._currentMetadata.integrationId=e},this._onRemoteRtoConf=function(e){o._currentMetadata=o._cloneMedata(),o._currentMetadata.rto=e},this._onNewSessionSet=function(){o._currentMetadata=o._cloneMedata(),o._isIframe||(o._currentMetadata.integrationId=void 0,o._currentMetadata.rto=void 0)},this._onParentWindowInfo=function(e){e&&(o._currentMetadata=o._cloneMedata(),o._currentMetadata._sessionId=e._sessionId,o._currentMetadata._visitorId=e._visitorId,o._isIframe=!0)},this._onPageAttributes=function(e){o._currentMetadata=o._cloneMedata(),o._currentMetadata.pageAttributes=e,o._bus.emit("updatePageAttributes",e)},this.setNext=function(e){o._nextInPipeline=e},this.handle=function(e,t){var n=L.contains(o._env.nobelEventTypes,e.event.type),r=L.contains(o._env.socialNobelEventTypes,e.event.type);!o._prevWasNobel&&!n&&(!r&&!o._prevWasSocialNobel||r&&o._prevWasSocialNobel)&&o._currentMetadata.referrer===e.event.referrer&&o._currentMetadata.subPage===e.event.subPage&&o._currentMetadata.segment===e.event.segment||(o._prevWasNobel&&(o._prevWasNobel=!1),n&&(o._prevWasNobel=!0),!r&&(o._prevWasSocialNobel=!1),r&&(o._prevWasSocialNobel=!0),o._currentMetadata=o._cloneMedata(),o._currentMetadata.referrer="about:blank"===e.event.referrer?"https://www.aboutblankiframe.com":o._protocolsToSwitch?L.replaceProtocol(e.event.referrer):e.event.referrer,o._currentMetadata.subPage=e.event.subPage,o._currentMetadata.segment=e.event.segment),e.metadata=o._currentMetadata,o._nextInPipeline&&o._nextInPipeline.handle(e,t)},this.onPipelineTick=function(){},this._env=n,this._reportURI=r.reportURI,this._nextInPipeline=void 0,this._currentMetadata={},this._prevWasNobel=!1,this._prevWasSocialNobel=!1,this._bus=t,this._protocolsToSwitch=r.protocolsToSwitch,t.once("init:preloaded",this._onPreloaded),t.on("session:new",this._onSessionNew),t.on("session:newSubSessionId",this._onSessionNewSubSessionId),t.on("pageSnapshot:report",this._onPageSnapshotReport),t.on("session:setIds",this._onSessionSetSessionId),t.on("remoteClseConf",this._onRemoteClseConf),t.on("remoteRtoConf",this._onRemoteRtoConf),t.on("newSessionSet",this._onNewSessionSet),t.on("parentWindowInfo",this._onParentWindowInfo),t.on("pageAttributes",this._onPageAttributes)}),[{key:"_createMetadata",value:function(){return{}}}])}(),it={TEXT:"TEXT",ATTRIBUTE:"ATTRIBUTE",VALUE_ATTRIBUTE:"VALUE_ATTRIBUTE",OMIT:"OMIT"},at={SELF:{follow:function(e,t){return e&&e.nodeType===window.Node.ELEMENT_NODE&&L.elementMatches(e,t)}},SELF_OR_ANY_PARENT:{follow:function(e,t,n){for(var r=e;r;){if(r.nodeType===window.Node.ELEMENT_NODE&&L.elementMatches(r,t))return!0;r=n&&r.nodeType===window.Node.DOCUMENT_FRAGMENT_NODE?r.host:L.parentNode(r)}return!1}},SELF_OR_ANY_CHILD:{follow:function(e,t){if(e){if(e.nodeType===window.Node.ELEMENT_NODE&&L.elementMatches(e,t))return!0;if("function"==typeof e.querySelector)return!!e.querySelector(t)}return!1}}};function st(e){return st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},st(e)}function ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lt(r.key),r)}}function ut(e,t,n){return t&&ct(e.prototype,t),n&&ct(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function lt(e){var t=function(e,t){if("object"!=st(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=st(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==st(t)?t:t+""}var dt=ut((function e(t,n,r,o,i){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._domPlugin=function(){return a._detector.plugins.domRecordingPlugin},this._ajaxTriggersNewSnapshot=function(e){for(var t=0;t<a._config.domNewPageAjaxTriggers.length;t++)if(-1!==e.indexOf(a._config.domNewPageAjaxTriggers[t]))return!0;return!1},this._eventShouldBeIgnored=function(e){return!("ajaxRequest"!==e.type||e.value&&a._ajaxTriggersNewSnapshot(e.value.url))||!("webStruggle"!==e.type||e.value&&"ajaxError"!==e.value.type)||!!(a._suppressAllEventsAfterSnapshotTimeout&&!a._realUserEventTypeSet[e.type]||L.contains(a._config.suppressEventsAfterSnapshotTimeout,e.type))&&(a._logger.trace("Suppressed event "+e.type+" due to timeout"),!0)},this.apply=function(e){if(a._domPlugin()){if(-1!==a._config.domExpireSnapshotAfter&&"pageSnapshot"!==e.type)if(-1!==a._lastEventTimestamp&&e.timestamp-a._lastEventTimestamp>a._config.domExpireSnapshotAfter){if(a._eventShouldBeIgnored(e))return!1;if(e.sessionBreach)return a._bus.emit("breachDataRequired"),delete e.sessionBreach,a._bus.once("recordingStarted",(function(){a._bus.emit("saveEvent",e)})),!1;a._lastEventTimestamp=e.timestamp,a._bus.emit("sessionTimeoutExpired"),a._domPlugin().reset(),a._detector.isPerformanceEventSent=!1,a._config.sendDocumentLoadAfterSnapshotExpired&&a._detector.saveDocumentLoadEvent(L.currentTimestamp()),a._detector.page.initializationTimestamp=L.currentTimestamp(),"unload"===e.type&&e.setExtraInfo(le.FOCUS_TIME_ATTR,0),a._detector.useCurrentTimeForPagesnapshot=!0}else if(e.sessionBreach)return!1;return a._realUserEventOccurred=a._realUserEventOccurred||a._realUserEventTypeSet[e.type],("custom"===e.type&&e.value.sendDomUpdate||a._realUserEventOccurred&&(a._applicableEventTypeSet[e.type]||"keydown"===e.type&&e.value&&(13===e.value.unicode||9===e.value.unicode)))&&(e.skipMutation||a._isIdle||e.elementRemoved||(e.domSnapshot=a._domPlugin().getDomSnapshot())),a._lastEventTimestamp=e.timestamp>a._lastEventTimestamp?e.timestamp:a._lastEventTimestamp,!("pageUpdate"===e.type&&!e.domSnapshot)&&!a._domPlugin().getDomMasker().isDomMasked(e.element,at.SELF_OR_ANY_PARENT,it.OMIT)}return!0},this._logger=t,this._detector=n,this._bus=r,this._env=o,this._config=i,this._realUserEventOccurred=!1,this._isIdle=!1,this._lastEventTimestamp=-1,this._applicableEventTypeSet=L.immutableSet.apply(null,this._env.snapshotApplicableEventType),this._realUserEventTypeSet=L.immutableSet("pageUpdate","mousedown","touchstart","drag","keydown","unload"),this._suppressAllEventsAfterSnapshotTimeout=L.contains(i.suppressEventsAfterSnapshotTimeout,"all"),this._bus.on("idleDomUpdates",(function(e){a._isIdle=e}))}));function ft(e){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ft(e)}function pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ht(r.key),r)}}function mt(e,t,n){return t&&pt(e.prototype,t),n&&pt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ht(e){var t=function(e,t){if("object"!=ft(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ft(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ft(t)?t:t+""}var gt=mt((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.apply=function(e){if(e.selectorExpression){void 0===n._selectorToCount[e.selectorExpression]&&(n._selectorToCount[e.selectorExpression]=0);var t=++n._selectorToCount[e.selectorExpression];e.setExtraInfo(n._keyName,t)}return!0},this._keyName=t,this._selectorToCount={}}));function yt(e){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yt(e)}function vt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_t(r.key),r)}}function bt(e,t,n){return t&&vt(e.prototype,t),n&&vt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _t(e){var t=function(e,t){if("object"!=yt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=yt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yt(t)?t:t+""}var St=bt((function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._countBeaconFailed=function(e,t){o._initReportingStats(t),void 0===o._reportingStats[t].retried[e]&&(o._reportingStats[t].retried[e]=0),o._reportingStats[t].retried[e]+=1,o._reportingStats[t].retried[e]===o._config.reportMaxRetries&&o._reportingStats[t].exceededRetriesLimit.push(e)},this._countBeaconDelivered=function(e){o._initReportingStats(e),o._reportingStats[e].delivered+=1},this._initReportingStats=function(e){void 0===o._reportingStats[e]&&(o._reportingStats[e]={delivered:0,retried:{},exceededRetriesLimit:[]})},this._linkValueToKey=function(e,t){var n;for(n=0;n<e.length;n++)e[n]="sn_"+e[n]+"_status_"+t[e[n]]},this._setExtraInfo=function(e,t,n){var r=Object.keys(t);r.length&&e.setExtraInfo(n,r.join(","))},this._setExtraInfoWithStatus=function(e,t,n){var r=Object.keys(t);r.length&&(o._linkValueToKey(r,t),e.setExtraInfo(n,r.join(",")))},this.apply=function(e){return"unload"===e.type&&(o._setExtraInfo(e,o._pending,le.DEBUG_UNCONFIRMED_BEACONS),o._setExtraInfo(e,o._storagePending,le.DEBUG_STORAGE_PENDING),o._setExtraInfo(e,o._storageFlushFailure,le.FAILED_STORAGE_FLUSH_BEACONS),o._setExtraInfo(e,o._sizeExceed,le.STORAGE_SIZE_EXCEED),o._setExtraInfoWithStatus(e,o._failed,le.RETRIED),o._sendingFromStorage&&e.setExtraInfo(le.FAILED_SEND_FROM_STORAGE,!0),o._failSendFromStorage&&e.setExtraInfo(le.SENDING_FROM_STORAGE,!0),o._devToolsValues&&e.setExtraInfo(le.DEVTOOLS_VALUES,o._devToolsValues),e.setExtraInfo(le.USING_WORKER,o._usingWorker),o._config.reportFailures&&Object.keys(o._failed).length&&o._bus.emit("clsDebug",JSON.stringify(o._reportingStats))),!0},this._bus=n,this._window=t,this._config=r,this._pending={},this._storagePending={},this._storageFlushFailure={},this._sizeExceed={},this._failed={},this._sendingFromStorage=!1,this._failSendFromStorage=!1,this._devToolsValues=void 0,this._usingWorker=!1,this._reportingStats={url:L.validateHref(this._window.location.href)},this._bus.on("beacon:sending",(function(e){o._pending[e]=!0})),this._bus.on("beacon:sent",(function(e){delete o._pending[e.sn],o._config.reportFailures&&o._countBeaconDelivered(e.pageId)})),this._bus.on("beacon:storageAdded",(function(e){o._storagePending[e]=!0})),this._bus.on("beacon:storageRemoved",(function(e){delete o._storagePending[e]})),this._bus.on("beacon:failed",(function(e){o._failed[e.sn]=e.status,o._config.reportFailures&&o._countBeaconFailed(e.sn,e.pageId)})),this._bus.on("beacon:storageFlushFail",(function(e){o._storageFlushFailure[e]=!0})),this._bus.on("beacon:sizeExceed",(function(e){o._sizeExceed[e]=!0})),this._bus.on("beacon:sendingFromStorage",(function(){o._sendingFromStorage=!0})),this._bus.on("beacon:failedSendingFromStorage",(function(){o._failSendFromStorage=!0})),this._bus.on("devToolsVisibilityChanged",(function(e){o._devToolsValues=e.size})),this._bus.on("worker:init",(function(e){o._usingWorker=!!e}))}));function wt(e){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wt(e)}function Et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Tt(r.key),r)}}function Ct(e,t,n){return t&&Et(e.prototype,t),n&&Et(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tt(e){var t=function(e,t){if("object"!=wt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=wt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wt(t)?t:t+""}var kt=Ct((function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.apply=function(e){try{if("mousedown"===e.type&&e.element&&o._utils.scrollOnElement(e))return o._bus&&o._bus.emit("clsDebug","Ignoring mousedown on element's scrollbar."),!1}catch(e){o._logger.error("Exception in scrollClickVisitor. Exception message:"+e.message,e)}return!0},this._logger=t||i,this._utils=n||L,this._bus=r}));function It(e){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},It(e)}function At(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Pt(r.key),r)}}function Pt(e){var t=function(e,t){if("object"!=It(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=It(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==It(t)?t:t+""}var xt=function(){return function(e,t,n){return t&&At(e.prototype,t),n&&At(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,n,r,o,a){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.setNext=function(e){s._nextInPipeline=e},this.handle=function(e,t){s._eventVisitor(e.event)&&s._nextInPipeline.handle(e,t)},this._nextInPipeline=null;var c=new gt("selectorActionCount"),u=new St(t,r,a);this._eventVisitor=L.compositeFunctionBuilder().add(new kt(i,L,r).apply).add(a.domRecordEnabled?new dt(i,n,r,o,a).apply:void 0).add(c.apply).add(u.apply).add(n.logicalSegmentTracker.onBeforeEmittingPageEvent).buildBooleanAnd()}),[{key:"onPipelineTick",value:function(){}}])}();function Rt(e){return Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rt(e)}function Ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Nt(r.key),r)}}function Mt(e,t,n){return t&&Ot(e.prototype,t),n&&Ot(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nt(e){var t=function(e,t){if("object"!=Rt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Rt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Rt(t)?t:t+""}var jt=Mt((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._replaceTimeStampIfNeeded=function(e,t){if(e&&t)if("change"===e.type&&"keydown"===t.type&&t.value&&13===t.value.unicode)if(e.timestamp===t.timestamp)t.timestamp+=1;else{var n=e.timestamp;e.timestamp=t.timestamp,t.timestamp=n}else"keydown"===e.type&&e.value&&13===e.value.unicode&&"change"===t.type&&e.timestamp===t.timestamp&&(e.timestamp+=1)},this.setNext=function(e){r._nextInPipeline=e},this.handle=function(e,t){var n=r._dilutionFunction(r._detector,r._beforePrevEvent,r._prevEvent,e.event);r._beforePrevEvent=r._prevEvent,r._prevEvent=e.event,r._replaceTimeStampIfNeeded(r._prevEvent,r._beforePrevEvent),!n||e.event.domSnapshot&&e.event.domSnapshot.domChanges?(r._beforePrevEvent&&r._pendingEventTypes[r._beforePrevEvent.type]&&r._pendingData&&(r._pendingData=!1,r._nextInPipeline.handle({event:r._beforePrevEvent},t)),r._nextInPipeline.handle(e,t)):r._pendingData=!0},this.onPipelineTick=function(e){r._pendingData&&L.currentTimestamp()-r._prevEvent.timestamp>r._throttleTime&&(r._pendingData=!1,r._nextInPipeline.handle({event:r._prevEvent},e),r._prevEvent=r._beforePrevEvent=void 0)},this._detector=t,this._dilutionFunction=n,this._nextInPipeline=null,this._prevEvent,this._beforePrevEvent,this._pendingData=!1,this._throttleTime=100,this._pendingEventTypes=L.immutableSet("mousemove","resize","scroll")}));function Dt(e){return Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dt(e)}function Lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ft(r.key),r)}}function Bt(e,t,n){return t&&Lt(e.prototype,t),n&&Lt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ft(e){var t=function(e,t){if("object"!=Dt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Dt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Dt(t)?t:t+""}var Ut=Bt((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._deepToJSON=function(e,t){if(!e)return e;if("object"!==Dt(e))return e;var r,o,i={};for(r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if("function"===(o=Dt(e[r])))continue;if("object"===o){if(null===e[r])continue;if(e[r].addEventListener||e[r].attachEvent)continue;if(!e[r].hasOwnProperty)continue;try{if("undefined"!=typeof ArrayBuffer&&e[r]instanceof ArrayBuffer||"undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(e[r])){i[r]=e[r];continue}}catch(e){}if(Array.isArray(e[r])){i[r]=e[r].map(n._deepToJSON);continue}i[r]=n._deepToJSON(e[r],t);continue}i[r]=e[r]}return i},this.toJSON=function(){if(!(n._target instanceof ln))throw new Error("Illegal invocation");return n._deepToJSON(n._target,n._target)},this._target=t})),Vt={change:0,document:2,mousedown:3,touchstart:4,touchend:5,focusout:6,blur:7,unload:9,submit:10,reset:11,mouseup:12,drag:13,scroll:14,popstate:15,keydown:16,keyup:17,keypress:18,scrollReach:19,timing:20,idle:21,ajaxRequest:22,formValidationError:23,hashchange:25,botDetection:26,mouseenter:27,navigation:28,mousemove:29,error:30,thirdparty:31,custom:32,hover:33,thirdpartymap:34,performance:35,resource:36,clsdebug:37,resize:38,thirdPartyAttribute:39,ajaxStats:40,ajaxLimitReached:41,dataLayerMap:42,pageSnapshot:91,pageUpdate:92,resourceContent:93,corsDeniedResource:94,formAnalysis:95,blackout:101,segmentChanged:102,titleChanged:103,devToolsVisibilityChanged:104,domTampered:105,webStruggle:106,voc:107,vocV2:108,vocIdentifiers:109,clientAttribute:110,waterfall:111,lastSegment:112,webVitals:113,resourcesWaterfall:114,abTesting:120,customMap:121,tilt:122,resourceUrls:124,consoleWarn:125,consoleInfo:126,rightclick:127,swipe:128,glassvoxOpen:129,glassvoxResponse:130,glassvoxClose:131,glassvoxComplete:132,clipboard:140,personalizationCampaign:141},Ht={DIV:0,SPAN:1,INPUT:2,FORM:3,SELECT:4,TEXTAREA:5,TABLE:6,TR:7,TD:8,IFRAME:9,TBODY:10,THEAD:11,LABEL:12},Wt={cd_number:0,cd_boolean:1,cd_string:2,cd_coordinate:3,cd_navtiming:4,cd_objarray:5,cd_abtesting:6},zt={navigationStart:1,redirectStart:2,fetchStart:4,domainLookupStart:5,connectStart:7,secureConnectionStart:8,requestStart:10,responseStart:13,domLoading:15,domContentLoadedEventStart:17,domComplete:19,loadEventStart:20,loadEventEnd:21};function Gt(e){return Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gt(e)}function qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Kt(r.key),r)}}function Kt(e){var t=function(e,t){if("object"!=Gt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Gt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Gt(t)?t:t+""}var Yt=function(){return function(e,t,n){return t&&qt(e.prototype,t),n&&qt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}),null,[{key:"encode",value:function(e,t){var n=t[e];return void 0!==n?n:e}},{key:"encodeEventType",value:function(e){return this.encode(e,Vt)}},{key:"encodeNodeName",value:function(e){return this.encode(e,Ht)}},{key:"encodeEncodingType",value:function(e){return this.encode(e,Wt)}},{key:"encodePerformanceTimingMeasurement",value:function(e){return this.encode(e,zt)}}])}(),Xt={encoder:{}};function Jt(e){return Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jt(e)}function Zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qt(r.key),r)}}function Qt(e){var t=function(e,t){if("object"!=Jt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Jt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Jt(t)?t:t+""}var $t=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){return t&&Zt(e.prototype,t),n&&Zt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(e,null,[{key:"_encodeResolution",value:function(e){return null!==e&&L.isNumber(e.width)&&L.isNumber(e.height)?e.width+"x"+e.height:"x"}},{key:"encodeBoolean",value:function(e){return e?"1":"0"}},{key:"encodeString",value:function(e){return H.Base64.encode(e)}},{key:"encodeNumber",value:function(e){if(L.isNumber(e))return L.encodeAsBase(e,H.encoding.numberBase)}},{key:"encodeTilt",value:function(t){if(L.isNumber(t.orientation)){var n=[];return n.push("o_"+(t.window.width>t.window.height?"h":"v")),n.push("ws_"+e._encodeResolution(t.window)),n.push("sc_"+e._encodeResolution(t.screen)),n.join("*")}}},{key:"encodeHashCode",value:function(t){if(L.isString(t)){var n=L.hashcode(t);return e.encodeNumber(n)}}},{key:"encodeCoordinate",value:function(t){if(L.isNumber(t.x)&&L.isNumber(t.y)){var n=Math.round(t.x),r=Math.round(t.y);return e.encodeNumber(n)+"_"+e.encodeNumber(r)}}},{key:"_appendStringValue",value:function(e,t,n,r){L.isString(n)&&(r?e.push(H.Base64.encode(t)+"_"+H.Base64.encode(n)):e.push(t+"_"+n))}},{key:"_appendNumberValue",value:function(t,n,r){L.isNumber(r)&&t.push(n+"_"+e.encodeNumber(r))}},{key:"_appendToMoves",value:function(n,r,o,i){i=i||0;var a=t.mmRecordTimes?"_"+e.encodeNumber(i):"",s=Math.round(r),c=Math.round(o);n.push(e.encodeNumber(s)+"_"+e.encodeNumber(c)+a)}},{key:"encodeNavigationTiming",value:function(t,n){var r,o=n||"_",i=[];for(r in t)void 0!==zt[r]&&e._appendNumberValue(i,Yt.encodePerformanceTimingMeasurement(r),t[r]);return i.join(o)}},{key:"encodePageDetails",value:function(t){var n=[];return t.frame&&e._appendStringValue(n,"t",t.frame?"f":"p"),e._appendStringValue(n,"u",e.encodeHashCode(t.urlWithoutHash)),t.hash&&e._appendStringValue(n,"h",H.Base64.encode(t.hash)),t.windowSize&&e._appendStringValue(n,"s",e._encodeResolution(t.windowSize)),t.screenSize&&e._appendStringValue(n,"sc",e._encodeResolution(t.screenSize)),t.referrerWithoutHash&&e._appendStringValue(n,"r",e.encodeHashCode(t.referrerWithoutHash)),H.reportBase64URLs&&e._appendStringValue(n,"ub",H.Base64.encode(t.url)),n.join("*")}},{key:"encodePageSnapshotData",value:function(e){var t="h",n=Xt.encoder.encodeSnapshotHtml(e.html);return n.compressed?t="hh":n.plain&&(t="p"),["sn_"+e.seq,"r_"+H.Base64.encode(e.referrer),"c_"+H.Base64.encode(e.cookie),"ch_"+e.charset,t+"_"+n.encoded].join("*")}},{key:"encodeResize",value:function(t){var n=[];return e._appendStringValue(n,"ws",e._encodeResolution(t.window)),e._appendStringValue(n,"sc",e._encodeResolution(t.screen)),n.join("*")}},{key:"encodeScrollReach",value:function(t){if(L.isNumber(t.top)&&L.isNumber(t.height)&&"boolean"==typeof t.isInfinite&&L.isNumber(t.innerHeight)){var n=Math.round(t.top),r=Math.round(t.height),o=Math.round(t.innerHeight);return e.encodeNumber(n)+"_"+e.encodeNumber(r)+"_"+e.encodeBoolean(t.isInfinite)+"_"+e.encodeNumber(o)}}},{key:"encodeTimings",value:function(e){return L.reduce(e,(function(e,t,n){var r="u_"+n+"*t_"+t.total;return L.isNumber(t.rendering)&&(r+="*r_"+t.rendering),L.isNumber(t.dns)&&(r+="*d_"+t.dns),L.isNumber(t.timeToFirstBuffer)&&(r+="*f_"+t.timeToFirstBuffer),L.isNumber(t.downloadTime)&&(r+="*w_"+t.downloadTime),L.isNumber(t.originalRenderTime)&&(r+="*o_"+t.originalRenderTime),L.isString(e)&&e.length>0?e+"**"+r:r}),"")}},{key:"encodeThirdPartyAttributes",value:function(e){var t,n,r="",o=[];for(t=0;t<e.length;t++){for(n in r+=H.Base64.encode(e[t].urlMatcher),e[t].valueMap)Object.prototype.hasOwnProperty.call(e[t].valueMap,n)&&(r+="_"+H.Base64.encode(n)+"_"+H.Base64.encode(e[t].valueMap[n]));o.push(r),r=""}return o.join("*")}},{key:"encodeABTesting",value:function(t,n){var r,o=[];for(r=0;r<t.length;r++){var i="";t[r].variantId&&(i+="vi_"+e.encodeString(t[r].variantId)+"_"),t[r].variantName&&(i+="vn_"+e.encodeString(t[r].variantName)+"_"),t[r].experimentId&&(i+="ei_"+e.encodeString(t[r].experimentId)+"_"),t[r].experimentName&&(i+="en_"+e.encodeString(t[r].experimentName)),o.push(i)}return n?H.Base64.encode(o.join("*")):o.join("*")}},{key:"encodePersonalizationCampaignEvent",value:function(t){var n,r=[],o=function(){var o=[];if(t[n].campaignId&&o.push("ci_".concat(e.encodeString(t[n].campaignId))),t[n].campaignName&&o.push("cn_".concat(e.encodeString(t[n].campaignName))),t[n].experimentId&&o.push("ei_".concat(e.encodeString(t[n].experimentId))),t[n].experimentName&&o.push("en_".concat(e.encodeString(t[n].experimentName))),t[n].variationId&&o.push("vi_".concat(e.encodeString(t[n].variationId))),t[n].variationName&&o.push("vn_".concat(e.encodeString(t[n].variationName))),t[n].audiences){var i=[];t[n].audiences.forEach((function(t){i.push("".concat(e.encodeString(t.id),"\\").concat(e.encodeString(t.name)))})),i.length&&o.push("au_".concat(e.encodeString(i.join("\\\\"))))}r.push(o.join("_"))};for(n=0;n<t.length;n++)o();return r.join("*")}},{key:"encodeABTestingEvent",value:function(t){return e.encodeABTesting(t,!1)}},{key:"encodeABTestingExtraInfo",value:function(t){return e.encodeABTesting(t,!0)}},{key:"encodeJson",value:function(e){var t=JSON.stringify(e),n=H.pako.gzip(t);return H.Base64.bytesToBase64(n)}},{key:"encodeStruggles",value:function(e){var t=JSON.stringify(e);return H.Base64.encode(t)}},{key:"encodePerformanceTimings",value:function(t){var n=t.perf.timing,r=t.perf.navigation,o=t.browserTime,i=[e.encodeNavigationTiming(n,"*")];return r&&L.isNumber(r.type)&&e._appendNumberValue(i,"nt",r.type),r&&L.isNumber(r.redirectCount)&&e._appendNumberValue(i,"rc",r.redirectCount),o&&e._appendNumberValue(i,"bt",o),i.join("*")}},{key:"encodeAjaxRequest",value:function(n){var r=[];if(e._appendStringValue(r,"sn",e.encodeNumber(n.sn||0)),n.method&&e._appendStringValue(r,"m",n.method),t.ajaxHashRecurrentUrls&&"function"==typeof n.ajaxUrls._get){var o=e.encodeHashCode(n.url),i=n.ajaxUrls._get(o);L.isUndefined(i)&&(n.ajaxUrls._set(o,n.url),e._appendStringValue(r,"u",H.Base64.encode(n.url))),e._appendStringValue(r,"uh",o)}else e._appendStringValue(r,"u",H.Base64.encode(n.url));if(n.downTime)-1!==t.maxAjaxDownloadTime&&n.downTime>t.maxAjaxDownloadTime&&(n.downTime=1990),e._appendStringValue(r,"d",e.encodeNumber(n.downTime)),e._appendStringValue(r,"upa",e.encodeBoolean(!0));else if(n.startedAt&&n.endedAt){var a=n.endedAt-n.startedAt;-1!==t.maxAjaxDownloadTime&&a>t.maxAjaxDownloadTime&&(a=1990),e._appendStringValue(r,"d",e.encodeNumber(a)),e._appendStringValue(r,"upa",e.encodeBoolean(!1))}else t.recordMFEAsAjax.length>0&&n.duration&&(e._appendStringValue(r,"d",e.encodeNumber(n.duration)),e._appendStringValue(r,"upa",e.encodeBoolean(!0)));return e._appendStringValue(r,"s",e.encodeNumber(n.status)),n.statusText&&e._appendStringValue(r,"st",H.Base64.encode(n.statusText)),n.requestHeaders&&e._appendStringValue(r,"rqh",H.Base64.encode(n.requestHeaders)),n.requestContent&&e._appendStringValue(r,"rqc",H.Base64.encode(n.requestContent)),n.responseHeaders&&(t.ajaxResBodyOctetTypeFix&&n.responseHeaders.indexOf("content-type: application/octet-stream")>-1&&(n.responseHeaders=n.responseHeaders.replace("content-type: application/octet-stream","content-type: application/json;charset=utf-8")),e._appendStringValue(r,"rh",H.Base64.encode(n.responseHeaders))),n.responseContent&&e._appendStringValue(r,"rc",(n.responseCompressed?H.Base64.bytesToBase64:H.Base64.encode)(n.responseContent)),n.resContentType&&e._appendStringValue(r,"rct",H.Base64.encode(n.resContentType)),n.reqContentType&&e._appendStringValue(r,"rqct",H.Base64.encode(n.reqContentType)),n.contentLength&&e._appendStringValue(r,"rcl",e.encodeNumber(parseInt(n.contentLength))),n.requestLength&&e._appendStringValue(r,"rqcl",e.encodeNumber(parseInt(n.requestLength))),n.ttfb&&e._appendStringValue(r,"ttfb",e.encodeNumber(n.ttfb)),n.downTime&&e._appendStringValue(r,"dt",e.encodeNumber(n.downTime)),n.realDownTime&&e._appendStringValue(r,"rdt",e.encodeNumber(n.realDownTime)),e._appendStringValue(r,"a",e.encodeBoolean(n.aborted)),e._appendStringValue(r,"api",n.api),e._appendStringValue(r,"vhdr",e.encodeBoolean(n.pageWasHiddenDuringRequest)),r.join("*")}},{key:"encodeResourceContent",value:function(t){var n=[];if(!L.isUndefined(t.url))return e._appendStringValue(n,"u",H.Base64.encode(t.url)),t.type&&t.type.length>0&&e._appendStringValue(n,"t",H.Base64.encode(t.type)),t.content&&t.content.length&&e._appendStringValue(n,"dd",H.Base64.bytesToBase64(t.content)),t.error&&t.error.length>0&&e._appendStringValue(n,"er",H.Base64.encode(t.error)),t.headers&&e._appendStringValue(n,"h",H.Base64.encode(JSON.stringify(t.headers))),n.join("*")}},{key:"encodeKeyValue",value:function(t){var n=[];return e._appendStringValue(n,"n",H.Base64.encode(t.name)),e._appendStringValue(n,"v",H.Base64.encode(""+t.val)),n.join("*")}},{key:"encodeSegmentChanged",value:function(t){var n=[];return t.type&&n.push("t_"+t.type),t.current&&n.push("c_"+H.Base64.encode(t.current)),t.hint&&n.push("h_"+t.hint),t.last&&n.push("l_"+H.Base64.encode(t.last)),t.lastDwell&&n.push("ld_"+e.encodeNumber(t.lastDwell)),(t.lastLoadTime||0===t.lastLoadTime)&&n.push("ll_"+e.encodeNumber(t.lastLoadTime)),t.segmentTitle&&n.push("ti_"+H.Base64.encode(t.segmentTitle)),t.query&&n.push("q_"+H.Base64.encode(t.query)),n.join("*")}},{key:"encodeKeyEvent",value:function(e){var t="";return e&&(e.unicode&&(t+=e.unicode),L.isUndefined(e.content)||(t+="_"+H.Base64.encode(e.content))),t}},{key:"encodeClickDetails",value:function(t){return e.encodeCoordinate(t.start)+"*"+e.encodeCoordinate(t.end)+"*"+e.encodeNumber(t.duration)}},{key:"encodeSwipeDetails",value:function(t){return e.encodeCoordinate(t.start)+"*"+e.encodeCoordinate(t.end)+"*"+e.encodeNumber(t.duration)+"*"+e.encodeBoolean(!1)}},{key:"encodeMouseMove",value:function(n){t.mmDebug;var r,o,i=[];for(r=0;r<n.length;r++)o=n[r],e._appendToMoves(i,o.x,o.y,o.t);return i.join("*")}},{key:"encodeHoverEvent",value:function(e){var n=e.join(" ");return t.mhDebug,n}},{key:"encodeKVMap",value:function(t){var n=[];for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=t[r];e._appendStringValue(n,r,o,!0)}return n.join("*")}},{key:"encodeNameKVMap",value:function(t){var n=t.val;if(!n||0===Object.keys(n).length)return"";var r=[H.Base64.encode(t.name)],o=[];for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var a=n[i];o.push(H.Base64.encode(i)+"_"+e.encodeString(null==a?"undefined":a.toString()))}return r.push(o.join("*")),r.join("**")}},{key:"encodeCoordinate64",value:function(t){return H.Base64.encode(e.encodeCoordinate(t))}}])}(),en=[{name:le.EVENT_ID,encodeName:le.EVENT_ID,encodeFunc:$t.encodeNumber,encodeCode:Yt.encodeEncodingType("cd_number")},{name:le.FOCUS_TIME_ATTR,encodeName:"ft",encodeFunc:$t.encodeNumber,encodeCode:Yt.encodeEncodingType("cd_number")},{name:le.AUTO_COMPLETE_ATTR,encodeName:"ac",encodeFunc:$t.encodeBoolean,encodeCode:Yt.encodeEncodingType("cd_boolean")},{name:le.VISUAL_NAME,encodeName:"vn",encodeFunc:$t.encodeString,encodeCode:Yt.encodeEncodingType("cd_string")},{name:le.PAGE_NAME,encodeName:le.PAGE_NAME,encodeFunc:$t.encodeString,encodeCode:Yt.encodeEncodingType("cd_string")},{name:le.WINDOW_DEPTH,encodeName:le.WINDOW_DEPTH,encodeFunc:$t.encodeNumber,encodeCode:Yt.encodeEncodingType("cd_number")},{name:le.CONTAINER_ID,encodeName:le.CONTAINER_ID,encodeFunc:$t.encodeNumber,encodeCode:Yt.encodeEncodingType("cd_number")},{name:le.PARENT_PAGE_ID,encodeName:le.PARENT_PAGE_ID,encodeFunc:$t.encodeString,encodeCode:Yt.encodeEncodingType("cd_string")},{name:le.HISTORY_LENGTH,encodeName:le.HISTORY_LENGTH,encodeFunc:$t.encodeNumber,encodeCode:Yt.encodeEncodingType("cd_number")},{name:le.TIME_SINCE_LAST_EVENT,encodeName:"tl",encodeFunc:$t.encodeNumber,encodeCode:Yt.encodeEncodingType("cd_number")},{name:le.COORDINATE_ATTR,encodeName:"co",encodeFunc:$t.encodeCoordinate64,encodeCode:Yt.encodeEncodingType("cd_coordinate")},{name:le.SCROLL_REACH,encodeName:"sr",encodeFunc:$t.encodeNumber,encodeCode:Yt.encodeEncodingType("cd_number")},{name:le.MOVES_TRUNCATED,encodeName:"tr",encodeFunc:$t.encodeBoolean,encodeCode:Yt.encodeEncodingType("cd_boolean")},{name:le.LOST_EVENTS_NUM,encodeName:"le",encodeFunc:$t.encodeNumber,encodeCode:Yt.encodeEncodingType("cd_number")},{name:le.TP_INTEGRATION_TYPE,encodeName:"tp",encodeFunc:$t.encodeString,encodeCode:Yt.encodeEncodingType("cd_string")},{name:le.EXTERNAL_ID,encodeName:"ei",encodeFunc:$t.encodeString,encodeCode:Yt.encodeEncodingType("cd_string")},{name:le.SYNC_COORDINATE,encodeName:"sy",encodeFunc:$t.encodeCoordinate64,encodeCode:Yt.encodeEncodingType("cd_coordinate")},{name:le.RAGE_SEQUENCE,encodeName:le.RAGE_SEQUENCE,encodeFunc:$t.encodeNumber,encodeCode:Yt.encodeEncodingType("cd_number")},{name:le.INDEX_IN_RAGE,encodeName:le.INDEX_IN_RAGE,encodeFunc:$t.encodeNumber,encodeCode:Yt.encodeEncodingType("cd_number")},{name:le.ZOOM,encodeName:"zo",encodeFunc:$t.encodeNumber,encodeCode:Yt.encodeEncodingType("cd_number")},{name:le.MOBILE_HYBRID_ID,encodeName:le.MOBILE_HYBRID_ID,encodeFunc:$t.encodeString,encodeCode:Yt.encodeEncodingType("cd_string")},{name:le.DETECTOR_CONFIG_ID,encodeName:le.DETECTOR_CONFIG_ID,encodeFunc:$t.encodeString,encodeCode:Yt.encodeEncodingType("cd_string")},{name:le.AUTO_MASKING,encodeName:le.AUTO_MASKING,encodeFunc:$t.encodeBoolean,encodeCode:Yt.encodeEncodingType("cd_boolean")},{name:le.SCROLL_DEBOUNCED,encodeName:le.SCROLL_DEBOUNCED,encodeFunc:$t.encodeBoolean,encodeCode:Yt.encodeEncodingType("cd_boolean")},{name:le.HOST_SELECTOR_PATH,encodeName:le.HOST_SELECTOR_PATH,encodeFunc:$t.encodeString,encodeCode:Yt.encodeEncodingType("cd_string")},{name:le.SELECTOR_ACTION_COUNT,encodeName:le.SELECTOR_ACTION_COUNT,encodeFunc:$t.encodeNumber,encodeCode:Yt.encodeEncodingType("cd_number")},{name:le.DEBUG_UNCONFIRMED_BEACONS,encodeName:le.DEBUG_UNCONFIRMED_BEACONS,encodeFunc:$t.encodeString,encodeCode:Yt.encodeEncodingType("cd_string")},{name:le.FINAL_CANCELLATION,encodeName:le.FINAL_CANCELLATION,encodeFunc:$t.encodeString,encodeCode:Yt.encodeEncodingType("cd_string")},{name:le.ABORT_ON_TIMEOUT,encodeName:le.ABORT_ON_TIMEOUT,encodeFunc:$t.encodeString,encodeCode:Yt.encodeEncodingType("cd_string")},{name:le.DEBUG_STORAGE_PENDING,encodeName:le.DEBUG_STORAGE_PENDING,encodeFunc:$t.encodeString,encodeCode:Yt.encodeEncodingType("cd_string")},{name:le.FAIL_REQUEST_STATUS,encodeName:le.FAIL_REQUEST_STATUS,encodeFunc:$t.encodeString,encodeCode:Yt.encodeEncodingType("cd_string")},{name:le.FAILED_STORAGE_FLUSH_BEACONS,encodeName:le.FAILED_STORAGE_FLUSH_BEACONS,encodeFunc:$t.encodeString,encodeCode:Yt.encodeEncodingType("cd_string")},{name:le.STORAGE_SIZE_EXCEED,encodeName:le.STORAGE_SIZE_EXCEED,encodeFunc:$t.encodeString,encodeCode:Yt.encodeEncodingType("cd_string")},{name:le.FAILED_SEND_FROM_STORAGE,encodeName:le.FAILED_SEND_FROM_STORAGE,encodeFunc:$t.encodeBoolean,encodeCode:Yt.encodeEncodingType("cd_boolean")},{name:le.SENDING_FROM_STORAGE,encodeName:le.SENDING_FROM_STORAGE,encodeFunc:$t.encodeBoolean,encodeCode:Yt.encodeEncodingType("cd_boolean")},{name:le.RETRIED,encodeName:le.RETRIED,encodeFunc:$t.encodeString,encodeCode:Yt.encodeEncodingType("cd_string")},{name:le.DEVTOOLS_VALUES,encodeName:le.DEVTOOLS_VALUES,encodeFunc:$t.encodeString,encodeCode:Yt.encodeEncodingType("cd_string")},{name:le.DEBUG_PAGE_SN,encodeName:le.DEBUG_PAGE_SN,encodeFunc:$t.encodeString,encodeCode:Yt.encodeEncodingType("cd_string")},{name:le.DEBUG_BROWSER_TAB_ID,encodeName:le.DEBUG_BROWSER_TAB_ID,encodeFunc:$t.encodeString,encodeCode:Yt.encodeEncodingType("cd_string")},{name:le.USING_WORKER,encodeName:le.USING_WORKER,encodeFunc:$t.encodeBoolean,encodeCode:Yt.encodeEncodingType("cd_boolean")},{name:le.NAVIGATION_TIMING,encodeName:le.NAVIGATION_TIMING,encodeFunc:$t.encodeNavigationTiming,encodeCode:Yt.encodeEncodingType("cd_navtiming")},{name:le.OLD_VALUE,encodeName:le.OLD_VALUE,encodeFunc:$t.encodeString,encodeCode:Yt.encodeEncodingType("cd_string")},{name:le.CURRENT_VALUE,encodeName:le.CURRENT_VALUE,encodeFunc:$t.encodeString,encodeCode:Yt.encodeEncodingType("cd_string")},{name:le.SNAPSHOT_FUSE,encodeName:le.SNAPSHOT_FUSE,encodeFunc:$t.encodeString,encodeCode:Yt.encodeEncodingType("cd_string")},{name:le.SNAPSHOT_TYPE,encodeName:le.SNAPSHOT_TYPE,encodeFunc:$t.encodeString,encodeCode:Yt.encodeEncodingType("cd_string")},{name:le.EFFECTIVE_CONNECTION_TYPE,encodeName:le.EFFECTIVE_CONNECTION_TYPE,encodeFunc:$t.encodeString,encodeCode:Yt.encodeEncodingType("cd_string")},{name:le.RTT,encodeName:le.RTT,encodeFunc:$t.encodeNumber,encodeCode:Yt.encodeEncodingType("cd_number")},{name:le.PROVIDER_NAME,encodeName:"pn",encodeFunc:$t.encodeString,encodeCode:Yt.encodeEncodingType("cd_string")},{name:le.ERROR_DATA,encodeName:"ed",encodeFunc:$t.encodeString,encodeCode:Yt.encodeEncodingType("cd_string")},{name:le.METADATA_ONLY,encodeName:le.METADATA_ONLY,encodeFunc:$t.encodeBoolean,encodeCode:Yt.encodeEncodingType("cd_boolean")},{name:le.IS_FIRST_CLICK,encodeName:le.IS_FIRST_CLICK,encodeFunc:$t.encodeBoolean,encodeCode:Yt.encodeEncodingType("cd_boolean")},{name:le.IS_CLICKABLE,encodeName:le.IS_CLICKABLE,encodeFunc:$t.encodeBoolean,encodeCode:Yt.encodeEncodingType("cd_boolean")},{name:le.ABEVENTS,encodeName:"AB",encodeFunc:$t.encodeABTestingExtraInfo,encodeCode:Yt.encodeEncodingType("cd_abtesting")},{name:le.IS_INPUT_ELEMENT,encodeName:le.IS_INPUT_ELEMENT,encodeFunc:$t.encodeBoolean,encodeCode:Yt.encodeEncodingType("cd_boolean")}];function tn(e){return tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tn(e)}function nn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rn(r.key),r)}}function rn(e){var t=function(e,t){if("object"!=tn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tn(t)?t:t+""}var on=function(){function e(n,r,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pageId=i,this.timestamp=r,this.type=n,this.element=o,this.report=!0,this.shouldEncodeValue=!0,this.subPage=L.decodeUri(t.decodeUri,window.location.hash),this.referrer=a||L.stripHash(L.decodeUri(t.decodeUri,L.validateHref(window.location.href))),this.id=e.incrementId(),this.extraInfoAttrs=en,this.extraInfo={eventId:this.id}}return function(e,t,n){return t&&nn(e.prototype,t),n&&nn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(e,[{key:"toString",value:function(){return this.type}},{key:"setExtraInfo",value:function(e,t){L.isUndefined(t)||(L.isUndefined(this.extraInfo)&&(this.extraInfo={}),this.extraInfo[e]=t)}},{key:"getExtraInfo",value:function(e){if(L.isUndefined(this.extraInfo))return null;var t=this.extraInfo[e];return void 0===t?null:t}},{key:"setDebugInfo",value:function(e){L.isUndefined(this.debugInfo)&&(this.debugInfo={}),this.debugInfo=e}},{key:"getDebugInfo",value:function(){return this.debugInfo}},{key:"getSubPage",value:function(){return this.subPage}},{key:"addHybridActionDataItem",value:function(e,t){L.isUndefined(t)?i.error("Failed setting value for hybrid action data item: "+e+". Value is undefined"):(L.isUndefined(this.hybridActionData)&&(this.hybridActionData={}),this.hybridActionData[e]=t)}},{key:"getdHybridActionData",value:function(){return this.hybridActionData}},{key:"toJSON",value:function(){return this.deepToJSON(this,this)}},{key:"deepToJSON",value:function(e,t){if(!e)return e;if("object"!==tn(e))return e;var n,r,o={};for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if("function"===(r=tn(e[n])))continue;if("object"===r){if(null===e[n])continue;if(e[n].addEventListener||e[n].attachEvent)continue;if(!e[n].hasOwnProperty)continue;if(Array.isArray(e[n])){o[n]=e[n].map(this.deepToJSON.bind(this));continue}o[n]=this.deepToJSON(e[n],t);continue}o[n]=e[n]}return o}}],[{key:"incrementId",value:function(){return this.latestId?this.latestId++:this.latestId=1,this.latestId}},{key:"fromJSON",value:function(t){return t.constructor=e,Object.setPrototypeOf(t,e.prototype),t}}])}();function an(e){return an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},an(e)}function sn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,un(r.key),r)}}function cn(e,t,n){return t&&sn(e.prototype,t),n&&sn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function un(e){var t=function(e,t){if("object"!=an(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=an(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==an(t)?t:t+""}var ln=cn((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.toString=function(){return"EventSet {id:"+r.id+" Events:"+r.events.length+"}"},this.fromJSON=function(e){return(e=e||{}).toString=r.toString,e.toJSON=r.toJSON,e.events.forEach((function(e){on.fromJSON(e)})),e};var o=new Ut(this);this.id=t,this.metadata=n,this.events=[],this.toJSON=o.toJSON}));function dn(e){return dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dn(e)}function fn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pn(r.key),r)}}function pn(e){var t=function(e,t){if("object"!=dn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=dn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==dn(t)?t:t+""}ln.reduceByMetadata=function(e){var t,n,r=1,o={};for(t=0;t<e.length;t++)e[t].metadata._id=e[t].metadata._id||r++,o[n=e[t].metadata._id]?Array.prototype.push.apply(o[n].events,e[t].events):o[n]=e[t];return Object.values(o)};var mn=function(){return function(e,t,n){return t&&fn(e.prototype,t),n&&fn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._clear=function(){o._currentEventSet=void 0,o._scrollReachIndex=void 0,o._pendingEventCount=0,o._pendingEventSets=[]},this._createEventSet=function(e){return o._currEventSetId++,new ln(o._currEventSetId,e)},this._checkScrollReach=function(e){var t=o._currentEventSet.events[o._scrollReachIndex];t.value.top&&e.value.top>t.value.top&&(t.value=e.value)},this._lastEventDiffersFromCurrent=function(e,t){var n=t.events.length;return e!==t.events[n-1].type},this._lastEventWasSocialNoble=function(e){var t=e.events.length;return L.contains(o._env.socialNobelEventTypes,e.events[t-1].type)},this._shouldCreateNewSocialNobleBin=function(e,t){return 0!==t.events.length&&(L.contains(o._env.socialNobelEventTypes,e)&&o._lastEventDiffersFromCurrent(e,t)||!L.contains(o._env.socialNobelEventTypes,e)&&o._lastEventWasSocialNoble(t))},this._updateEventsAfterIframeReady=function(e){for(var t=0;t<o._pendingEventSets.length;++t){var n=o._pendingEventSets[t].metadata;n.integrationId=e.clse||n.integrationId,n._sessionId=e._sessionId||n._sessionId,n._visitorId=e._visitorId||n._visitorId,n.rto=e.rto||n.rto,o._pendingEventSets[t].metadata=n}},this._clearExpiredEvents=function(e){for(var t=[],n=Date.now(),r=0;r<e.length;r++){for(var i=0;i<e[r].events.length;i++)n-e[r].events[i].timestamp<o._clearExpiredEventsAfter&&t.push(e[r].events[i]);e[r].events=t,t=[]}return e=e.filter((function(e){return 0!==e.events.length}))},this._filterPageSnapshotEvents=function(e){if(o._shouldSendPageSnapshot||o._pageSnapshotFiltered||!o._needToCheckForPageSnapshot)return e;for(var t=0;t<e.length;t++){var n=e[t];if(n.events&&1===n.events.length&&"pageSnapshot"===n.events[0].type){e.splice(t,1),o._pageSnapshotFiltered=!0;break}}return e},this.setNext=function(e){o._nextInPipeline=e},this.handle=function(e,t){try{var n;e&&e.event&&"pageSnapshot"===e.event.type&&e.event.value&&e.event.value.html&&e.event.value.cookie&&e.event.value.html.length+e.event.value.cookie.length>o._env.dataLimit&&o._bus.emit("clsDebug","Event pageSnapshot exceeds the max payload size of ".concat(o._env.dataLimit," bytes, and will be removed if stays too large after compression")),e&&e.event&&e.event.domSnapshot&&JSON.stringify(e.event.domSnapshot).length>o._env.dataLimit&&o._bus.emit("clsDebug","DomUpdate exceeds the max payload size of ".concat(o._env.dataLimit," bytes, and will be removed if stays too large after compression")),(null==e||null===(n=e.event)||void 0===n||null===(n=n.value)||void 0===n||null===(n=n.content)||void 0===n?void 0:n.length)>o._env.dataLimit&&o._bus.emit("clsDebug","Event exceeds the max payload size of ".concat(o._env.dataLimit," bytes, and will be removed if stays too large after compression"))}catch(e){o._bus.emit("clsDebug","Error while handling with event length. message: ".concat(JSON.stringify(e.message)))}if(L.contains(o._env.nobelEventTypes,e.event.type)){var r=o._createEventSet(e.metadata);r.events.push(e.event),o._pendingEventSets.push(r),o._currentEventSet=void 0}else o._currentEventSet&&o._currentEventSet.metadata===e.metadata&&!o._shouldCreateNewSocialNobleBin(e.event.type,o._currentEventSet)||(o._currentEventSet=o._createEventSet(e.metadata),o._pendingEventSets.push(o._currentEventSet)),"scrollReach"===e.event.type&&void 0!==o._scrollReachIndex?o._checkScrollReach(e.event):("scrollReach"===e.event.type&&(o._scrollReachIndex=o._currentEventSet.events.length),o._currentEventSet.events.push(e.event));o._pendingEventCount++,o._nextInPipeline.handle(e,t)},this.pull=function(){o._clearExpiredEventsAfter&&-1!==o._clearExpiredEventsAfter&&(o._pendingEventSets=o._clearExpiredEvents(o._pendingEventSets)),o._pendingEventSets=o._filterPageSnapshotEvents(o._pendingEventSets);var e=o._pendingEventSets;return o._clear(),e},this._env=n,this._nextInPipeline=null,this._currentEventSet=void 0,this._scrollReachIndex=void 0,this._currEventSetId=0,this._pendingEventCount=0,this._pendingEventSets=[],this._bus=t,this._clearExpiredEventsAfter=r,this._shouldSendPageSnapshot=!0,this._pageSnapshotFiltered=!1,this._needToCheckForPageSnapshot=!0,this._bus.on("session:setIds",(function(e){o._pendingEventSets.forEach((function(t){t.metadata&&(t.metadata._sessionId&&e._sessionId&&(t.metadata._sessionId=e._sessionId),t.metadata._visitorId&&e._visitorId&&(t.metadata._visitorId=e._visitorId))}))})),this._bus.on("remoteClseConf",(function(e){o._pendingEventSets.forEach((function(t){t.metadata&&(t.metadata.integrationId=e)}))})),this._bus.on("remoteRtoConf",(function(e){o._pendingEventSets.forEach((function(t){t.metadata&&(t.metadata.rto=e)}))})),this._bus.on("recordingStopped",(function(){o._clear(!0)})),this._bus.on("stopDomRecording",(function(){o._shouldSendPageSnapshot=!1})),this._bus.on("pageSnapshotWillNotReachQueue",(function(){o._needToCheckForPageSnapshot=!1})),this._bus.on("iframesHandshakeDone",this._updateEventsAfterIframeReady)}),[{key:"onPipelineTick",value:function(){}}])}();function hn(e){return hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hn(e)}function gn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vn(r.key),r)}}function yn(e,t,n){return t&&gn(e.prototype,t),n&&gn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function vn(e){var t=function(e,t){if("object"!=hn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=hn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==hn(t)?t:t+""}var bn=yn((function e(t,n,r,o,a){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initialize=function(){for(var e=0;e<s._chainComponents.length;e++)s._chainComponents[e].setNext(s._chainComponents[e+1]);setInterval(s._triggerPipelineTick,s._interval),s._bus.on("saveEvent",s._handleEvent)},this._handleEvent=function(e){var t={event:e};try{if(!s._shouldSendPageSnapshot&&"pageSnapshot"===e.type)return void s._bus.emit("pageSnapshotWillNotReachQueue");s._chainComponents[0].handle(t,s._context),s._immediateEventsMap[t.event.type]?(s._bus.emit("forceFlush"),s._bus.emit("iFramesForceFlush")):"mousedown"!==t.event.type&&"touchstart"!==t.event.type&&"pageUpdate"!==t.event.type||(s._config.flushEventsOnClick&&!s._isUnloadPageEvent(e)&&(s._bus.emit("forceFlush"),s._bus.emit("iFramesForceFlush")),s._config.domForceUpdateOnClick&&"pageUpdate"!==t.event.type&&setTimeout((function(){s._bus.emit("pageUpdate")}),s._domUpdateTimeout))}catch(e){i.error("Failed handling page event'. Error: "+e.message,e)}},this._triggerPipelineTick=function(){var e;for(e=0;e<s._chainComponents.length;e++)s._chainComponents[e].onPipelineTick(s._context)},this._isUnloadPageEvent=function(e){var t=!1;if("mousedown"===e.type&&e.domEvent&&e.domEvent.target)for(var n=e.domEvent.target,r=0,o=!1;n&&!o&&r<7;)if("A"===n.tagName){o=!0;var i=n.getAttribute("href");t=i&&"#"!==i.substring(0,1)}else n=n.parentElement,r++;return t},this._window=t,this._bus=n,this._stats=o,this._config=a,this._domUpdateTimeout=100,this._interval=5e3,this._context={stats:this._stats},this._chainComponents=r,this._immediateEventsMap=L.immutableSet.apply(null,a.reportEventsImmediately||[]),this._initialize(),this._shouldSendPageSnapshot=!0,this._bus.on("stopDomRecording",(function(){s._shouldSendPageSnapshot=!1}))}));function _n(e){return _n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_n(e)}function Sn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,En(r.key),r)}}function wn(e,t,n){return t&&Sn(e.prototype,t),n&&Sn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function En(e){var t=function(e,t){if("object"!=_n(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_n(t)?t:t+""}var Cn=wn((function e(t,n,r,o){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._destroy=function(){a._destroyed=!0},this._set=function(e,t){if(!a._destroyed)try{a.codec?a.storage[e]=a.codec.encode(t):a.storage[e]=t}catch(e){i.error("error: failed writing to storage. message:",e.message),a.bus.emit("clsDebug","error writing to storage, in StorageWriter. Exception message: "+e.message)}},this._get=function(e){try{var t=a.storage[e];return t&&a.codec?a.codec.decode(t):t}catch(e){i.error("error: failed reading from storage: "+e.message,e)}},this.getAndClear=function(e){try{var t=a.storage[e];if(a.storage.removeItem(e),t)return a.codec.decode(t)}catch(e){i.error("error: failed reading from storage: "+e.message,e)}},this.codec=o,this.storage=t,this.KEY_NAME_EST=n.Storage.BoundKeyPrefix+"est",this.KEY_NAME_SN=n.Storage.BoundKeyPrefix+"sn",this.bus=r,this._destroyed=!1,this.bus.on("GDPR:optOut",this._destroy)}));function Tn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return kn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function In(e){return In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},In(e)}function An(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;if(!e||"object"!==In(e))return t;if(e instanceof ArrayBuffer)return t.add(e),t;if("undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(e))return t.add(e.buffer),t;if(Array.isArray(e)){var n,r=Tn(e);try{for(r.s();!(n=r.n()).done;){An(n.value,t)}}catch(e){r.e(e)}finally{r.f()}return t}for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&An(e[o],t);return t}function Pn(e){return Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pn(e)}function xn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,On(r.key),r)}}function Rn(e,t,n){return t&&xn(e.prototype,t),n&&xn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function On(e){var t=function(e,t){if("object"!=Pn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Pn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pn(t)?t:t+""}var Mn=Rn((function e(t,n,r,o){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.restoreState=function(e,t){i._worker.postMessage({type:"restoreState",args:[e,t]})},this.encodeAndDispatch=function(e,t,n,r){var o=e.map((function(e){return e.toJSON?e.toJSON():e})),a={type:"encodeAndDispatch",args:[o,t,n,false]},s=Array.from(An(o));i._worker.postMessage(a,s)},this._worker=t,this._worker.addEventListener("message",(function(e){var t=e.data;"beaconSent"===t.type?r(t.sn,t.encodedLength):"onBeaconResponse"===t.type?t.success?(n.untrack({pageId:t.pageId,beaconData:t.beaconData}),o.emit("beacon:sent",{sn:t.beaconData.sn,pageId:t.pageId})):o.emit("beacon:failed",{sn:t.beaconData.sn,status:t.requestStatus,pageId:t.pageId}):"newConfig"===t.type&&o.emit("handleGatewayResponse",t.config)})),o.on("updateSafariQueryString",(function(e){i._worker.postMessage({type:"updateQueryString",args:[e]})})),o.once("plugin:updateSafariQueryString",(function(e){this._worker.postMessage({type:"updateQueryString",args:[e]})})),o.on("confHashChange",(function(e){i._worker.postMessage({type:"confHashChange",args:[e]})}))})),Nn={CHROME_PAYLOAD_LIMIT:61440,BEACON_ERROR_STATUS:400,isChrome:/chrome/.test(navigator.userAgent.toLowerCase())};function jn(e){return jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jn(e)}function Dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ln(r.key),r)}}function Ln(e){var t=function(e,t){if("object"!=jn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=jn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==jn(t)?t:t+""}var Bn=function(){return function(e,t,n){return t&&Dn(e.prototype,t),n&&Dn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.open=function(e,n){t._url=n,t.readyState=XMLHttpRequest.OPENED,t.onreadystatechange&&t.onreadystatechange()},this.send=function(e){var n;if(t.readyState=XMLHttpRequest.LOADING,t._contentType){var r={type:t._contentType};n=new Blob([e],r)}else n=e;t.status=navigator.sendBeacon(t._url,n)?200:Nn.BEACON_ERROR_STATUS,200!==t.status&&i.error("failed posting new beacon using sendBeacon API. payload:  contentType:"+t._contentType),t.readyState=XMLHttpRequest.DONE,t.onreadystatechange&&t.onreadystatechange()},this.setRequestHeader=function(e,n){"Content-Type"===e&&(t._contentType=n)},this.getResponseHeader=function(){return null},this.readyState=XMLHttpRequest.UNSENT,this.status=void 0,this.onreadystatechange=void 0,this._url=void 0,this._contentType=void 0,this.cls_own=!0,this.report_api="send_beacon"}),null,[{key:"canSend",value:function(e){return!(Nn.isChrome&&e&&e.length>Nn.CHROME_PAYLOAD_LIMIT)}},{key:"isSupported",value:function(){return"function"==typeof navigator.sendBeacon}}])}();function Fn(e){return Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fn(e)}function Un(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Vn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zn(r.key),r)}}function Wn(e,t,n){return t&&Hn(e.prototype,t),n&&Hn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function zn(e){var t=function(e,t){if("object"!=Fn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Fn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Fn(t)?t:t+""}var Gn=Wn((function e(t,n,r,o,a,s,c,u,l,d,f,p,m,h){var g=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._isReady=function(){return g._encryptionReady&&!g._waitingForPageSnapshot&&g._corsReady&&!!g._dispatcher},this._isOnline=function(){return"boolean"!=typeof g._window.navigator.onLine||g._window.navigator.onLine},this._onBeaconDispatched=function(e,t){g._beaconSN=Math.max(g._beaconSN,e),g._stats.count++,g._stats.flushedBytes+=t},this._onNewSession=function(){g._domRecordEnabled&&(g._waitingForPageSnapshot=!0)},this._onPageSnapshot=function(){g._waitingForPageSnapshot&&(g._waitingForPageSnapshot=!1,g._isReady()&&g._start())},this._updateDocumentEvent=function(e){for(var t=0;t<e.length;++t){var n=e[t].events;if(n&&n.length)for(var r=0;r<n.length;++r)if(n[r]&&"document"===n[r].type)return g._windowTabId&&g._updateDocumentTabId(n[r]),g._documentEventHasSize=!0,void g._updateDocumentSize(n[r])}},this._updateBeaconWithPageAttributes=function(e){e.forEach((function(e){var t,n,r,o;g._config.listenToUtagData?e.events.some((function(e){return"segmentChanged"===e.type||"pageSnapshot"===e.type}))?null!==(n=(t=e.metadata).pageAttributes)&&void 0!==n||(t.pageAttributes=g._pageAttributes):e.metadata.pageAttributes=void 0:null!==(o=(r=e.metadata).pageAttributes)&&void 0!==o||(r.pageAttributes=g._pageAttributes)}))},this._updateDocumentTabId=function(e){e.setExtraInfo("browserTabId",g._windowTabId),g._windowTabId=""},this._updateDocumentSize=function(e){e.value.windowSize.height||e.value.windowSize.width||(g._window.innerWidth<g._config.minValidWindowSize||g._window.innerHeight<g._config.minValidWindowSize?e.value.windowSize={height:g._window.outerHeight,width:g._window.outerWidth}:e.value.windowSize={height:g._window.innerHeight,width:g._window.innerWidth})},this._onNewClsS=function(e){e._sessionId&&(g._windowTabId=g._utils.generateTabId(g._window,g._env,g._bus,g._config))},this._updateClse=function(e){g._clse=e},this._updateRto=function(e){g._rto=e},this._updatePageAttributes=function(e){g._pageAttributes=e},this._flushPending=function(e){if(g._isOnline()&&g._isReady())try{if(g._windowHasSize||g._window.innerHeight&&g._window.innerWidth){g._windowHasSize=!0;var t=g._eventsQueue.pull();g._documentEventHasSize||g._updateDocumentEvent(t),g._pageAttributes&&g._updateBeaconWithPageAttributes(t),t.length&&(g._doFlush(t,e),fe.notifyEventsFlush())}}catch(e){i.error("ERROR: while flushing pending events. Exception: ",e.stack?e.stack:e.message)}},this._onUnload=function(){try{if(g._isReady()){g._config.reportLastPageEventsViaBeaconAPI&&g._flushPending(!0);var e=g._eventsQueue.pull();if(e.length&&g._config.storageBackedReporting){var t=g._eventSetTracker.packageEventSets(),n=[];Array.prototype.push.apply(n,t.eventSets),Array.prototype.push.apply(n,e),e[0].metadata,t.sn[e[0].metadata.pageId]=t.sn[e[0].metadata.pageId]||1,t.eventSets=ln.reduceByMetadata(n);var r=g._storageWriter.getAndClear(g._storageWriter.KEY_NAME_EST),o=g._storageWriter.getAndClear(g._storageWriter.KEY_NAME_SN);o&&g._utils.assign(t.sn,o),r&&Array.prototype.push.apply(t.eventSets,r),g._storageWriter._set(g._storageWriter.KEY_NAME_EST,t.eventSets),g._storageWriter._set(g._storageWriter.KEY_NAME_SN,t.sn)}else e.length&&g._doFlush(e)}}catch(e){i.error("Flusher error: handling 'unload' event raised an error.",e.message)}},this._startTimer=function(){var e=g._config.reportByPost?g._config.reportPostInterval:g._config.reportInterval;e&&!g._timer&&(g._timer=setInterval(g._flushPending,e))},this._doFlush=function(e,t){g._eventSetTracker.track(e),g._dispatcher.encodeAndDispatch(e,g._aid,void 0,t)},this._createEventsetStorageMap=function(e){var t,n={},r=Un(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;n[o.metadata.pageId]=!0,g._clse&&!o.metadata.integrationId&&(o.metadata.integrationId=g._clse),g._rto&&!o.metadata.rto&&(o.metadata.rto=g._rto)}}catch(e){r.e(e)}finally{r.f()}return n},this._sendStoragePendingReports=function(){try{var e=g._storageWriter.getAndClear(g._storageWriter.KEY_NAME_SN),t=g._storageWriter.getAndClear(g._storageWriter.KEY_NAME_EST);if(e&&t&&t.length){if(g._shouldBlockRecording)return void console.log("%c Dumping events from the storage due to blocking","color: white; background: red");if(-1!==g._config.domExpireSnapshotAfter&&t[0].events.length){var n=t[0].events[0].timestamp,r=g._utils.currentTimestamp()-n;if(r>g._config.domExpireSnapshotAfter)return void g._bus.emit("clsDebug","Discarded storage events, expiration time exceeded limit and was "+r+" ms")}g._dispatcher.restoreState(e,g._createEventsetStorageMap(t)),g._bus.emit("beacon:sendingFromStorage"),g._doFlush(t)}}catch(e){g._bus.emit("beacon:failedSendingFromStorage"),i.error("error: could not send pending storage reports. message:",e.message)}},this._updateAnalyzerId=function(e){g._aid=e},this._start=function(){g._sendStoragePendingReports(),g._startTimer()},this._onWorkerInit=function(e){g._dispatcher=e?new Mn(e,g._eventSetTracker,g._onBeaconDispatched,g._bus):new g._BeaconDispatcher(g._env,g._bus,g._beaconEncoder,g._reporter,g._downStreamManager,g._sendAnalyzerId,g._eventSetTracker,g._onBeaconDispatched,g._config.reportMaxConcurrency,g._config.reportTimingBetweenBeacons,g._config.extraReportURIs,g._config.reportURI),g._isReady()&&g._start()},this._onCorsReady=function(){g._corsReady=!0,g._isReady()&&g._start()},this._onEncryptionReady=function(){g._encryptionReady=!0,g._isReady()&&g._start()},this._onCorsReset=function(){g._corsReady=!1},this._onFrameMessage=function(e){try{g._portMap[e.data.pageId].postMessage({messageId:e.data.messageId,type:"eventSet"}),g._isReady()?g._doFlush(e.data.eventSets):(i.error("Cannot flush event sets of a child iframe as the Flusher is not ready."),g._bus.emit("clsDebug","cannot flush child iframe's events: dispatcher not set (waiting for worker?)."))}catch(e){i.error("ERROR: while flushing event sets of a child iframe. Exception: ",e.stack?e.stack:e.message)}},this._updatePortMapAndCb=function(e){g._isReady()&&g._sendStoragePendingReports(),g._portMap[e.pageId]=e.port,e.port.onmessage=g._onFrameMessage},this.flush=function(){g._flushPending()},this._window=t,this._utils=n,this._BeaconDispatcher=r,this._env=o,this._bus=a,this._beaconEncoder=s,this._reporter=c,this._eventSetTracker=u,this._eventsQueue=l,this._downStreamManager=d,this._storageWriter=f,this._stats=m,this._config=h,this._timer=null,this._encryptionReady=!1,this._corsReady=!1,this._aid="",this._beaconSN=-1,this._sendAnalyzerId=!(h.reportPreferSendBeaconAPI&&Bn.isSupported()),this._dispatcher=null,this._portMap={},this._documentEventHasSize=!1,this._windowHasSize=!1,this._windowTabId="",this._clse=void 0,this._rto=void 0,this._pageAttributes=void 0,this._domRecordEnabled=h.domRecordEnabled,this._waitingForPageSnapshot=h.domRecordEnabled&&!p.isSessionCookieExist(),this._shouldBlockRecording=!1,this._bus.on("worker:init",this._onWorkerInit),this._bus.on("corsReady",this._onCorsReady),this._bus.once("plugin:corsReady",this._onCorsReady),this._bus.on("corsReset",this._onCorsReset),this._bus.once("plugin:corsReset",this._onCorsReset),this._bus.once("encryptionReady",this._onEncryptionReady),this._bus.on("session:setIds",this._onNewClsS),this._bus.on("sendStoragePendingReports",this._sendStoragePendingReports),this._bus.on("event:unload",this._onUnload,void 0,1e3),this._bus.on("forceFlush",this._flushPending),this._bus.on("analyzerId",this._updateAnalyzerId),this._bus.on("iframePortReceived",this._updatePortMapAndCb),this._bus.on("remoteClseConf",this._updateClse),this._bus.on("remoteRtoConf",this._updateRto),this._bus.on("updatePageAttributes",this._updatePageAttributes),this._bus.on("pageSnapshot:save",this._onPageSnapshot),this._bus.on("session:new",this._onNewSession),this._bus.on("shouldBlockRecording",(function(){g._shouldBlockRecording=!0})),this._bus.on("stopDomRecording",(function(){g._domRecordEnabled=!1,g._waitingForPageSnapshot=!1}))}));function qn(e){return qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qn(e)}function Kn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xn(r.key),r)}}function Yn(e,t,n){return t&&Kn(e.prototype,t),n&&Kn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xn(e){var t=function(e,t){if("object"!=qn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qn(t)?t:t+""}var Jn=Yn((function e(t,n,r,o,a,s,c){var u=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._isOnline=function(){return"boolean"!=typeof u._window.navigator.onLine||u._window.navigator.onLine},this._flushPending=function(e){try{if(!u._isOnline())return;var t=u._eventsQueue.pull();t.length&&(u._doFlush(t,e),fe.notifyEventsFlush())}catch(e){i.error("ERROR: while flushing pending events. Exception: ",e.stack?e.stack:e.message)}},this._startTimer=function(){var e=u._config.reportByPost?u._config.reportPostInterval:u._config.reportInterval;e&&!u._timer&&(u._timer=setInterval(u._flushPending,e))},this._packageMap=function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t=t.concat(e[n]));return t},this._doFlush=function(e,t){try{if(u._eventSetTracking[u._messageId]=e,!t||t&&!u._config.storageBackedReporting)u._portManager.send({eventSets:e,messageId:u._messageId,pageId:u._getDetector().page.id}),u._messageId++;else{var n=(u._storageWriter.getAndClear(u._storageWriter.KEY_NAME_EST)||[]).concat(u._packageMap(u._eventSetTracking));u._storageWriter._set(u._storageWriter.KEY_NAME_EST,n),u._eventSetTracking={}}}catch(e){i.error("Exception while flushing events. message:",e.message)}},this._sendStoragePendingReports=function(){try{var e=u._storageWriter.getAndClear(u._storageWriter.KEY_NAME_EST);if(e&&e.length){if(-1!==u._config.domExpireSnapshotAfter&&e[0].events.length){var t=e[0].events[0].timestamp,n=L.currentTimestamp()-t;if(n>u._config.domExpireSnapshotAfter)return void u._bus.emit("clsDebug","Discarded storage events, expiration time exceeded limit and was "+n+" ms")}u._bus.emit("beacon:sendingFromStorage"),u._doFlush(e,!1)}}catch(e){u._bus.emit("beacon:failedSendingFromStorage"),i.error("error: could not send pending storage reports. message:",e.message)}},this._onMessage=function(e){"ack"===e.data.type?(u._flushPending(),u._startTimer()):delete u._eventSetTracking[e.data.messageId]},this._onLoad=function(){var e=u._portManager.initPorts(u._onMessage);u._bus.emit("frame:port",{args:{pageId:u._getDetector().page.id},transferable:e})},this.flush=function(){u._timer&&u._flushPending()},this._window=t,this._bus=n,this._getDetector=r,this._portManager=o,this._eventsQueue=a,this._storageWriter=s,this._config=c,this._timer=null,this._messageId=1,this._eventSetTracking={},n.once("init:loaded",this._onLoad),n.on("event:unload",(function(){return u._flushPending(!0)})),n.on("forceFlush",this._flushPending),this._bus.on("sendStoragePendingReports",this._sendStoragePendingReports)}));function Zn(e){return Zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zn(e)}function Qn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,er(r.key),r)}}function $n(e,t,n){return t&&Qn(e.prototype,t),n&&Qn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function er(e){var t=function(e,t){if("object"!=Zn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Zn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Zn(t)?t:t+""}var tr=$n((function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._package=function(){var e={sn:{},eventSets:[]};for(var t in o._storage)if(Object.prototype.hasOwnProperty.call(o._storage,t))for(var n in e.sn[t]=void 0!==o._suggestedSnPerPage[t]?o._suggestedSnPerPage[t]+1:1,o._storage[t])Object.prototype.hasOwnProperty.call(o._storage[t],n)&&e.eventSets.push(o._storage[t][n]);return e},this.untrack=function(e){try{if(o._suggestedSnPerPage[e.pageId]=Math.max(o._suggestedSnPerPage[e.pageId]||1,e.beaconData.sn),o._storage[e.pageId]){var t=e.beaconData.eventSetId;if(o._storage[e.pageId][t]){var n=o._storage[e.pageId][t].events;n.length&&(o._totalEvents-=e.beaconData.endIndex-e.beaconData.startIndex,n.splice(e.beaconData.startIndex,e.beaconData.endIndex-e.beaconData.startIndex),o._events.emit("beacon:storageRemoved",e.beaconData.sn),n.length||delete o._storage[e.pageId][t])}}}catch(e){i.error("Failed removing form memory. Exception message:"+e.message,e)}},this.track=function(e){for(var t=0;t<e.length;t++){var n=o._maxAllowedEventsInMemory-o._totalEvents;if(n>0){var r=e[t];o._storage[r.metadata.pageId]=o._storage[r.metadata.pageId]||{},o._storage[r.metadata.pageId][r.id]=r,r.events.length<=n?o._totalEvents+=r.events.length:(o._totalEvents=o._maxAllowedEventsInMemory,r.events.splice(n))}}},this.packageEventSets=function(){var e=o._package();return o._storage={},e},this._events=t,this._storage=n,this._maxAllowedEventsInMemory=r,this._totalEvents=0,this._suggestedSnPerPage={}}));function nr(e){return nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nr(e)}function rr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ir(r.key),r)}}function or(e,t,n){return t&&rr(e.prototype,t),n&&rr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ir(e){var t=function(e,t){if("object"!=nr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nr(t)?t:t+""}var ar=or((function e(t,n,r,o,a,s,c,u){var l=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._createRequest=function(e,t,n,r,o,a,s,c,u){var d,f=!1;if((e=e||"").length>l._env.dataLimit)return i.error("beacon size exceeds "+l._env.dataLimit+" bytes"),l._bus.emit("clsDebug","beacon "+t+": actual size is "+e.length+", which exceeds "+l._env.dataLimit+" bytes"),f=!0,void a();var p=l._ajaxUtils.createXMLHTTPObject(!1,e,s);if(!p)return i.error("Failed creating an XMLHttpRequest object"),f=!0,void a();l._config.reportAddUriParamAPI&&(n.extraInfo=n.extraInfo||{},n.extraInfo.api=p.report_api?p.report_api:"xhr"),d=l._uriPolicy.apply(n.metadata.reportURI,n.metadata,n.sn,n.extraInfo),void 0===r&&(r=l._config.reportMaxRetries);var m=function(){var e,n="Failed POST data for Beacon, sn:".concat(t,", status: ").concat(p.status);return n+=", statusText: ".concat(p.statusText||""),n+=", ContentLength: ".concat((null===(e=p.requestData)||void 0===e?void 0:e.length)||"")},h=function(){4===p.readyState?200===p.status?function(){l._onBeaconResponse(t,o,!0);var e=p.getResponseHeader("Content-Type");e&&-1!==e.indexOf("application/json")&&!c&&l._onNewConfig(p.response),l.stopBeaconsDueToFailure=l._handleFailedBeaconCount(void 0,!0),f=!0,a()}():!l.stopBeaconsDueToFailure&&l._config.reportPostRetry&&r?(r--,l.stopBeaconsDueToFailure=l._handleFailedBeaconCount(p.status,!1),l.stopBeaconsDueToFailure||(l._onBeaconResponse(t,o,!1,p.status),l._createRequest(e,t,n,r,o,a,void 0,c,u))):(l._handleFailedBeaconCount(p.status,!1),p.abort(),l._bus.emit("clsDebug",m()),f=!0,a()):0===p.readyState&&(!l.stopBeaconsDueToFailure&&l._config.reportPostRetry&&r?(r--,l.stopBeaconsDueToFailure=l._handleFailedBeaconCount(p.status,!1),l.stopBeaconsDueToFailure||l._createRequest(e,t,n,r,o,a,void 0,c)):(l._handleFailedBeaconCount(p.status,!1),p.abort(),f=!0,a()))};l._config.xhrBypassOnReadyStateChange?(L.addEventHandler(p,"load",h),L.addEventHandler(p,"error",h),L.addEventHandler(p,"abort",h)):p.onreadystatechange=h;try{p.open("POST",d,!0),p.onprogress=function(){},p.ontimeout=function(){},p.onerror=function(){},p.withCredentials=!0,l._beaconEncoder.visitXhr(p);var g=!0;u?l._config.dropExpiredBeacons&&l._config.clearExpiredEventsAfter<Date.now()-u&&(g=!1,l._bus.emit("clsDebug","Beacon dropped, been a while from beacon start time:"+u)):l._bus.emit("clsDebug","Beacon start time missing"),g&&(s||!L.isIE()?p.send(e):setTimeout((function(){-1!==l._config.reportAbortAfter&&setTimeout((function(){4!==p.readyState&&(p.abort(),!f&&a())}),l._config.reportAbortAfter);try{p.send(e)}catch(e){i.error("Failed sending (in) POST request (".concat(t,") to url ").concat(d,": ").concat(e.message),e)}}),0))}catch(e){i.error("Failed sending POST request (".concat(t,") to url ").concat(d,": ").concat(e.message),e),f=!0,a()}},this._handleFailedBeaconCount=function(e,t){return!(l._config.maxFailedBeaconCount<=0)&&(t?(l.beaconFailures={count:0,statusCodes:[]},!1):l.beaconFailures.count<l._config.maxFailedBeaconCount?(l.beaconFailures.count++,l.beaconFailures.statusCodes.push(e),!1):(l._config.failedBeaconCountBreachCallback&&"function"==typeof l._config.failedBeaconCountBreachCallback&&l._config.failedBeaconCountBreachCallback(l.beaconFailures.count,l.beaconFailures.statusCodes),!0))},this.dispatch=function(e,t,n,r,o,i,a,s){var c={metadata:t,sn:n,extraInfo:r};l.stopBeaconsDueToFailure||l._createRequest(e,n,c,void 0,t.pageId,o,i,a,s)},this._beaconEncoder=t,this._uriPolicy=n,this._ajaxUtils=r,this._onBeaconResponse=o,this._onNewConfig=a,this._config=s,this._bus=c,this.name="POST",this._env=u,this.config={maxReportSize:this._config.maxPostReportSize},this.stopBeaconsDueToFailure=!1,this.beaconFailures={count:0,statusCodes:[]}}));function sr(e){return sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sr(e)}function cr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lr(r.key),r)}}function ur(e,t,n){return t&&cr(e.prototype,t),n&&cr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function lr(e){var t=function(e,t){if("object"!=sr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=sr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==sr(t)?t:t+""}var dr=ur((function e(t,n,r,o,a,s,c,u,l){var d=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._createRequest=function(e,t,n,r,o,a,s){if((e=e||"").length>d._env.dataLimit)return i.error("beacon size exceeds "+d._env.dataLimit+" bytes"),d._bus.emit("clsDebug","beacon "+t+": actual size is "+e.length+", which exceeds "+d._env.dataLimit+" bytes"),f=!0,void a();var c=function(){d._onBeaconResponse(t,o,!0);var e=p.responseContentType;e&&-1!==e.indexOf("application/json")&&!s&&d._onNewConfig(p.response),f=!0,a()},u=function(){d._config.reportPostRetry&&r?(r--,d._onBeaconResponse(t,o,!1,p.status),d._createRequest(e,t,n,r,o,a,s)):(f=!0,a())},l=function(){d._config.reportPostRetry&&r?(r--,d._createRequest(e,t,n,r,o,a,s)):(f=!0,a())};try{var f=!1;if(3===d._errorsCount)return d._asStoppable.stop(),void i.error("Stopped recording after exceeding errors limit");e=e||"";var p=d._requestFactory.createRequest(n);if(!p)return i.error("Failed creating request object"),d._errorsCount++,f=!0,void a();void 0===r&&(r=d._config.reportMaxRetries),d.config.xhrBypassOnReadyStateChange?(L.addEventHandler(p,"load",(function(){p.success?c():u()})),L.addEventHandler(p,"abort",l),L.addEventHandler(p,"error",u)):p.onreadystatechange=function(){2===p.readyState?p.success?c():u():3===p.readyState&&l()},-1!==d._config.reportAbortAfter&&setTimeout((function(){2!==p.readyState&&(p.abort(),!f&&a())}),d._config.reportAbortAfter),p.send(e,d._beaconEncoder.getContentType(),d._config.reportCompress)}catch(e){d._errorsCount++,i.error("Failed creating or handling request with beacon ("+t+") to url "+n+": "+e.message,e),f=!0,a()}},this.dispatch=function(e,t,n,r,o,i){var a=d._uriPolicy.apply(t.reportURI,t,n,r);d._createRequest(e,n,a,void 0,t.pageId,o,i)},this._beaconEncoder=t,this._uriPolicy=n,this._requestFactory=r,this._onBeaconResponse=o,this._onNewConfig=a,this._asStoppable=s,this._errorsCount=0,this._config=c,this.name="ExternalReporter",this._bus=u,this._env=l,this.config={maxReportSize:this._config.maxPostReportSize,xhrBypassOnReadyStateChange:this._config.xhrBypassOnReadyStateChange}}));function fr(e){return fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fr(e)}function pr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hr(r.key),r)}}function mr(e,t,n){return t&&pr(e.prototype,t),n&&pr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function hr(e){var t=function(e,t){if("object"!=fr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=fr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fr(t)?t:t+""}var gr=mr((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.send=function(e){try{var t=e.eventSets.map((function(e){return e.toJSON?e.toJSON():e}));e.eventSets=t,n._port.postMessage(e)}catch(e){i.error("error: could not send via port. message:",e.message)}},this.initPorts=function(e){var t=new window.MessageChannel;return n._port=t.port1,n._port.onmessage=e,t.port2},this._window=t,this._port}));function yr(e){return yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yr(e)}function vr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,br(r.key),r)}}function br(e){var t=function(e,t){if("object"!=yr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=yr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yr(t)?t:t+""}var _r=function(){return function(e,t,n){return t&&vr(e.prototype,t),n&&vr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name="GET",this.domBeaconImgNum=0,this.uriPolicy=new oe(t,n.detectorVersion,r.reportAddUriParams,!1),this.config=r}),[{key:"dispatch",value:function(e,t,n,r,o){var i=t.reportURI,a=(i+=-1!==t.reportURI.indexOf("?")?"&":"?")+e;this.createRequest(this.uriPolicy.apply(a,t)),setTimeout(o,0)}},{key:"createRequest",value:function(e){this.config.DOMBeaconImg?this.changeImgSrcByDOM(e):this.createImageWithSrc(e)}},{key:"createImageWithSrc",value:function(e){(new Image).src=e}},{key:"changeImgSrcByDOM",value:function(e){var t="_cls_beacon_img_".concat((new Date).getTime()," ").concat(this.domBeaconImgNum++),n=document.getElementById(t);n||((n=document.createElement("img")).id=t,n.style.width="1px",n.style.height="1px",n.style.visibility="hidden",n.style.position="fixed",document.body&&document.body.appendChild(n)),n.src=e}}])}(),Sr={INITIAL_COMPRESSION_FACTOR:.25,MINIMAL_COMPRESSION_FACTOR:.05,COMPRESSED_INDICATION_CHARSET:"ISO-8859-15"};function wr(e){return wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wr(e)}function Er(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Tr(r.key),r)}}function Cr(e,t,n){return t&&Er(e.prototype,t),n&&Er(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tr(e){var t=function(e,t){if("object"!=wr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=wr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wr(t)?t:t+""}var kr=Cr((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.add=function(e,n){return t._updates.push({ref:n,update:e}),t},this._updates=[]}));function Ir(e){return Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ir(e)}function Ar(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xr(r.key),r)}}function Pr(e,t,n){return t&&Ar(e.prototype,t),n&&Ar(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function xr(e){var t=function(e,t){if("object"!=Ir(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ir(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ir(t)?t:t+""}var Rr=Pr((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._header=function(e,t){return(e?"1":"0")+(t?"1":"0")},this._setCompressionRatio=function(e){r._compressionRatio=Math.max(e,Sr.MINIMAL_COMPRESSION_FACTOR)},this.newPayload=function(){return new kr},this._compressEndoce=function(e){if(0===e._updates.length)return"";var t=L.arrayToJsonSafe(e._updates),n=H.Base64.bytesToBase64(r._encodeUtils.compress(t));return r._setCompressionRatio(n.length/t.length),r._header(!0,!0)+n},this._uncompressEncode=function(e){if(0===e._updates.length)return"";var t=L.arrayToJsonSafe(e._updates);return r._header(!1,r._options.forceBase64)+(r._options.forceBase64?H.Base64.toBase64(t):t)},this.refForEvent=function(e){return""+r._nextDomRef+++L.hashcode(e.type+e.timestamp)},this.estimatedDomUpdateSize=function(e){return(e?JSON.stringify(e).length:0)*r._baseSizeFactor*(r._options.compress?r._compressionRatio:1)},this._encodeUtils=t,this._options=n,this._compressionRatio=Sr.INITIAL_COMPRESSION_FACTOR,this._options||(this._options={compress:!0,forceBase64:!0}),this._baseSizeFactor=this._options.compress||this._options.forceBase64?1.33:1,this._nextDomRef=1,this.encode=this._options.compress?this._compressEndoce:this._uncompressEncode})),Or={idle:$t.encodeNumber,document:$t.encodePageDetails,segmentChanged:$t.encodeSegmentChanged,lastSegment:$t.encodeSegmentChanged,pageSnapshot:$t.encodePageSnapshotData,devToolsVisibilityChanged:$t.encodeBoolean,webStruggle:$t.encodeStruggles,ajaxRequest:$t.encodeAjaxRequest,ajaxStats:$t.encodeJson,hover:$t.encodeHoverEvent,custom:$t.encodeKeyValue,customMap:$t.encodeNameKVMap,thirdpartymap:$t.encodeKVMap,dataLayerMap:$t.encodeJson,thirdPartyAttribute:$t.encodeThirdPartyAttributes,abTesting:$t.encodeABTestingEvent,personalizationCampaign:$t.encodePersonalizationCampaignEvent,resourceContent:$t.encodeResourceContent,clientAttribute:$t.encodeKeyValue,resourcesWaterfall:$t.encodeJson,performance:$t.encodePerformanceTimings,webVitals:$t.encodeString,formAnalysis:$t.encodeJson,timing:$t.encodeTimings,resize:$t.encodeResize,submit:$t.encodeHashCode,touchmove:$t.encodeClickDetails,touchend:$t.encodeClickDetails,drag:$t.encodeClickDetails,mousemove:$t.encodeMouseMove,mouseover:$t.encodeHoverEvent,scroll:$t.encodeCoordinate,ionScroll:$t.encodeCoordinate,scrollReach:$t.encodeScrollReach,keydown:$t.encodeKeyEvent,keypress:$t.encodeKeyEvent,voc:$t.encodeJson,vocV2:$t.encodeJson,vocIdentifiers:$t.encodeJson,resourceUrls:$t.encodeJson,clipboard:$t.encodeJson,tilt:$t.encodeTilt,swipe:$t.encodeSwipeDetails,glassvoxOpen:$t.encodeJson,glassvoxClose:$t.encodeJson,glassvoxResponse:$t.encodeJson,glassvoxComplete:$t.encodeJson};Or[H.mouseEvents.up]=$t.encodeClickDetails;var Mr=Or;function Nr(e){return Nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nr(e)}function jr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Dr(r.key),r)}}function Dr(e){var t=function(e,t){if("object"!=Nr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Nr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Nr(t)?t:t+""}var Lr=function(){return function(e,t,n){return t&&jr(e.prototype,t),n&&jr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,n,r,o,i){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._assignLengthAndReturn=function(e){var t,n=0;for(t in e.event)"string"==typeof e.event[t]&&(n+=t.length+e.event[t].length+6);return e.length=n+2+a._domEncoder.estimatedDomUpdateSize(e.domUpdate),e},this.visitXhr=function(e){a._corsSafelisted?e.setRequestHeader("Content-Type","text/plain"+(a._options.compress?"; charset="+Sr.COMPRESSED_INDICATION_CHARSET:"")):(e.setRequestHeader("Content-Type","application/json"),a._options.compress&&e.setRequestHeader("Content-Encoding","gzip"))},this.visitFetch=function(e){a._corsSafelisted?e.append("Content-Type","text/plain"+(a._options.compress?"; charset="+Sr.COMPRESSED_INDICATION_CHARSET:"")):(e.append("Content-Type","application/json"),a._options.compress&&e.append("Content-Encoding","gzip"))},this.encodeSnapshotHtml=function(e){return!a._options.compress&&a._options.domCompress?{encoded:a._env.Base64.bytesToBase64(a._encodeUtils.compress(e)),plain:!1,compressed:!0}:{encoded:e,plain:!0,compressed:!1}},this.estimateBeaconSize=function(e){return a._options.compress?e*a.compressionRatio:e},this.encodeEvent=function(e,t,n){var r,o={timestamp:a._encodeUtils.encodeTimestamp(e),type:""+a._encodeUtils.encodeEventType(e.type)};void 0===t&&(t=L.isUndefined(e.selectorExpression)||null==e.selectorExpression?a._env.encoding.rootSelector:e.selectorExpression),o.selector=t,void 0===n&&(n=a._env.encoding.rootCssSelector),o.cssSelector=encodeURIComponent(n);var i=Mr[e.type],s=i?i(e.value):e.value;L.isString(s)?(a._encryptionManager.stringIsEncrypted(s)?e.shouldEncodeValue=!1:r=e.shouldEncodeValue?a._env.encoding.valueEncodedPrefix:a._env.encoding.valueNotEncodedPrefix,s=e.shouldEncodeValue?a._env.Base64.encode(s):s,o.value=r?r+s:s):o.value="-",L.isUndefined(e.extraInfo)?o.extraInfo="-":o.extraInfo=a._encodeUtils.encodeExtraInfo(e),a._options.reportDebugInfo&&!L.isUndefined(e.debugInfo)?o.debugInfo=a._encodeUtils.encodeDebugInfo(e):o.debugInfo="-";var c="";return e.domSnapshot?(c=a._domEncoder.refForEvent(e),o.domSnapshot=a._env.encoding.domSnapshotRefPrefix+c):o.domSnapshot="-",a._assignLengthAndReturn({event:o,domUpdate:e.domSnapshot,domUpdateRef:c})},this.encodeBeacon=function(e,t,n,r){var o,i=[],s=a._domEncoder.newPayload();for(o=0;o<n.length;o++)i.push(n[o].event),n[o].domUpdate&&s.add(n[o].domUpdate,n[o].domUpdateRef);var c={ver:e,sn:r,pageId:t.pageId,segment:t.segment,events:i,dom:a._domEncoder.encode(s),pageAttr:a._encodeUtils.encodePageAttributes(t.pageAttributes||[])};a._options.domRecordEnabled||(c.recType="analytics");var u=a._encryptionManager.getKeyInfo();u&&(c.key=u),t.referrer&&(c.referrer=t.referrer),void 0!==t.subPage&&t.subPage.length>0&&(c.subPage=t.subPage),void 0!==t.pssn?c.pssn=t.pssn:a._options.setDefaultPssn&&(c.pssn=0);var l=JSON.stringify(c);if(a._options.compress){var d=a._encodeUtils.compress(l);return a.compressionRatio=Math.max(d.length/l.length,Sr.MINIMAL_COMPRESSION_FACTOR),d}return l},this._env=t,this._encodeUtils=n,this._encryptionManager=r,this._options=o||{},this._corsSafelisted=i,this.compressionRatio=Sr.INITIAL_COMPRESSION_FACTOR,this._domEncoder=new Rr(this._encodeUtils,{forceBase64:!1,compress:!this._options.reportCompress&&this._options.domCompress}),this.name="JSON",this.supportsCompression=!0}),[{key:"isCompressing",value:function(){return!0}},{key:"getContentType",value:function(){return"application/json"}}])}();function Br(e){return Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Br(e)}function Fr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Vr(r.key),r)}}function Ur(e,t,n){return t&&Fr(e.prototype,t),n&&Fr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Vr(e){var t=function(e,t){if("object"!=Br(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Br(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Br(t)?t:t+""}var Hr=Ur((function e(t,n,r,o,i,a){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isCompressing=function(){return!1},this.visitXhr=function(e){e.setRequestHeader("Content-Type","application/x-www-form-urlencoded")},this.visitFetch=function(e){e.append("Content-Type","application/x-www-form-urlencoded")},this.getContentType=function(){return"application/x-www-form-urlencoded"},this.encodeSnapshotHtml=function(e){return s._options.domCompress?{encoded:H.Base64.bytesToBase64(s._encodeUtils.compress(e)),plain:!1,compressed:!0}:{encoded:H.Base64.encode(e),plain:!1,compressed:!1}},this.estimateBeaconSize=function(e){return e},this.encodeEvent=function(e,t,n){var r,o=H.encoding.delimiters.eventParts,i=s._encodeUtils.encodeTimestamp(e),a=s._encodeUtils.encodeEventType(e.type),c=s._valueEncodeBindings[e.type],u=c?c(e.value):e.value;void 0===t&&(t=L.isUndefined(e.selectorExpression)||null==e.selectorExpression?H.encoding.rootSelector:e.selectorExpression),void 0===n&&(n=H.encoding.rootCssSelector);var l=i+o+a+o+t;if(L.isString(u)){s._encryptionManager.stringIsEncrypted(u)?e.shouldEncodeValue=!1:r=e.shouldEncodeValue?H.encoding.valueEncodedPrefix:H.encoding.valueNotEncodedPrefix;var d=e.shouldEncodeValue?H.Base64.encode(u):u;l+=r?o+r+d:o+d}else l+=o+"-";L.isUndefined(e.extraInfo)?l+=o+"-":l+=o+s._encodeUtils.encodeExtraInfo(e),s._options.reportDebugInfo&&!L.isUndefined(e.debugInfo)?l+=o+s._encodeUtils.encodeDebugInfo(e):l+=o+"-";var f="";e.domSnapshot?(f=s._domEncoder.refForEvent(e),l+=o+H.encoding.domSnapshotRefPrefix+f):l+=o+"-",l+=encodeURIComponent(o+n),s._logger.trace("encoding ("+e.type+") "+(L.contains(["webSocketFrame","resourceContent","pageSnapshot"],e.type)?i+o+a+o+"{event string is too long}":l)+(e.subPage.length>0?" [on "+e.subPage+"]":""));var p={event:encodeURIComponent(l),domUpdate:e.domSnapshot,domUpdateRef:f};return p.length=p.event.length+s._domEncoder.estimatedDomUpdateSize(e.domSnapshot),p},this.encodeBeacon=function(e,t,n,r){for(var o=[],i=s._domEncoder.newPayload(),a=0;a<n.length;a++)o.push(n[a].event),n[a].domUpdate&&i.add(n[a].domUpdate,n[a].domUpdateRef);var c="v="+e+(void 0!==t.referrer?"&r="+encodeURIComponent(t.referrer):"")+"&sn="+r+"&p="+t.pageId+(void 0!==t.segment?"&seg="+encodeURIComponent(t.segment):"")+(void 0!==t.subPage?"&sp="+encodeURIComponent(t.subPage):"")+(void 0!==t.pssn?"&pssn="+t.pssn:s._options.setDefaultPssn?"&pssn=0":"")+"&e="+o.join(H.encoding.delimiters.events)+"&dom="+s._base64URIEncoder(s._domEncoder.encode(i))+"&pattr="+s._base64URIEncoder(s._encodeUtils.encodePageAttributes(t.pageAttributes||[])),u=s._encryptionManager.getKeyInfo();return s._options.domRecordEnabled||(c+="&rectype="+encodeURIComponent("analytics")),u&&(c+="&key="+encodeURIComponent(u)),c},this._logger=t,this._encodeUtils=n,this._encryptionManager=r,this._valueEncodeBindings=o,this._options=i||{},this._base64URIEncoder=a||encodeURIComponent,this._domEncoder=new Rr(this._encodeUtils,{forceBase64:!0,compress:this._options.domCompress}),this.name="FORM-URL",this.supportsCompression=!1}));function Wr(e){return Wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wr(e)}function zr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Gr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Gr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function qr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Yr(r.key),r)}}function Kr(e,t,n){return t&&qr(e.prototype,t),n&&qr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yr(e){var t=function(e,t){if("object"!=Wr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Wr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Wr(t)?t:t+""}var Xr=Kr((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._appendToExtraInfo=function(e,t,n,r){L.isString(n)&&e.push(t+"."+r+"_"+n)},this._appendToDebugInfo=function(e,t,n){L.isUndefined(n)||e.push(t+"_"+n)},this.compress=function(e){return H.pako.gzip(e)},this.encodeTimestamp=function(e){var t=e.timestamp;return L.isNumber(t)||(t=L.currentTimestamp()),$t.encodeNumber(t)},this.encodeEventType=function(e){return Yt.encodeEventType?Yt.encodeEventType(e):e},this.encodeExtraInfo=function(e){var n=e.extraInfo;if(L.isUndefined(n))return"";var r,o=[],i=zr(en);try{for(i.s();!(r=i.n()).done;){var a=r.value,s=n[a.name];L.isUndefined(s)||t._appendToExtraInfo(o,a.encodeName,a.encodeFunc(s),a.encodeCode)}}catch(e){i.e(e)}finally{i.f()}return o.join("*")},this.encodeDebugInfo=function(e){var n=e.debugInfo;if(L.isUndefined(n))return"-";var r=[];return t._appendToDebugInfo(r,"s",n.severity),t._appendToDebugInfo(r,"c",n.code),t._appendToDebugInfo(r,"i",n.count),n.msg&&n.count<=3&&t._appendToDebugInfo(r,"m",$t.encodeString(n.msg)),r.join("*")},this.encodePageAttributes=function(e){return(e||[]).map((function(e){return $t.encodeString(e.id)+"_"+$t.encodeString(e.value)})).join("*")}}));function Jr(e){return Jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jr(e)}function Zr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qr(r.key),r)}}function Qr(e){var t=function(e,t){if("object"!=Jr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Jr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Jr(t)?t:t+""}var $r=function(){return function(e,t,n){return t&&Zr(e.prototype,t),n&&Zr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,n,r,o,a){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._samsung7xSafeEncodeUriComponent=function(e){return e.replace(/\+|=|\//gi,s._escapeChar)},this.getEncoder=function(){return Xt.encoder};var c,u=new Xr;if("json"===a.reportEncoding){var l=o&&a.reportCorsForceSafelistedHeaders;c=new Lr(t,u,r,a,l)}else{var d=/SamsungBrowser\/7/gi.test(n.userAgent)?this._samsung7xSafeEncodeUriComponent:encodeURIComponent;c=new Hr(i,u,r,Mr,a,d)}Xt.encoder=c}),[{key:"_escapeChar",value:function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}}])}();function eo(e){return eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eo(e)}function to(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return no(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?no(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function no(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ro(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oo(r.key),r)}}function oo(e){var t=function(e,t){if("object"!=eo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=eo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eo(t)?t:t+""}var io=function(){return function(e,t,n){return t&&ro(e.prototype,t),n&&ro(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,n,r,o,a,s,c,u,l,d,f,p){var m=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._setTimer=function(e,t){var n=m._dispatchInterval-(e-m._lastTimerExpiration),r=m;setTimeout((function(){return r._doDispatch(r._beaconsWithQueryParams.shift(),t)}),n),m._lastTimerExpiration+=m._dispatchInterval},this._dispatchBeacon=function(e,t){var n=(new Date).getTime();-1!==m._dispatchInterval&&m._lastTimerExpiration&&n-m._lastTimerExpiration<m._dispatchInterval?m._setTimer(n,e):(m._lastTimerExpiration=n,m._doDispatch(m._beaconsWithQueryParams.shift(),e,t))},this._doDispatch=function(e,t,n){if(e){var r,o=e.beacon,i=e.queryParams;if(o.storage&&(i.storage=!0),"worker"===m._reportURI)m._reportURI=null===(r=o.metadata)||void 0===r?void 0:r.reportURI;var a=[m._reportURI];m._extraReportURIs.forEach((function(e){-1===a.indexOf(e)&&a.push(e)})),a.forEach((function(e,r){var s,c;null!==(s=o.metadata)&&void 0!==s&&s.reportURI&&(o.metadata.reportURI=e);if(o.encodedEvents=o.encodedEvents.filter((function(e){return t=e,!a.some((function(e){var n,r=btoa(e).slice(0,-1);return(null===(n=t.event)||void 0===n||null===(n=n.value)||void 0===n?void 0:n.indexOf(r))>-1}));var t})),0!==o.encodedEvents.length){var u=m._beaconEncoder.encodeBeacon(m._env.beaconVersion,o.metadata,o.encodedEvents,o.sn);t&&m._maxConcurrentReports--,0===r&&m._bus.emit("beacon:sending",o.sn);m._reporter.dispatch(u,o.metadata,o.sn,i,(function(){m._dispatchCb(null,n)}),n,o.storage,o.beaconStartTime),m._onBeaconDispatched(o.sn,u.length),null!==(c=o.metadata)&&void 0!==c&&c.reportURI&&(o.metadata.reportURI=m._reportURI)}}))}},this._wrapBeaconsWithQueryParams=function(e,t){var n,r=[],o=to(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;i.encodedEvents.length&&r.push({beacon:i,queryParams:t})}}catch(e){o.e(e)}finally{o.f()}return r},this.restoreState=function(e,t){m._downStreamManager.restoreState(e,t)},this.encodeAndDispatch=function(e,t,n,r){try{var o=m._shouldSendAnalyzerId?{aid:t}:{},a=m._downStreamManager.handle(e,n),s=m._wrapBeaconsWithQueryParams(a,o);s.length&&(m._beaconsWithQueryParams=m._beaconsWithQueryParams.concat(s));for(var c=Math.min(m._beaconsWithQueryParams.length,m._maxConcurrentReports),u=0;u<c;u++)m._dispatchBeacon(!0,r),c=Math.min(m._beaconsWithQueryParams.length,m._maxConcurrentReports)}catch(e){i.error("Error while flushing beacons. message:",e.message)}},this._env=t,this._bus=n,this._beaconEncoder=r,this._reporter=o,this._downStreamManager=a,this._shouldSendAnalyzerId=s,this._onBeaconDispatched=u,this._beaconsWithQueryParams=[],this._lastTimerExpiration=null,this._maxConcurrentReports=-1===l?1e3:l,this._dispatchInterval=d,this._extraReportURIs=f||[],this._reportURI=p||"",this._bus.on("removeFromStorage",c.untrack)}),[{key:"_dispatchCb",value:function(e){this._beaconsWithQueryParams.length?this._dispatchBeacon(void 0,e):this._maxConcurrentReports++}}])}();function ao(e){return ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ao(e)}function so(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,uo(r.key),r)}}function co(e,t,n){return t&&so(e.prototype,t),n&&so(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function uo(e){var t=function(e,t){if("object"!=ao(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ao(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ao(t)?t:t+""}var lo=co((function e(t,n,r,o,i,a,s,c){var u=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._createRequest=function(e,t,n,r,o,i,a,s){var c;if((e=e||"").length>u._env.dataLimit)return u._logger.error("beacon size exceeds "+u._env.dataLimit+" bytes"),u._bus.emit("clsDebug","beacon "+t+": actual size is "+e.length+", which exceeds "+u._env.dataLimit+" bytes"),void i();u._config.reportAddUriParamAPI&&(n.extraInfo=n.extraInfo||{},n.extraInfo.api="xhr"),c=u._uriPolicy.apply(n.metadata.reportURI,n.metadata,n.sn,n.extraInfo),void 0===r&&(r=u._config.reportMaxRetries);var l=function(e){var n="Failed POST data for Beacon, sn:"+t+", status:"+e.status;return e.statusText&&(n+=", statusText:"+e.statusText),e.requestData&&(n+=", ContentLength:"+e.requestData.length),n};try{var d=new Headers;u._beaconEncoder.visitFetch(d);var f=new Request(c,{method:"post",headers:d,mode:"cors",body:e,credentials:"include",cls_own:!0}),p=!0;s?u._config.dropExpiredBeacons&&u._config.clearExpiredEventsAfter<Date.now()-s&&(p=!1,u._bus.emit("clsDebug","Beacon dropped, been a while from beacon start time:"+s)):u._bus.emit("clsDebug","Beacon start time missing"),p&&fetch(f).then((function(e){!function(e){u._onBeaconResponse(t,o,!0);var n=e.headers.get("Content-Type");n&&-1!==n.indexOf("application/json")&&e.text().then((function(e){u._onNewConfig(e)})),i()}(e)})).catch((function(){var s;s=f,u._config.reportPostRetry&&r?(r--,u._onBeaconResponse(t,o,!1,s.status),u._logger.log("Failed POST data ("+t+"): "+s.status+"  "+s.statusText+". Retries left: "+r),u._createRequest(e,t,n,r,o,i,a)):(u._bus.emit("clsDebug",l(s)),i())}))}catch(e){u._logger.error("Failed sending POST request ("+t+") to url "+c+": "+e.message,e),i()}},this.dispatch=function(e,t,n,r,o,i,a,s){var c={metadata:t,sn:n,extraInfo:r};u._createRequest(e,n,c,void 0,t.pageId,o,a,s)},this._beaconEncoder=t,this._uriPolicy=n,this._onBeaconResponse=r,this._onNewConfig=o,this._config=i,this._bus=a,this._logger=s,this.name="POST",this._env=c,this.config={maxReportSize:this._config.maxPostReportSize}}));function fo(e){return fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fo(e)}function po(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ho(r.key),r)}}function mo(e,t,n){return t&&po(e.prototype,t),n&&po(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ho(e){var t=function(e,t){if("object"!=fo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=fo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fo(t)?t:t+""}var go=mo((function e(t,n,r,o,a,s,c,u){var l=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.createReporter=function(){var e=function(e){l.bus.emit("handleGatewayResponse",e)};l._config.externalReporting?l.reporter=new dr(l.beaconEncoder,new oe(l.bus,l.env.detectorVersion,l._config.reportAddUriParams,!0),window[l._config.externalReporterObject],l.beaconMapper.onReporterMessage,e,l.detector.asStoppable(),l._config,l.bus,l.env):l._config.reportByPost||l._config.reportByFetch||l._config.domRecordEnabled?l._config.reportByFetch?l.reporter=new lo(l.beaconEncoder,new oe(l.bus,l.env.detectorVersion,l._config.reportAddUriParams,!0),l.beaconMapper.onReporterMessage,e,l._config,l.bus,i,l.env):l.reporter=new ar(l.beaconEncoder,new oe(l.bus,l.env.detectorVersion,l._config.reportAddUriParams,!0),l._ajaxUtils,l.beaconMapper.onReporterMessage,e,l._config,l.bus,l.env):l.reporter=new _r(l.bus,l.env,l._config)},this.connectFlusher=function(){var e=new mn(l.bus,l.env,l._config.clearExpiredEventsAfter),t=[new jt(l.detector,fe.diluteEvents.bind(fe)),new xt(window,l.detector,l.bus,l.env,l._config),new ot(l.bus,l.env,{reportURI:l._config.reportURI,protocolsToSwitch:l._config.protocolsToSwitch}),new et(l.bus,l.detector),new Xe(l.bus,l._config.idleEventTimeInterval,l._config.maxTimeForIdleEvent),e,new Ue];new bn(window,l.bus,t,l._stats,l._config),window!==window.top&&window.MessageChannel&&l._config.reportViaTopWindow?l.flusher=new Jn(window,l.bus,(function(){return l.detector}),new gr(window,l.bus),e,new Cn(window._gbSessionStorage,l.env,l.bus,new ee(l.env.Base64)),l._config):l.flusher=new Gn(window,L,io,l.env,l.bus,l.beaconEncoder,l.reporter,new tr(l.bus,{},1e3),e,new Ge(l.reporter,l.beaconMapper,l.beaconEncoder,l._stats,l.env,l._config),new Cn(window._gbSessionStorage,l.env,l.bus,new ee(l.env.Base64)),l.detector,l._stats,l._config)},this.initialize=function(){if(!L.isUndefined(l._config.reportURI)&&0!==l._config.reportURI.length)return l.bus.on("pageSnapshot:report",l.onPageSnapshot),!0;console.log("ERROR[Glassbox-1401]: Detector script is missing configuration for 'reportURI'. Please add it.")},this.stats=function(){return l._stats},this.onPageSnapshot=function(e){if(l.flusher.flush(),l._config.reportCreateSubSessionCookie){var t=L.uuid();l.gCookieHelper._set(l.env.cookies.sub_session,t),e.cookie=document.cookie,l.bus.emit("session:newSubSessionId",{pageSnapshotSN:e.seq,subSessionId:t})}},this.bus=t,this.env=s,this._ajaxUtils=u,this._config=n,this.beaconEncoder=new $r(s,navigator,r,o.isCorsReporting(),n).getEncoder();var d=this;this.beaconMapper=new ue({},(function(e,t,n,r){n?(d.bus.emit("removeFromStorage",{pageId:e,beaconData:t}),d.bus.emit("beacon:sent",{sn:t.sn,pageId:e})):d.bus.emit("beacon:failed",{sn:t.sn,status:r,pageId:e})})),this._stats={count:0,flushedBytes:0,encodingErrors:[]},this.gCookieHelper=a,this.detector=c,this.createReporter(),this.connectFlusher()}));function yo(e){return yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yo(e)}function vo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_o(r.key),r)}}function bo(e,t,n){return t&&vo(e.prototype,t),n&&vo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _o(e){var t=function(e,t){if("object"!=yo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=yo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yo(t)?t:t+""}var So=bo((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._resolvePath=function(e,t,r){var o,i=e,a=t.split(/\.(?=[^\]]*(?:\[|$))/);for(o=0;o<a.length;o++){var s=void 0,c=a[o],u=c.split("[");if(u.length>1&&(c=u[0],s=u[1].split("]")[0],a[o]=c),i=i[c],void 0!==s&&"*"!==s&&(i=i[s],r&&"object"===yo(i)&&!Array.isArray(i))){var l=i;(i=[])[s]=l}if(null==i||!n._options.emptyStrings&&"string"==typeof i&&!i)return null;if(Array.isArray(i)&&isNaN(parseInt(a[o+1]))&&o<a.length-1)return{array:i,arrayName:a[o],segments:a.slice(o+1,a.length)}}var d=s?a.join("_")+"_"+s:a.join("_");return n._duplicateKeysFullPathMap[d]=!0,{object:i,name:s||a[a.length-1],fullSegments:d}},this._isArrayOfPrimitives=function(e){return Array.isArray(e)&&n._primitiveTypes[yo(e[0])]},this._checkDuplication=function(e,t,r,o){if(r[t]||n._duplicateKeys[t]){if(n._duplicateKeysFullPathMap[o])return r[o]=""+e,r[t]&&(r[n._duplicateKeys[t]]=r[t],delete r[t]),!0}else n._duplicateKeys[t]=o;return!1},this._populateArrayValues=function(e,t,r,o){var i,a;for(i=0;i<e.length;++i){var s=t+"_"+i+"_"+r.join("_"),c=e[i];for(a=0;a<r.length&&c;++a)c=c[r[a]];var u=t+"_"+r.join("_")+"_"+c;n._kvMap[u]||(void 0===c||n._options.emptyStrings&&""===c||(n._primitiveTypes[yo(c)]?(o[s]=""+c,n._kvMap[u]=!0):n._isArrayOfPrimitives(c)&&(o[s]=c.join(","))))}n._kvMap={}},this._populateValues=function(e,t,r,o,i){var a=yo(e);if(n._primitiveTypes[a])(e||"string"!==a||n._options.emptyStrings)&&(n._options.useFullPath?r[i]=""+e:n._checkDuplication(e,t,r,i)||(r[t]=""+e));else if(n._isArrayOfPrimitives(e)){var s=e.join(",");n._options.useFullPath?r[i]=s:n._checkDuplication(s,t,r,i)||(r[t]=s)}else if(o&&"object"===a){var c;for(c in e)if(Object.prototype.hasOwnProperty.call(e,c)){var u=(i||"")+"_"+c;n._duplicateKeysFullPathMap[u]=!0,n._populateValues(e[c],c,r,!1,u)}}},this._populateValuesAll=function(e,t,r){var o=yo(e);if(n._primitiveTypes[o])(e||"string"!==o||n._options.emptyStrings)&&(n._options.useFullPath?r[t]=""+e:n._checkDuplication(e,t,r,t)||(r[t]=""+e));else if(n._isArrayOfPrimitives(e)){var i=e.join(",");n._options.useFullPath?r[t]=i:n._checkDuplication(i,t,r,t)||(r[t]=i)}else if("object"===o&&!(e instanceof Node)){var a;for(a in t=t.length?t+".":t,e)Object.prototype.hasOwnProperty.call(e,a)&&n._populateValuesAll(e[a],t+a,r,!1,"")}},this._resetDuplication=function(){n._duplicateKeysFullPathMap={},n._duplicateKeys={}},this._replaceDataLayerNameInPaths=function(e,t,n){var r,o=[];for(r=0;r<e.length;r++)e[r]!==n&&-1===e[r].indexOf(n+".")||o.push(e[r].replace(n+".",n+"["+t+"]."));return o},this.capture=function(e,t,r,o){var i,a,s={},c=r?n._replaceDataLayerNameInPaths(t,r,o):t;for(n._resetDuplication(),i=0;i<c.length;i++)(a=r?n._resolvePath(e,c[i],!0):n._resolvePath(e,c[i],!1))&&(a.array?n._populateArrayValues(a.array,a.arrayName,a.segments,s):n._populateValues(a.object,a.name,s,!0,a.fullSegments));return Object.keys(s).length?s:null},this.toFlatMap=function(e){if(!e||"object"!==yo(e))return null;n._resetDuplication();var t={};return n._populateValuesAll(e,"",t),Object.keys(t).length?t:null},this._options=t||{emptyStrings:!1,useFullPath:!1},this._primitiveTypes=L.immutableSet("number","string","boolean"),this._duplicateKeysFullPathMap={},this._duplicateKeys={},this._kvMap={}}));function wo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||Co(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Eo(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Co(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Co(e,t){if(e){if("string"==typeof e)return To(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?To(e,t):void 0}}function To(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ko(e){return ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ko(e)}function Io(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Po(r.key),r)}}function Ao(e,t,n){return t&&Io(e.prototype,t),n&&Io(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Po(e){var t=function(e,t){if("object"!=ko(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ko(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ko(t)?t:t+""}var xo=Ao((function e(t,n,r,o,i,a,s,c){var u=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._resolvePath=function(e){var t,n=u._win,r=e.split(/\.(?=[^\]]*(?:\[|$))/);for(t=0;t<r.length;t++){var o,i=r[t].indexOf("[")>-1?r[t].substring(0,r[t].indexOf("[")):r[t],a=null===(o=r[t].match(/\[[^\]*]+\]/))||void 0===o||null===(o=o[0])||void 0===o?void 0:o.slice(1,-1);if(n=n[i],void 0!==a&&(n=n[a]),!n)return u._events.emit("clsDebug","no dataLayer match found for the segment: "+r[t]),null}return{object:n,name:r[r.length-1]}},this._isKeyInList=function(e,t){return t.some((function(t){return new RegExp("^"+(""+t).replace(/\*/g,".*")+"$").test(""+e)}))},this._capture=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new WeakSet,r=ko(e);if(e&&"object"===r){if(n.has(e))return;n.add(e)}if(u._primitiveTypes.has(r)){if("string"===r&&!e.length&&!u._captureEmptyStrings||!L.isEmpty(u._valuesBlacklist)&&u._isKeyInList(e,u._valuesBlacklist)||!L.isEmpty(u._valuesAllowList)&&!u._isKeyInList(e,u._valuesAllowList))return;if(!u._res.get(t)){var o=u._dedupeDataLayerValues?new Set:[];u._res.set(t,o)}u._dedupeDataLayerValues?u._res.get(t).add(e):u._res.get(t).push(e)}else{if(e instanceof Node)return;if(Array.isArray(e)){var i,a=Eo(Array.from(e).entries());try{for(a.s();!(i=a.n()).done;){var s=wo(i.value,2),c=s[0],l=s[1];u._capture(l,t+"_"+c,n)}}catch(e){a.e(e)}finally{a.f()}}else for(var d in e)(!u._isKeyInList(d,u._blacklist)||!L.isEmpty(u._allowList)&&u._isKeyInList(d,u._allowList))&&u._capture(e[d],d,n)}},this.capture=function(e){try{var t=u._resolvePath(e);null!==t&&(u._res=new Map,u._capture(t.object,t.name))}catch(e){u._events.emit("clsDebug","Error while capturing data layer object, "+e.message)}if(!u._res.size)return null;var n,r={},o=Eo(u._res.entries());try{for(o.s();!(n=o.n()).done;){var i=wo(n.value,2),a=i[0],s=i[1];r[a]=u._dedupeDataLayerValues?Array.from(s):s}}catch(e){o.e(e)}finally{o.f()}return r},this._win=t,this._events=n,this._captureEmptyStrings=s,this._res=new Map,this._primitiveTypes=new Set(["number","string","boolean"]),this._dedupeDataLayerValues=c,this._blacklist=r||[],this._valuesBlacklist=o||[],this._allowList=i||[],this._valuesAllowList=a||[]}));function Ro(e){return Ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ro(e)}function Oo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Mo(r.key),r)}}function Mo(e){var t=function(e,t){if("object"!=Ro(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ro(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ro(t)?t:t+""}var No=function(){return function(e,t,n){return t&&Oo(e.prototype,t),n&&Oo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,n,r,o){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.onCapturedDataLayerMap=function(e){e&&Object.keys(e).length&&(i.bus.emit("dataLayerMap",{value:e}),i._stats.captured.push(e))},this.onCapturedMap=function(e){if(e){var t=i.mapKeys(e,(function(e,t){var n=t.substring(t.indexOf("_")+1);return n.substring(n.indexOf("_")+1)}));i.isContained(i.lastThirdPartyCaptureMap,t)||(i.bus.emit("3rdpartymap:scReport",{value:e}),i.lastThirdPartyCaptureMap=Object.assign({},i.lastThirdPartyCaptureMap,t)),i._stats.captured.push(e)}},this.mapKeys=function(e,t){return Object.keys(e).reduce((function(n,r){return n[t(e[r],r,e)]=e[r],n}),{})},this.stats=function(){return i._stats},this._window=t,this.bus=n,this.options=o||{paths:[],captureEmptyStrings:!1,useFullPath:!1},this._isFirstPage=r;var a=[this.options.domRecordEnabled?"domTrackingStarted":"init:loaded"];this.lastThirdPartyCaptureMap={},this.options.captureGlobalObjectsOnSegmentChange&&a.push("segmentChanged"),this.captor=new So({emptyStrings:this.options.captureEmptyStrings,useFullPath:this.options.useFullPath}),this._stats={captured:[]};var s=this;this._captureDatalayer=this.options.dataLayerPath?new xo(this._window,this.bus,this.options.dataLayerBlockList,this.options.dataLayerValuesBlockList,this.options.dataLayerIncludeList,this.options.dataLayerValuesIncludeList,this.options.dataLayerCaptureEmptyStrings,this.options.dedupeDataLayerValues):void 0,a.forEach((function(e){i.bus.on(e,(function(){if("segmentChanged"===e&&(i.lastThirdPartyCaptureMap={}),i.options.paths.length&&i.onCapturedMap(i.captor.capture(i._window,i.options.paths)),i._captureDatalayer&&(!i.options.collectDataLayerOnlyOnFirstPage||i.options.collectDataLayerOnlyOnFirstPage&&i._isFirstPage)&&i.onCapturedDataLayerMap(i._captureDatalayer.capture(i.options.dataLayerPath)),i.options.captureDataLayerArrayPushes&&"segmentChanged"!==e&&i._window[i.options.dataLayerArrayName]&&i._window[i.options.dataLayerArrayName].push){var t=i._window[i.options.dataLayerArrayName].push;i._window[i.options.dataLayerArrayName].push=function(){t.apply(this,arguments),s.bus.emit("dataLayerPush",arguments)}}}))})),this.bus.on("dataLayerPush",(function(){var e=i._window[i.options.dataLayerArrayName].length-1,t=i.options.dataLayerArrayName+"["+e+"]";if(i.options.paths.length&&i.onCapturedMap(i.captor.capture(i._window,i.options.paths,e,i.options.dataLayerArrayName)),i._captureDatalayer){var n=i._captureDatalayer.capture(t);o.sendDatalayerPushUsingCustomEvent&&n?i.bus.emit("customMapEvent",{name:"dataLayerPush",val:n}):i.onCapturedDataLayerMap(n)}})),this.bus.on("api:captureObject",(function(e){i.onCapturedMap(i.captor.toFlatMap(e))})),this.bus.on("sessionTimeoutExpired",(function(){i.lastThirdPartyCaptureMap={}})),this.initialize=function(){return!0}}),[{key:"isContained",value:function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e[n]!==t[n])return!1;return!0}}])}();function jo(e){return jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jo(e)}function Do(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Bo(r.key),r)}}function Lo(e,t,n){return t&&Do(e.prototype,t),n&&Do(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bo(e){var t=function(e,t){if("object"!=jo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=jo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==jo(t)?t:t+""}var Fo=Lo((function e(t,n,r,o,a,s,c){var u=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._interceptAdobeEvent=function(e){var t=[],n=e.detail.responseTokens||e.detail;u._isEmpty(n)||(u._distinct(n).forEach((function(e){t.push({experimentId:e["activity.id"],experimentName:e["activity.name"],variantId:e["experience.id"],variantName:e["experience.name"]}),u._stats.abTesting.success_from_events++})),u._events.isListenToEvent("abTesting")?t.length&&u._events.emit("abTesting",{provider:"adobe",offers:t}):u._events.once("init:preloaded",(function(){t.length&&u._events.emit("abTesting",{provider:"adobe",offers:t})})))},this._isEmpty=function(e){return void 0===e||null==e||e.length<=0},this._key=function(e){var t,n=Object.keys(e)||[],r="";for(t=0;t<n.length;++t)r+=n[t]+e[n[t]];return r},this._distinct=function(e){var t=e.reduce((function(e,t){return e[u._key(t)]=t,e}),{});return Object.keys(t).map((function(e){return t[e]}))},this._isValidResponse=function(e){return e&&e["experience.id"]&&e["experience.name"]&&e["activity.id"]&&e["activity.name"]},this._doExtract=function(e,t){var n,r,o,i=[];for(e instanceof Array||(e=[e]),n=0;n<e.length;n++)if(o=e[n][t])for(r=0;r<o.length;r++){var a=o[r].responseTokens;u._isValidResponse(a)?i.push({variantId:a["experience.id"],variantName:a["experience.name"],experimentId:a["activity.id"],experimentName:a["activity.name"]}):u._stats.abTesting.missingFields++}return i},this._extractTokens=function(e,t,n){var r,o=e;for(r=0;r<t.length;r++)if(!(o=o[t[r]]))return null;return u._doExtract(o,n)},this._onAjaxEnd=function(e){try{if(200<=e.status&&e.status<=202&&e.resContentType&&e.resContentType.indexOf("application/json")>-1){var t,n,r=[];if(e.responseType&&"text"!==e.responseType){if("json"!==e.responseType)return;n=e.response}else n=JSON.parse(e.responseText);for(t=0;t<u._scheme.length;t++)if(new RegExp(u._scheme[t].urlMatcher,"i").test(e.url)&&(r=u._extractTokens(n,u._scheme[t].path,u._scheme[t].tokenContainer))&&r.length){u._events.emit("abTesting",{provider:"adobe",offers:r}),u._stats.abTesting.success++;break}}}catch(e){}},this._extractFromGlobalObject=function(){try{var e=u._window[u._globalObject];if(e&&e.length){var t,n=[];for(t=0;t<e.length;t++){var r=e[t];r&&r.RecipeId&&r.RecipeName&&r.CampaignId&&r.CampaignName&&(n.push({variantId:r.RecipeId,variantName:r.RecipeName,experimentId:r.CampaignId,experimentName:r.CampaignName}),u._stats.abTesting.sucess_from_global_object++)}var o=u;u._events.once("init:preloaded",(function(){n.length&&o._events.emit("abTesting",{provider:"adobe",offers:n})}))}}catch(e){i.error("error during abTesting data extraction from global object. message:",e.message),u._events.emit("clsDebug","error during abTesting data extraction from global object. message:"+e.message)}},this._window=t,this._document=n,this._events=r,this._scheme=o,this._globalObject=c,this._stats=a||{},this._interceptAdobeABEvent=s,this._stats.abTesting={missingFields:0,success:0,success_from_events:0,sucess_from_global_object:0},this._extractFromGlobalObject(),this._interceptAdobeABEvent){var l=this._window.adobe&&this._window.adobe.target&&this._window.adobe.target.event&&this._window.adobe.target.event.REQUEST_SUCCEEDED?this._window.adobe.target.event.REQUEST_SUCCEEDED:"at-request-succeeded";L.addEventHandler(this._document,l,this._interceptAdobeEvent),this._window.addEventListener&&this._window.addEventListener("websdk_request_succeeded",this._interceptAdobeEvent)}else this._events.on("ajax:end",this._onAjaxEnd)})),Uo={uriContainsAnyOf:function(e,t){if(!e)return!1;for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1},tryParseValueMap:function(e,t){for(var n,r,o={},a=e.split("&"),s=!1,c=0;c<a.length;c++)if(2===(n=a[c].split("=")).length)try{if(!t[r=decodeURIComponent(n[0])])continue;o[r]=decodeURIComponent(n[1]),s=!0}catch(e){i.error("error was detected: "+e)}return s?o:void 0}},Vo=Uo;function Ho(e){return Ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ho(e)}function Wo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Go(r.key),r)}}function zo(e,t,n){return t&&Wo(e.prototype,t),n&&Wo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Go(e){var t=function(e,t){if("object"!=Ho(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ho(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ho(t)?t:t+""}var qo=zo((function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._isValidRule=function(e){return!!(e.urlMatcher&&e.attributes&&e.attributes.length)},this._initRules=function(e){if(e.thirdPartyAttributeRules&&!o._hashRuls[e.hash]){var t;for(o._hashRuls[e.hash]=!0,t=0;t<e.thirdPartyAttributeRules.length;t++)o._isValidRule(e.thirdPartyAttributeRules[t])&&o._rulesData.push({rule:e.thirdPartyAttributeRules[t],keySet:L.immutableSet.apply(null,e.thirdPartyAttributeRules[t].attributes||[])});o._isLookBackward&&(o._interceptExistingUrls(o._intercept),o._isLookBackward=!1,o._interceptPreRulesCapturedAjaxPayloads())}},this._intercept=function(e,t,n,r){var a,s,c=[];if(!o._capturedSrc[e]){for(a=0;a<o._rulesData.length;a++)try{Vo.uriContainsAnyOf(e,[o._rulesData[a].rule.urlMatcher])&&(s=Vo.tryParseValueMap(t,o._rulesData[a].keySet))&&(!0!==r.disable3rdPartyInterceptClsDebug&&o._bus.emit("clsDebug","intercept 3rd party from "+n+" with this url: "+e),o._capturedSrc[e]=!0,c.push({urlMatcher:o._rulesData[a].rule.urlMatcher,valueMap:s}))}catch(t){i.error("Error while parsing request for  "+e+" for third party integration: "+t.message,t)}if(o._isLookBackward&&"xhr payload"===n)for(a=0;a<o._preRulesDefaultUrlsPatterns.length;a++)Vo.uriContainsAnyOf(e,[o._preRulesDefaultUrlsPatterns[a]])&&o._preRulesCapturedAjaxPayloads.push({url:e,payload:t,reason:n})}c.length&&(o._bus.isListenToEvent("3rdPartyAttribute")?o._bus.emit("3rdPartyAttribute",c):o._bus.once("init:preloaded",(function(){o._bus.emit("3rdPartyAttribute",c)})))},this._interceptPreRulesCapturedAjaxPayloads=function(){for(var e=0;e<o._preRulesCapturedAjaxPayloads.length;e++)o._intercept(o._preRulesCapturedAjaxPayloads[e].url,o._preRulesCapturedAjaxPayloads[e].payload,o._preRulesCapturedAjaxPayloads[e].reason,o._config)},this.intercept=function(e){var t=(e.src||"").split("?")[1];t&&o._intercept(e.src,t,"old image hook",o._config)},this.interceptURL=function(e){var t=(e||"").split("?")[1];t&&o._intercept(e,t,"image hook",o._config)},this.interceptXhr=function(e){if(o._checkPayload&&e.requestContent)o._intercept(e.url,e.requestContent,"xhr payload",o._config);else{var t=(e.url||"").split("?")[1];t&&o._intercept(e.url,t,"xhr query string",o._config)}},this.interceptBeacon=function(e){if(e){var t=(e||"").split("?")[1];t&&o._intercept(e,t,"beacon query string",o._config)}},this._bus=t,this._config=r||{},this._rulesData=[],this._capturedSrc={},this._isLookBackward=!0,this._hashRuls={},this._checkPayload=r.isCheckPayload,this._preRulesDefaultUrlsPatterns=r.interceptThirdPartyAttributesDefaultUrlsPatterns||[],this._preRulesCapturedAjaxPayloads=[],this._interceptExistingUrls=n,t.on("newRemoteConfig",this._initRules)}));function Ko(e){return Ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ko(e)}function Yo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xo(r.key),r)}}function Xo(e){var t=function(e,t){if("object"!=Ko(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ko(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ko(t)?t:t+""}var Jo=function(){return function(e,t,n){return t&&Yo(e.prototype,t),n&&Yo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._intercept=function(e,t,n){try{if(Vo.uriContainsAnyOf(e,o._options.urlTokens)&&!o._capturedSrc[e]){var r={};if("string"==typeof t){var a=t.trim();if(a.startsWith("{")&&a.endsWith("}")||a.startsWith("[")&&a.endsWith("]"))try{var s=JSON.parse(a);r=o._findKeysInObject(s,o._keySet)}catch(n){o._bus.emit("clsDebug","intercept 3rd party failed for JSON content with this url: "+e),i.error("Error while intercepting 3rd party from JSON content, url: "+e+" , error: "+n.message,n),r=Vo.tryParseValueMap(t,o._keySet)}else r=Vo.tryParseValueMap(t,o._keySet)}r&&Object.keys(r).length>0&&(o._capturedSrc[e]=!0,!0!==o._options.disable3rdPartyInterceptClsDebug&&o._bus.emit("clsDebug","intercept 3rd party from "+n+" with this url: "+e),o._bus.isListenToEvent("3rdpartymap:scReport")?o._bus.emit("3rdpartymap:scReport",{value:r}):o._bus.once("init:preloaded",(function(){o._bus.emit("3rdpartymap:scReport",{value:r})})))}}catch(t){i.error("Error while checking image "+e+" for third party integration: "+t.message,t)}},this.intercept=function(e){var t=(e.src||"").split("?")[1];t&&o._intercept(e.src,t,"old image hook")},this.interceptURL=function(e){var t=(e||"").split("?")[1];t&&o._intercept(e,t,"image hook")},this.interceptXhr=function(e){if(o._options.checkPayload&&e.requestContent)o._intercept(e.url,e.requestContent,"xhr payload");else{var t=(e.url||"").split("?")[1];t&&o._intercept(e.url,t,"xhr query string")}},this.interceptBeacon=function(e){if(e){var t=(e||"").split("?")[1];t&&o._intercept(e,t,"beacon query string")}},this._bus=t,this._options=r||{},this._keySet=L.immutableSet.apply(null,this._options.keys||[]),this._capturedSrc={},n(this._intercept)}),[{key:"_findKeysInObject",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Set(Object.keys(t));if("object"!==Ko(e)||null===e)return n;return function e(t){if("object"===Ko(t)&&null!==t)for(var o in t)r.has(o)&&(o in n||(n[o]=t[o])),e(t[o])}(e),n}}])}();function Zo(e){return Zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zo(e)}function Qo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$o(r.key),r)}}function $o(e){var t=function(e,t){if("object"!=Zo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Zo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Zo(t)?t:t+""}var ei=function(){return function(e,t,n){return t&&Qo(e.prototype,t),n&&Qo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}),null,[{key:"generateAbTestingScheme",value:function(){return[{urlMatcher:"global-mbox",path:[],tokenContainer:"offers"},{urlMatcher:"tt.omtrdc",path:["execute","pageLoad"],tokenContainer:"options"},{urlMatcher:"tt.omtrdc",path:["execute","mboxes"],tokenContainer:"options"}]}}])}();function ti(e){return ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ti(e)}function ni(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oi(r.key),r)}}function ri(e,t,n){return t&&ni(e.prototype,t),n&&ni(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function oi(e){var t=function(e,t){if("object"!=ti(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ti(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ti(t)?t:t+""}var ii=ri((function e(t,n){var r,o=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._getDecisionObject=function(e,t){return e.getDecisionObject({campaignId:t})},this._isABTestingEvent=function(e){return e&&!e.campaign},this._getWhereId=function(e,t,n){for(var r=0;r<e.length;){if(e[r].id===t)return e[r][n];r++}return""},this._checkForMissingAudienceDetails=function(e){return e.some((function(e){return!e.id||!e.name}))},this._onCampaignDecided=function(e){try{var t;if(null!=e&&null!==(t=e.data)&&void 0!==t&&null!==(t=t.campaign)&&void 0!==t&&null!==(t=t.experiments)&&void 0!==t&&t[0]){var n=o._window.optimizely.get("state"),r=[],i=[],a=e.data.decision.variationId,s=e.data.campaign.experiments[0].name,c=e.data.decision.experimentId;if(a&&c){var u=o._getDecisionObject(n,e.data["campaign.id"]);if(o._isABTestingEvent(u)){var l,d=u.variation;null!==(l=d)&&void 0!==l&&l.indexOf("("+a)&&(d=d.split("("+a)[0].trim()),r.push({variantId:a+"",variantName:(d||a)+"",experimentId:c+"",experimentName:(s||c)+""})}else{var f=e.data.campaign.id+"",p=e.data.campaign.name,m=o._getWhereId(e.data.campaign.experiments,c,"name"),h=!!e.data.decision.isCampaignHoldback,g=h?"Holdback":o._getWhereId(o._getWhereId(e.data.campaign.experiments,c,"variations"),a,"name"),y=e.data.audiences||[];a+="";var v={campaignId:f,campaignName:p,experimentId:c+="",experimentName:m,variationId:h?c+"-H":a,variationName:g,audiences:y};o._validatePersonalizationData(v),i.push(v)}}r.length&&o._reportOptimizelyAbTest(r),i.length&&o._reportOptimizelyPersonalizationCampaign(i)}}catch(e){}},this._validatePersonalizationData=function(e){e.audiences.forEach((function(e){e.id=e.id+""})),e.campaignId&&e.campaignName&&e.experimentId&&e.experimentName&&e.variationId&&e.variationName&&!o._checkForMissingAudienceDetails(e.audiences)||(o._bus.emit("clsDebug",{name:"Optimizely Data",message:"Optimizely Personalization data missing at least one property",data:e}),e.campaignName=(e.campaignName||e.campaignId)+"",e.experimentName=(e.experimentName||e.experimentId)+"",e.variationName=(e.variationName||e.variationId)+"",e.audiences.forEach((function(e){e.name=(e.name||e.id)+""})))},this._reportOptimizelyAbTest=function(e){o._bus.isListenToEvent("abTesting")?o._bus.emit("abTesting",{provider:"optimizely",offers:e}):setTimeout((function(){++o._retries,o._retries<=5&&o._reportOptimizelyAbTest(e)}),300)},this._reportOptimizelyPersonalizationCampaign=function(e){if(o._bus.isListenToEvent("personalizationCampaign"))for(var t=0;t<e.length;t++)o._bus.emit("personalizationCampaign",{provider:"optimizely",value:[e[t]]});else setTimeout((function(){++o._retries,o._retries<=5&&o._reportOptimizelyPersonalizationCampaign(e)}),300)},this._checkAndReportOptimizelyData=function(e){var t,n,r,i,a,s=[],c=[],u=e.getCampaignStates({isActive:!0}),l=Object.keys(u);for(t=0;t<l.length;++t)try{var d=o._getDecisionObject(e,l[t]);if(o._isABTestingEvent(d))u[l[t]]&&u[l[t]].variation&&u[l[t]].experiment&&!u[l[t]].isInCampaignHoldback&&(r=u[l[t]].variation.id,i=u[l[t]].variation.name||r,n=u[l[t]].experiment.id,a=u[l[t]].experiment.name||n,r&&n&&s.push({variantId:r+"",variantName:(i||r)+"",experimentId:n+"",experimentName:(a||n)+""}));else if(u[l[t]].experiment&&u[l[t]].variation){var f=u[l[t]].id+"",p=u[l[t]].experiment.campaignName,m=u[l[t]].experiment.id+"",h=u[l[t]].experiment.name,g=!!u[l[t]].isInCampaignHoldback,y={campaignId:f,campaignName:p,experimentId:m,experimentName:h,variationId:g?m+"-H":u[l[t]].variation.id+"",variationName:g?"Holdback":u[l[t]].variation.name,audiences:u[l[t]].audiences||[]};o._validatePersonalizationData(y),c.push(y)}}catch(e){}s.length&&o._reportOptimizelyAbTest(s),c.length&&o._reportOptimizelyPersonalizationCampaign(c)},this._window=t,this._bus=n,this._retries=0,null!=this&&null!==(r=this._window.optimizely)&&void 0!==r&&r.get){var i=this._window.optimizely.get("state");i&&this._checkAndReportOptimizelyData(i)}t.optimizely=t.optimizely||[],t.optimizely.push({type:"addListener",filter:{type:"lifecycle",name:"campaignDecided"},handler:this._onCampaignDecided})}));function ai(e){return ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ai(e)}function si(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ui(r.key),r)}}function ci(e,t,n){return t&&si(e.prototype,t),n&&si(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ui(e){var t=function(e,t){if("object"!=ai(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ai(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ai(t)?t:t+""}var li=ci((function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.handleAnalyticsConfiguration=function(e){e&&!o.isGotConfig&&(o.isGotConfig=!0,o.integrationId=e,o.checkForAppMeasurement())},this.checkForAppMeasurement=function(){o._window.AppMeasurement?o.callAppMeasurementAPI():L.waitingInterval(o._window,"AppMeasurement",o.callAppMeasurementAPI,1e3,o._options.adobeAPIMaxAttempts)},this.callAppMeasurementAPI=function(){if(o._window.s_gi&&o.rsid){var e=o._window.s_gi(o.rsid);e&&o.eVarNumber&&o.integrationId?(e["eVar"+o.eVarNumber]=o.integrationId,e.t?e.t():i.error("## AdobeAnalyticsInterceptor -> callAppMeasurementAPI() -> t function not exist")):i.error("## AdobeAnalyticsInterceptor -> callAppMeasurementAPI() -> trackerObj not exist")}else i.error("## AdobeAnalyticsInterceptor -> callAppMeasurementAPI() -> s_gi function not exist")},this._window=t,this.integrationId,this._options=r,this.rsid=r.adobeRsid,this.eVarNumber=r.adobeEVarNumber,this.isGotConfig=!1;var a=this;n.on("invalidateSession",(function(){a.isGotConfig=!1})),n.on("remoteClseConf",this.handleAnalyticsConfiguration)})),di={DIMENSION:"dimension",SESSION_ID:"gbSessionId",GLASSBOX_INTEGRATION:"Glassbox_Integration"};function fi(e){return fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fi(e)}function pi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hi(r.key),r)}}function mi(e,t,n){return t&&pi(e.prototype,t),n&&pi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function hi(e){var t=function(e,t){if("object"!=fi(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=fi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fi(t)?t:t+""}var gi=mi((function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.handleAnalyticsConfiguration=function(e){e&&!o.isGotConfig&&(o.isGotConfig=!0,o.integrationId=e,o.checkForGoogleFuncs())},this.checkForGoogleFuncs=function(){o.win.gtag||o.win.ga?o.callGoogleAnalyticsAPI():(L.waitingInterval(o.win,"gtag",o.callGoogleAnalyticsAPI,1e3,o.googleAPIMaxAttempts),L.waitingInterval(o.win,"ga",o.callGoogleAnalyticsAPI,1e3,o.googleAPIMaxAttempts))},this.callGoogleAnalyticsAPI=function(){(o.trackingName.length!==o.dimensionIndex.length&&1!==o.dimensionIndex.length||!o.integrationId)&&(i.error("## googleAnalyticsInterceptor -> callGoogleAnalyticsAPI() -> config.googleDimensionIndex array is larger than config.gaMeasurementId or clse not exist"),o.bus.emit("clsDebug","callGoogleAnalyticsAPI",void 0,"config.googleDimensionIndex array is larger than config.gaMeasurementId or clse not exist")),o.trackingName.length===o.dimensionIndex.length&&o.dimensionIndex.length>0&&o.applyAPIByPairs(!1),o.trackingName.length>o.dimensionIndex.length&&1===o.dimensionIndex.length&&o.applyAPIByPairs(!0)},this.applyAPIByPairs=function(e){for(var t=0;t<o.trackingName.length;t++)if(o.win.gtag){var n={custom_map:{},send_page_view:!1};n.custom_map[di.DIMENSION+o.dimensionIndex[e?0:t]]=di.SESSION_ID,o.win.gtag("config",o.trackingName[t],n);var r={non_interaction:!0};r[di.SESSION_ID]=o.integrationId,o.win.gtag("event",di.GLASSBOX_INTEGRATION,r)}else if(o.win.ga){o.win.ga("create",o.trackingName[t],"auto"),o.win.ga("set","cd"+o.dimensionIndex[e?0:t],o.integrationId);var i={non_interaction:!0};i["cd"+o.dimensionIndex[e?0:t]]=di.SESSION_ID,o.win.ga("send",di.GLASSBOX_INTEGRATION,i)}},this.integrationId,this.dimensionIndex=r.googleDimensionIndex,this.trackingName=r.gaMeasurementId,this.isGotConfig=!1,this.win=t,this.googleAPIMaxAttempts=r.googleAPIMaxAttempts,this.bus=n;var a=this;this.bus.on("invalidateSession",(function(){return a.isGotConfig=!1})),this.bus.on("remoteClseConf",this.handleAnalyticsConfiguration)}));function yi(e){return yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yi(e)}function vi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_i(r.key),r)}}function bi(e,t,n){return t&&vi(e.prototype,t),n&&vi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _i(e){var t=function(e,t){if("object"!=yi(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=yi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yi(t)?t:t+""}var Si=bi((function e(t,n,r,o){var i=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._processExperimentData=function(e){var t=i._window.ABTasty&&i._window.ABTasty.getTestsOnPage&&i._window.ABTasty.getTestsOnPage()&&i._window.ABTasty.getTestsOnPage()[e.campaignId],n=t&&t.name,r=t&&t.variationName,o={variantId:""+e.variationId,variantName:""+(r||e.variationId),experimentId:""+e.campaignId,experimentName:""+(n||e.campaignId)};return i._logger.log("ABTasty experiment executed: "+JSON.stringify(o)),o},this._onNewExperiment=function(e){try{i._events.emit("abTesting",{provider:"abtasty",offers:[i._processExperimentData(e.detail)]})}catch(e){i._logger.error("Error in ABTastyInterceptor capturing newly executed experiment",e)}},this._reportExecutedExperiments=function(){var e,t=[],n=i._window.ABTasty&&i._window.ABTasty.eventState&&i._window.ABTasty.eventState.executedCampaign;if(n&&"complete"===n.status){for(e=0;e<n.detail.length;e++)t.push(i._processExperimentData(n.detail[e]));i._events.isListenToEvent("abTesting")?i._events.emit("abTesting",{provider:"abtasty",offers:t}):i._events.once("init:preloaded",(function(){t.length&&i._events.emit("abTesting",{provider:"abtasty",offers:t})}))}},this._window=t,this._events=n,this._logger=r,this._options=o,!this._window.ABTasty||this._window.ABTasty.getAccountSettings){try{this._reportExecutedExperiments()}catch(e){this._logger.error("Error in ABTastyInterceptor capturing previously executed experiments",e)}this._window.addEventListener("abtasty_executedCampaign",this._onNewExperiment)}else this._logger.error("Error in ABTastyInterceptor: unsupported ABTasty tag version prior to 3.0")}));function wi(e){return wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wi(e)}function Ei(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ti(r.key),r)}}function Ci(e,t,n){return t&&Ei(e.prototype,t),n&&Ei(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ti(e){var t=function(e,t){if("object"!=wi(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=wi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wi(t)?t:t+""}var ki=Ci((function e(t,n,r,o,a){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._installInterceptor=function(){var e=s;if(s._interceptors.length){var t,n;s._options.interceptSendBeacon&&(t=s._hookingUtils.hookProto(Navigator.prototype));var r=s._hookingUtils.hookProto(HTMLImageElement.prototype);for(n=0;n<s._interceptors.length;n++){try{r.hookSetPropertyAfter("src",s._interceptors[n].interceptURL)}catch(e){i.error("failed intercepting Image report via constructor. "+e.message,e)}s._options.isListenToAnalyticsAjax&&s._options.interceptAjax&&s._interceptors[n].interceptXhr&&s._bus.on("ajax:send",s._interceptors[n].interceptXhr),t&&t.setHookAfter("sendBeacon",s._interceptors[n].interceptBeacon)}var o=s._window.document.createElement;s._window.document.createElement=function(){var t=o.apply(e._window.document,[].slice.call(arguments));if("string"==typeof arguments[0]){var r=arguments[0].toLowerCase();if("img"===r||"script"===r)for(n=0;n<e._interceptors.length;n++)try{L.addEventHandler(t,"load",e._interceptors[n].intercept.bind(e._interceptors[n],t))}catch(e){i.error("failed intercepting native createElement method. "+e.message,e)}return t}}}},this._onPreLoaded=function(){s._installInterceptor()},this.initialize=function(){s._options.interceptABTesting&&(s._options.interceptAjax||s._options.interceptAdobeABEvent)&&new Fo(s._window,s._document,s._bus,ei.generateAbTestingScheme(),s._stats,s._options.interceptAdobeABEvent,s._options.abTestingGlobalObject),s._options.enableOptimizelyIntegration&&new ii(s._window,s._bus),s._options.enableABTastyIntegration&&new Si(s._window,s._bus,i,s._options),s._options.enableAdobeAnalyticsIntegration&&new li(s._window,s._bus,s._options),s._options.enableGoogleAnalyticsIntegration&&new gi(s._window,s._bus,s._options),s._bus.once("domInit:preloaded",s._onPreLoaded,void 0,10)},this._window=t,this._document=n,this._bus=r,this._options=a,this._stats={},this._hookingUtils=o,this._interceptors=[],this._interceptExistingUrls=function(e){if(t.performance&&t.performance.getEntriesByType){var n,r=t.performance.getEntriesByType("resource");for(n=0;n<r.length;++n)if(r[n]){var o=(r[n].name||"").split("?")[1];o&&e(r[n].name,o,"performance")}}},this._options.interceptThirdPartyAttributes&&this._interceptors.push(new qo(this._bus,this._interceptExistingUrls,this._options)),this._options.SCIntegration&&(this._options.SCIntegrationURLsContainList||[]).length&&(this._options.SCIntegrationKeyList||[]).length&&this._interceptors.push(new Jo(this._bus,this._interceptExistingUrls,{urlTokens:this._options.SCIntegrationURLsContainList,keys:this._options.SCIntegrationKeyList,checkPayload:this._options.isCheckPayload})),this.stats=function(){return s._stats}}));function Ii(e){return Ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ii(e)}function Ai(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xi(r.key),r)}}function Pi(e,t,n){return t&&Ai(e.prototype,t),n&&Ai(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function xi(e){var t=function(e,t){if("object"!=Ii(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ii(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ii(t)?t:t+""}var Ri=Pi((function e(t,n,r,o,a,s){var c=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._onMessage=function(e){"ready"===e.data.type?c._onReadyNotification():c._bus.emit(e.data)},this._onReadyNotification=function(){c._readyNotificationReceived=!0,clearTimeout(c._timeout),c._pageLoadFired&&c._onInitCompleted("ready")},this._onInitCompleted=function(e){c._completed||(c._completed=!0,c._stats.state=e,c._bus.emit("worker:init",c._worker))},this._startWorker=function(e){c._worker.addEventListener("message",c._onMessage),c._worker.postMessage({type:"init",args:[c._config,e,c._gEncryptionManager.getKeyInfo()]}),c._stats.state="started"},this._onPreLoad=function(){try{if(L.browserVersionLargerOrEqual(navigator.userAgent,113,"edg/"))return;var e=(c._config.enableSessionizingByCors||c._gDomainHelper.isCorsReporting())&&!c._config.reportDisableCors;if(c._config.reportInitializeWorkerAsBlob){var t=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",(function(e){"string"==typeof e.data&&(e.data.indexOf("https://")>-1||e.data.indexOf("http://")>-1)&&importScripts(e.data)}))}.toString(),")()"],{type:"application/javascript"}));c._worker=new Worker(t),c._worker.postMessage(c._env.detectorScript.src+"?worker"),setTimeout((function(){return c._startWorker(e)}),500)}else c._worker=new Worker(c._env.detectorScript.src+"?worker"),c._startWorker(e)}catch(e){c._stats.error=e.message,i.error("Failed starting web worker. "+e.message)}},this._onLoad=function(){c._pageLoadFired=!0,c._readyNotificationReceived?c._onInitCompleted("ready"):setTimeout((function(){return c._onInitCompleted("timeout")}),c._READY_MSG_TIMEOUT)},this.initialize=function(){var e=!1;c._config.reportUseWorker&&!c._config.reportPreferSendBeaconAPI||(c._stats.waivingReason="disabled",e=!0),!e&&c._window!==c._window.top&&c._config.reportViaTopWindow&&(c._stats.waivingReason="non-top-window",e=!0),e||c._window.Worker||(c._stats.waivingReason="not-supported",e=!0),e||c._env.detectorScript||(c._stats.waivingReason="no-script",e=!0),e?c._bus.emit("worker:init",void 0):(c._bus.once("init:preloaded",c._onPreLoad),c._bus.once("init:loaded",c._onLoad))},this._window=t,this._bus=n,this._gDomainHelper=r,this._gEncryptionManager=o,this._env=a,this._config=s,this._READY_MSG_TIMEOUT=1e3,this._worker=void 0,this._timeout=void 0,this._completed=!1,this._readyNotificationReceived=!1,this._pageLoadFired=!1,this._stats={state:"init"},this.stats=function(){return c._stats}}));function Oi(e){return Oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oi(e)}function Mi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ji(r.key),r)}}function Ni(e,t,n){return t&&Mi(e.prototype,t),n&&Mi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ji(e){var t=function(e,t){if("object"!=Oi(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Oi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Oi(t)?t:t+""}var Di=Ni((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.onBeaconDispatched=function(e,t){n._worker.postMessage({type:"beaconSent",sn:e,encodedLength:t.length})},this.onBeaconResponse=function(e,t,r,o){n._worker.postMessage({type:"onBeaconResponse",pageId:e,beaconData:t,success:r,requestStatus:o})},this.onWorkerReady=function(){n._worker.postMessage({type:"ready"})},this.onNewConfig=function(e){n._worker.postMessage({type:"newConfig",config:e})},this._worker=t}));function Li(e){return Li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Li(e)}function Bi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ui(r.key),r)}}function Fi(e,t,n){return t&&Bi(e.prototype,t),n&&Bi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ui(e){var t=function(e,t){if("object"!=Li(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Li(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Li(t)?t:t+""}var Vi=Fi((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._onWorkerMessage=function(e){var t=e.data,r=n._handlers[t.type];r&&r.apply(null,t.args)},this.on=function(e,t){n._handlers[e]=t},this._worker=t,this._handlers={},this._worker.addEventListener("message",this._onWorkerMessage,!1)}));function Hi(e){return Hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hi(e)}function Wi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zi(r.key),r)}}function zi(e){var t=function(e,t){if("object"!=Hi(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Hi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Hi(t)?t:t+""}var Gi=function(){return function(e,t,n){return t&&Wi(e.prototype,t),n&&Wi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,n,r,o,i){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.createXMLHTTPObject=function(e,t,n){if(n&&Bn.isSupported()&&Bn.canSend(t))return new Bn;if(!e&&a._preferBeaconAPI&&t&&Bn.isSupported()&&Bn.canSend(t))return a._firstMessageBeaconAPI&&a._xhrAsInitialRequest?(a._firstMessageBeaconAPI=!1,new XMLHttpRequest):new Bn;if(a._selectedFactory)return a._createWith(a._selectedFactory);for(var r,o=0;o<a._factories.length;o++)try{return r=a._createWith(a._factories[o]),a._selectedFactory=a._factories[o],r}catch(e){}return r},this._preferBeaconAPI=r,this._xhrAsInitialRequest=o,this._cordovaSdkReporting=i,this._firstMessageBeaconAPI=!0,this._factories=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],this.env=n,this._selectedFactory=null}),[{key:"_createWith",value:function(e){var t=e();return t.cls_own=!0,t}}])}();function qi(e){return qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qi(e)}function Ki(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xi(r.key),r)}}function Yi(e,t,n){return t&&Ki(e.prototype,t),n&&Ki(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xi(e){var t=function(e,t){if("object"!=qi(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qi(t)?t:t+""}var Ji=Yi((function e(t,n,r,o){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._onInit=function(e,t,n){var r={getKeyInfo:function(){return n},stringIsEncrypted:function(e){return L.startsWith(e,i._env.encryptionPrefix)}},o={on:function(){},once:function(){},off:function(){},emit:function(){}},a=new oe({on:function(){},once:function(){}},i._env.detectorVersion,i._config.reportAddUriParams,i._config.reportByPost),s=new Gi(i._worker,!1,!1,!1),c=new $r(i._env,i._worker.navigator,r,t,i._config).getEncoder(),u=new ue({},i._callbacks.onBeaconResponse),l=new ar(c,a,s,u.onReporterMessage,i._callbacks.onNewConfig,i._config,o,i._env),d=new Ge(l,u,c,i._worker[i._scopeName].stats,i._env,i._config),f=new io(i._env,o,c,l,d,!0,{track:function(){},untrack:function(){},packageEventSets:function(){}},i._callbacks.onBeaconDispatched,i._config.reportMaxConcurrency,i._config.reportTimingBetweenBeacons,void 0,"worker");i._handlers.on("encodeAndDispatch",(function(e,t,n,r){i._stats.incomingEventMessages++;var o=e.map((function(e){return ln.fromJSON?ln.fromJSON(e):new ln(e.id,e.metadata).fromJSON(e)}));f.encodeAndDispatch(o,t,n,r)})),i._handlers.on("restoreState",(function(e,t){i._stats.incomingEventMessages++,d.restoreState(e,t)})),i._handlers.on("updateQueryString",(function(e){a.updateNativeCookies(e)})),i._handlers.on("confHashChange",(function(e){a.setConfigurationHash(e)})),i._handlers.on("clseChange",(function(e){a.setClse(e)})),i._worker[i._scopeName].state="READY",i._callbacks.onWorkerReady()},this._worker=t,this._scopeName=n,this._env=r,this._config=o,this._stats={incomingEventMessages:0},this._worker[this._scopeName]={state:"INIT",stats:this._stats},this._callbacks=new Di(this._worker),this._handlers=new Vi(this._worker),this._handlers.on("init",this._onInit)}));function Zi(e){return Zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zi(e)}function Qi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ea(r.key),r)}}function $i(e,t,n){return t&&Qi(e.prototype,t),n&&Qi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ea(e){var t=function(e,t){if("object"!=Zi(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Zi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Zi(t)?t:t+""}var ta=$i((function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._apply=function(){o._initConfContainer=function(){o._confContainer=o._getCurrentConfig()||{},o._confContainer.configuration&&o._bus.emit("newRemoteConfig",o._confContainer.configuration)},o._getCurrentConfig=function(){var e,t=o._storageAccessor._get("app.conf");if(t)try{e=o._codec.decode(t)}catch(e){i.error("Failed parsing JSON for configuration: "+e.message,e)}return e},o._onWorkerInit=function(){o._confContainer&&o._confContainer.configuration&&o._bus.emit("confHashChange",o._confContainer.configuration.hash)},o._bus.once("init:preloaded",o._initConfContainer),o._bus.on("worker:init",o._onWorkerInit)},this.handle=function(e,t){this._confContainer&&(this._confContainer.configuration&&this._confContainer.configuration.hash!==e.hash||this._confContainer.appId!==t)&&(delete e.remoteConfiguration,this._storageAccessor._set("app.conf",this._codec.encode({configuration:e,appId:t})),this._confContainer.configuration=e,this._confContainer.appId=t,e&&this._bus.emit("newRemoteConfig",e),this._bus.emit("confHashChange",e.hash))},this._bus=t,this._codec=n,this._storageAccessor=r,this._confContainer={},this._apply(),this.testGetCurrentConfig=this._getCurrentConfig,this.testInitConfContainer=this._initConfContainer}));function na(e){return na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},na(e)}function ra(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ia(r.key),r)}}function oa(e,t,n){return t&&ra(e.prototype,t),n&&ra(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ia(e){var t=function(e,t){if("object"!=na(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=na(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==na(t)?t:t+""}var aa=oa((function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._apply=function(){o._initAnalyzerId=function(){o._analyzerId=o._storageAccessor._get("aid"),o._analyzerId&&o._bus.emit("analyzerId",o._analyzerId)},o._storeAnalyzerId=function(){try{o._analyzerId&&o._storageAccessor._set("aid",o._analyzerId)}catch(e){i.error("error: could not set aid to storage. "+e.message)}},o._bus.once("init:loaded",o._initAnalyzerId,void 0,-1),o._bus.on("event:unload",o._storeAnalyzerId)},this.handle=function(e){e&&(this._analyzerId=e,this._bus.emit("analyzerId",this._analyzerId))},this._bus=t,this._env=n,this._storageAccessor=r,this._apply()}));function sa(e){return sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sa(e)}function ca(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,la(r.key),r)}}function ua(e,t,n){return t&&ca(e.prototype,t),n&&ca(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function la(e){var t=function(e,t){if("object"!=sa(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=sa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==sa(t)?t:t+""}var da=ua((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.handle=function(){}}));function fa(e){return fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fa(e)}function pa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ha(r.key),r)}}function ma(e,t,n){return t&&pa(e.prototype,t),n&&pa(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ha(e){var t=function(e,t){if("object"!=fa(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=fa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fa(t)?t:t+""}var ga=ma((function e(t,n,r,o){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._apply=function(){i._initClseContainer=function(){i._bus.emit("askIfMobileUpdatedClse"),i._clseContainer.integrationId=i._cookieHelper._get(decodeURIComponent(i._env.cookies.integrationId)),i._clseContainer.integrationId&&i._bus.emit("remoteClseConf",i._clseContainer.integrationId)},i._onWorkerInit=function(){i._clseContainer.integrationId&&i._bus.emit("clseChange",decodeURIComponent(i._clseContainer.integrationId))},i._removeClse=function(){i._cookieHelper._get(i._env.cookies.integrationId)&&i._cookieHelper.remove(i._env.cookies.integrationId)},i._bus.once("init:preloaded",i._initClseContainer),i._bus.on("worker:init",i._onWorkerInit),i._bus.on("newSessionSet",i._removeClse),i._bus.once("plugin:newSessionSet",i._removeClse),i._bus.on("invalidateSession",i._removeClse),i._bus.on("clseUpdate",(function(e){i.handle({clse:e})})),i._bus.on("updateGatewayClseContainer",(function(){i._clseContainer.byMobile=!0}))},this.handle=function(e){if(e&&e.clse&&!i._clseContainer.byMobile){var t=decodeURIComponent(e.clse);i._clseContainer.integrationId!==t&&(i._clseContainer.integrationId=t,i._clseContainer.byMobile=!1,i._cookieHelper._set(i._env.cookies.integrationId,t),i._bus.emit("remoteClseConf",t))}},this._bus=t,this._codec=n,this._cookieHelper=o,this._clseContainer={integrationId:void 0},this._env=r,this._apply(),this.testGetCurrentClse=this._clseContainer,this.testInitClseContainer=this._initClseContainer}));function ya(e){return ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ya(e)}function va(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_a(r.key),r)}}function ba(e,t,n){return t&&va(e.prototype,t),n&&va(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _a(e){var t=function(e,t){if("object"!=ya(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ya(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ya(t)?t:t+""}var Sa=ba((function e(t,n,r,o){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._apply=function(){i._initRtoContainer=function(){i._bus.emit("askIfMobileUpdateRto"),i._rtoContainer.rto=i._cookieHelper._get(decodeURIComponent(i._env.cookies.rto)),i._rtoContainer.rto&&i._bus.emit("remoteRtoConf",i._rtoContainer.rto)},i._onWorkerInit=function(){i._rtoContainer.rto&&i._bus.emit("rtoChange",decodeURIComponent(i._rtoContainer.rto))},i._removeRto=function(){i._cookieHelper._get(i._env.cookies.rto)&&i._cookieHelper.remove(i._env.cookies.rto),i._rtoContainer={rto:void 0}},i._bus.once("init:preloaded",i._initRtoContainer),i._bus.on("worker:init",i._onWorkerInit),i._bus.on("newSessionSet",i._removeRto),i._bus.once("plugin:newSessionSet",i._removeRto),i._bus.on("invalidateSession",i._removeRto),i._bus.on("rtoUpdate",(function(e){i.handle(e)})),i._bus.on("updateGatewayRtoContainer",(function(){i._rtoContainer.byMobile=!0}))},this.handle=function(e){if(e&&e.rto&&!i._rtoContainer.byMobile){var t=decodeURIComponent(e.rto);(i._rtoContainer.rto!==t||i._cookieHelper._get(decodeURIComponent(i._env.cookies.rto))&&i._cookieHelper._get(decodeURIComponent(i._env.cookies.rto))!==t)&&(i._rtoContainer.rto=t,i._cookieHelper._set(i._env.cookies.rto,t),i._bus.emit("remoteRtoConf",t))}},this._bus=t,this._codec=n,this._cookieHelper=o,this._rtoContainer={rto:void 0},this._env=r,this._apply(),this.testGetCurrentRto=this._rtoContainer,this.testInitRtoContainer=this._initRtoContainer}));function wa(e){return wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wa(e)}function Ea(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ta(r.key),r)}}function Ca(e,t,n){return t&&Ea(e.prototype,t),n&&Ea(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ta(e){var t=function(e,t){if("object"!=wa(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=wa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wa(t)?t:t+""}var ka=Ca((function e(t,n,r,o,a,s,c){var u=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._delegateToManager=function(e,t){var n;try{n=t?e:JSON.parse(e)}catch(e){return void i.error("Failed parsing JSON of response: "+e.message,e)}var r=n.conf||n,o=r.appId;for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&u._handlers[a]&&u._handlers[a].handle(r[a],o);n.clse&&u._handlers.clse.handle(n.clse),n.rto&&u._handlers.rto.handle(n)},this.initialize=function(){},this._base64JsonCodec=new ee(r.Base64),this._gUnboundStorageAccessor=a,this._gSessionStorageAccessor=s,this._handlers={configuration:new ta(n,this._base64JsonCodec,this._gUnboundStorageAccessor),aid:o&&Bn.isSupported()?{handle:function(){}}:new aa(n,r,this._gSessionStorageAccessor),commands:new da,clse:new ga(n,this._base64JsonCodec,r,c),rto:new Sa(n,this._base64JsonCodec,r,c)},n.on("handleGatewayResponse",this._delegateToManager),n.on("handleCorsResponse",(function(e){u._delegateToManager(e,!0)}))}));function Ia(e){return Ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ia(e)}function Aa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Pa(r.key),r)}}function Pa(e){var t=function(e,t){if("object"!=Ia(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ia(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ia(t)?t:t+""}var xa=function(){return function(e,t,n){return t&&Aa(e.prototype,t),n&&Aa(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._sessionId=function(){var e;return function(){return e||(e=o._options.sessionIdFunc()),e}}(),this._invalidate=function(){var e;for(e in o._nativeStorage)0===e.indexOf(o._options.keysPrefix)&&e.indexOf("glassvox")<0&&delete o._nativeStorage[e]},this._destroy=function(){o._invalidate(),o._destroyed=!0},this._get=function(e){var t=o._sessionId();if(t)try{if(t===o._nativeStorage[o._gb_sid_key])return o._nativeStorage[o._gbKey(e)]}catch(e){}},this._set=function(e,t){if(!o._destroyed){var n=o._sessionId();if(n)try{return n!==o._nativeStorage[o._gb_sid_key]&&o._invalidate(),o._nativeStorage[o._gb_sid_key]=n,o._nativeStorage[o._gbKey(e)]=t}catch(e){o._bus.emit("clsDebug","error writing to storage, in BoundStorageAccessor. Exception message: "+e.message)}}},this.remove=function(e){var t=o._sessionId();if(!t)return!0;try{if(t===o._nativeStorage[o._gb_sid_key])return delete o._nativeStorage[o._gbKey(e)]}catch(e){}return!0},this.validateAccessibility=function(e){return L.validateStorageAccessibility(o._nativeStorage,e)},this._bus=t,this._nativeStorage=n||{},this._options=r,this._destroyed=!1,this._gb_sid_key=this._options.keysPrefix+"sid",this._bus.on("GDPR:optOut",this._destroy)}),[{key:"_gbKey",value:function(e){return this._options.keysPrefix+e}}])}();function Ra(e){return Ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ra(e)}function Oa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Na(r.key),r)}}function Ma(e,t,n){return t&&Oa(e.prototype,t),n&&Oa(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Na(e){var t=function(e,t){if("object"!=Ra(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ra(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ra(t)?t:t+""}var ja=Ma((function e(t,n,r,o){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._getPotentialCookieDomains=function(){if("fqdn"===i._options.domainBy)return[""];var e,t=[],n=i._doc.location.host.split(":")[0]||"",r=n.split(".");if(r.length<2)return[""];if(2===r.length)return[n];if(i._options.tldSegmentCount>=2&&i._options.tldSegmentCount<=r.length)return["."+r.slice(-i._options.tldSegmentCount).join(".")];for(e=2;e<r.length;e++)t.push("."+r.slice(-e).join("."));return t},this._readCookie=function(e){var t=new RegExp("[,; ]"+e+"=([^\\s,;]*)","gi").exec(";"+i._doc.cookie);return t&&t[1]||null},this._cookieString=function(e,t,n,r){var o=encodeURIComponent(e)+"="+(t+"").replace(/[^!#-+\--:<-[\]-~]/g,encodeURIComponent);return o+=";path=/",o+=n,i._options.enableSecureCookie&&L.isHTTPS(i._options.reportURI)&&(o+=";Secure",o+=";SameSite=None"),o+=r?";expires="+r.toUTCString():""},this._get=function(e,t){var n=i._cache[e];return void 0===n&&(i._options.allowCookies||t?(n=i._readCookie(e),i._cache[e]=n):n=e===H.cookies.visitor?i._storageAccessor._get(e):i._sessionStorage._get(e)),null===n?void 0:n},this._set=function(e,t,n){if(i._cache[e]=t,i._options.allowCookies)if(n&&(n=n<0?new Date((new Date).setUTCFullYear(2e3)):L.dateFromNow(n)),void 0!==i._effectiveDomainSegment)i._doc.cookie=i._cookieString(e,t,i._effectiveDomainSegment,n),-1===i._doc.cookie.indexOf(e)&&-1===i._doc.cookie.indexOf(t)&&(L.isIE()?console.log("Failed to set cookie while using FQDN."):console.log("%c Failed to set cookie while using FQDN.","color: white; background: red"),i._bus&&i._bus.emit("clsDebug","Failed to set cookie while using FQDN."));else{var r,o,a=!1,s=i._getPotentialCookieDomains();for(r=0;r<s.length;r++)if(o=s[r]?";domain="+s[r]:"",i._doc.cookie=i._cookieString(e,t,o,n),-1!==i._doc.cookie.indexOf(e)&&-1!==i._doc.cookie.indexOf(t)){i._effectiveDomainSegment=o,a=!0;break}a||(L.isIE()?console.log("Failed to set cookie, failed determining TLD for cookies, using FQDN. potential TLDs: "+s.toString()):console.log("%c Failed to set cookie, failed determining TLD for cookies, using FQDN. potential TLDs: "+s.toString(),"color: white; background: red"),i._bus&&i._bus.emit("clsDebug","Failed to set cookie for potential domains: "+s.toString()+" trying FQDN"),i._effectiveDomainSegment="")}else e===H.cookies.visitor?i._storageAccessor._set(e,t):i._sessionStorage._set(e,t)},this.remove=function(e){i._set(e,"",new Date((new Date).setUTCFullYear(2e3)))},this._doc=t,this._bus=n,this._storageAccessor=r,this._options=L.optionsWithDefaults(o,{domainBy:"tld",tldSegmentCount:-1,enableSecureCookie:!0,allowCookies:!0}),this._sessionStorage=new Cn(window._gbSessionStorage,H,n),this._cache={},this._effectiveDomainSegment=void 0}));function Da(e){return Da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Da(e)}function La(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fa(r.key),r)}}function Ba(e,t,n){return t&&La(e.prototype,t),n&&La(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fa(e){var t=function(e,t){if("object"!=Da(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Da(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Da(t)?t:t+""}var Ua=Ba((function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._isCorsReporting=function(e,t,n){if(-1===(t||"").indexOf("://"))return!1;var r=e.createElement("a");if(r.href=t,(/:\d+/gi.test(t)?r.port:"")!==e.location.port)return!0;if(n)return r.hostname!==e.location.hostname;for(var o=e.location.hostname.split("."),i=r.hostname.split("."),a=o.length<=2,s=!1;o.length&&i.length&&!s;)s=o.pop()!==i.pop();var c=(s?1:0)+Math.max(o.length,i.length);return a?0!==c:c>1},this.isCorsReporting=function(){return o.init()},this._document=t,this._reportURI=n,this._fqdnCookie=r,this.init=function(){return o._isCorsReporting(o._document,o._reportURI,o._fqdnCookie)}}));function Va(e){return Va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Va(e)}function Ha(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,za(r.key),r)}}function Wa(e,t,n){return t&&Ha(e.prototype,t),n&&Ha(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function za(e){var t=function(e,t){if("object"!=Va(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Va(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Va(t)?t:t+""}var Ga=Wa((function e(t,n,r,o,i,a,s){var c=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._checkConfigured=function(){return(c._config.valueEncryptById||[]).length>0||(c._config.valueEncryptByClass||[]).length>0||(c._config.domEncryptById||[]).length>0||(c._config.domEncryptByClass||[]).length>0||c._config.valueEncryptionMode===c._env.censorMode.WhiteList},this._onLoad=function(){c._afterLoad=!0,!c._keysStored&&c._symmetricKey&&c._hybridKey&&c._storeKeys(),c._pendingErrors.length&&c._bus.emit("clsDebug","Error: "+c._pendingErrors.join(". Error: "))},this._onTimeout=function(){c._onInitCompleted()},this._onKeyEncrypted=function(e){c._hybridKey=c._env.Base64.bytesToBase64(new Uint8Array(e)),c._onInitCompleted(c._hybridKey),!c._keysStored&&c._afterLoad&&c._storeKeys()},this._onKeyEncryptionFailed=function(e){c._pendingErrors.push(e),c._onInitCompleted(),c._afterLoad&&c._pendingErrors.length&&c._bus.emit("clsDebug","Error: "+c._pendingErrors.join(". Error: "))},this._storeKeys=function(){c._storageAccessor._set("hybrid.key",c._hybridKey),c._storageAccessor._set("symmetric.key",c._env.Base64.bytesToBase64(new Uint8Array(c._symmetricKey))),c._storageAccessor._set("public.key.hash",L.hashcode(c._options.publicKey)),c._keysStored=!0},this._restoreKeys=function(){var e=c._storageAccessor._get("symmetric.key"),t=c._storageAccessor._get("hybrid.key"),n=""+L.hashcode(c._options.publicKey)===c._storageAccessor._get("public.key.hash");return!!(e&&t&&n)&&(c._symmetricKey=new Uint8Array(L.strToBytes(atob(e))),c._onInitCompleted(t),!0)},this._asyncGenerateKeys=function(){var e=new c._nativeCryptoFactory(c._window).nativeCrypto;if(!e)return c._onKeyEncryptionFailed("Current browser does not support crypto interface."),!1;var t=L.strToBytes(atob(c._options.publicKey));return c._symmetricKey=new Uint8Array(16),e.getRandomValues(c._symmetricKey),e.executeEncryptionFlow(t,c._symmetricKey,c._onKeyEncrypted,c._onKeyEncryptionFailed),!0},this._onInitCompleted=function(e){c._initCompleted||(c._initCompleted=!0,c._hybridKey=e,c._hybridKey&&(c._keyInfo=c._options.keyId+"_"+c._hybridKey),setTimeout((function(){c._bus.emit("encryptionReady")}),0))},this._cryptoSubtleExists=function(){return!!(c._window.crypto&&(c._window.crypto.subtle||c._window.crypto.webkitSubtle)||c._window.msCrypto&&c._window.msCrypto.subtle)},this.isEncryptionConfigured=function(){return!!c._isConfigured},this.canUseEncryption=function(){return!!c._keyInfo&&c._cryptoSubtleExists()},this.getEncryptionKey=function(){return c._keyInfo?c._symmetricKey:void 0},this.getKeyInfo=function(){return c._keyInfo?c._keyInfo:void 0},this.stringIsEncrypted=function(e){return L.startsWith(e,c._env.encryptionPrefix)},this._window=t,this._options=s||{},this._bus=n,this._env=r,this._storageAccessor=o,this._nativeCryptoFactory=i,this._config=a,this._isConfigured=this._checkConfigured();var u=this._isConfigured&&!(!this._options.publicKey||!this._options.keyId);if(this._initCompleted=!1,this._afterLoad=!1,this._keysStored=!1,this._pendingErrors=[],this._symmetricKey=void 0,this._hybridKey=void 0,this._keyInfo=void 0,this._startedAt=void 0,u)try{this._startedAt=L.currentTimestamp(),this._restoreKeys()||(this._bus.once("init:loaded",this._onLoad),this._asyncGenerateKeys()&&setTimeout(this._onTimeout,this._options.timeout))}catch(e){this._onKeyEncryptionFailed(e.message||"unknown exception during encryption")}else this._isConfigured?(this._onKeyEncryptionFailed("encryption is not well configured"),console.error("[Glassbox-403]: Encryption configuration error: missing encryption key settings. Sensitive data might be recorded.")):!this._config.useFingerprint&&-1===this._config.incognitoDetectionTimeout||this._config.useFingerprint&&(L.isHybrid()||L.isBridge()||L.isIE())&&-1===this._config.incognitoDetectionTimeout?this._onInitCompleted():this._config.incognitoDetectionTimeout>=0&&!this._config.useFingerprint?this._bus.once("incognitoReady",this._onInitCompleted):this._bus.once("fingerprintReady",this._onInitCompleted);this.testPendingErrors=this._pendingErrors}));function qa(e){return qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qa(e)}function Ka(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xa(r.key),r)}}function Ya(e,t,n){return t&&Ka(e.prototype,t),n&&Ka(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xa(e){var t=function(e,t){if("object"!=qa(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qa(t)?t:t+""}var Ja=Ya((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e){var t,n=this&&this.__extends||(t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},t(e,n)},function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),r=function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.apply(this,t)||this;return Object.create(Error.prototype,{name:{value:"IllegalArgumentError"}}),r}return n(t,e),t}(Error);function o(e,t,n,r,o){var i=e.length-t,a=i<o?i:o;return e.set(n.subarray(r,r+a),t),a}
/**
     * @file {@link http://asmjs.org Asm.js} implementation of the {@link https://en.wikipedia.org/wiki/Advanced_Encryption_Standard Advanced Encryption Standard}.
     * @author Artem S Vybornov <vybornov@gmail.com>
     * @license MIT
     */
var i=function(){var e,t,n=!1;function r(n,r){var o=e[(t[n]+t[r])%255];return 0!==n&&0!==r||(o=0),o}var o,i,a,s,c=!1;function u(){function u(n){var r,o,i;for(o=i=function(n){var r=e[255-t[n]];return 0===n&&(r=0),r}(n),r=0;r<4;r++)i^=o=255&(o<<1|o>>>7);return i^=99}n||function(){e=[],t=[];var r,o,i=1;for(r=0;r<255;r++)e[r]=i,o=128&i,i<<=1,i&=255,128===o&&(i^=27),i^=e[r],t[e[r]]=r;e[255]=e[0],t[0]=0,n=!0}(),o=[],i=[],a=[[],[],[],[]],s=[[],[],[],[]];for(var l=0;l<256;l++){var d=u(l);o[l]=d,i[d]=l,a[0][l]=r(2,d)<<24|d<<16|d<<8|r(3,d),s[0][d]=r(14,l)<<24|r(9,l)<<16|r(13,l)<<8|r(11,l);for(var f=1;f<4;f++)a[f][l]=a[f-1][l]>>>8|a[f-1][l]<<24,s[f][d]=s[f-1][d]>>>8|s[f-1][d]<<24}c=!0}var l=function(e,t){c||u();var n=new Uint32Array(t);n.set(o,512),n.set(i,768);for(var r=0;r<4;r++)n.set(a[r],4096+1024*r>>2),n.set(s[r],8192+1024*r>>2);var l=function(e,t,n){"use asm";var r=0,o=0,i=0,a=0,s=0,c=0,u=0,l=0,d=0,f=0,p=0,m=0,h=0,g=0,y=0,v=0,b=0,_=0,S=0,w=0,E=0;var C=new e.Uint32Array(n),T=new e.Uint8Array(n);function k(e,t,n,s,c,u,l,d){e=e|0;t=t|0;n=n|0;s=s|0;c=c|0;u=u|0;l=l|0;d=d|0;var f=0,p=0,m=0,h=0,g=0,y=0,v=0,b=0;f=n|0x400,p=n|0x800,m=n|0xc00;c=c^C[(e|0)>>2],u=u^C[(e|4)>>2],l=l^C[(e|8)>>2],d=d^C[(e|12)>>2];for(b=16;(b|0)<=s<<4;b=b+16|0){h=C[(n|c>>22&1020)>>2]^C[(f|u>>14&1020)>>2]^C[(p|l>>6&1020)>>2]^C[(m|d<<2&1020)>>2]^C[(e|b|0)>>2],g=C[(n|u>>22&1020)>>2]^C[(f|l>>14&1020)>>2]^C[(p|d>>6&1020)>>2]^C[(m|c<<2&1020)>>2]^C[(e|b|4)>>2],y=C[(n|l>>22&1020)>>2]^C[(f|d>>14&1020)>>2]^C[(p|c>>6&1020)>>2]^C[(m|u<<2&1020)>>2]^C[(e|b|8)>>2],v=C[(n|d>>22&1020)>>2]^C[(f|c>>14&1020)>>2]^C[(p|u>>6&1020)>>2]^C[(m|l<<2&1020)>>2]^C[(e|b|12)>>2];c=h,u=g,l=y,d=v}r=C[(t|c>>22&1020)>>2]<<24^C[(t|u>>14&1020)>>2]<<16^C[(t|l>>6&1020)>>2]<<8^C[(t|d<<2&1020)>>2]^C[(e|b|0)>>2],o=C[(t|u>>22&1020)>>2]<<24^C[(t|l>>14&1020)>>2]<<16^C[(t|d>>6&1020)>>2]<<8^C[(t|c<<2&1020)>>2]^C[(e|b|4)>>2],i=C[(t|l>>22&1020)>>2]<<24^C[(t|d>>14&1020)>>2]<<16^C[(t|c>>6&1020)>>2]<<8^C[(t|u<<2&1020)>>2]^C[(e|b|8)>>2],a=C[(t|d>>22&1020)>>2]<<24^C[(t|c>>14&1020)>>2]<<16^C[(t|u>>6&1020)>>2]<<8^C[(t|l<<2&1020)>>2]^C[(e|b|12)>>2]}function I(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;k(0x0000,0x0800,0x1000,E,e,t,n,r)}function A(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0;k(0x0400,0x0c00,0x2000,E,e,r,n,t);i=o,o=a,a=i}function P(e,t,n,d){e=e|0;t=t|0;n=n|0;d=d|0;k(0x0000,0x0800,0x1000,E,s^e,c^t,u^n,l^d);s=r,c=o,u=i,l=a}function x(e,t,n,d){e=e|0;t=t|0;n=n|0;d=d|0;var f=0;k(0x0400,0x0c00,0x2000,E,e,d,n,t);f=o,o=a,a=f;r=r^s,o=o^c,i=i^u,a=a^l;s=e,c=t,u=n,l=d}function R(e,t,n,d){e=e|0;t=t|0;n=n|0;d=d|0;k(0x0000,0x0800,0x1000,E,s,c,u,l);s=r=r^e,c=o=o^t,u=i=i^n,l=a=a^d}function O(e,t,n,d){e=e|0;t=t|0;n=n|0;d=d|0;k(0x0000,0x0800,0x1000,E,s,c,u,l);r=r^e,o=o^t,i=i^n,a=a^d;s=e,c=t,u=n,l=d}function M(e,t,n,d){e=e|0;t=t|0;n=n|0;d=d|0;k(0x0000,0x0800,0x1000,E,s,c,u,l);s=r,c=o,u=i,l=a;r=r^e,o=o^t,i=i^n,a=a^d}function N(e,t,n,s){e=e|0;t=t|0;n=n|0;s=s|0;k(0x0000,0x0800,0x1000,E,d,f,p,m);m=~v&m|v&m+1;p=~y&p|y&p+((m|0)==0);f=~g&f|g&f+((p|0)==0);d=~h&d|h&d+((f|0)==0);r=r^e;o=o^t;i=i^n;a=a^s}function j(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var o=0,i=0,a=0,d=0,f=0,p=0,m=0,h=0,g=0,y=0;e=e^s,t=t^c,n=n^u,r=r^l;o=b|0,i=_|0,a=S|0,d=w|0;for(;(g|0)<128;g=g+1|0){if(o>>>31){f=f^e,p=p^t,m=m^n,h=h^r}o=o<<1|i>>>31,i=i<<1|a>>>31,a=a<<1|d>>>31,d=d<<1;y=r&1;r=r>>>1|n<<31,n=n>>>1|t<<31,t=t>>>1|e<<31,e=e>>>1;if(y)e=e^0xe1000000}s=f,c=p,u=m,l=h}function D(e){e=e|0;E=e}function L(e,t,n,s){e=e|0;t=t|0;n=n|0;s=s|0;r=e,o=t,i=n,a=s}function B(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;s=e,c=t,u=n,l=r}function F(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;d=e,f=t,p=n,m=r}function U(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;h=e,g=t,y=n,v=r}function V(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;m=~v&m|v&r,p=~y&p|y&n,f=~g&f|g&t,d=~h&d|h&e}function H(e){e=e|0;if(e&15)return-1;T[e|0]=r>>>24,T[e|1]=r>>>16&255,T[e|2]=r>>>8&255,T[e|3]=r&255,T[e|4]=o>>>24,T[e|5]=o>>>16&255,T[e|6]=o>>>8&255,T[e|7]=o&255,T[e|8]=i>>>24,T[e|9]=i>>>16&255,T[e|10]=i>>>8&255,T[e|11]=i&255,T[e|12]=a>>>24,T[e|13]=a>>>16&255,T[e|14]=a>>>8&255,T[e|15]=a&255;return 16}function W(e){e=e|0;if(e&15)return-1;T[e|0]=s>>>24,T[e|1]=s>>>16&255,T[e|2]=s>>>8&255,T[e|3]=s&255,T[e|4]=c>>>24,T[e|5]=c>>>16&255,T[e|6]=c>>>8&255,T[e|7]=c&255,T[e|8]=u>>>24,T[e|9]=u>>>16&255,T[e|10]=u>>>8&255,T[e|11]=u&255,T[e|12]=l>>>24,T[e|13]=l>>>16&255,T[e|14]=l>>>8&255,T[e|15]=l&255;return 16}function z(){I(0,0,0,0);b=r,_=o,S=i,w=a}function G(e,t,n){e=e|0;t=t|0;n=n|0;var s=0;if(t&15)return-1;while((n|0)>=16){K[e&7](T[t|0]<<24|T[t|1]<<16|T[t|2]<<8|T[t|3],T[t|4]<<24|T[t|5]<<16|T[t|6]<<8|T[t|7],T[t|8]<<24|T[t|9]<<16|T[t|10]<<8|T[t|11],T[t|12]<<24|T[t|13]<<16|T[t|14]<<8|T[t|15]);T[t|0]=r>>>24,T[t|1]=r>>>16&255,T[t|2]=r>>>8&255,T[t|3]=r&255,T[t|4]=o>>>24,T[t|5]=o>>>16&255,T[t|6]=o>>>8&255,T[t|7]=o&255,T[t|8]=i>>>24,T[t|9]=i>>>16&255,T[t|10]=i>>>8&255,T[t|11]=i&255,T[t|12]=a>>>24,T[t|13]=a>>>16&255,T[t|14]=a>>>8&255,T[t|15]=a&255;s=s+16|0,t=t+16|0,n=n-16|0}return s|0}function q(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;if(t&15)return-1;while((n|0)>=16){Y[e&1](T[t|0]<<24|T[t|1]<<16|T[t|2]<<8|T[t|3],T[t|4]<<24|T[t|5]<<16|T[t|6]<<8|T[t|7],T[t|8]<<24|T[t|9]<<16|T[t|10]<<8|T[t|11],T[t|12]<<24|T[t|13]<<16|T[t|14]<<8|T[t|15]);r=r+16|0,t=t+16|0,n=n-16|0}return r|0}var K=[I,A,P,x,R,O,M,N];var Y=[P,j];return{set_rounds:D,set_state:L,set_iv:B,set_nonce:F,set_mask:U,set_counter:V,get_state:H,get_iv:W,gcm_init:z,cipher:G,mac:q}}({Uint8Array:Uint8Array,Uint32Array:Uint32Array},e,t);return l.set_key=function(e,t,r,i,a,s,c,u,d){var f=n.subarray(0,60);n.subarray(256,316),f.set([t,r,i,a,s,c,u,d]);for(var p=e,m=1;p<4*e+28;p++){var h=f[p-1];(p%e===0||8===e&&p%e===4)&&(h=o[h>>>24]<<24^o[h>>>16&255]<<16^o[h>>>8&255]<<8^o[255&h]),p%e===0&&(h=h<<8^h>>>24^m<<24,m=m<<1^(128&m?27:0)),f[p]=f[p-e]^h}l.set_rounds(e+5)},l};return l.ENC={ECB:0,CBC:2,CFB:4,OFB:6,CTR:7},l.MAC={CBC:0,GCM:1},l.HEAP_DATA=16384,l}(),a=function(){function e(e,t,n,o,a,s){void 0===n&&(n=!0),this.pos=0,this.len=0,this.mode=o,this.heap=a||function(e,t){var n=e?e.byteLength:t||65536;if(4095&n||n<=0)throw new Error("heap size must be a positive integer and a multiple of 4096");return e||new Uint8Array(new ArrayBuffer(n))}().subarray(i.HEAP_DATA),this.asm=s||new i(null,this.heap.buffer),this.pos=0,this.len=0;var c=e.length;if(16!==c&&24!==c&&32!==c)throw new r("illegal key size");var u=new DataView(e.buffer,e.byteOffset,e.byteLength);if(this.asm.set_key(c>>2,u.getUint32(0),u.getUint32(4),u.getUint32(8),u.getUint32(12),c>16?u.getUint32(16):0,c>16?u.getUint32(20):0,c>24?u.getUint32(24):0,c>24?u.getUint32(28):0),void 0!==t){if(16!==t.length)throw new r("illegal iv size");var l=new DataView(t.buffer,t.byteOffset,t.byteLength);this.asm.set_iv(l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12))}else this.asm.set_iv(0,0,0,0);this.padding=n}return e.prototype.AES_Encrypt_process=function(e){if(!function(e){return e instanceof Uint8Array}(e))throw new TypeError("data isn't of expected type");for(var t=this.asm,n=this.heap,r=i.ENC[this.mode],a=i.HEAP_DATA,s=this.pos,c=this.len,u=0,l=e.length||0,d=0,f=0,p=new Uint8Array(c+l&-16);l>0;)c+=f=o(n,s+c,e,u,l),u+=f,l-=f,(f=t.cipher(r,a+s,c))&&p.set(n.subarray(s,s+f),d),d+=f,f<c?(s+=f,c-=f):(s=0,c=0);return this.pos=s,this.len=c,p},e.prototype.AES_Encrypt_finish=function(){var e=this.asm,t=this.heap,n=i.ENC[this.mode],o=i.HEAP_DATA,a=this.pos,s=this.len,c=16-s%16,u=s;if(this.hasOwnProperty("padding")){if(this.padding){for(var l=0;l<c;++l)t[a+s+l]=c;u=s+=c}else if(s%16)throw new r("data length must be a multiple of the block size")}else s+=c;var d=new Uint8Array(u);return s&&e.cipher(n,o+a,s),u&&d.set(t.subarray(a,a+u)),this.pos=0,this.len=0,d},e}();e.AES_CBC=function(){function e(e,t,n,r){void 0===n&&(n=!0),this.aes=r||new a(e,t,n,"CBC")}return e.encrypt=function(t,n,r,o){return void 0===r&&(r=!0),new e(n,o,r).encrypt(t)},e.prototype.encrypt=function(e){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=e.reduce((function(e,t){return e+t.length}),0),r=new Uint8Array(n),o=0,i=0;i<e.length;i++)r.set(e[i],o),o+=e[i].length;return r}(this.aes.AES_Encrypt_process(e),this.aes.AES_Encrypt_finish())},e}()}(t)}));function Za(e){return Za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Za(e)}function Qa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,es(r.key),r)}}function $a(e,t,n){return t&&Qa(e.prototype,t),n&&Qa(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function es(e){var t=function(e,t){if("object"!=Za(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Za(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Za(t)?t:t+""}var ts=$a((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.executeEncryptionFlow=function(e,t,r,o){n._subtle.importKey("spki",e,{name:"RSA-OAEP",hash:"SHA-1"},!1,["encrypt"]).then((function(e){n._subtle.encrypt({name:"RSA-OAEP",hash:"SHA-1"},e,t).then((function(e){r(e)})).catch((function(e){o(e.message)}))})).catch((function(e){o(e.message)}))},this.getRandomValues=function(e){return n._crypto.getRandomValues(e)},this._crypto=t.crypto,this._subtle=this._crypto.subtle||this._crypto.webkitSubtle}));function ns(e){return ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ns(e)}function rs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,is(r.key),r)}}function os(e,t,n){return t&&rs(e.prototype,t),n&&rs(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function is(e){var t=function(e,t){if("object"!=ns(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ns(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ns(t)?t:t+""}var as=os((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.executeEncryptionFlow=function(e,t,r,o){var i,a;(i=n._subtle.importKey("spki",e,{name:"RSA-OAEP",hash:{name:"SHA-1"}},!1,["encrypt"])).onerror=function(e){o(e.message)},i.oncomplete=function(e){(a=n._subtle.encrypt({name:"RSA-OAEP",hash:{name:"SHA-1"}},e.target.result,t)).onerror=function(e){o(e.message)},a.oncomplete=function(e){var t=e.target.result;r(t)}}},this.getRandomValues=function(e){return n._crypto.getRandomValues(e)},this._crypto=t.msCrypto,this._subtle=t.msCrypto.subtle}));function ss(e){return ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ss(e)}function cs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ls(r.key),r)}}function us(e,t,n){return t&&cs(e.prototype,t),n&&cs(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ls(e){var t=function(e,t){if("object"!=ss(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ss(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ss(t)?t:t+""}var ds=us((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.nativeCrypto=null,t.crypto&&(t.crypto.subtle||t.crypto.webkitSubtle)?this.nativeCrypto=new ts(t):t.msCrypto&&t.msCrypto.subtle&&(this.nativeCrypto=new as(t))}));function fs(e){return fs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fs(e)}function ps(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hs(r.key),r)}}function ms(e,t,n){return t&&ps(e.prototype,t),n&&ps(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function hs(e){var t=function(e,t){if("object"!=fs(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=fs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fs(t)?t:t+""}var gs=ms((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._trySwitchToFallback=function(e){return r._effectiveHandlers[e]=r._censorScheme.fallbackHandlers[e]||r._effectiveHandlers[e],r._effectiveHandlers[e]},this.censor=function(e,t){var n,o,a=e.value;for(n=0;n<r._effectiveHandlers.length;n++){(o=r._effectiveHandlers[n]).isAvailable()||(o=r._trySwitchToFallback(n));try{a=o.censor(e,t)}catch(o){i.error("failed censoring value, switching to fallback: "+o.message,o),a=r._trySwitchToFallback(n).censor(e,t)}if(a!==e.value)return a}return a},this.isCensored=function(e,t){var n;for(n=0;n<r._effectiveHandlers.length;n++)if(r._effectiveHandlers[n].isCensored(e,t))return!0;return!1},this._censorScheme=n,this._effectiveHandlers=this._censorScheme.handlers}));function ys(e){return ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ys(e)}function vs(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return bs(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bs(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function bs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function _s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ws(r.key),r)}}function Ss(e,t,n){return t&&_s(e.prototype,t),n&&_s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ws(e){var t=function(e,t){if("object"!=ys(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ys(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ys(t)?t:t+""}var Es=Ss((function e(t,n,r,o,i,a){var s=this;function c(e,t,n){var r,o,i=[],s=vs(e);try{for(s.s();!(o=s.n()).done;){var c=o.value;if(1===(i=c.split("*")).length)t.push(c);else if(2===i.length||3===i.length)try{r=new RegExp("(^|\\s)"+i.join(".*")+"($|\\s)"),n.push(r)}catch(e){a.printErrorMsg("exception when creating a regular expression")}else a.printErrorMsg("more than two wildcards in string")}}catch(e){s.e(e)}finally{s.f()}}!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._checkSelector=function(e,t){var n,r=vs(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(e&&e.nodeType===window.Node.ELEMENT_NODE&&L.elementMatches(e,o))return o}}catch(e){r.e(e)}finally{r.f()}},this.isCensored=function(t,n){var r=n?t.parentElement:t;if(!L.isEditableInput(r)&&!s._shouldCensorNonEditableInputTypes(r))return!1;if(r.hasAttribute(s._options.valueCensorIgnoreAttribute))return!1;var o=s._options.valueCensorshipMode===s._envCensorMode.WhiteList;if(r.hasAttribute(s._censorAttribute)||L.hasClassName(r,s._censorAttribute)?o=!0:(s._valueCensorIdsWithoutwildcards.length&&L.contains(s._valueCensorIdsWithoutwildcards,L.getElementId(r))||s._valueCensorClassesWithoutwildcards.length&&L.hasOneOfClassNames(r,s._valueCensorClassesWithoutwildcards)||s._valueCensorSelectorsWithoutwildcards.length&&s._checkSelector(r,s._valueCensorSelectorsWithoutwildcards)||s._regexpValueCensorIds.length&&e.getMatchingAttributeFromRegexpArray(L.getElementId(r),s._regexpValueCensorIds)||s._regexpValueCensorClasses.length&&e.getMatchingAttributeFromRegexpArray(L.getClass(r),s._regexpValueCensorClasses))&&(o=!o),o){var i=t.getAttribute("gbid")||t._gbid;i&&!s.maskedElementsAlreadyLogged[i]&&(s.maskedElementsAlreadyLogged[i]=!0)}return o},this.censor=function(e,t){return e._gbValuesToMask?s.isCensored(e,t)?s._censorValueOf(e.value,void 0,s._options.valueMaskingChar,e._gbValuesToMask):e.value:s.isCensored(e,t)?s._censorValueOf(e.value,void 0,s._options.valueMaskingChar):e.value},this.isAvailable=function(){return s._isAvailable()},this.bus=t,this.maskedElementsAlreadyLogged={},this._censorValueOf=n.censorValueOf,this._isAvailable=n.isAvailable,this._envCensorMode=r,this._censorAttribute=o,this._valueCensorIdsWithoutwildcards=[],this._valueCensorClassesWithoutwildcards=[],this._regexpValueCensorIds=[],this._regexpValueCensorClasses=[],this._valueCensorSelectorsWithoutwildcards=[],this._options=i||{},this._options.valueCensorIds&&c(this._options.valueCensorIds,this._valueCensorIdsWithoutwildcards,this._regexpValueCensorIds),this._options.valueCensorClasses&&c(this._options.valueCensorClasses,this._valueCensorClassesWithoutwildcards,this._regexpValueCensorClasses),this._options.valueCensorSimpleSelectors&&function(e,t){var n,r=vs(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;a.validateSelector(o)&&t.push(o)}}catch(e){r.e(e)}finally{r.f()}}(this._options.valueCensorSimpleSelectors,this._valueCensorSelectorsWithoutwildcards),this._options.autoCensorPredicate=this._options.autoCensorPredicate||function(){return!1},this._options.valueCensorNonEditableInputTypes=L.immutableSet.apply(null,L.arrayToLowerCase(this._options.valueMaskNonEditableInputTypes||[])),this._shouldCensorNonEditableInputTypes=function(e){if("INPUT"===e.tagName){var t=(e.getAttribute("type")||"").toLowerCase();return this._options.valueCensorNonEditableInputTypes[t]}return!1}}));function Cs(e){return Cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cs(e)}function Ts(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Is(r.key),r)}}function ks(e,t,n){return t&&Ts(e.prototype,t),n&&Ts(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Is(e){var t=function(e,t){if("object"!=Cs(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Cs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Cs(t)?t:t+""}Es.getMatchingAttributeFromRegexpArray=function(e,t){var n,r=vs(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.test(e))return o}}catch(e){r.e(e)}finally{r.f()}};var As=ks((function e(t,n,r,o){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._maskingSpecFor=function(e){for(var t,n=0;n<i._bundles.length;n++)if((t=i._bundles[n](e)).doMask)return t;return{}},this.isCensored=function(e){return!!i._maskingSpecFor.call(i,e).doMask},this.censor=function(e){var t=i._maskingSpecFor.call(i,e);return t.doMask?(i._cb&&i._cb(e,t.cause,t.valuesToMask),t.valuesToMask?i._maskingUtils.censorValueOf(e.value,t.keepLastDigits,t.maskingChar||i._options.ccMaskingChar,t.valuesToMask):i._maskingUtils.censorValueOf(e.value,t.keepLastDigits,t.maskingChar||i._options.ccMaskingChar)):e.value},this.isAvailable=function(){return!0},this._maskingUtils=t,this._bundles=n,this._cb=r,this._options=o||{}}));function Ps(e){return Ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ps(e)}function xs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Os(r.key),r)}}function Rs(e,t,n){return t&&xs(e.prototype,t),n&&xs(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Os(e){var t=function(e,t){if("object"!=Ps(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ps(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ps(t)?t:t+""}var Ms=Rs((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.validateSelector=function(e){try{return document.querySelector(e),!0}catch(t){return n.printErrorMsg("selector not valid"),setTimeout((function(){n._bus.emit("clsDebugError",{source:"maskingConfiguration",context:e})}),0),!1}},this.printErrorMsg=function(e){console.error("[Glassbox-403]: Error while processing configuration. Error cause: "+e)},this._bus=t})),Ns={MASKING_CHAR:"*",censorValueOf:function(e,t,n,r){var o;if(e=""+(e||""),(t||0)>0&&(o=Math.min(e.length,t)),r){var i,a,s=e;for((t||0)>0&&(o=Math.min(e.length,t)),i=0;i<r.length;++i)o>0?(a=new Array(r[i].length-o+1).join(n||Ns.MASKING_CHAR),s=s.replace(r[i].substring(0,r[i].length-o),a)):(a=new Array(r[i].length+1).join(n||Ns.MASKING_CHAR),s=s.replace(r[i],a));if(s.indexOf(a)>-1)return s}return o>0?new Array(e.length-o+1).join(n||Ns.MASKING_CHAR)+e.substring(e.length-o):new Array(e.length+1).join(n||Ns.MASKING_CHAR)},censorValueUsingRegex:function(e,t,n){var r=t.join("|"),o=!1;try{o=new RegExp(r,"g")}catch(t){return console.error("[Glassbox-406]: Error while processing regex for masking"),e}if(o)for(var i;null!==(i=o.exec(e));){var a=new Array(o.lastIndex+1-i.index).join(n||Ns.MASKING_CHAR);e=e.substring(0,i.index)+a+e.substring(o.lastIndex)}return e},isAvailable:function(){return!0}},js=Ns;function Ds(e){return Ds="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ds(e)}function Ls(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fs(r.key),r)}}function Bs(e,t,n){return t&&Ls(e.prototype,t),n&&Ls(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fs(e){var t=function(e,t){if("object"!=Ds(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ds(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ds(t)?t:t+""}var Us=Bs((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._onDomMutation=function(e){var t=!1,r=n;"childList"===e.type&&n._ccFound&&L.forEach(e.addedNodes,(function(e){r._forceMaskedTags[e.tagName]&&(t||r._findOwner(e)._gbForceMasking)&&(t=!0,e._gbForceMasking=!0)}))},this._markInputs=function(e){for(var t=e.querySelectorAll("input, select, textarea"),n=0;n<t.length;++n)t[n]._gbForceMasking=!0},this._findOwner=function(e){for(;L.parentNode(e);)if("FORM"===(e=L.parentNode(e)).tagName)return e;return e},this.markOwnerAndInputs=function(e,t){e._gbValuesToMask=t,n._ccFound=!0;var r=n._findOwner(e);r._gbForceMasking=!0,n._markInputs(r)},this._bus=t,this._ccFound=!1,this._forceMaskedTags={INPUT:!0,SELECT:!0,TEXTAREA:!0},this._bus.on("domMutation",this._onDomMutation)}));function Vs(e){return Vs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vs(e)}function Hs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zs(r.key),r)}}function Ws(e,t,n){return t&&Hs(e.prototype,t),n&&Hs(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function zs(e){var t=function(e,t){if("object"!=Vs(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Vs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Vs(t)?t:t+""}var Gs=Ws((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.apply=function(e){var t="";if("INPUT"===e.tagName){if("text"==e.type||"password"==e.type||""==e.type)t=e.outerHTML.toLowerCase();else{for(var r=[],o=0;o<e.attributes.length;o++)r.push(e.attributes[o].name);t=r.join(" ").toLowerCase()}n.shouldNotMaskAutocomplete&&(t=t.replace(/autocomplete\s*=\s*"\s*password\s*"/,""))}return{doMask:t.indexOf("password")>=0||t.indexOf("pwd")>=0,cause:"password"}},this.shouldNotMaskAutocomplete=t}));function qs(e){return qs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qs(e)}function Ks(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xs(r.key),r)}}function Ys(e,t,n){return t&&Ks(e.prototype,t),n&&Ks(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xs(e){var t=function(e,t){if("object"!=qs(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qs(t)?t:t+""}var Js=Ys((function e(t){var n,r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.apply=function(e){var t=r;if(!r._options.enabled)return r._SKIP_MASKING_SPEC;var n=e.getAttribute("autocomplete")||e.getAttribute("x-autocompletetype")||"";if(r._autoCompleteValueSet[n])return{doMask:!0,keepLastDigits:"cc-number"===n?r._effectiveKeepLastDigits:void 0,cause:"cc"};if(r._options.byContent){var o=e.value||"";if(o.match(r._preliminaryPattern)&&(o=o.trim().split(/\s+/).join(""))){var i=o.match(r._ccPattern);if(i&&i.length)if(r._options.ccAutoMaskNumberInString){for(var a=[],s=0;s<i.length;++s)r._luhnCheck(i[s])&&a.push(i[s]);if(a.length)return{doMask:!0,keepLastDigits:r._effectiveKeepLastDigits,cause:"cc",valuesToMask:a}}else if(r._luhnCheck(o))return{doMask:!0,keepLastDigits:r._effectiveKeepLastDigits,cause:"cc"}}}return r._options.byCommonProps&&r._options.byCommonProps.some((function(n){return(e.getAttribute(n)||"").match(t._ccPropPattern)}))?{doMask:!0,keepLastDigits:r._effectiveKeepLastDigits,cause:"cc"}:r._SKIP_MASKING_SPEC},this._options=L.optionsWithDefaults(t,{enabled:!0,byContent:!0,byAttributes:["cc-number","cc-csc"],byCommonProps:["class","id","name"],ccAutoMaskNumberInString:!1,ccAutoMaskMode:"default"}),this._effectiveKeepLastDigits=this._options.keepLastDigits>0?this._options.keepLastDigits:void 0,this._autoCompleteValueSet=L.immutableSet.apply(null,this._options.byAttributes),this._SKIP_MASKING_SPEC={doMask:!1},this._preliminaryPattern=/[\s\d]+/gi,this._ccPattern=/\d{12,19}/g,this._ccPropPattern="relaxed"===this._options.ccAutoMaskMode?/(credit.*card)|((credit|card|cc).?num)/gi:/(credit.*card)|((credit|card|cc).*num)/gi,this._luhnCheck=(n=[0,2,4,6,8,1,3,5,7,9],function(e){for(var t,r=e.length,o=1,i=0;r;)t=parseInt(e.charAt(--r),10),i+=(o^=1)?n[t]:t;return i&&i%10==0})}));function Zs(e){return Zs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zs(e)}function Qs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ec(r.key),r)}}function $s(e,t,n){return t&&Qs(e.prototype,t),n&&Qs(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ec(e){var t=function(e,t){if("object"!=Zs(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Zs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Zs(t)?t:t+""}var tc=$s((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._testByAttributes=function(e,t){if(t.byAttTest)for(var n in t.byAttTest)if(Object.prototype.hasOwnProperty.call(t.byAttTest,n)&&t.byAttTest[n][e.getAttribute(n)])return!0;return!1},this.apply=function(e){for(var t=0;t<n._valueAutoMaskingScheme.length;++t){var r=n._valueAutoMaskingScheme[t];if(n._testByAttributes(e,r)||r.test(e.value))return{doMask:!0,cause:r.type,maskingChar:r.maskingChar||"*"}}return n._SKIP_MASKING_SPEC},this._valueAutoMaskingScheme=t,this._SKIP_MASKING_SPEC={doMask:!1}}));function nc(e){return nc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nc(e)}function rc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ic(r.key),r)}}function oc(e,t,n){return t&&rc(e.prototype,t),n&&rc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ic(e){var t=function(e,t){if("object"!=nc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nc(t)?t:t+""}var ac=oc((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._createNumericRegexTest=function(e,t){var n=(e?"\\"+e.split("").join("\\"):"")+(t?"\\s":""),r=new RegExp("^["+n+"]*\\d[\\d*"+n+"]*$","mi");return function(e){return r.test(e)}},this.getScheme=function(){for(var e=[],t=0;t<n._options.valueMaskByCategories.length;++t){var r=n._options.valueMaskByCategories[t].toLowerCase();n._valueAutoMaskingScheme[r]?e.push(n._valueAutoMaskingScheme[r]):e.push(n._valueAutoMaskingScheme.badConfiguration)}return e},this._options=L.optionsWithDefaults(t,{valueMaskByCategories:[],valueMaskingCharNumeric:"#",valueMaskingCharNumericLike:"#"}),this._valueAutoMaskingScheme={numeric:{type:"numeric",test:this._createNumericRegexTest(!1,!1),maskingChar:this._options.valueMaskingCharNumeric||"#",byAttTest:{autocomplete:L.immutableSet("tel-extension","tel-local","tel-area-code","tel-national","tel-country-code","bday-year","bday-month","bday-day","transaction-amount","postal-code","country","cc-exp-month","cc-exp-year"),type:L.immutableSet("number","range")}},numericlike:{type:"numericLike",test:this._createNumericRegexTest("=-\\()/%$_#.",!0),maskingChar:this._options.valueMaskingCharNumericLike||"#",byAttTest:{autocomplete:L.immutableSet("tel","bday","cc-exp"),type:L.immutableSet("time","tel","month")}},badConfiguration:{type:"bad_Configuration",test:function(){return!0},maskingChar:"#",byAttTest:{autocomplete:null,type:null}}}}));function sc(e){return sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sc(e)}function cc(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return uc(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uc(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function uc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function lc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fc(r.key),r)}}function dc(e,t,n){return t&&lc(e.prototype,t),n&&lc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function fc(e){var t=function(e,t){if("object"!=sc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=sc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==sc(t)?t:t+""}var pc=dc((function e(t,n,r,o){var i=this;function a(e,t,n){var o,i,a=[],s=cc(e);try{for(s.s();!(i=s.n()).done;){var c=i.value;if(1===(a=c.split("*")).length)t.push(c);else if(2===a.length||3===a.length)try{o=new RegExp("(^|\\s)"+a.join(".*")+"($|\\s)"),n.push(o)}catch(e){r.printErrorMsg("exception when creating a regular expression")}else r.printErrorMsg("more than two wildcards in string")}}catch(e){s.e(e)}finally{s.f()}}!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isCensored=function(e,t){var n=t?e.parentElement:e,r=!!n._gbForceMasking;if((n.hasAttribute(i._options.valueCensorIgnoreAttribute)||i._valueCensorIdsWithoutWildcards.length&&L.contains(i._valueCensorIdsWithoutWildcards,L.getElementId(n))||i._valueCensorClassesWithoutWildcards.length&&L.hasOneOfClassNames(n,i._valueCensorClassesWithoutWildcards)||i._regexpValueCensorIds.length&&Es.getMatchingAttributeFromRegexpArray(L.getElementId(n),i._regexpValueCensorIds)||i._regexpValueCensorClasses.length&&Es.getMatchingAttributeFromRegexpArray(L.getClass(n),i._regexpValueCensorClasses))&&(r=!1),r){var o=e._gbid||e.getAttribute("gbid");o&&!i._maskedElementsAlreadyLogged[o]&&(i._maskedElementsAlreadyLogged[o]=!0)}return r},this.censor=function(e,t){return i.isCensored(e,t)?e._gbValuesToMask?i._censorUtils.censorValueOf(e.value,void 0,void 0,e._gbValuesToMask):i._censorUtils.censorValueOf(e.value):e.value},this.isAvailable=function(){return!0},this._bus=t,this._censorUtils=n,this._maskedElementsAlreadyLogged={},this._valueCensorIdsWithoutWildcards=[],this._valueCensorClassesWithoutWildcards=[],this._regexpValueCensorIds=[],this._regexpValueCensorClasses=[],this._options=o||{},this._options.valueCensorIds&&a(this._options.valueCensorIds,this._valueCensorIdsWithoutWildcards,this._regexpValueCensorIds),this._options.valueCensorClasses&&a(this._options.valueCensorClasses,this._valueCensorClassesWithoutWildcards,this._regexpValueCensorClasses)})),mc={MAX_ENTRIES:150,DirectionType:{BACK:1,FORWARD:2},UrlType:{FUlL_URL:1,HASH_ONLY:2}};function hc(e){return hc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hc(e)}function gc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vc(r.key),r)}}function yc(e,t,n){return t&&gc(e.prototype,t),n&&gc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function vc(e){var t=function(e,t){if("object"!=hc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=hc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==hc(t)?t:t+""}var bc=yc((function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fireNavigationEvent=function(e,t,n,r){o._bus.emit("navigation",{direction:e,urlType:t,fromUrl:n,toUrl:r})},this._locationHref=function(){return o._loc.href},this._onLocationChanged=function(){var e=o._locationHref()||"",t=o._urlHistory.length;if(0===t)return o._urlHistory.push(e),!1;if(o._urlHistory[t-1]===e)return!1;var n=o._urlHistory[o._urlHistory.length-1],r=o._hashSplit(n),i=o._hashSplit(e),a=mc.UrlType.FUlL_URL;2===r.length&&2===i.length&&r[0]===i[0]&&(a=mc.UrlType.HASH_ONLY);var s=null;t>=2&&o._urlHistory[t-2]===e?(o._urlHistory.pop(),o._backedFrom.push(n),s=mc.DirectionType.BACK):o._backedFrom.length>0&&o._backedFrom[o._backedFrom.length-1]===e?(o._backedFrom.pop(),o._urlHistory.push(e),s=mc.DirectionType.FORWARD):(o._urlHistory.push(e),o._backedFrom=[]);var c=a===mc.UrlType.FUlL_URL?e:i[1],u=a===mc.UrlType.FUlL_URL?n:r[1];return o._fireNavigationEvent(s,a,u,c),!0},this._hashSplit=function(e){var t=(e||"").split("#");return[t[0],t[1]||""]},this._safeHook=function(e){if("function"==typeof o._nativeHistory[e]){var t=o._nativeHistory[e],n=o;o._nativeHistory[e]=function(){try{arguments.length>=3&&setTimeout((function(){n._onLocationChanged()}),0)}catch(t){i.error("error while intercepting history."+e+" method. error:"+t)}return t.apply(n._nativeHistory,[].slice.call(arguments))}}},this._init=function(){var e=void 0!==o._window.onpopstate?"popstate":"hashchange";L.addEventHandler(o._window,e,(function(){o._onLocationChanged()})),"hashchange"!==e&&L.isIE(o._window.navigator.userAgent)&&L.addEventHandler(o._window,"hashchange",(function(){o._onLocationChanged()})),o._onLocationChanged()},this.printHistory=function(){var e;for(e=0;e<o._urlHistory.length;e++)console.log("  - "+e+" : "+o._urlHistory[e])},this._window=t,this._bus=n,this._nativeHistory=r,this._urlHistory=[],this._backedFrom=[],this._loc=this._window.location||this._window.document.location;try{this._safeHook("pushState"),this._safeHook("replaceState");var a=this._window.__TSR__ROUTER__;if(a&&"function"==typeof a.commitLocation){var s=a.commitLocation,c=this;a.commitLocation=function(e){setTimeout((function(){c._onLocationChanged()}),0);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return s.apply(this,[e].concat(n))}}}catch(e){i.error("failed hooking native history manipulation methods.",e)}this._bus.once("init:loaded",this._init)})),_c={BlackoutEnter:"BlackoutEnter",BlackoutLeave:"BlackoutLeave"};function Sc(e){return Sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sc(e)}function wc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ec(r.key),r)}}function Ec(e){var t=function(e,t){if("object"!=Sc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Sc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Sc(t)?t:t+""}var Cc=function(){return function(e,t,n){return t&&wc(e.prototype,t),n&&wc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._logAndEmit=function(e,t){o.bus.emit(e?_c.BlackoutEnter:_c.BlackoutLeave,t)},this.isUnderBlackout=function(){return o.underBlackout},this.forceBlackoutEnter=function(){o._doForceBlackoutEnter()},this.forceBlackoutLeave=function(){o._doForceBlackoutLeave()},this.window=t,this.bus=n,this.blackoutPredicate=r?function(e){var t;for(t=0;t<r.length;t++)if(-1!==e.indexOf(r[t]))return!0;return!1}:function(){return!1},this.underBlackout=!1,n.once("init:loaded",(function(){o._onLocationChanged(L.validateHref(t.location.href))})),n.on("navigation",(function(){o._onLocationChanged(L.validateHref(t.location.href))})),n.on("local:forceBlackoutEnter",this._doForceBlackoutEnter),n.on("local:forceBlackoutLeave",this._doForceBlackoutLeave)}),[{key:"_onLocationChanged",value:function(e){if(this.blackoutPredicate(e)!==this.underBlackout){var t=!this.underBlackout;this._logAndEmit(t,e),this.underBlackout=t}}},{key:"_doForceBlackoutEnter",value:function(){this._logAndEmit(!0,L.validateHref(this.window.top.location.href)),this.underBlackout=!0}},{key:"_doForceBlackoutLeave",value:function(){this.underBlackout=!1,this._logAndEmit(!1,L.validateHref(this.window.top.location.href))}}])}();function Tc(e){return Tc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tc(e)}function kc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ac(r.key),r)}}function Ic(e,t,n){return t&&kc(e.prototype,t),n&&kc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ac(e){var t=function(e,t){if("object"!=Tc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Tc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Tc(t)?t:t+""}var Pc=Ic((function e(t,n,r,o,a){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._validateAndJoinSelectors=function(e){var t=e.join(",");return s._selectorValidator.validateSelector(t)?t:null},this._initSelectors=function(){var e=s._validateAndJoinSelectors(s._options.triggerBySimpleSelector);return s._labelSelectorParts=s._validateAndJoinSelectors(s._options.labelBySimpleSelector),!(!e||!s._labelSelectorParts)},this._doEnterNewSegment=function(e,t,n){var r,o;if(e){if(s._options.labelByAttribute?r=e.getAttribute(s._options.labelByAttribute):s._options.labelByInnerText&&(r=e.innerText),r&&r!==s._currSegmentName)return s._currSegmentName=r,s._options.parallelMechanism&&(s._currActiveLabelIndex=!1===n?0:n++),t&&(s._shouldTryEnterSegmentAgain=!1,s._bus.emit("logicalSegmentEntered",s._options.segmentationPrefix+r),s._options.titleByAttribute?o=e.getAttribute(s._options.titleByAttribute):s._options.titleByInnerText&&(o=e.innerText),o&&s._options.waitForSegmentRender<0&&s._bus.emit("titleChanged",o),s._addEventListeners()),!0;t&&(s._shouldTryEnterSegmentAgain=!0)}else t&&(s._shouldTryEnterSegmentAgain=!0)},this._tryEnterNewSegment=function(e,t,n){try{if(n&&s._options.initialLabelSelector){var r=s._document.querySelector(s._options.initialLabelSelector);return void s._doEnterNewSegment(r,e,t)}var o,a=s._document.querySelectorAll(s._labelSelectorParts);if(n||a.length||!s._options.forceTryEnterSegment||(s._shouldTryEnterSegmentAgain=!0),!1!==t)s._doEnterNewSegment(a[t],e,t);else for(o=0;o<a.length&&!s._doEnterNewSegment(a[o],e);o++);}catch(e){i.error("Exception while trying to enter a new logical segment. Error: "+e.message,e),s._shouldTryEnterSegmentAgain=!1,s._bus.emit("clsDebug","error trying to enter a new logical segment. Exception message: "+e.message)}},this._onLogicalSegment=function(e){setTimeout((function(){return s._tryEnterNewSegment(!0,e)}),0)},this._lookAgainForSegmentName=function(){s._shouldTryEnterSegmentAgain&&(s._shouldTryEnterSegmentAgain=!1,s._tryEnterNewSegment(!0,!!s._options.parallelMechanism&&s._currActiveLabelIndex))},this._addEventListeners=function(){var e,t,n=!1;for(e=0;e<s._options.triggerBySimpleSelector.length;e++){var r=s._document.querySelectorAll(s._options.triggerBySimpleSelector[e]),o=function(){if(n=!0,!r[t]._gb_logical_listener){var o=e;L.addEventHandler(r[t],"click",(function(){return s._onLogicalSegment(!!s._options.parallelMechanism&&o)}),!0),r[t]._gb_logical_listener=!0}};for(t=0;t<r.length;t++)o()}return n},this.init=function(){var e;if(s._options.parallelMechanism&&!s._options.initialLabelSelector)return L.isIE()?console.log('Must define "initialLabelSelector" in parallel mode! disabling Logical Segmentation.'):console.log('%c Must define "initialLabelSelector" in parallel mode! disabling Logical Segmentation.',"color: white; background: red"),void s._bus.emit("clsDebug",'Missing "initialLabelSelector". Disabling Logical Segmentation.');s._initSelectors()&&(e=s._addEventListeners(),s._options.segmentationForceAddingListeners&&!e&&L.waitForElementsOnPage(s._detector,s._options.triggerBySimpleSelector,s._addEventListeners,!1),s._tryEnterNewSegment(!1,!1,!0))},this.onBeforeEmittingPageEvent=function(){return s._lookAgainForSegmentName(),!0},this._detector=t,this._bus=n,this._document=r,this._selectorValidator=o,this._options=a,this._labelSelectorParts=void 0,this._currSegmentName=void 0,this._currActiveLabelIndex=void 0,this._shouldTryEnterSegmentAgain=!1}));function xc(e){return xc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xc(e)}function Rc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Mc(r.key),r)}}function Oc(e,t,n){return t&&Rc(e.prototype,t),n&&Rc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Mc(e){var t=function(e,t){if("object"!=xc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=xc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xc(t)?t:t+""}var Nc=Oc((function e(t,n,r,o,i,a){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._onTitleChanged=function(e){s._updateData.isPending||(s._currentSegment.pendingTitleChange=""),s._options.sendSegmentTitle&&(s._currentSegment.segmentTitle=e,s._options.waitForSegmentTitle&&s._options.waitForSegmentTitle>0&&s._updateData.isPending&&(s._updateData.segmentTitle=e,s._setSegmentData()))},this._onHashChanged=function(e){s._currentHash=s._uriMasker.mask(L.decodeUri(s._options.decodeUri,s._document.location.hash)),s._isSegmentationIgnored()||s._onSegmentEntered("hash",e,s._currentHash)},this._onPathChanged=function(e){s._currentRef=s._uriMasker.mask(L.stripHash(L.decodeUri(s._options.decodeUri,L.validateHref(s._document.location.href)))),""===s._document.location.hash&&(s._currentHash=""),s._isSegmentationIgnored()||s._onSegmentEntered("path",e,s._uriMasker.mask(L.decodeUri(s._options.decodeUri,s._document.location.pathname+(s._options.captureQueryStringParamsOnSegmentChange?s._document.location.search:""))))},this._onLogicalSegment=function(e){var t=s._uriMasker.mask(L.joinPath(L.decodeUri(s._options.decodeUri,s._document.location.pathname+(s._options.captureQueryStringParamsOnSegmentChange?s._document.location.search:"")),e));s._currentRef=s._uriMasker.mask(L.joinPath(L.decodeUri(s._options.decodeUri,s._document.location.pathname+(s._options.captureQueryStringParamsOnSegmentChange?s._document.location.search:"")),e)),s._onSegmentEntered("path","logical",t)},this._isSegmentationIgnored=function(){return s._options.ignoreWhenLocationContains&&L.decodeUri(s._options.decodeUri,L.validateHref(s._document.location.href)).indexOf(s._options.ignoreWhenLocationContains)>=0},this._onSegmentEntered=function(e,t,n){if(s._updateData.isPending&&(s._segmentRenderTime&&clearTimeout(s._segmentRenderTime),s._bus.emit("idleDomUpdates",!1),s._bus.emit("segmentChanged",s._updateData)),s._options.segmentationAlwaysSendTitleChange&&(!s._options.waitForSegmentTitle||-1===s._options.waitForSegmentTitle)&&s._currentSegment.pendingTitleChange){var r=s._currentSegment.pendingTitleChange.includes(s._options.segmentationPrefix)?s._currentSegment.pendingTitleChange.split(s._options.segmentationPrefix)[1]:s._currentSegment.pendingTitleChange;s._bus.emit("titleChanged",r)}var o=L.currentTimestamp(),i=s._currentSegment.value,a=s._spaManager.segmentChange(o),c=L.decodeUri(s._options.decodeUri,n);s._updateData={type:e,hint:t,current:c,last:i,lastDwell:o-s._currentSegment.startedAt,isPending:!0,eventTime:o,segmentTitle:s._currentSegment.segmentTitle,hash:"hash"===e?c:""},-1!==a&&(s._updateData.lastLoadTime=a),s._options.captureQueryStringParamsAsDataOnSegmentChange&&(s._updateData.query=L.decodeUri(s._options.decodeUri,s._document.location.search)),s._currentSegment.startedAt=o,s._currentSegment.type=e,s._currentSegment.value=n,s._currentSegment.pendingTitleChange=s._updateData.current,s._options.captureQueryStringParamsAsDataOnSegmentChange&&(s._currentSegment.query=L.decodeUri(s._options.decodeUri,s._document.location.search)),s._anySegmentChanged=!0;var u=0;s._options.waitForSegmentRender&&s._options.waitForSegmentRender>0&&(u=s._options.waitForSegmentRender),s._options.waitForSegmentTitle&&s._options.waitForSegmentTitle>0&&s._options.sendSegmentTitle&&(u=s._options.waitForSegmentTitle),u?(s._bus.emit("idleDomUpdates",!0),s._options.ignoreSegmentLoadEnd||s._bus.on("segmentLoadEnd",s._setSegmentData),s._bus.on("userInteraction",s._setSegmentData),s._segmentRenderTime=setTimeout((function(){return s._setSegmentData({type:"timeout end"})}),s._options.waitForSegmentRender)):(s._bus.emit("segmentChanged",s._updateData),s._updateData.isPending=!1)},this._onLoad=function(){s._currentRef=s._uriMasker.mask(L.stripHash(L.decodeUri(s._options.decodeUri,L.validateHref(s._document.location.href)))),s._document.location.hash&&s._onHashChanged("load")},this._onLocationChanged=function(e){var t;e.direction===mc.DirectionType.BACK?t="back":e.direction===mc.DirectionType.FORWARD&&(t="forward"),e.urlType===mc.UrlType.HASH_ONLY?s._onHashChanged(t):s._onPathChanged(t)},this._setSegmentData=function(){if(s._segmentRenderTime&&clearTimeout(s._segmentRenderTime),s._updateData.isPending){if(s._bus.emit("idleDomUpdates",!1),s._bus.emit("segmentChanged",s._updateData),s._options.segmentationAlwaysSendTitleChange&&(!s._options.waitForSegmentTitle||-1===s._options.waitForSegmentTitle)&&s._currentSegment.pendingTitleChange){var e=s._currentSegment.pendingTitleChange.includes(s._options.segmentationPrefix)?s._currentSegment.pendingTitleChange.split(s._options.segmentationPrefix)[1]:s._currentSegment.pendingTitleChange;s._bus.emit("titleChanged",e)}s._updateData.isPending=!1,s._bus.off("segmentLoadEnd",s._setSegmentData),s._bus.off("userInteraction",s._setSegmentData)}},this.onUnload=function(){s._anySegmentChanged&&s._bus.emit("lastSegment",{last:s._currentSegment.value,lastDwell:L.currentTimestamp()-s._currentSegment.startedAt,lastLoadTime:s._currentSegment.lastLoadTime})},this.visitEvent=function(e){e.referrer=s._currentRef,e.segment=s._currentSegment.value,e.subPage=s._currentHash},this._document=t,this._bus=n,this._spaManager=r,this._uriMasker=o,this._options=a||{ignoreWhenLocationContains:void 0},this._segmentRenderTime=null,this._updateData={},this._anySegmentChanged=!1,this._currentHash="",this._currentRef=o.mask(L.stripHash(L.decodeUri(this._options.decodeUri,L.validateHref(this._document.location.href)))),this._currentSegment={startedAt:L.currentTimestamp(),value:L.decodeUri(this._options.decodeUri,this._document.location.pathname),type:"path",pendingTitleChange:"",segmentTitle:this._options.sendSegmentTitle?i:void 0,query:this._options.captureQueryStringParamsAsDataOnSegmentChange?L.decodeUri(this._options.decodeUri,this._document.location.search):void 0},this._bus.once("init:loaded",this._onLoad),this._bus.on("navigation",this._onLocationChanged),this._bus.on("logicalSegmentEntered",this._onLogicalSegment),this._bus.on("setNewTitle",this._onTitleChanged)}));function jc(e){return jc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jc(e)}function Dc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Bc(r.key),r)}}function Lc(e,t,n){return t&&Dc(e.prototype,t),n&&Dc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bc(e){var t=function(e,t){if("object"!=jc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=jc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==jc(t)?t:t+""}var Fc=Lc((function e(t,n,r,o,i,a,s){var c=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._stopDetection=function(){c._removeAllHandlers(),c._active=!1},this._mouseMoveHandler=function(e){return c._state.mouseMoveOccurred||(c._state.firstMoveCoordinate=c._utils.getCoordinate(e),c._state.firstMoveTimestamp=c._utils.currentTimestamp()),c._state.mouseMoveOccurred=!0,c._state.mouseDownOccurred&&c._state.mouseMovesCounter++,!0},this._mouseClickHandler=function(e){return e.type===c._env.mouseEvents.down&&c._checkMouseMovesBetweenClicks(e),c._checkTrusted(e),!0},this._addMouseHandlers=function(){c._utils.addEventHandler(c._document.body,"mousemove",c._mouseMoveHandler,!0),c._utils.addEventHandler(c._document.body,"click",c._mouseClickHandler,!0)},this._removeAllHandlers=function(){c._removeMouseHandler("mousemove",c._mouseMoveHandler),c._removeMouseHandler("click",c._mouseClickHandler)},this._removeMouseHandler=function(e,t){try{c._utils.removeEventHandler(c._document.body,e,t)}catch(t){c._logger.error("BotDetector failed to remove "+e+" listener. "+t.message,t)}},this._checkTrusted=function(e){c._BotDetectorHelper.BOT_CODES.NOT_TRUSTED_MOUSEEVENT.active&&"isTrusted"in e&&!1===e.isTrusted&&c._robotDetected(c._BotDetectorHelper.BOT_CODES.NOT_TRUSTED_MOUSEEVENT)},this._checkMouseMovesBetweenClicks=function(e){if(e.type===c._env.mouseEvents.down){c._state.mouseDownOccurred=!0;var t=c._utils.getCoordinate(e);null!==c._state.lastMouseDownCoordinate?c._BotDetectorHelper.HUMAN_CODES.MANY_MOUSE_MOVES_BETWEEN_CLICKS.active&&!c._utils.isSameCoordinates(t,c._state.lastMouseDownCoordinate)?c._state.mouseMovesCounter>=10&&c._humanDetected(c._BotDetectorHelper.HUMAN_CODES.MANY_MOUSE_MOVES_BETWEEN_CLICKS):c._BotDetectorHelper.BOT_CODES.CLICKS_WITH_NO_MOUSE_MOVES.active&&c._utils.isCoordinatesDistLargerThan(t,c._state.lastMouseDownCoordinate,10)&&0===c._state.mouseMovesCounter&&c._robotDetected(c._BotDetectorHelper.BOT_CODES.CLICKS_WITH_NO_MOUSE_MOVES):c._state.mouseMoveOccurred&&c._checkDifferentCoordinatesAndTimes(e),c._state.mouseMovesCounter=0,c._state.lastMouseDownCoordinate=t}},this._checkDifferentCoordinatesAndTimes=function(e){if(c._BotDetectorHelper.BOT_CODES.MOVE_AND_CLICK_SAME_COORDINATES_AND_TIMES.active){var t=c._utils.getCoordinate(e);if(null!==c._state.firstMoveCoordinate&&c._utils.isSameCoordinates(t,c._state.firstMoveCoordinate)&&c._utils.currentTimestamp()-c._state.firstMoveTimestamp<c._state.mouseMoveClickAllowedTimeDiff){var n=c._storage._get(c._BotDetectorHelper.KEY_NON_HUMAN_COUNT);if(void 0===n)c._storage._set(c._BotDetectorHelper.KEY_NON_HUMAN_COUNT,1);else{var r=parseInt(n);isNaN(r)&&(c._logger.log("Bad format of non human counter in the robot cookie: "+r),r=1),r++,c._storage._set(c._BotDetectorHelper.KEY_NON_HUMAN_COUNT,r),c._robotDetected(c._BotDetectorHelper.BOT_CODES.MOVE_AND_CLICK_SAME_COORDINATES_AND_TIMES),c._BotDetectorHelper.BOT_CODES.MOVE_AND_CLICK_SAME_COORDINATES_AND_TIMES.active=!1}}}},this._robotDetected=function(e){c._active&&(c._logger.log("BotDetector has detected a bot with type: "+e.code),e.active=!1,c._storage._set(c._BotDetectorHelper.KEY_DETECT,e.code),c._detected.robot=!0,c._stopDetection(),c._bus.emit("botDetection",e.code))},this._humanDetected=function(e){c._logger.log("Human Detected ["+e.code+"]"),c._detected.human=!0,c._storage._set(c._BotDetectorHelper.KEY_DETECT,e.code),c._stopDetection()},this.init=function(){var e=c._storage._get(c._BotDetectorHelper.KEY_DETECT);e?c._logger.log("Session was already Bot/Human classified with code: "+e):(c._active=!0,c._addMouseHandlers())},this.isActive=function(){return c._active},this._document=t,this._bus=n,this._env=r,this._storage=o,this._utils=i,this._logger=a,this._BotDetectorHelper=s,this._state={mouseMoveOccurred:!1,mouseDownOccurred:!1,lastMouseDownCoordinate:null,firstMoveCoordinate:null,firstMoveTimestamp:0,mouseMoveClickAllowedTimeDiff:100,mouseMovesCounter:0},this._detected={robot:!1,human:!1},this._active=!1,this.notifyMouseAction=this._mouseClickHandler})),Uc={severity:{ERROR:0,WARN:1,INFO:2,DEBUG:3},types:{GENERAL_ERR:{code:100,count:0},INVALID_TIMING_ERR:{code:101,count:0},TOP_WINDOW_SIZE_ERR:{code:102,count:0},WINDOW_SIZE_NOT_VALID_ERR:{code:103,count:0},KEREN_ERR:{code:104,count:0}},currentDebugInfo:null,registerError:function(e,t){Uc.registerDebugInfo(Uc.severity.ERROR,e,t)},registerErrorAndLog:function(e,t){Uc.registerDebugInfoAndLog(Uc.severity.ERROR,e,t)},registerDebugInfoAndLog:function(e,t,n){Uc.registerDebugInfo(e,t,n)},registerDebugInfo:function(e,t,n){t.count++,null===Uc.currentDebugInfo&&(Uc.currentDebugInfo=new Vc(e,t.code,t.count,n))},getRegisteredDebugInfo:function(e){var t=Uc.currentDebugInfo;return null===t||L.isUndefined(t)?null:(e&&Uc.clearDebugInfo(),t)},clearDebugInfo:function(){Uc.currentDebugInfo=null},setRegisteredDebugInfoOnEvent:function(e){if(null===e.getDebugInfo()||L.isUndefined(e.getDebugInfo())){var t=Uc.getRegisteredDebugInfo(!0);null!=t&&e.setDebugInfo(t)}},setErrorOnEvent:function(e,t,n){Uc.setDebugInfoOnEvent(e,Uc.severity.ERROR,t,n)},setErrorOnEventAndLog:function(e,t,n,r){Uc.setDebugInfoOnEvent(e,Uc.severity.ERROR,t,n)},setWarnOnEvent:function(e,t,n){Uc.setDebugInfoOnEvent(e,Uc.severity.WARN,t,n)},setDebugInfoOnEvent:function(e,t,n,r){if(null===e||L.isUndefined(e))i.error("Failed setting debug on non-existing event");else{var o=new Vc(t,n.code,n.count,r);e.setDebugInfo(o)}}};function Vc(e,t,n,r){this.severity=e,this.code=t,this.count=n,r&&(this.msg=r)}var Hc=Uc;function Wc(e){return Wc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wc(e)}function zc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Gc(r.key),r)}}function Gc(e){var t=function(e,t){if("object"!=Wc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Wc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Wc(t)?t:t+""}var qc=function(){return function(e,t,n){return t&&zc(e.prototype,t),n&&zc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=n,this.timestamp=r,this.type=t}),[{key:"toString",value:function(){return this.url}}])}();function Kc(e){return Kc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kc(e)}function Yc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Jc(r.key),r)}}function Xc(e,t,n){return t&&Yc(e.prototype,t),n&&Yc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Jc(e){var t=function(e,t){if("object"!=Kc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Kc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Kc(t)?t:t+""}var Zc=Xc((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._extractElementValue=function(e,t){var n=t.nodeName;if("INPUT"===n){var o=t.type;if(r.directValueInputTypes[o])return r.censor.censor(t);if("checkbox"===o)return t.checked?"true":"false"}else{if("TEXTAREA"===n)return r.censor.censor(t);if("SELECT"===n){var i=t.options;if(!L.isUndefined(i)&&"number"==typeof i.length&&i.length>0){if(!L.isUndefined(t.multiple)&&t.multiple)return"["+r.extractMultipleSelectValues(i).join(",")+"]";if(!L.isUndefined(t.selectedIndex)&&!L.isUndefined(i[t.selectedIndex]))return r.censor.censor(i[t.selectedIndex],!0)}}}},this._extractElementSource=function(e,t){var n=t.src||t.href;return L.isUndefined(n)||null==n||""===n?void 0:n},this._extractLocationHash=function(e){return L.getLocationUrlSplitByHash(e).hash},this._extractScrollValue=function(e,t){if("#document"===t.nodeName){var n=L.getScrollTopLeft();return new u(n.left,n.top)}return"ionScroll"===e.type?new u(e.detail.scrollLeft,e.detail.scrollTop):new u(t.scrollLeft,t.scrollTop)},this._extractScrollReach=function(e,t){if(t)return"#document"===t.nodeName?{top:document.documentElement.scrollTop,height:document.documentElement.scrollHeight,domElementsCount:document.getElementsByTagName("*").length,innerHeight:window.innerHeight}:r._isValidScrollableElement(t)?{top:t.scrollTop,height:t.scrollHeight,domElementsCount:document.getElementsByTagName("*").length,innerHeight:window.innerHeight}:void 0},this._isValidScrollableElement=function(e){try{var t=getComputedStyle(e);return!("BODY"!==e.nodeName&&!["auto","scroll"].includes(t.overflowY))}catch(e){return!1}},this._extractMouseMoveValue=function(e){return[L.getCoordinate(e)]},this.scope=t||{},this.censor=n||{},this.directValueInputTypes=L.immutableSet("password","text","number","file","url","search","email","date","time","tel","range","month","week","datetime","datetime-local","color","radio"),this.extractMultipleSelectValues=function(e){for(var t=[],r=0;r<e.length;r++){var o=e[r];o.selected&&t.push(n.censor(o,!0))}return t},this.scope.extractElementValue=this._extractElementValue,this.scope.extractElementSource=this._extractElementSource,this.scope.extractLocationHash=this._extractLocationHash,this.scope.extractScrollValue=this._extractScrollValue,this.scope.extractScrollReach=this._extractScrollReach,this.scope.extractMouseMoveValue=this._extractMouseMoveValue}));function Qc(e){return Qc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qc(e)}function $c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tu(r.key),r)}}function eu(e,t,n){return t&&$c(e.prototype,t),n&&$c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function tu(e){var t=function(e,t){if("object"!=Qc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Qc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Qc(t)?t:t+""}var nu=eu((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._generateClassBasedId=function(e,t){for(var r=e.parentElement,o=[t];r;)(t=n._tryExtractClassToken(r))&&o.unshift(t),r=r.parentElement;return o.join(" ")},this._tryExtractClassToken=function(e){var t,r=L.getClassList(e);if(r)for(t=0;t<r.length;t++)if(L.startsWith(r[t],n._options.byClassPrefix))return"."+r[t]},this.resolve=function(e){if(e.getAttribute){if(n._options.byGbId&&e._gbid)return"gbid:".concat(e._gbid);if(n._options.byClassPrefix){var t=n._tryExtractClassToken(e);if(t)return n._generateClassBasedId(e,t)}if(n._options.byAttribute){var r=e.getAttribute(n._options.byAttribute);if(r)return r}}return null},this._options=t||{}}));function ru(e){return ru="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ru(e)}function ou(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,iu(r.key),r)}}function iu(e){var t=function(e,t){if("object"!=ru(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ru(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ru(t)?t:t+""}var au=function(){return function(e,t,n){return t&&ou(e.prototype,t),n&&ou(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}),null,[{key:"validateSize",value:function(e,t,n,r,o){var i,a,s,c;return L.isNumber(t)&&L.isNumber(n)?o&&(t<o||n<o)?(Hc.setErrorOnEvent(e,Hc.types.WINDOW_SIZE_NOT_VALID_ERR,"UserAgentUtils - Invalid window size for "+r+": x="+t+" y="+n+" pageEvent: pageId="+e.pageId+" timestamp="+e.timestamp+" type="+e.type+" referrer="+e.referrer+" id="+e.id+" segment="+e.segment+" value="+JSON.stringify(e.value)),{width:(null===(i=e.value.screenSize)||void 0===i?void 0:i.width)||(null===(a=document)||void 0===a||null===(a=a.documentElement)||void 0===a?void 0:a.clientWidth)||window.outerWidth,height:(null===(s=e.value.screenSize)||void 0===s?void 0:s.height)||(null===(c=document)||void 0===c||null===(c=c.documentElement)||void 0===c?void 0:c.clientHeight)||window.outerHeight}):{width:t,height:n}:(Hc.setErrorOnEvent(e,Hc.types.WINDOW_SIZE_NOT_VALID_ERR,"UserAgentUtils - Non valid values for window size for "+r+": x="+t+" y="+n),null)}},{key:"captureWindowSize",value:function(e,t,n){return L.isNumber(window.innerWidth)&&L.isNumber(window.innerHeight)?this.validateSize(e,window.innerWidth,n?window.innerHeight:Math.min(window.innerHeight,window.screen.height),"[inner]",t):!L.isUndefined(document.body)&&L.isNumber(document.body.offsetWidth)&&L.isNumber(document.body.offsetHeight)?this.validateSize(e,document.body.offsetWidth,document.body.offsetHeight,"[offset]",t):null}},{key:"captureScreenSize",value:function(e){return this.validateSize(e,window.screen.width,window.screen.height,"[screen]")}}])}();function su(e){return su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},su(e)}function cu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lu(r.key),r)}}function uu(e,t,n){return t&&cu(e.prototype,t),n&&cu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function lu(e){var t=function(e,t){if("object"!=su(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=su(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==su(t)?t:t+""}var du=uu((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._parseCookies=function(e){if(e){var n={d:"dom",p:"performanceRecord",r:"recording"};try{e.split("_").forEach((function(e){var r=e.split(":"),o=r[1].split("*");t._KEYS[n[r[0]]].value="1"===o[0]?1:0,t._KEYS[n[r[0]]].prev=o[1]}))}catch(e){i.error("## applyEnableByChances => can't parse by chances cookie:"+e.message)}}},this.apply=function(e,n,r,o,i,a){if(void 0===e)return!!a;var s,c=n._get(o+".bychance.enabled"),u=n._get(o+".bychance.prev_th");if(i&&(t._parseCookies(r._get("Bc")),c=t._KEYS[o].value,u=t._KEYS[o].prev),u!==""+e&&(c=null),null===c)if(s=void 0===a?Math.random()<e:a,i){t._KEYS[o].value=s?"1":"0",t._KEYS[o].prev=e;var l="d:"+t._KEYS.dom.value+"*"+t._KEYS.dom.prev+"_p:"+t._KEYS.performanceRecord.value+"*"+t._KEYS.performanceRecord.prev+"_r:"+t._KEYS.recording.value+"*"+t._KEYS.recording.prev;r._set("Bc",l)}else n._set(o+".bychance.enabled",s),n._set(o+".bychance.prev_th",e);else s="true"===c,i&&(s=!!c);return s},this._KEYS={performanceRecord:{value:null,prev:null},dom:{value:null,prev:null},recording:{value:null,prev:null}}}));function fu(e){return fu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fu(e)}function pu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hu(r.key),r)}}function mu(e,t,n){return t&&pu(e.prototype,t),n&&pu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function hu(e){var t=function(e,t){if("object"!=fu(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=fu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fu(t)?t:t+""}var gu=mu((function e(t,n,r,o,a,s,c,u){var l=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._visitorConfigChanged=function(){var e=l._storageAccessor._get(l._CLS_EXP);return e&&(e=parseInt(e)),!e||e!==l._visitorDaysToExpiration},this._setVisitorCookie=function(e){var t=e,n=!1,r=!1,o=!1;if(t)t!==l._cookieHelper._get(l._env.cookies.visitor)&&(r=!0,o=!0);else if((t=l._cookieHelper._get(l._env.cookies.visitor))&&L.isValidUUID(t)){if(l._visitorConfigChanged()){o=!0,r=!0;try{l._storageAccessor._set(l._CLS_EXP,l._visitorDaysToExpiration)}catch(e){i.error("Error while setting _cls_v expiration date. Exception: "+e.message,e)}}}else n=!0,r=!0,t=L.uuid();return r&&l._cookieHelper._set(l._env.cookies.visitor,t,24*l._visitorDaysToExpiration*60*60*1e3),{isNew:n,_visitorId:t,valueChanged:o}},this._setClientSessionCookie=function(e,t,n){var r,o=!1,i=!1;return e&&!t?(r=L.uuid()+":"+(n?"0":"1"),o=!0,i=!0):(r=t)?r!==l._cookieHelper._get(l._env.cookies.session)&&(o=!0,i=!0):(r=l._cookieHelper._get(l._env.cookies.session))&&L.isValidUUID(r)||(r=L.uuid()+":"+(n?"0":"1"),o=!0),o&&(l._cookieHelper._set(l._env.cookies.session,r),l._bus.emit("newSessionSet")),{_sessionId:r,valueChanged:i,isExist:!o}},this.apply=function(){var e,t={};l._sessionResetOnly||(e=l._setVisitorCookie(l._cookieData._visitorId),t._visitorId=e._visitorId,t.changed=e.valueChanged);var n=l._setClientSessionCookie(l._sessionResetOnly&&!l._forceClss,l._cookieData._sessionId,e&&e.isNew);return t._sessionId=n._sessionId,t.isSessionIdExist=n.isExist,t.changed=t.changed||n.valueChanged,l._cookieData._clse&&(l._bus.on("askIfMobileUpdatedClse",(function(){l._bus.emit("updateGatewayClseContainer")})),l._cookieHelper._set(l._env.cookies.integrationId,l._cookieData._clse),t._clse=l._cookieData._clse),l._cookieData._rto&&(l._bus.on("askIfMobileUpdateRto",(function(){l._bus.emit("updateGatewayRtoContainer")})),l._cookieHelper._set(l._env.cookies.rto,l._cookieData._rto),t._rto=l._cookieData._rto),t},this._storageAccessor=t,this._bus=n,this._cookieHelper=r,this._env=o,this._cookieData=a||{},this._sessionResetOnly=s,this._visitorDaysToExpiration=L.isNumber(c)&&c>0?c:1825,this._forceClss=u,this._CLS_EXP="cls_v_expr"}));function yu(e){return yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yu(e)}function vu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_u(r.key),r)}}function bu(e,t,n){return t&&vu(e.prototype,t),n&&vu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _u(e){var t=function(e,t){if("object"!=yu(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=yu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yu(t)?t:t+""}var Su=bu((function e(t,n,r,o){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pageSn=void 0,o&&!r)try{this.pageSn=function(){var e=o._get("psn")||"0";try{e=parseInt(e)+1}catch(t){e=1}return o._set("psn",e),e}()}catch(e){}}));function wu(e){return wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wu(e)}function Eu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Tu(r.key),r)}}function Cu(e,t,n){return t&&Eu(e.prototype,t),n&&Eu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tu(e){var t=function(e,t){if("object"!=wu(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=wu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wu(t)?t:t+""}var ku=Cu((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._selectedConfig=function(e){var t,n,o={};for(t in r._config)if(Object.prototype.hasOwnProperty.call(r._config,t))if("object"===wu(r._config[t]))(r._config[t].length||0)>0&&(o[t]=r._config[t]);else n=""+r._config[t],""+e[t]!==n&&(n.length>100&&(n="[trimmed] "+n.substring(0,r._maxStringLength)),o[t]=n);return o},this.visitLoadEvent=function(e){if(r._config.sendStateInfo){var t={};L.assign(t,z),L.assign(t,W);var n={ver:r._jsver,config:r._selectedConfig(t)};e.setExtraInfo(le.DETECTOR_CONFIG_ID,JSON.stringify(n))}},this.visitUnloadEvent=function(){},this._config=t,this._jsver=n,this._maxStringLength=100}));function Iu(e){return Iu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iu(e)}function Au(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xu(r.key),r)}}function Pu(e,t,n){return t&&Au(e.prototype,t),n&&Au(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function xu(e){var t=function(e,t){if("object"!=Iu(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Iu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Iu(t)?t:t+""}var Ru=Pu((function e(t,n,r,o,i,a){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._actualTarget=function(e){return e===s._doc?s._doc.documentElement:e},this._verticalDirectionChanged=function(e){var t=e.scrollTop-e[s._scrollData].lastScrollTop,n=t*e[s._scrollData].lastVDelta<0;return e[s._scrollData].lastVDelta=t,e[s._scrollData].lastScrollTop=e.scrollTop,n},this._meetTarget=function(e){return e[s._scrollData]||(e[s._scrollData]={lastScrollTop:e.scrollTop,lastVDelta:0}),e},this._callPending=function(e){e&&s._pendingSR?(s._calledSR++,s._pendingSR(),s._pendingSR=null,s._debug&&console.log("SCROLL DEBUG: bounced invocation #"+s._calledSR)):!e&&s._pending&&(s._called++,s._pending(),s._pending=null,s._debug&&console.log("SCROLL DEBUG: bounced invocation #"+s._called))},this._onUnload=function(){s._inDebounceSR&&(clearTimeout(s._inDebounceSR),s._callPending(!0))},this.debouncedHandler=function(e){if(s._isScrollReach){clearTimeout(s._inDebounceSR);var t=L.getCurrentScrollReach();s._maxScrollReach<t&&(s._pendingSR=function(){return s._handlerBody(e)}),s._inDebounceSR=setTimeout((function(){return s._callPending(s._isScrollReach)}),s._delay),s._debouncedSR++,s._debug&&s._debouncedSR%20==0&&console.log("SCROLL DEBUG: de-bouncer - called:",s._calledSR," of total:",s._debouncedSR)}else clearTimeout(s._inDebounce),s._pending=function(){return s._handlerBody(e)},s._verticalDirectionChanged(s._meetTarget(s._actualTarget(e.target)))?s._callPending(!1):(s._inDebounce=setTimeout((function(){return s._callPending(s._isScrollReach)}),s._delay),s._debounced++,s._debug&&s._debounced%20==0&&console.log("SCROLL DEBUG: de-bouncer - called:",s._called," of total:",s._debounced))},this.bounce=function(){s._callPending()},this._doc=t,this._bus=n,this._delay=r,this._handlerBody=o,this._debug=i,this._inDebounce=void 0,this._inDebounceSR=void 0,this._scrollData="_gb_scrollInfo",this._pending=void 0,this._pendingSR=void 0,this._debounced=0,this._debouncedSR=0,this._called=0,this._calledSR=0,this._maxScrollReach=0,this._isScrollReach="scrollReach"===a.logicalName,this._bus.on("event:unload",this._onUnload)})),Ou="undefined"!=typeof document&&function(e,t){var n;function r(r,o,i,a){return n=new Ru(e,o,i,r,t,a)}return{scroll:r,ionScroll:r,bounceAll:function(e){n&&"scroll"!==e&&"ionScroll"!==e&&n.bounce(!1)}}}(document,void 0!==t&&t.scrollDebug);function Mu(e){return Mu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mu(e)}function Nu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Du(r.key),r)}}function ju(e,t,n){return t&&Nu(e.prototype,t),n&&Nu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Du(e){var t=function(e,t){if("object"!=Mu(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Mu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Mu(t)?t:t+""}var Lu=ju((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.checkElementChangebility=function(e){var t=e.nodeName,n=e.type,r=!1,o=!1;switch(t){case"SELECT":o=!0;break;case"TEXTAREA":r=!0;break;case"INPUT":if(null===n)break;switch(n){case"checkbox":case"radio":o=!0;break;case"text":case"password":case"number":case"file":case"url":case"search":case"email":case"date":case"time":case"tel":case"range":case"month":case"week":case"datetime":case"datetime-local":case"color":r=!0}}return{isTypable:r,isSelectable:o}},t.isTypableElement=function(e){return t.checkElementChangebility(e).isTypable},t.isSelectableElement=function(e){return t.checkElementChangebility(e).isSelectable},t.isChangebleElement=function(e){return t.isTypableElement(e)||t.isSelectableElement(e)}})),Bu="undefined"!=typeof window&&function(e,t){var n=e.top!==e;return{MAX_DEPTH_THRESHOLD:20,tryGetCurrentDepth:function(e){var t=0,n=e;try{for(;n.parent!=n&&t<=this.MAX_DEPTH_THRESHOLD;)n=n.parent,t++}catch(e){return i.error("could not retrieve current window's depth (a CORS issue?). error:"+e),-1}return t>this.MAX_DEPTH_THRESHOLD?-1:t},isCrossOriginFrame:function(e,t){try{if(!e.contentWindow)return!0;var n="OBJECT"===e.tagName?e.getAttribute("data"):e.getAttribute("src");if("about:blank"===n)return!1;if(!n)return!1;var r=L.extractOrigin(n);return!!r&&t!==r}catch(e){return!0}},isEmpty:function(e){return!(e.contentDocument&&e.contentDocument.body.hasChildNodes())},logError:function(){var r=Array.prototype.slice.call(arguments);return"string"==typeof r[0]&&(r[0]="[frame.debug] "+(n?"FRAME ("+L.validateHref(e.location.href)+")":"TOP")+"  "+r[0]),t?console.log.apply(console,r):i.error(r)},logDebug:function(){var r=Array.prototype.slice.call(arguments);return"string"==typeof r[0]&&(r[0]="[frame.debug] "+(n?"FRAME ("+L.validateHref(e.location.href)+")":"TOP")+"  "+r[0]),t}}}(window,void 0!==window._cls_config&&window._cls_config.iframesDebugEnabled),Fu=Bu;function Uu(e){return Uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uu(e)}function Vu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Wu(r.key),r)}}function Hu(e,t,n){return t&&Vu(e.prototype,t),n&&Vu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wu(e){var t=function(e,t){if("object"!=Uu(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Uu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Uu(t)?t:t+""}var zu=Hu((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.put=function(e,t){var r={key:e,value:t};if(n._keymap[e]=r,n.tail?(n.tail.newer=r,r.older=n.tail):n.head=r,n.tail=r,n.size===n.limit)return n.shift();n.size++},this.shift=function(){var e=n.head;return e&&(n.head.newer?(n.head=n.head.newer,n.head.older=void 0):n.head=void 0,e.newer=e.older=void 0,delete n._keymap[e.key]),e},this._get=function(e,t){var r=n._keymap[e];if(void 0!==r)return r===n.tail||(r.newer&&(r===n.head&&(n.head=r.newer),r.newer.older=r.older),r.older&&(r.older.newer=r.newer),r.newer=void 0,r.older=n.tail,n.tail&&(n.tail.newer=r),n.tail=r),t?r:r.value},this.find=function(e){return n._keymap[e]},this._set=function(e,t){var r,o=n._get(e,!0);return o?(r=o.value,o.value=t):(r=n.put(e,t))&&(r=r.value),r},this.toString=function(){for(var e="",t=n.head;t;)e+=String(t.key)+":"+t.value,(t=t.newer)&&(e+=" < ");return e},this.size=0,this.limit=t,this._keymap={}}));function Gu(e){return Gu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gu(e)}function qu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Yu(r.key),r)}}function Ku(e,t,n){return t&&qu(e.prototype,t),n&&qu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yu(e){var t=function(e,t){if("object"!=Gu(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Gu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Gu(t)?t:t+""}var Xu=Ku((function e(t,n,r,o,i,a){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._acceptNode=function(e){if(!e.getAttribute)return!1;var t=(e.getAttribute("data")||"").toLowerCase();return s.stalkingList[e.tagName]&&("OBJECT"!==e.tagName||"text/html"===(e.getAttribute("type")||"").toLowerCase()||t.indexOf(".html")===t.length-5||t.indexOf(".htm")===t.length-4)},this._waitForNode=function(e){var t,n,r,o,i,a,c=!1,u=e.nodeName.toUpperCase(),l=((e.getAttribute?e.getAttribute("data"):"")||"").toLowerCase(),d=((e.getAttribute?e.getAttribute("type"):"")||"").toLowerCase();if(u.match(/^(IMG|IFRAME|IMAGE)$/)||s.framesetRecordEnabled&&u.match(/^(FRAME)$/)||s.htmlObjectRecordEnabled&&u.match(/^(OBJECT)$/)&&("text/html"===d||l.indexOf(".html")===l.length-5||l.indexOf(".htm")===l.length-4)||"LINK"===u&&e.rel&&e.rel.match(/\bstylesheet\b/i)){if("LINK"===u&&e.rel&&e.sheet)return;var f;if((t=s.getResourceFromList(e))&&("OBJECT"===e.tagName&&l!==t.url||"OBJECT"!==e.tagName&&e.src!==t.url)&&(c=!0),!(i=e.src||"function"==typeof e.getAttribute&&e.getAttribute("xlink:href")||e.href||"OBJECT"===e.tagName&&l).match)return void(null===(f=s._bus)||void 0===f||f.emit("clsDebug","Debug: Unexpected url - typeof: "+Gu(i)+', url: "'+i+'"'));if(!i||i.match(/^(about:|javascript:|data:)/i))return;if(t&&t.url!==i&&(c=!0),"IMG"===u){if(e.naturalWidth&&!c||""!==e.getAttribute("src")&&e.complete)return;if("function"==typeof e.getAttribute&&""===e.getAttribute("src"))return}if(s._acceptNode(e)&&c)return;t||s.addResource(e,i),a=function(t){s._loadCallBack(t),L.removeEventHandler(e,"load",a),L.removeEventHandler(e,"error",a)},L.addEventHandler(e,"load",a),L.addEventHandler(e,"error",a)}else e&&e.nodeType===window.Node.ELEMENT_NODE&&["IMAGE","IMG"].forEach((function(t){if((n=e.getElementsByTagName(t)).length)for(r=0,o=n.length;r<o;r++)s._waitForNode(n[r])}))},this._loadCallBack=function(e){s.removeResource(e.target)},this.checkMutation=function(e){var t,n,r;if("attributes"===e.type)s._waitForNode(e.target);else if("childList"===e.type){for(n=e.addedNodes.length,t=0;t<n;t++)s._waitForNode(e.addedNodes[t]);for(n=e.removedNodes.length,t=0;t<n;t++)r=e.removedNodes[t],s._acceptNode(r)&&s.getResourceFromList(r)&&s.removeResource(r)}},this.addResource=t,this.removeResource=n,this.getResourceFromList=r,this.framesetRecordEnabled=o,this.htmlObjectRecordEnabled=i,this._bus=a,this.stalkingList={IFRAME:!0,FRAME:!!this.framesetRecordEnabled,OBJECT:!!this.htmlObjectRecordEnabled}}));function Ju(e){return Ju="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ju(e)}function Zu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$u(r.key),r)}}function Qu(e,t,n){return t&&Zu(e.prototype,t),n&&Zu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function $u(e){var t=function(e,t){if("object"!=Ju(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ju(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ju(t)?t:t+""}var el=Qu((function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._startListen=function(){o._spaState.isRoutingStart||(o._bus.on("ajax:send",o._addAjax),o._bus.on("ajax:end",o._removeAjax),o._bus.on("ajax:loadError",o._removeAjax),o._bus.on("domMutation",o._checkMutation),o._spaState.isRoutingStart=!0)},this._segmentChange=function(e){o._spaState.isRoutingStart&&(o._loadTime=o._spaState.totalLoadTime),o._spaState.keepListen=!0,o._spaState.pendingEvents={},o._spaState.totalLoadTime=0,o._spaState.startTime=e,o._startListen()},this._setTime=function(e){o._timerId&&clearTimeout(o._timerId),o._timerId=setTimeout(o._checkPending,e)},this._checkPending=function(){L.isEmpty(o._spaState.pendingEvents)&&(o._loadTime=o._spaState.totalLoadTime,o._spaState.keepListen=!1,o._bus.emit("segmentLoadEnd",{type:"loadTimeEnd"}))},this._addAjax=function(e){o._spaState.keepListen&&(o._spaState.pendingEvents[e.uuid]={url:e.url})},this._removeAjax=function(e){o._spaState.keepListen&&o._removeAssetFromList(e.uuid)},this._addResource=function(e,t){o._spaState.pendingEvents[o._nodeCache.idOf(e)]={url:t}},this._getResourceFromList=function(e){return o._spaState.pendingEvents[o._nodeCache.idOf(e)]},this._removeResource=function(e){var t=o._nodeCache.idOf(e);o._removeAssetFromList(t)},this._removeAssetFromList=function(e){o._spaState.pendingEvents[e]&&(o._spaState.totalLoadTime=L.currentTimestamp()-o._spaState.startTime,delete o._spaState.pendingEvents[e],L.isEmpty(o._spaState.pendingEvents)&&o._setTime(o._SPA_IDLE_TIMEOUT))},this._checkMutation=function(e){o._spaState.keepListen&&o._resourcesTracker.checkMutation(e)},this.segmentChange=function(e){return o._options.recordSpaLoadTime&&o._options.interceptAjax?(o._segmentChange(e),null===o._loadTime&&(o._loadTime=window.performance.timing.domContentLoadedEventEnd-window.performance.timing.navigationStart),o._loadTime>o._options.spaLoadTimeLimit?(o._bus.emit("clsDebug","Error: SPA load time exceed "+o._options.spaLoadTimeLimit+" milliseconds, SPA load time:"+o._loadTime),-1):o._loadTime):-1},this._bus=t,this._nodeCache=n,this._options=r,this._SPA_IDLE_TIMEOUT=50,this._spaState={pendingEvents:{},totalLoadTime:0,startTime:0,keepListen:!1},this._timerId=null,this._loadTime=null,this._resourcesTracker=new Xu(this._addResource,this._removeResource,this._getResourceFromList,this._options.framesetRecordEnabled,this._options.htmlObjectRecordEnabled,this._bus)})),tl={loaded:!1,domLoaded:!1,handshakeDone:!1,encryptionReady:!1,stopped:!1,clickStart:void 0,clickStartType:void 0,scrolling:{},unloading:!1,maxScrollReach:0,typableElementsLRUMap:new zu(20),lastFocusData:{},mouseEnterReported:!1,hover:{hoverStartTimestamp:0,hoverElementList:[]},clsDebugCounter:0,toggleClick:!1,visibilityChanges:[],initPlugins:!1};function nl(e){return nl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nl(e)}function rl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,il(r.key),r)}}function ol(e,t,n){return t&&rl(e.prototype,t),n&&rl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function il(e){var t=function(e,t){if("object"!=nl(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nl(t)?t:t+""}var al=ol((function e(t,n,r,o,a,s,c,u,l,d){var f=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._detectNativeCookiesChange=function(){var e,t,n,r=!1,o=[];try{for(n=(n=f._storage._get(f._PREVIOUS_NATIVE_COOKIES))?JSON.parse(n):[],e=0;e<f._pageNativeCookies.length;e++)t=f._cookieHelper._get(f._pageNativeCookies[e],!0),o.push(t),t!==n[e]&&(r=!0);r&&f._storage._set(f._PREVIOUS_NATIVE_COOKIES,L.arrayToJsonSafe(o))}catch(e){return i.error("Failed detecting native cookies change. Exception message:"+e.message,e),!1}return r},this._collectCookies=function(e,t){var n,r;for(n=0;n<e.length;n++)(r=f._cookieHelper._get(e[n]))&&(e[n]===H.cookies.session&&(f._clsS=r),t.push(e[n]+"="+encodeURIComponent(r)))},this._sendCorsHelper=function(e){var t=[f._config.reportURI];return(f._config.extraReportURIs||[]).forEach((function(e){-1===t.indexOf(e)&&t.push(e)})),t.forEach((function(t){var n=[];f._collectCookies(f._CORS_COOKIES,n),f._collectCookies(f._pageNativeCookies,n);var r=L.currentTimestamp();f._state=f._STATE.HELPING;var o=e||!f._config.enableSessionizingByCors?"&f_cls_s=true":"",a="".concat(t,"?").concat(n.join("&"),"&pv=2").concat(o);if(!f._config.reportByFetch){var s=f._xhrFactory(),c=function(){if(4===s.readyState){var n;if(f._requestDuration=L.currentTimestamp()-r,f._requestStatus=s.status,200===s.status)if(s.response)try{n=JSON.parse(s.response),f._handleResponse(n,e)}catch(e){i.error("Failed parsing JSON of response: ".concat(e.message),e,"uri:".concat(t)),L.isIE()?console.error("Error parsing GET response. If using remote client configuration, plugins will not be initialized."):console.error("%c Error parsing GET response. If using remote client configuration, plugins will not be initialized.","color: white; background: red")}else f._storage._set(f._CORS_READY_KEY,!0);f._onCorsReady()}else 0===s.readyState&&u()},u=function(){i.error("Failed getting cors response data for url : ".concat(a," status: ").concat(s.status," ").concat(s.statusText)),f._onCorsReady()};return f._config.xhrBypassOnReadyStateChange?(L.addEventHandler(s,"load",c),L.addEventHandler(s,"abort",u),L.addEventHandler(s,"error",u)):s.onreadystatechange=c,s.open("GET",a,!0),s.withCredentials=!0,s.setTimeout=f._CORS_REQUEST_TIMEOUT,s.send(),!0}var l=new Headers,d=new Request(a,{method:"GET",headers:l,mode:"cors",credentials:"include",cls_own:!0});fetch(d).then((function(t){t.json().then((function(t){f._handleResponse(t,e),f._onCorsReady()})).catch((function(){f._onCorsReady()}))})).catch((function(){f._onCorsReady()}))})),!0},this._handleResponse=function(e,t){var n;return null!=e&&null!==(n=e.conf)&&void 0!==n&&null!==(n=n.configuration)&&void 0!==n&&n.recording&&f._domRecordingPercentagesHandler.handleResponse(e.conf.configuration.recording),(f._config.shouldReadClientAttributeOnCors||f._config.pageAttributesEnabled)&&e.conf&&f._bus.emit("handleCorsResponse",e),f._config.checkOptOutUsingCors&&void 0!==e.opedOut&&!0===e.opedOut?f._onCorsBlocked(f._BLOCKED_REASON.GDPR):!0===e.blockRecording?(f._bus.emit("shouldBlockRecording"),f._onCorsBlocked(f._BLOCKED_REASON.SESSION)):(f._storage._set(f._CORS_READY_KEY,!0),f._breachHandler.handleResponse(e.usage),f._config.supportRemoteClientConfig&&f._configurationHandler.handleResponse(e),f._config.enableSessionizingByCors&&!t&&f._stitchingSessionIdHandler.handleResponse(e,f._clsS),e.clse&&e.clse.clse&&f._bus.emit("clseUpdate",e.clse.clse),void(e.rto&&f._cookieHelper._get("rto")!==e.rto&&f._bus.emit("rtoUpdate",e)))},this._handleSafariNativeCookies=function(){try{var e,t=[];for(e=0;e<f._pageNativeCookies.length;e++)t.push({key:f._pageNativeCookies[e],value:f._cookieHelper._get(f._pageNativeCookies[e])});f._bus.emit("updateSafariQueryString",t)}catch(e){i.error("Failed handling Safari native cookies. Exception message:"+e.message,e)}},this._onLoad=function(){if(f._onLoadWasCalled=!0,"true"===f._cookieHelper._get(f._SESSION_BLOCKED_KEY))return f._onCorsBlocked(f._BLOCKED_REASON.SESSION);if(f._enabled){if(f._pageNativeCookies.length)if(L.isSafari(window.navigator.userAgent))f._handleSafariNativeCookies();else if(f._config.resetCorsOnNativeCookieChange&&f._detectNativeCookiesChange())return void f._corsReset();window!==window.top&&f._config.iframeWaitForHandshake&&!f._handshakeDone||f._sendCorsHelper()}else f._onCorsReady()},this._onCorsReady=function(){f._state=f._STATE.READY,f._bus.emit("corsReady")},this._onCorsBlocked=function(e){switch(e){case f._BLOCKED_REASON.GDPR:void 0!==f._cookieHelper._get(H.cookies.session)&&f._cookieHelper._set(H.cookies.session,0,-1),void 0!==f._cookieHelper._get(H.cookies.visitor)&&f._cookieHelper._set(H.cookies.visitor,0,-1),f._bus.emit("GDPR:optOut"),delete window._detector;break;case f._BLOCKED_REASON.SESSION:f._cookieHelper._set(f._SESSION_BLOCKED_KEY,"true")}return f._detectorAsStoppable.stop(),!0},this._corsReset=function(e){f._enabled&&(f._bus.emit("corsReset"),f._storage._set(f._CORS_READY_KEY,""),f._state=f._STATE.INIT,f._requestDuration=-1,f._requestStatus=-1,f._sendCorsHelper(e))},this.initialize=function(){f._bus.once("init:loaded",f._onLoad)},this.onCookieChanged=function(e){f._state===f._STATE.READY&&f._corsReset(e)},this._bus=t,this._xhrFactory=n,this._storage=r,this._cookieHelper=o,this._breachHandler=a,this._stitchingSessionIdHandler=c,this._configurationHandler=u,this._domRecordingPercentagesHandler=s,this._detectorAsStoppable=l,this._config=d||{},this._STATE={INIT:0,HELPING:1,READY:2},this._CORS_REQUEST_TIMEOUT=5e3,this._CORS_READY_KEY="cors_ready",this._CORS_COOKIES=[H.cookies.session,H.cookies.visitor,H.cookies.integrationId,H.cookies.rto],this._pageNativeCookies=this._config.reportCorsTakeNativeCookies||[],this._clsS="",this._PREVIOUS_NATIVE_COOKIES="prev_native_cookies",this._enabled=!this._config.reportDisableCors||this._config.checkOptOutUsingCors,this._state=this._STATE.INIT,this._requestDuration=-1,this._requestStatus=-1,this._onLoadWasCalled=!1,this._handshakeDone=!1,this._BLOCKED_REASON={GDPR:1,SESSION:2},this._SESSION_BLOCKED_KEY="session_blocked",this.stats=function(){return{enabled:f._enabled,state:f._state,requestDuration:f._requestDuration,requestStatus:f._requestStatus}},window!==window.top&&this._config.iframeWaitForHandshake&&this._bus.on("iframesHandshakeDone",(function(){f._onLoadWasCalled&&f._sendCorsHelper(),f._handshakeDone=!0})),this._bus.on("breachDataRequired",this._sendCorsHelper)}));function sl(e){return sl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sl(e)}function cl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ll(r.key),r)}}function ul(e,t,n){return t&&cl(e.prototype,t),n&&cl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ll(e){var t=function(e,t){if("object"!=sl(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=sl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==sl(t)?t:t+""}var dl=ul((function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.handleResponse=function(e){if(e)try{if(e.conf&&e.conf.configuration&&e.conf.configuration.remoteConfiguration&&Object.keys(e.conf.configuration.remoteConfiguration).length){var t=e.conf.configuration.remoteConfiguration;o._storage._set(o._CLIENT_CONF,H.Base64.encode(JSON.stringify(t))),o._bus.emit("clientRemoteConfiguration",t)}else o._bus.emit("clientRemoteConfiguration")}catch(e){i.error("Exception during client configuration handling. Error: "+e.message,e)}else o._allowBlankResponse&&o._bus.emit("clientRemoteConfiguration")},this._bus=t,this._storage=n,this._allowBlankResponse=r,this._CLIENT_CONF="client_conf"}));function fl(e){return fl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fl(e)}function pl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hl(r.key),r)}}function ml(e,t,n){return t&&pl(e.prototype,t),n&&pl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function hl(e){var t=function(e,t){if("object"!=fl(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=fl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fl(t)?t:t+""}var gl=ml((function e(t){var n,r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._elementMatches=Element.prototype.matches||Element.prototype.msMatchesSelector||function(){return!1},this._tokenizeSelector=(n=/([^>]*):eq\((\d+)\)/gi,r=function(e){return e.replace(/^[\s>]*|[\s>]*$/gi,"")},function(e){for(var t,o=[],i=0,a=n.exec(e);null!==a;)a.index&&(t=r(e.substring(i,a.index)))&&o.push({selector:t,eqIndex:-1}),o.push({selector:r(a[1]),eqIndex:parseInt(a[2])}),i=a.index+a[0].length,a=n.exec(e);return i<e.length&&(t=r(e.substring(i)))&&o.push({selector:t,eqIndex:-1}),o}),this._applySelectorToken=function(e,t,n,r,i){if("function"!=typeof e.querySelector)return[];if(-1!==t.eqIndex){if(1===r){var a=e.querySelectorAll(t.selector);return a[t.eqIndex]?[a[t.eqIndex]]:[]}var s,c=0,u=e&&e.nodeType===window.Node.DOCUMENT_NODE?[e.documentElement]:L.children(e);for(s=0;s<u.length;s++)if(o._elementMatches.call(u[s],t.selector)&&c++===t.eqIndex)return[u[s]];return[]}if(i&&n){var l=e.querySelector(t.selector);return l?[l]:[]}return Array.prototype.slice.call(e.querySelectorAll(t.selector))},this._followTokens=function(e,t,n){for(var r,i,a,s,c=(t=t.slice()).length,u=[],l=[e];t.length>0;){for(r=t.shift(),a=[],i=0;i<l.length;i++){if(s=o._applySelectorToken(l[i],r,n,c,0===t.length),n&&0===r.length&&s.length>0)return[s[0]];a.push.apply(a,s)}u=l=a}return u},this._querySelectorAll=function(e,t){return o._followTokens(e,t,!1)},this._targetMatches=function(e,t,n){return(!e||e.nodeType===window.Node.ELEMENT_NODE)&&(1===n.length&&-1===n[0].eqIndex?o._elementMatches.call(e,t):-1!==o._querySelectorAll(L.getRootNode(e),n).indexOf(e))},this.querySelector=function(e,t){var n=o._tokenizeSelector(t);return o._targetMatches(e,t,n)?e:o._followTokens(e,n,!0)[0]||null},this.matches=function(e,t){var n=o._tokenizeSelector(t);return 1===n.length&&-1===n[0].eqIndex?o._elementMatches.call(e,t):-1!==o._querySelectorAll(e.ownerDocument,n).indexOf(e)},this.isValidSelector=function(e){if(!e)return!1;try{var t,n=o._tokenizeSelector(e);for(t=0;t<n.length;t++)o._applySelectorToken(o._helperDiv,n[0],!0,n.length,!0);return n.length>0}catch(e){return!1}},this._document=t,this._helperDiv=t.createElement("div")})),yl={KEY_NON_HUMAN_COUNT:"bot.nh",KEY_DETECT:"bot.d",BOT_CODES:{CLICKS_WITH_NO_MOUSE_MOVES:{code:"1",active:!0},NOT_TRUSTED_MOUSEEVENT:{code:"3",active:!0},INVALID_NAVIGATION_API_VALUES:{code:"4",active:!0},MOVE_AND_CLICK_SAME_COORDINATES_AND_TIMES:{code:"5",active:!0}},HUMAN_CODES:{MANY_MOUSE_MOVES_BETWEEN_CLICKS:{code:"-1",active:!0}}};function vl(e){return vl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vl(e)}function bl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Sl(r.key),r)}}function _l(e,t,n){return t&&bl(e.prototype,t),n&&bl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Sl(e){var t=function(e,t){if("object"!=vl(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=vl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vl(t)?t:t+""}var wl=_l((function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._extractFromAdobeObject=function(){try{if(o._window.Visitor&&"function"==typeof o._window.Visitor.getInstance)return o._window.Visitor.getInstance(o._customerId)._fields.MCMID}catch(e){o._logger.error("Failed extracting Adobe session ID'. Error: "+e.message,e)}return null},this._extractFromURL=function(){var e=L.validateHref(o._window.location.href).split("MCMID%3D");return e[1]?e[1].split("%")[0]:null},this.extract=function(){return o._extractFromURL()||o._extractFromAdobeObject(o._customerId)},this._window=t,this._logger=n,this._customerId=r}));function El(e){return El="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},El(e)}function Cl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kl(r.key),r)}}function Tl(e,t,n){return t&&Cl(e.prototype,t),n&&Cl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function kl(e){var t=function(e,t){if("object"!=El(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=El(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==El(t)?t:t+""}var Il=Tl((function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._sendEventData=function(e){try{if(e&&e.svars){var t=o._collectValues(e.svars,o._keysToCollect);Object.keys(t).length>0&&(o._events.isListenToEvent("3rdpartymap:scReport")?o._events.emit("3rdpartymap:scReport",{value:t}):o._events.once("init:preloaded",(function(){o._events.emit("3rdpartymap:scReport",{value:t})})))}}catch(e){o._logger.error("Failed extracting Adobe Launch event data'. Error: "+e.message,e),o._events.emit("clsDebug","Failed extracting Adobe Launch event data")}},this._intercept=function(e){try{if(!e.thirdPartyAttributeRules)return;var t=new Set;if(e.thirdPartyAttributeRules.forEach((function(e){e.attributes.forEach((function(e){return t.add(e)}))})),o._keysToCollect=Array.from(t),!o._window._satellite)return;var n=o,r=o._window._satellite.track;if(o._window._satellite.track=function(e,t){n._sendEventData(t),r.apply(this,arguments)},void 0!==o._window.alloy){var i=o._window.alloy("sendEvent");o._window.alloy=function(e,t){return"sendEvent"===e&&n._sendEventData(t),i.apply(this,arguments)}}}catch(e){o._logger.error("Failed Hooking Adobe Launch _satellite or alloy objects'. Error: "+e.message,e),o._events.emit("clsDebug","Failed Hooking Adobe Launch _satellite or alloy objects. "+e.message)}},this._collectValues=function(e,t){var n=Object.keys(e).reduce((function(t,n){var r=n;return n.startsWith("eVar")&&(r=n.replace(/^eVar/,"v")),n.startsWith("prop")&&(r=n.replace(/^prop/,"c")),t[r]=e[n],t}),{});return t.reduce((function(e,t){return Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]),e}),{})},this._window=t,this._events=n,this._logger=r,this._events.on("newRemoteConfig",this._intercept)}));function Al(e){return Al="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Al(e)}function Pl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Rl(r.key),r)}}function xl(e,t,n){return t&&Pl(e.prototype,t),n&&Pl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rl(e){var t=function(e,t){if("object"!=Al(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Al(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Al(t)?t:t+""}var Ol=xl((function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.handleResponse=function(e){if(e)try{e.sessionQuotaBreach?(o._storage._set(o._SESSION_BREACH_KEY,"true"),o._asStoppable.stop(),o._bus.emit("quotaBreach"),o._bus.emit("clsDebug","quotaBreach activated from gateway handler")):(o._storage.remove(o._SESSION_BREACH_KEY),o._asStoppable.isStopped()&&o._asStoppable.start()),e.apiCallQuotaBreach?(o._storage._set(o._API_BREACH_KEY,"true"),o._bus.emit("apiCallBreach"),o._bus.emit("clsDebug","apiCallBreach activated from gateway handler")):(o._storage.remove(o._API_BREACH_KEY),o._bus.emit("apiCallBreachCanceled")),e.customServerCallsBreach?(o._storage._set(o._CUSTOM_SERVER_CALLS_BREACH_KEY,"true"),o._bus.emit("customServerCallsBreach"),o._bus.emit("clsDebug","customServerCallsBreach activated via gateway handler (from cligate) - custom events now being suppressed")):(o._storage.remove(o._CUSTOM_SERVER_CALLS_BREACH_KEY),o._bus.emit("customServerCallsBreachCanceled")),H.dataLimit=e.dataLimit}catch(e){i.error("Exception during quota breach handling. Error: "+e.message,e)}},this._SESSION_BREACH_KEY="session_breach",this._API_BREACH_KEY="api_breach",this._CUSTOM_SERVER_CALLS_BREACH_KEY="custom_server_calls_breach",this._bus=t,this._storage=n,this._asStoppable=r}));function Ml(e){return Ml="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ml(e)}function Nl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Dl(r.key),r)}}function jl(e,t,n){return t&&Nl(e.prototype,t),n&&Nl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Dl(e){var t=function(e,t){if("object"!=Ml(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ml(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ml(t)?t:t+""}var Ll=jl((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.handleResponse=function(e){if(e)try{var t,n;e.clss&&r._detector._sessionId!==e.clss&&(t=e.clss,r._bus.emit("clsDebug","CLS_S was set by cligate gateway handler")),e.clsv&&r._detector._visitorId!==e.clsv&&(n=e.clsv,r._bus.emit("clsDebug","CLS_V was set by cligate gateway handler")),r._detector.setIds(t,n)}catch(e){i.error("Exception during Setting CLS_S by cligate gateway handler. Error: "+e.message,e)}},this._bus=t,this._detector=n}));function Bl(e){return Bl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bl(e)}function Fl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Vl(r.key),r)}}function Ul(e,t,n){return t&&Fl(e.prototype,t),n&&Fl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Vl(e){var t=function(e,t){if("object"!=Bl(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Bl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Bl(t)?t:t+""}var Hl=Ul((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._extractFromIframe=function(e,t,n){if(!L.isIE()||"HTMLSlotElement"!==t&&"Element"!==t&&"assignedSlot"!==e){var o;if(n)try{o="onLoad"===r._calledFrom?Object.getOwnPropertyDescriptor(r.tempIFrame.contentWindow[t].prototype,e).get:Object.getOwnPropertyDescriptor(window[t].prototype,e).get}catch(n){o=Object.getOwnPropertyDescriptor(window[t].prototype,e).get}else try{o="onLoad"===r._calledFrom?Object.getOwnPropertyDescriptor(r.tempIFrame.contentWindow[t].prototype,e).value:Object.getOwnPropertyDescriptor(window[t].prototype,e).value}catch(n){o=Object.getOwnPropertyDescriptor(window[t].prototype,e).value}return o}},this._reinstateNative=function(e,t,n,o){var i=r._extractFromIframe(e,t,n,o);r._globalUtils[e]=function(t){try{return i.call(t)}catch(r){if(n)return t[e];t[e]()}}},this.apply=function(){"onLoad"===r._calledFrom&&document.body.appendChild(r.tempIFrame);for(var e=0,t=Object.keys(r._wantedNativeFunctionName);e<t.length;e++){var n=t[e];r._reinstateNative(n,r._wantedNativeFunctionName[n],!1,r._calledFrom)}for(var o=0,i=Object.keys(r._wantedNativePropsName);o<i.length;o++){var a=i[o];r._reinstateNative(a,r._wantedNativePropsName[a],!0,r._calledFrom)}"onLoad"===r._calledFrom&&document.body.removeChild(r.tempIFrame)},this._globalUtils=t,this._calledFrom=n,this._wantedNativePropsName={childNodes:"Node",parentNode:"Node",children:"Element",assignedSlot:"Text"},this._wantedNativeFunctionName={assignedNodes:"HTMLSlotElement"},this.tempIFrame=document.createElement("IFRAME")}));function Wl(e){return Wl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wl(e)}var zl=function(){return zl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},zl.apply(this,arguments)};function Gl(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function ql(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}function Kl(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function Yl(e,t){return new Promise((function(n){return setTimeout(n,e,t)}))}function Xl(e){return!!e&&"function"==typeof e.then}function Jl(e,t){try{var n=e();Xl(n)?n.then((function(e){return t(!0,e)}),(function(e){return t(!1,e)})):t(!0,n)}catch(e){t(!1,e)}}function Zl(e,t,n){return void 0===n&&(n=16),Gl(this,void 0,void 0,(function(){var r,o,i,a;return ql(this,(function(s){switch(s.label){case 0:r=Array(e.length),o=Date.now(),i=0,s.label=1;case 1:return i<e.length?(r[i]=t(e[i],i),(a=Date.now())>=o+n?(o=a,[4,Yl(0)]):[3,3]):[3,4];case 2:s.sent(),s.label=3;case 3:return++i,[3,1];case 4:return[2,r]}}))}))}function Ql(e){e.then(void 0,(function(){}))}function $l(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]+t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]+t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]+t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]+t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function ed(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]*t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]*t[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=e[3]*t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]*t[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[2]*t[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[3]*t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function td(e,t){return 32==(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function nd(e,t){return 0==(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function rd(e,t){return[e[0]^t[0],e[1]^t[1]]}function od(e){return e=rd(e,[0,e[0]>>>1]),e=rd(e=ed(e,[4283543511,3981806797]),[0,e[0]>>>1]),rd(e=ed(e,[3301882366,444984403]),[0,e[0]>>>1])}function id(e,t){t=t||0;var n,r=(e=e||"").length%16,o=e.length-r,i=[0,t],a=[0,t],s=[0,0],c=[0,0],u=[2277735313,289559509],l=[1291169091,658871167];for(n=0;n<o;n+=16)s=[255&e.charCodeAt(n+4)|(255&e.charCodeAt(n+5))<<8|(255&e.charCodeAt(n+6))<<16|(255&e.charCodeAt(n+7))<<24,255&e.charCodeAt(n)|(255&e.charCodeAt(n+1))<<8|(255&e.charCodeAt(n+2))<<16|(255&e.charCodeAt(n+3))<<24],c=[255&e.charCodeAt(n+12)|(255&e.charCodeAt(n+13))<<8|(255&e.charCodeAt(n+14))<<16|(255&e.charCodeAt(n+15))<<24,255&e.charCodeAt(n+8)|(255&e.charCodeAt(n+9))<<8|(255&e.charCodeAt(n+10))<<16|(255&e.charCodeAt(n+11))<<24],s=td(s=ed(s,u),31),i=$l(i=td(i=rd(i,s=ed(s,l)),27),a),i=$l(ed(i,[0,5]),[0,1390208809]),c=td(c=ed(c,l),33),a=$l(a=td(a=rd(a,c=ed(c,u)),31),i),a=$l(ed(a,[0,5]),[0,944331445]);switch(s=[0,0],c=[0,0],r){case 15:c=rd(c,nd([0,e.charCodeAt(n+14)],48));case 14:c=rd(c,nd([0,e.charCodeAt(n+13)],40));case 13:c=rd(c,nd([0,e.charCodeAt(n+12)],32));case 12:c=rd(c,nd([0,e.charCodeAt(n+11)],24));case 11:c=rd(c,nd([0,e.charCodeAt(n+10)],16));case 10:c=rd(c,nd([0,e.charCodeAt(n+9)],8));case 9:c=ed(c=rd(c,[0,e.charCodeAt(n+8)]),l),a=rd(a,c=ed(c=td(c,33),u));case 8:s=rd(s,nd([0,e.charCodeAt(n+7)],56));case 7:s=rd(s,nd([0,e.charCodeAt(n+6)],48));case 6:s=rd(s,nd([0,e.charCodeAt(n+5)],40));case 5:s=rd(s,nd([0,e.charCodeAt(n+4)],32));case 4:s=rd(s,nd([0,e.charCodeAt(n+3)],24));case 3:s=rd(s,nd([0,e.charCodeAt(n+2)],16));case 2:s=rd(s,nd([0,e.charCodeAt(n+1)],8));case 1:s=ed(s=rd(s,[0,e.charCodeAt(n)]),u),i=rd(i,s=ed(s=td(s,31),l))}return i=$l(i=rd(i,[0,e.length]),a=rd(a,[0,e.length])),a=$l(a,i),i=$l(i=od(i),a=od(a)),a=$l(a,i),("00000000"+(i[0]>>>0).toString(16)).slice(-8)+("00000000"+(i[1]>>>0).toString(16)).slice(-8)+("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)}function ad(e){return parseInt(e)}function sd(e){return parseFloat(e)}function cd(e,t){return"number"==typeof e&&isNaN(e)?t:e}function ud(e){return e.reduce((function(e,t){return e+(t?1:0)}),0)}function ld(e,t){if(void 0===t&&(t=1),Math.abs(t)>=1)return Math.round(e/t)*t;var n=1/t;return Math.round(e*n)/n}function dd(e){return e&&"object"==Wl(e)&&"message"in e?e:{message:e}}function fd(e){return"function"!=typeof e}function pd(e,t,n){var r=Object.keys(e).filter((function(e){return!function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return!0;return!1}(n,e)})),o=Zl(r,(function(n){return function(e,t){var n=new Promise((function(n){var r=Date.now();Jl(e.bind(null,t),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=Date.now()-r;if(!e[0])return n((function(){return{error:dd(e[1]),duration:o}}));var i=e[1];if(fd(i))return n((function(){return{value:i,duration:o}}));n((function(){return new Promise((function(e){var t=Date.now();Jl(i,(function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=o+Date.now()-t;if(!n[0])return e({error:dd(n[1]),duration:i});e({value:n[1],duration:i})}))}))}))}))}));return Ql(n),function(){return n.then((function(e){return e()}))}}(e[n],t)}));return Ql(o),function(){return Gl(this,void 0,void 0,(function(){var e,t,n,i;return ql(this,(function(a){switch(a.label){case 0:return[4,o];case 1:return[4,Zl(a.sent(),(function(e){var t=e();return Ql(t),t}))];case 2:return e=a.sent(),[4,Promise.all(e)];case 3:for(t=a.sent(),n={},i=0;i<r.length;++i)n[r[i]]=t[i];return[2,n]}}))}))}}function md(){var e=window,t=navigator;return ud(["MSCSSMatrix"in e,"msSetImmediate"in e,"msIndexedDB"in e,"msMaxTouchPoints"in t,"msPointerEnabled"in t])>=4}function hd(){var e=window,t=navigator;return ud(["webkitPersistentStorage"in t,"webkitTemporaryStorage"in t,0===t.vendor.indexOf("Google"),"webkitResolveLocalFileSystemURL"in e,"BatteryManager"in e,"webkitMediaStream"in e,"webkitSpeechGrammar"in e])>=5}function gd(){var e=window,t=navigator;return ud(["ApplePayError"in e,"CSSPrimitiveValue"in e,"Counter"in e,0===t.vendor.indexOf("Apple"),"getStorageUpdates"in t,"WebKitMediaKeys"in e])>=4}function yd(){var e=window;return ud(["safari"in e,!("DeviceMotionEvent"in e),!("ongestureend"in e),!("standalone"in navigator)])>=3}function vd(){var e=hd(),t=function(){var e,t,n=window;return ud(["buildID"in navigator,"MozAppearance"in(null!==(t=null===(e=document.documentElement)||void 0===e?void 0:e.style)&&void 0!==t?t:{}),"onmozfullscreenchange"in n,"mozInnerScreenX"in n,"CSSMozDocumentRule"in n,"CanvasCaptureMediaStream"in n])>=4}();if(!e&&!t)return!1;var n=window;return ud(["onorientationchange"in n,"orientation"in n,e&&!("SharedWorker"in n),t&&/android/i.test(navigator.appVersion)])>=2}function bd(e){var t=new Error(e);return t.name=e,t}function _d(e,t,n){var r,o,i;return void 0===n&&(n=50),Gl(this,void 0,void 0,(function(){var a,s;return ql(this,(function(c){switch(c.label){case 0:a=document,c.label=1;case 1:return a.body?[3,3]:[4,Yl(n)];case 2:return c.sent(),[3,1];case 3:s=a.createElement("iframe"),c.label=4;case 4:return c.trys.push([4,,10,11]),[4,new Promise((function(e,n){var r=!1,o=function(){r=!0,e()};s.onload=o,s.onerror=function(e){r=!0,n(e)};var i=s.style;i.setProperty("display","block","important"),i.position="absolute",i.top="0",i.left="0",i.visibility="hidden",t&&"srcdoc"in s?s.srcdoc=t:s.src="about:blank",a.body.appendChild(s);var c=function(){var e,t;r||("complete"===(null===(t=null===(e=s.contentWindow)||void 0===e?void 0:e.document)||void 0===t?void 0:t.readyState)?o():setTimeout(c,10))};c()}))];case 5:c.sent(),c.label=6;case 6:return(null===(o=null===(r=s.contentWindow)||void 0===r?void 0:r.document)||void 0===o?void 0:o.body)?[3,8]:[4,Yl(n)];case 7:return c.sent(),[3,6];case 8:return[4,e(s,s.contentWindow)];case 9:return[2,c.sent()];case 10:return null===(i=s.parentNode)||void 0===i||i.removeChild(s),[7];case 11:return[2]}}))}))}function Sd(e){for(var t=function(e){for(var t,n,r="Unexpected syntax '".concat(e,"'"),o=/^\s*([a-z-]*)(.*)$/i.exec(e),i=o[1]||void 0,a={},s=/([.:#][\w-]+|\[.+?\])/gi,c=function(e,t){a[e]=a[e]||[],a[e].push(t)};;){var u=s.exec(o[2]);if(!u)break;var l=u[0];switch(l[0]){case".":c("class",l.slice(1));break;case"#":c("id",l.slice(1));break;case"[":var d=/^\[([\w-]+)([~|^$*]?=("(.*?)"|([\w-]+)))?(\s+[is])?\]$/.exec(l);if(!d)throw new Error(r);c(d[1],null!==(n=null!==(t=d[4])&&void 0!==t?t:d[5])&&void 0!==n?n:"");break;default:throw new Error(r)}}return[i,a]}(e),n=t[0],r=t[1],o=document.createElement(null!=n?n:"div"),i=0,a=Object.keys(r);i<a.length;i++){var s=a[i],c=r[s].join(" ");"style"===s?wd(o.style,c):o.setAttribute(s,c)}return o}function wd(e,t){for(var n=0,r=t.split(";");n<r.length;n++){var o=r[n],i=/^\s*([\w-]+)\s*:\s*(.+?)(\s*!([\w-]+))?\s*$/.exec(o);if(i){var a=i[1],s=i[2],c=i[4];e.setProperty(a,s,c||"")}}}var Ed,Cd,Td=["monospace","sans-serif","serif"],kd=["sans-serif-thin","ARNO PRO","Agency FB","Arabic Typesetting","Arial Unicode MS","AvantGarde Bk BT","BankGothic Md BT","Batang","Bitstream Vera Sans Mono","Calibri","Century","Century Gothic","Clarendon","EUROSTILE","Franklin Gothic","Futura Bk BT","Futura Md BT","GOTHAM","Gill Sans","HELV","Haettenschweiler","Helvetica Neue","Humanst521 BT","Leelawadee","Letter Gothic","Levenim MT","Lucida Bright","Lucida Sans","Menlo","MS Mincho","MS Outlook","MS Reference Specialty","MS UI Gothic","MT Extra","MYRIAD PRO","Marlett","Meiryo UI","Microsoft Uighur","Minion Pro","Monotype Corsiva","PMingLiU","Pristina","SCRIPTINA","Segoe UI Light","Serifa","SimHei","Small Fonts","Staccato222 BT","TRAJAN PRO","Univers CE 55 Medium","Vrinda","ZWAdobeF"];function Id(e){return e.toDataURL()}function Ad(){var e=this;return function(){if(void 0===Cd){var e=function(){var t=Pd();xd(t)?Cd=setTimeout(e,2500):(Ed=t,Cd=void 0)};e()}}(),function(){return Gl(e,void 0,void 0,(function(){var e;return ql(this,(function(t){switch(t.label){case 0:return xd(e=Pd())?Ed?[2,Kl([],Ed,!0)]:function(){var e=document;return e.fullscreenElement||e.msFullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||null}()?[4,(n=document,(n.exitFullscreen||n.msExitFullscreen||n.mozCancelFullScreen||n.webkitExitFullscreen).call(n))]:[3,2]:[3,2];case 1:t.sent(),e=Pd(),t.label=2;case 2:return xd(e)||(Ed=e),[2,e]}var n}))}))}}function Pd(){var e=screen;return[cd(sd(e.availTop),null),cd(sd(e.width)-sd(e.availWidth)-cd(sd(e.availLeft),0),null),cd(sd(e.height)-sd(e.availHeight)-cd(sd(e.availTop),0),null),cd(sd(e.availLeft),null)]}function xd(e){for(var t=0;t<4;++t)if(e[t])return!1;return!0}function Rd(e){var t;return Gl(this,void 0,void 0,(function(){var n,r,o,i,a,s,c;return ql(this,(function(u){switch(u.label){case 0:for(n=document,r=n.createElement("div"),o=new Array(e.length),i={},Od(r),c=0;c<e.length;++c)"DIALOG"===(a=Sd(e[c])).tagName&&a.show(),Od(s=n.createElement("div")),s.appendChild(a),r.appendChild(s),o[c]=a;u.label=1;case 1:return n.body?[3,3]:[4,Yl(50)];case 2:return u.sent(),[3,1];case 3:n.body.appendChild(r);try{for(c=0;c<e.length;++c)o[c].offsetParent||(i[e[c]]=!0)}finally{null===(t=r.parentNode)||void 0===t||t.removeChild(r)}return[2,i]}}))}))}function Od(e){e.style.setProperty("display","block","important")}function Md(e){return matchMedia("(inverted-colors: ".concat(e,")")).matches}function Nd(e){return matchMedia("(forced-colors: ".concat(e,")")).matches}function jd(e){return matchMedia("(prefers-contrast: ".concat(e,")")).matches}function Dd(e){return matchMedia("(prefers-reduced-motion: ".concat(e,")")).matches}function Ld(e){return matchMedia("(dynamic-range: ".concat(e,")")).matches}var Bd=Math,Fd=function(){return 0},Ud={default:[],apple:[{font:"-apple-system-body"}],serif:[{fontFamily:"serif"}],sans:[{fontFamily:"sans-serif"}],mono:[{fontFamily:"monospace"}],min:[{fontSize:"1px"}],system:[{fontFamily:"system-ui"}]},Vd={fonts:function(){return _d((function(e,t){var n=t.document,r=n.body;r.style.fontSize="48px";var o=n.createElement("div"),i={},a={},s=function(e){var t=n.createElement("span"),r=t.style;return r.position="absolute",r.top="0",r.left="0",r.fontFamily=e,t.textContent="mmMwWLliI0O&1",o.appendChild(t),t},c=Td.map(s),u=function(){for(var e={},t=function(t){e[t]=Td.map((function(e){return function(e,t){return s("'".concat(e,"',").concat(t))}(t,e)}))},n=0,r=kd;n<r.length;n++)t(r[n]);return e}();r.appendChild(o);for(var l=0;l<Td.length;l++)i[Td[l]]=c[l].offsetWidth,a[Td[l]]=c[l].offsetHeight;return kd.filter((function(e){return t=u[e],Td.some((function(e,n){return t[n].offsetWidth!==i[e]||t[n].offsetHeight!==a[e]}));var t}))}))},domBlockers:function(e){var t=(void 0===e?{}:e).debug;return Gl(this,void 0,void 0,(function(){var e,n,r,o,i;return ql(this,(function(a){switch(a.label){case 0:return gd()||vd()?(s=atob,e={abpIndo:["#Iklan-Melayang","#Kolom-Iklan-728","#SidebarIklan-wrapper",'[title="ALIENBOLA" i]',s("I0JveC1CYW5uZXItYWRz")],abpvn:[".quangcao","#mobileCatfish",s("LmNsb3NlLWFkcw=="),'[id^="bn_bottom_fixed_"]',"#pmadv"],adBlockFinland:[".mainostila",s("LnNwb25zb3JpdA=="),".ylamainos",s("YVtocmVmKj0iL2NsaWNrdGhyZ2guYXNwPyJd"),s("YVtocmVmXj0iaHR0cHM6Ly9hcHAucmVhZHBlYWsuY29tL2FkcyJd")],adBlockPersian:["#navbar_notice_50",".kadr",'TABLE[width="140px"]',"#divAgahi",s("YVtocmVmXj0iaHR0cDovL2cxLnYuZndtcm0ubmV0L2FkLyJd")],adBlockWarningRemoval:["#adblock-honeypot",".adblocker-root",".wp_adblock_detect",s("LmhlYWRlci1ibG9ja2VkLWFk"),s("I2FkX2Jsb2NrZXI=")],adGuardAnnoyances:[".hs-sosyal","#cookieconsentdiv",'div[class^="app_gdpr"]',".as-oil",'[data-cypress="soft-push-notification-modal"]'],adGuardBase:[".BetterJsPopOverlay",s("I2FkXzMwMFgyNTA="),s("I2Jhbm5lcmZsb2F0MjI="),s("I2NhbXBhaWduLWJhbm5lcg=="),s("I0FkLUNvbnRlbnQ=")],adGuardChinese:[s("LlppX2FkX2FfSA=="),s("YVtocmVmKj0iLmh0aGJldDM0LmNvbSJd"),"#widget-quan",s("YVtocmVmKj0iLzg0OTkyMDIwLnh5eiJd"),s("YVtocmVmKj0iLjE5NTZobC5jb20vIl0=")],adGuardFrench:["#pavePub",s("LmFkLWRlc2t0b3AtcmVjdGFuZ2xl"),".mobile_adhesion",".widgetadv",s("LmFkc19iYW4=")],adGuardGerman:['aside[data-portal-id="leaderboard"]'],adGuardJapanese:["#kauli_yad_1",s("YVtocmVmXj0iaHR0cDovL2FkMi50cmFmZmljZ2F0ZS5uZXQvIl0="),s("Ll9wb3BJbl9pbmZpbml0ZV9hZA=="),s("LmFkZ29vZ2xl"),s("Ll9faXNib29zdFJldHVybkFk")],adGuardMobile:[s("YW1wLWF1dG8tYWRz"),s("LmFtcF9hZA=="),'amp-embed[type="24smi"]',"#mgid_iframe1",s("I2FkX2ludmlld19hcmVh")],adGuardRussian:[s("YVtocmVmXj0iaHR0cHM6Ly9hZC5sZXRtZWFkcy5jb20vIl0="),s("LnJlY2xhbWE="),'div[id^="smi2adblock"]',s("ZGl2W2lkXj0iQWRGb3hfYmFubmVyXyJd"),"#psyduckpockeball"],adGuardSocial:[s("YVtocmVmXj0iLy93d3cuc3R1bWJsZXVwb24uY29tL3N1Ym1pdD91cmw9Il0="),s("YVtocmVmXj0iLy90ZWxlZ3JhbS5tZS9zaGFyZS91cmw/Il0="),".etsy-tweet","#inlineShare",".popup-social"],adGuardSpanishPortuguese:["#barraPublicidade","#Publicidade","#publiEspecial","#queTooltip",".cnt-publi"],adGuardTrackingProtection:["#qoo-counter",s("YVtocmVmXj0iaHR0cDovL2NsaWNrLmhvdGxvZy5ydS8iXQ=="),s("YVtocmVmXj0iaHR0cDovL2hpdGNvdW50ZXIucnUvdG9wL3N0YXQucGhwIl0="),s("YVtocmVmXj0iaHR0cDovL3RvcC5tYWlsLnJ1L2p1bXAiXQ=="),"#top100counter"],adGuardTurkish:["#backkapat",s("I3Jla2xhbWk="),s("YVtocmVmXj0iaHR0cDovL2Fkc2Vydi5vbnRlay5jb20udHIvIl0="),s("YVtocmVmXj0iaHR0cDovL2l6bGVuemkuY29tL2NhbXBhaWduLyJd"),s("YVtocmVmXj0iaHR0cDovL3d3dy5pbnN0YWxsYWRzLm5ldC8iXQ==")],bulgarian:[s("dGQjZnJlZW5ldF90YWJsZV9hZHM="),"#ea_intext_div",".lapni-pop-over","#xenium_hot_offers"],easyList:[".yb-floorad",s("LndpZGdldF9wb19hZHNfd2lkZ2V0"),s("LnRyYWZmaWNqdW5reS1hZA=="),".textad_headline",s("LnNwb25zb3JlZC10ZXh0LWxpbmtz")],easyListChina:[s("LmFwcGd1aWRlLXdyYXBbb25jbGljayo9ImJjZWJvcy5jb20iXQ=="),s("LmZyb250cGFnZUFkdk0="),"#taotaole","#aafoot.top_box",".cfa_popup"],easyListCookie:[".ezmob-footer",".cc-CookieWarning","[data-cookie-number]",s("LmF3LWNvb2tpZS1iYW5uZXI="),".sygnal24-gdpr-modal-wrap"],easyListCzechSlovak:["#onlajny-stickers",s("I3Jla2xhbW5pLWJveA=="),s("LnJla2xhbWEtbWVnYWJvYXJk"),".sklik",s("W2lkXj0ic2tsaWtSZWtsYW1hIl0=")],easyListDutch:[s("I2FkdmVydGVudGll"),s("I3ZpcEFkbWFya3RCYW5uZXJCbG9jaw=="),".adstekst",s("YVtocmVmXj0iaHR0cHM6Ly94bHR1YmUubmwvY2xpY2svIl0="),"#semilo-lrectangle"],easyListGermany:["#SSpotIMPopSlider",s("LnNwb25zb3JsaW5rZ3J1ZW4="),s("I3dlcmJ1bmdza3k="),s("I3Jla2xhbWUtcmVjaHRzLW1pdHRl"),s("YVtocmVmXj0iaHR0cHM6Ly9iZDc0Mi5jb20vIl0=")],easyListItaly:[s("LmJveF9hZHZfYW5udW5jaQ=="),".sb-box-pubbliredazionale",s("YVtocmVmXj0iaHR0cDovL2FmZmlsaWF6aW9uaWFkcy5zbmFpLml0LyJd"),s("YVtocmVmXj0iaHR0cHM6Ly9hZHNlcnZlci5odG1sLml0LyJd"),s("YVtocmVmXj0iaHR0cHM6Ly9hZmZpbGlhemlvbmlhZHMuc25haS5pdC8iXQ==")],easyListLithuania:[s("LnJla2xhbW9zX3RhcnBhcw=="),s("LnJla2xhbW9zX251b3JvZG9z"),s("aW1nW2FsdD0iUmVrbGFtaW5pcyBza3lkZWxpcyJd"),s("aW1nW2FsdD0iRGVkaWt1b3RpLmx0IHNlcnZlcmlhaSJd"),s("aW1nW2FsdD0iSG9zdGluZ2FzIFNlcnZlcmlhaS5sdCJd")],estonian:[s("QVtocmVmKj0iaHR0cDovL3BheTRyZXN1bHRzMjQuZXUiXQ==")],fanboyAnnoyances:["#ac-lre-player",".navigate-to-top","#subscribe_popup",".newsletter_holder","#back-top"],fanboyAntiFacebook:[".util-bar-module-firefly-visible"],fanboyEnhancedTrackers:[".open.pushModal","#issuem-leaky-paywall-articles-zero-remaining-nag","#sovrn_container",'div[class$="-hide"][zoompage-fontsize][style="display: block;"]',".BlockNag__Card"],fanboySocial:["#FollowUs","#meteored_share","#social_follow",".article-sharer",".community__social-desc"],frellwitSwedish:[s("YVtocmVmKj0iY2FzaW5vcHJvLnNlIl1bdGFyZ2V0PSJfYmxhbmsiXQ=="),s("YVtocmVmKj0iZG9rdG9yLXNlLm9uZWxpbmsubWUiXQ=="),"article.category-samarbete",s("ZGl2LmhvbGlkQWRz"),"ul.adsmodern"],greekAdBlock:[s("QVtocmVmKj0iYWRtYW4ub3RlbmV0LmdyL2NsaWNrPyJd"),s("QVtocmVmKj0iaHR0cDovL2F4aWFiYW5uZXJzLmV4b2R1cy5nci8iXQ=="),s("QVtocmVmKj0iaHR0cDovL2ludGVyYWN0aXZlLmZvcnRobmV0LmdyL2NsaWNrPyJd"),"DIV.agores300","TABLE.advright"],hungarian:["#cemp_doboz",".optimonk-iframe-container",s("LmFkX19tYWlu"),s("W2NsYXNzKj0iR29vZ2xlQWRzIl0="),"#hirdetesek_box"],iDontCareAboutCookies:['.alert-info[data-block-track*="CookieNotice"]',".ModuleTemplateCookieIndicator",".o--cookies--container","#cookies-policy-sticky","#stickyCookieBar"],icelandicAbp:[s("QVtocmVmXj0iL2ZyYW1ld29yay9yZXNvdXJjZXMvZm9ybXMvYWRzLmFzcHgiXQ==")],latvian:[s("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiAxMjBweDsgaGVpZ2h0OiA0MHB4OyBvdmVyZmxvdzogaGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7Il0="),s("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiA4OHB4OyBoZWlnaHQ6IDMxcHg7IG92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsiXQ==")],listKr:[s("YVtocmVmKj0iLy9hZC5wbGFuYnBsdXMuY28ua3IvIl0="),s("I2xpdmVyZUFkV3JhcHBlcg=="),s("YVtocmVmKj0iLy9hZHYuaW1hZHJlcC5jby5rci8iXQ=="),s("aW5zLmZhc3R2aWV3LWFk"),".revenue_unit_item.dable"],listeAr:[s("LmdlbWluaUxCMUFk"),".right-and-left-sponsers",s("YVtocmVmKj0iLmFmbGFtLmluZm8iXQ=="),s("YVtocmVmKj0iYm9vcmFxLm9yZyJd"),s("YVtocmVmKj0iZHViaXp6bGUuY29tL2FyLz91dG1fc291cmNlPSJd")],listeFr:[s("YVtocmVmXj0iaHR0cDovL3Byb21vLnZhZG9yLmNvbS8iXQ=="),s("I2FkY29udGFpbmVyX3JlY2hlcmNoZQ=="),s("YVtocmVmKj0id2Vib3JhbWEuZnIvZmNnaS1iaW4vIl0="),".site-pub-interstitiel",'div[id^="crt-"][data-criteo-id]'],officialPolish:["#ceneo-placeholder-ceneo-12",s("W2hyZWZePSJodHRwczovL2FmZi5zZW5kaHViLnBsLyJd"),s("YVtocmVmXj0iaHR0cDovL2Fkdm1hbmFnZXIudGVjaGZ1bi5wbC9yZWRpcmVjdC8iXQ=="),s("YVtocmVmXj0iaHR0cDovL3d3dy50cml6ZXIucGwvP3V0bV9zb3VyY2UiXQ=="),s("ZGl2I3NrYXBpZWNfYWQ=")],ro:[s("YVtocmVmXj0iLy9hZmZ0cmsuYWx0ZXgucm8vQ291bnRlci9DbGljayJd"),s("YVtocmVmXj0iaHR0cHM6Ly9ibGFja2ZyaWRheXNhbGVzLnJvL3Ryay9zaG9wLyJd"),s("YVtocmVmXj0iaHR0cHM6Ly9ldmVudC4ycGVyZm9ybWFudC5jb20vZXZlbnRzL2NsaWNrIl0="),s("YVtocmVmXj0iaHR0cHM6Ly9sLnByb2ZpdHNoYXJlLnJvLyJd"),'a[href^="/url/"]'],ruAd:[s("YVtocmVmKj0iLy9mZWJyYXJlLnJ1LyJd"),s("YVtocmVmKj0iLy91dGltZy5ydS8iXQ=="),s("YVtocmVmKj0iOi8vY2hpa2lkaWtpLnJ1Il0="),"#pgeldiz",".yandex-rtb-block"],thaiAds:["a[href*=macau-uta-popup]",s("I2Fkcy1nb29nbGUtbWlkZGxlX3JlY3RhbmdsZS1ncm91cA=="),s("LmFkczMwMHM="),".bumq",".img-kosana"],webAnnoyancesUltralist:["#mod-social-share-2","#social-tools",s("LmN0cGwtZnVsbGJhbm5lcg=="),".zergnet-recommend",".yt.btn-link.btn-md.btn"]},n=Object.keys(e),[4,Rd((i=[]).concat.apply(i,n.map((function(t){return e[t]}))))]):[2,void 0];case 1:return r=a.sent(),t&&function(e,t){for(var n="DOM blockers debug:\n```",r=0,o=Object.keys(e);r<o.length;r++){var i=o[r];n+="\n".concat(i,":");for(var a=0,s=e[i];a<s.length;a++){var c=s[a];n+="\n  ".concat(t[c]?"ð«":"â¡ï¸"," ").concat(c)}}console.log("".concat(n,"\n```"))}(e,r),(o=n.filter((function(t){var n=e[t];return ud(n.map((function(e){return r[e]})))>.6*n.length}))).sort(),[2,o]}var s}))}))},fontPreferences:function(){return function(e,t){return void 0===t&&(t=4e3),_d((function(e,n){var r=n.document,o=r.body,i=o.style;i.width="".concat(t,"px"),i.webkitTextSizeAdjust=i.textSizeAdjust="none",hd()?o.style.zoom="".concat(1/n.devicePixelRatio):gd()&&(o.style.zoom="reset");var a=r.createElement("div");return a.textContent=Kl([],Array(t/20|0),!0).map((function(){return"word"})).join(" "),o.appendChild(a),function(e,t){for(var n={},r={},o=0,i=Object.keys(Ud);o<i.length;o++){var a=i[o],s=Ud[a],c=s[0],u=void 0===c?{}:c,l=s[1],d=void 0===l?"mmMwWLliI0fiflO&1":l,f=e.createElement("span");f.textContent=d,f.style.whiteSpace="nowrap";for(var p=0,m=Object.keys(u);p<m.length;p++){var h=m[p],g=u[h];void 0!==g&&(f.style[h]=g)}n[a]=f,t.appendChild(e.createElement("br")),t.appendChild(f)}for(var y=0,v=Object.keys(Ud);y<v.length;y++)r[a=v[y]]=n[a].getBoundingClientRect().width;return r}(r,o)}),'<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1">')}()},audio:function(){var e=window,t=e.OfflineAudioContext||e.webkitOfflineAudioContext;if(!t)return-2;if(gd()&&!yd()&&!function(){var e=window;return ud(["DOMRectList"in e,"RTCPeerConnectionIceEvent"in e,"SVGGeometryElement"in e,"ontransitioncancel"in e])>=3}())return-1;var n=new t(1,5e3,44100),r=n.createOscillator();r.type="triangle",r.frequency.value=1e4;var o=n.createDynamicsCompressor();o.threshold.value=-50,o.knee.value=40,o.ratio.value=12,o.attack.value=0,o.release.value=.25,r.connect(o),o.connect(n.destination),r.start(0);var i=function(e){var t=function(){};return[new Promise((function(n,r){var o=!1,i=0,a=0;e.oncomplete=function(e){return n(e.renderedBuffer)};var s=function(){setTimeout((function(){return r(bd("timeout"))}),Math.min(500,a+5e3-Date.now()))},c=function(){try{var t=e.startRendering();switch(Xl(t)&&Ql(t),e.state){case"running":a=Date.now(),o&&s();break;case"suspended":document.hidden||i++,o&&i>=3?r(bd("suspended")):setTimeout(c,500)}}catch(e){r(e)}};c(),t=function(){o||(o=!0,a>0&&s())}})),t]}(n),a=i[0],s=i[1],c=a.then((function(e){return function(e){for(var t=0,n=0;n<e.length;++n)t+=Math.abs(e[n]);return t}(e.getChannelData(0).subarray(4500))}),(function(e){if("timeout"===e.name||"suspended"===e.name)return-3;throw e}));return Ql(c),function(){return s(),c}},screenFrame:function(){var e=this,t=Ad();return function(){return Gl(e,void 0,void 0,(function(){var e,n;return ql(this,(function(r){switch(r.label){case 0:return[4,t()];case 1:return e=r.sent(),[2,[(n=function(e){return null===e?null:ld(e,10)})(e[0]),n(e[1]),n(e[2]),n(e[3])]]}}))}))}},osCpu:function(){return navigator.oscpu},languages:function(){var e,t=navigator,n=[],r=t.language||t.userLanguage||t.browserLanguage||t.systemLanguage;if(void 0!==r&&n.push([r]),Array.isArray(t.languages))hd()&&ud([!("MediaSettingsRange"in(e=window)),"RTCEncodedAudioFrame"in e,""+e.Intl=="[object Intl]",""+e.Reflect=="[object Reflect]"])>=3||n.push(t.languages);else if("string"==typeof t.languages){var o=t.languages;o&&n.push(o.split(","))}return n},colorDepth:function(){return window.screen.colorDepth},deviceMemory:function(){return cd(sd(navigator.deviceMemory),void 0)},screenResolution:function(){var e=screen,t=function(e){return cd(ad(e),null)},n=[t(e.width),t(e.height)];return n.sort().reverse(),n},hardwareConcurrency:function(){return cd(ad(navigator.hardwareConcurrency),void 0)},timezone:function(){var e,t=null===(e=window.Intl)||void 0===e?void 0:e.DateTimeFormat;if(t){var n=(new t).resolvedOptions().timeZone;if(n)return n}var r,o=(r=(new Date).getFullYear(),-Math.max(sd(new Date(r,0,1).getTimezoneOffset()),sd(new Date(r,6,1).getTimezoneOffset())));return"UTC".concat(o>=0?"+":"").concat(Math.abs(o))},sessionStorage:function(){try{return!!window.sessionStorage}catch(e){return!0}},localStorage:function(){try{return!!window.localStorage}catch(e){return!0}},indexedDB:function(){if(!md()&&!function(){var e=window,t=navigator;return ud(["msWriteProfilerMark"in e,"MSStream"in e,"msLaunchUri"in t,"msSaveBlob"in t])>=3&&!md()}())try{return!!window.indexedDB}catch(e){return!0}},openDatabase:function(){return!!window.openDatabase},cpuClass:function(){return navigator.cpuClass},platform:function(){var e=navigator.platform;return"MacIntel"===e&&gd()&&!yd()?function(){if("iPad"===navigator.platform)return!0;var e=screen,t=e.width/e.height;return ud(["MediaSource"in window,!!Element.prototype.webkitRequestFullscreen,t>.65&&t<1.53])>=2}()?"iPad":"iPhone":e},plugins:function(){var e=navigator.plugins;if(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];if(r){for(var o=[],i=0;i<r.length;++i){var a=r[i];o.push({type:a.type,suffixes:a.suffixes})}t.push({name:r.name,description:r.description,mimeTypes:o})}}return t}},canvas:function(){var e,t,n=!1,r=function(){var e=document.createElement("canvas");return e.width=1,e.height=1,[e,e.getContext("2d")]}(),o=r[0],i=r[1];if(function(e,t){return!(!t||!e.toDataURL)}(o,i)){n=function(e){return e.rect(0,0,10,10),e.rect(2,2,6,6),!e.isPointInPath(5,5,"evenodd")}(i),function(e,t){e.width=240,e.height=60,t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(100,1,62,20),t.fillStyle="#069",t.font='11pt "Times New Roman"';var n="Cwm fjordbank gly ".concat(String.fromCharCode(55357,56835));t.fillText(n,2,15),t.fillStyle="rgba(102, 204, 0, 0.2)",t.font="18pt Arial",t.fillText(n,4,45)}(o,i);var a=Id(o);a!==Id(o)?e=t="unstable":(t=a,function(e,t){e.width=122,e.height=110,t.globalCompositeOperation="multiply";for(var n=0,r=[["#f2f",40,40],["#2ff",80,40],["#ff2",60,80]];n<r.length;n++){var o=r[n],i=o[0],a=o[1],s=o[2];t.fillStyle=i,t.beginPath(),t.arc(a,s,40,0,2*Math.PI,!0),t.closePath(),t.fill()}t.fillStyle="#f9c",t.arc(60,60,60,0,2*Math.PI,!0),t.arc(60,60,20,0,2*Math.PI,!0),t.fill("evenodd")}(o,i),e=Id(o))}else e=t="";return{winding:n,geometry:e,text:t}},touchSupport:function(){var e,t=navigator,n=0;void 0!==t.maxTouchPoints?n=ad(t.maxTouchPoints):void 0!==t.msMaxTouchPoints&&(n=t.msMaxTouchPoints);try{document.createEvent("TouchEvent"),e=!0}catch(t){e=!1}return{maxTouchPoints:n,touchEvent:e,touchStart:"ontouchstart"in window}},vendor:function(){return navigator.vendor||""},vendorFlavors:function(){for(var e=[],t=0,n=["chrome","safari","__crWeb","__gCrWeb","yandex","__yb","__ybro","__firefox__","__edgeTrackingPreventionStatistics","webkit","oprt","samsungAr","ucweb","UCShellJava","puffinDevice"];t<n.length;t++){var r=n[t],o=window[r];o&&"object"==Wl(o)&&e.push(r)}return e.sort()},cookiesEnabled:function(){var e=document;try{e.cookie="cookietest=1; SameSite=Strict;";var t=-1!==e.cookie.indexOf("cookietest=");return e.cookie="cookietest=1; SameSite=Strict; expires=Thu, 01-Jan-1970 00:00:01 GMT",t}catch(e){return!1}},colorGamut:function(){for(var e=0,t=["rec2020","p3","srgb"];e<t.length;e++){var n=t[e];if(matchMedia("(color-gamut: ".concat(n,")")).matches)return n}},invertedColors:function(){return!!Md("inverted")||!Md("none")&&void 0},forcedColors:function(){return!!Nd("active")||!Nd("none")&&void 0},monochrome:function(){if(matchMedia("(min-monochrome: 0)").matches){for(var e=0;e<=100;++e)if(matchMedia("(max-monochrome: ".concat(e,")")).matches)return e;throw new Error("Too high value")}},contrast:function(){return jd("no-preference")?0:jd("high")||jd("more")?1:jd("low")||jd("less")?-1:jd("forced")?10:void 0},reducedMotion:function(){return!!Dd("reduce")||!Dd("no-preference")&&void 0},hdr:function(){return!!Ld("high")||!Ld("standard")&&void 0},math:function(){var e,t=Bd.acos||Fd,n=Bd.acosh||Fd,r=Bd.asin||Fd,o=Bd.asinh||Fd,i=Bd.atanh||Fd,a=Bd.atan||Fd,s=Bd.sin||Fd,c=Bd.sinh||Fd,u=Bd.cos||Fd,l=Bd.cosh||Fd,d=Bd.tan||Fd,f=Bd.tanh||Fd,p=Bd.exp||Fd,m=Bd.expm1||Fd,h=Bd.log1p||Fd;return{acos:t(.12312423423423424),acosh:n(1e308),acoshPf:(e=1e154,Bd.log(e+Bd.sqrt(e*e-1))),asin:r(.12312423423423424),asinh:o(1),asinhPf:Bd.log(1+Bd.sqrt(2)),atanh:i(.5),atanhPf:Bd.log(3)/2,atan:a(.5),sin:s(-1e300),sinh:c(1),sinhPf:Bd.exp(1)-1/Bd.exp(1)/2,cos:u(10.000000000123),cosh:l(1),coshPf:(Bd.exp(1)+1/Bd.exp(1))/2,tan:d(-1e300),tanh:f(1),tanhPf:(Bd.exp(2)-1)/(Bd.exp(2)+1),exp:p(1),expm1:m(1),expm1Pf:Bd.exp(1)-1,log1p:h(10),log1pPf:Bd.log(11),powPI:Bd.pow(Bd.PI,-100)}},videoCard:function(){var e,t=document.createElement("canvas"),n=null!==(e=t.getContext("webgl"))&&void 0!==e?e:t.getContext("experimental-webgl");if(n&&"getExtension"in n){var r=n.getExtension("WEBGL_debug_renderer_info");if(r)return{vendor:(n.getParameter(r.UNMASKED_VENDOR_WEBGL)||"").toString(),renderer:(n.getParameter(r.UNMASKED_RENDERER_WEBGL)||"").toString()}}},pdfViewerEnabled:function(){return navigator.pdfViewerEnabled},architecture:function(){var e=new Float32Array(1),t=new Uint8Array(e.buffer);return e[0]=1/0,e[0]=e[0]-e[0],t[3]}};function Hd(e){var t=function(e){if(vd())return.4;if(gd())return yd()?.5:.3;var t=e.platform.value||"";return/^Win/.test(t)?.6:/^Mac/.test(t)?.5:.7}(e),n=function(e){return ld(.99+.01*e,1e-4)}(t);return{score:t,comment:"$ if upgrade to Pro: https://fpjs.dev/pro".replace(/\$/g,"".concat(n))}}function Wd(e){return JSON.stringify(e,(function(e,t){return t instanceof Error?zl({name:(n=t).name,message:n.message,stack:null===(r=n.stack)||void 0===r?void 0:r.split("\n")},n):t;var n,r}),2)}function zd(e){return id(function(e){for(var t="",n=0,r=Object.keys(e).sort();n<r.length;n++){var o=r[n],i=e[o],a=i.error?"error":JSON.stringify(i.value);t+="".concat(t?"|":"").concat(o.replace(/([:|\\])/g,"\\$1"),":").concat(a)}return t}(e))}function Gd(e){return void 0===e&&(e=50),function(e,t){void 0===t&&(t=1/0);var n=window.requestIdleCallback;return n?new Promise((function(e){return n.call(window,(function(){return e()}),{timeout:t})})):Yl(Math.min(e,t))}(e,2*e)}function qd(e,t){var n=Date.now();return{get:function(r){return Gl(this,void 0,void 0,(function(){var o,i,a;return ql(this,(function(s){switch(s.label){case 0:return o=Date.now(),[4,e()];case 1:return i=s.sent(),a=function(e){var t;return{get visitorId(){return void 0===t&&(t=zd(this.components)),t},set visitorId(e){t=e},confidence:Hd(e),components:e,version:"3.4.2"}}(i),(t||(null==r?void 0:r.debug))&&console.log("Copy the text below to get the debug data:\n\n```\nversion: ".concat(a.version,"\nuserAgent: ").concat(navigator.userAgent,"\ntimeBetweenLoadAndGet: ").concat(o-n,"\nvisitorId: ").concat(a.visitorId,"\ncomponents: ").concat(Wd(i),"\n```")),[2,a]}}))}))}}}var Kd={load:function(e){var t=void 0===e?{}:e,n=t.delayFallback,r=t.debug;return t.monitoring,Gl(this,void 0,void 0,(function(){return ql(this,(function(e){switch(e.label){case 0:return[4,Gd(n)];case 1:return e.sent(),[2,qd(pd(Vd,{debug:r},[]),r)]}}))}))},hashComponents:zd,componentsToDebugString:Wd};function Yd(e){return Yd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yd(e)}function Xd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Jd(r.key),r)}}function Jd(e){var t=function(e,t){if("object"!=Yd(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Yd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Yd(t)?t:t+""}var Zd=function(){return function(e,t,n){return t&&Xd(e.prototype,t),n&&Xd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n,r="object"===Yd(t.glassboxMobileBridge)&&"function"==typeof t.glassboxMobileBridge.getContext?t.glassboxMobileBridge.getContext():void 0;if("string"==typeof r)try{n=JSON.parse(r)}catch(e){}if(void 0===r)try{window.ReactNativeWebView&&"function"==typeof window.ReactNativeWebView.injectedObjectJson&&(n=JSON.parse(window.ReactNativeWebView.injectedObjectJson()).glassboxMobileBridge)}catch(e){}if(void 0===n){var o=L.parseQuery((t.location||{}).search);if(void 0!==o){var i=o.gbSessionId,a=o.gbClse,s=o.gbRto,c=o.gbUrl,u=o.gbRecordingEnabled,l=o.gbDomRecordingEnabled;void 0!==i&&void 0!==c&&(n={sessionId:i,clse:a,rto:s,config:{mobileReportURI:c}},void 0!==u&&(n.config.recordingEnabled="true"===u),void 0!==l&&(n.config.domRecordEnabled="true"===l))}}n=n||{},this._sessionId=n.sessionId,this._clse=n.clse,this._rto=n.rto,this.config=n.config||{}}),[{key:"override",value:function(e,t,n){var r=e,o=t,i="reportURI";if("mobileReportURI"===e||i===e){var a=n[i];if(void 0!==a){r=i;var s=L.extractOrigin(a),c=0===o.indexOf("http")?L.extractPath(o):o;o=s.concat(c)}}return{key:r,value:o}}}])}();function Qd(e){return Qd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qd(e)}function $d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tf(r.key),r)}}function ef(e,t,n){return t&&$d(e.prototype,t),n&&$d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function tf(e){var t=function(e,t){if("object"!=Qd(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Qd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Qd(t)?t:t+""}var nf=ef((function e(t,n,r,o){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.handleResponse=function(e){if(e)try{var t=e.playableSessionCaptureRatio;if("number"==typeof t){if(1===t)return;a._enableByChances.apply(t,a._storageAccessor,a._cookieHelper,"dom",a._config.saveChancesByCookie,void 0)?a._config.domRecordEnabled=!0:(a._config.domRecordEnabled=!1,a._bus.emit("stopDomRecording"))}else i.warn("playableSessionCaptureRatio is missing or not a number, skipping DOM recording chance logic.")}catch(e){i.error("Exception during handling response by cligate gateway handler (playableSessionCaptureRatio). Error: "+e.message,e)}},this._bus=t,this._config=n,this._storageAccessor=r,this._cookieHelper=o,this._enableByChances=new du}));function rf(e){return rf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rf(e)}function of(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||af(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function af(e,t){if(e){if("string"==typeof e)return sf(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sf(e,t):void 0}}function sf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function cf(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof s?r:s,u=Object.create(c.prototype);return uf(u,"_invoke",function(n,r,o){var i,s,c,u=0,l=o||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return i=t,s=0,c=e,f.n=n,a}};function p(n,r){for(s=n,c=r,t=0;!d&&u&&!o&&t<l.length;t++){var o,i=l[t],p=f.p,m=i[2];n>3?(o=m===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=n<2&&p<i[1])?(s=0,f.v=r,f.n=i[1]):p<m&&(o=n<3||i[0]>r||r>m)&&(i[4]=n,i[5]=r,f.n=m,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,l,m){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&p(l,m),s=l,c=m;(t=s<2?e:c)||!d;){i||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==a)break}catch(t){i=e,s=1,c=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function c(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(uf(t={},r,(function(){return this})),t),d=u.prototype=s.prototype=Object.create(l);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,uf(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,uf(d,"constructor",u),uf(u,"constructor",c),c.displayName="GeneratorFunction",uf(u,o,"GeneratorFunction"),uf(d),uf(d,o,"Generator"),uf(d,r,(function(){return this})),uf(d,"toString",(function(){return"[object Generator]"})),(cf=function(){return{w:i,m:f}})()}function uf(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}uf=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){uf(e,t,(function(e){return this._invoke(t,n,e)}))};i("next",0),i("throw",1),i("return",2)}},uf(e,t,n,r)}function lf(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function df(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){lf(i,r,o,a,s,"next",e)}function s(e){lf(i,r,o,a,s,"throw",e)}a(void 0)}))}}function ff(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pf(r.key),r)}}function pf(e){var t=function(e,t){if("object"!=rf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=rf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rf(t)?t:t+""}var mf=function(){function e(t,n,r,o,a,s,c,u,l,d,f,p,m,h,g,y,v){var b=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pickExplicitCookieData=function(){var e,t,n,r,o;if(b.config.visitorIdByQueryParam||b.config.sessionIdByQueryParam||b.config.clseByQueryParam){var a=L.parseQuery(document.location.search.substring(1));b.config.decodeSessionDataQueryParams?(e=a[b.config.sessionIdByQueryParam]?decodeURIComponent(a[b.config.sessionIdByQueryParam]):void 0,t=a[b.config.visitorIdByQueryParam]?decodeURIComponent(a[b.config.visitorIdByQueryParam]):void 0,n=a[b.config.clseByQueryParam]?decodeURIComponent(a[b.config.clseByQueryParam]):void 0,o=a[b.env.cookies.rto]?decodeURIComponent(a[b.env.cookies.rto]):void 0):(e=a[b.config.sessionIdByQueryParam],t=a[b.config.visitorIdByQueryParam],n=a[b.config.clseByQueryParam],o=a[b.env.cookies.rto])}(n&&b.bus.emit("clseUpdate",n),o&&b.bus.emit("rtoUpdate",o),b.global&&(b._mobileBridgeContext._sessionId&&(e=b._mobileBridgeContext._sessionId),b._mobileBridgeContext._clse&&(r=b._mobileBridgeContext._clse),b._mobileBridgeContext._rto&&(o=b._mobileBridgeContext._rto)),b.config.clsByNativeCookie&&(e=b.gCookieHelper._get(b.config.clsByNativeCookie,!0)),b.config.clsByAdobe)&&(e=new wl(window,i,b.config.clsByAdobe).extract());return b.config.interceptAdobeSdkVariables&&new Il(window,b.bus,i),{_sessionId:e?L.isValidUUID(e)?e:void 0:e,_visitorId:t?L.isValidUUID(t)?t:void 0:t,_clse:r?L.startsWithUUID(r)?r:void 0:r,_rto:o}},this.setClientCookiesWithFingerprintData=df(cf().m((function e(){var t,n,r,o,a;return cf().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,t="",b.config.fingerprintSupportReturningUser&&(t=":0",b.gCookieHelper._get(b.env.cookies.visitor)&&(t=":1")),e.n=1,L.awaitWithTimeout(b._fingerprint.load(),b.config.fingerprintApiTimeout);case 1:return n=e.v,e.n=2,L.awaitWithTimeout(n.get(),b.config.fingerprintApiTimeout);case 2:if(r=e.v,!b.config.fingerprintIncludeUniqueIdentifier||!r.visitorId){e.n=4;break}return e.n=3,L.awaitWithTimeout(b.generateEnhancedUUID(r.visitorId,b.endpointData),b.config.fingerprintApiTimeout);case 3:o=e.v,e.n=5;break;case 4:o=r.visitorId;case 5:(o=L.formatToUUID(o))?b.setClientCookies({_sessionId:o+t,_visitorId:o,_clse:void 0}):(b.bus.emit("clsDebug","Fingerprint failed to generate GUID"),b.setClientCookies(b.pickExplicitCookieData())),e.n=7;break;case 6:e.p=6,a=e.v,i.error("Failed to set client cookies with Fingerprint data. Exception message = "+a.message),b.bus.emit("clsDebug","Failed to set client cookies with Fingerprint data. Exception message = "+a.message),b.setClientCookies(b.pickExplicitCookieData());case 7:return e.a(2)}}),e,null,[[0,6]])}))),this.generateEnhancedUUID=function(){var e=df(cf().m((function e(t,n){var r;return cf().w((function(e){for(;;)switch(e.n){case 0:return r=t+JSON.stringify(n),e.n=1,L.uuidv5(r,"6ba7b810-9dad-11d1-80b4-00c04fd430c8");case 1:return e.a(2,e.v)}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.initialize=df(cf().m((function e(){var t,n,r,o,a,s,c,u,l,d,f,p,m,h,g,y,v,_,S,w,E,C,T;return cf().w((function(e){for(;;)switch(e.n){case 0:if(new Hl(L,"initialize").apply(),t=b.asStoppable(),b.isSessionStorageAvailable=!0,b.global._gbSessionStorage||(b.isSessionStorageAvailable=!1,b.bus.emit("clsDebug","Error: sessionStorage is not defined")),b.isSessionStorageAvailable&&"true"===b.global._gbSessionStorage[b.env.Storage.BoundKeyPrefix+"session_breach"]&&(t.stop(),b.bus.emit("quotaBreach"),b.bus.emit("clsDebug","quotaBreach activate from session storage")),b.canRecordCustomEvents=!0,b.isSessionStorageAvailable&&"true"===b.global._gbSessionStorage[b.env.Storage.BoundKeyPrefix+"custom_server_calls_breach"]&&(b.canRecordCustomEvents=!1,b.bus.emit("clsDebug","customServerCallsBreach activated from session storage - custom server calls are disabled")),b.bus.on("customServerCallsBreach",(function(){b.canRecordCustomEvents=!1,b.isSessionStorageAvailable&&(b.global._gbSessionStorage[b.env.Storage.BoundKeyPrefix+"custom_server_calls_breach"]=!0)})),b.bus.on("customServerCallsBreachCanceled",(function(){b.canRecordCustomEvents=!0,b.isSessionStorageAvailable&&b.global._gbSessionStorage.removeItem(b.env.Storage.BoundKeyPrefix+"custom_server_calls_breach")})),"true"===(n=L.parseQuery(document.location.search))["gb-extension"]){for(b.config.reportUriGBCU&&(b.config.extraReportURIs=b.config.extraReportURIs||[],b.config.extraReportURIs.push(b.config.reportUriGBCU)),delete n["gb-extension"],r=[],o=0,a=Object.entries(n);o<a.length;o++)s=of(a[o],2),c=s[0],u=s[1],r.push(c+"="+u);l=r.length?"?"+r.join("&"):"",window.history.replaceState(null,"",L.validateHref(document.location.href.replace(document.location.search,l)))}if(b.bus.on("clsDebug",b.saveClsDebugErrorEvent),b.bus.on("pageAttributes",b.onPageAttributes),d=b.gCookieHelper._get(b.env.cookies.session),f=b.gCookieHelper._get(b.env.cookies.visitor),!(b.config.useFingerprint&&d&&f&&f===d.split(":")[0])){e.n=1;break}b.setClientCookies({_sessionId:void 0,_visitorId:void 0,_clse:void 0}),b.fingerprintIsUsed=!0,b.bus.emit("clsDebug","Browser does NOT support third party cookies, Using Fingerprint library"),b.bus.emit("fingerprintReady"),e.n=16;break;case 1:if(p=b.gCookieHelper._get(b.env.incognitoMode),!(b.config.incognitoDetectionTimeout>0&&null==p)){e.n=5;break}return e.p=2,e.n=3,L.awaitWithTimeout(L.isIncognito(),b.config.incognitoDetectionTimeout);case 3:e.v?(b.bus.emit("clsDebug","User in Private Mode (Incognito)"),b.gCookieHelper._set(b.env.incognitoMode,"true"),b.gCookieHelper._set(b.env.thirdPartyCookiesSupported,"false")):b.gCookieHelper._set(b.env.incognitoMode,"false"),b.bus.emit("incognitoReady"),e.n=5;break;case 4:e.p=4,E=e.v,i.error("Detect incognito failed: "+E.message),b.bus.emit("clsDebug","Main flow - incognito failed. "+E.message),b.bus.emit("incognitoReady");case 5:if(!b.config.useFingerprint||L.isHybrid()||L.isBridge()||L.isIE()){e.n=15;break}if(e.p=6,h=b.gCookieHelper._get(b.env.thirdPartyCookiesSupported),p||null!=h){e.n=8;break}return e.n=7,L.awaitWithTimeout(L.checkThirdPartyCookieSupport(b.config.reportEndpoint),b.config.thirdPartyCookieDetectionTimeout);case 7:(m=e.v)&&("string"==typeof m.data&&(g=JSON.parse(m.data),b.endpointData={uniqueLocationIdentifier:g.uniqueLocationIdentifier,tenantId:g.tenantId}),void 0!==m.thirdParty&&(h=""+m.thirdParty,b.gCookieHelper._set(b.env.thirdPartyCookiesSupported,h)));case 8:if("true"!==h){e.n=9;break}b.config.enableSessionizingByCors=!0,b.setClientCookies(b.pickExplicitCookieData()),b.bus.emit("clsDebug","Browser supports third party cookies"),e.n=11;break;case 9:return e.n=10,b.setClientCookiesWithFingerprintData();case 10:b.fingerprintIsUsed=!0,b.bus.emit("clsDebug","Browser does NOT support third party cookies, Using Fingerprint library");case 11:b.bus.emit("fingerprintReady"),e.n=14;break;case 12:return e.p=12,C=e.v,i.error("Fingerprint failed. Exception message = "+C.message),b.bus.emit("clsDebug","Fingerprint failed. Exception message = "+C.message),e.n=13,b.setClientCookiesWithFingerprintData();case 13:b.fingerprintIsUsed=!0,b.bus.emit("fingerprintReady");case 14:e.n=16;break;case 15:b.setClientCookies(b.pickExplicitCookieData());case 16:if(!tl.stopped){e.n=17;break}return e.a(2);case 17:if(b.global.navigator.connection&&(b.ect=b.global.navigator.connection.effectiveType),e.p=18,b.initializePageDetails(),b.initialiseCorsPlugin(),!b.config.supportRemoteClientConfig){e.n=24;break}if(!(y=b.gStorageAccessor._get("client_conf"))){e.n=22;break}e.p=19,v=JSON.parse(b.env.Base64.decode(y)),e.n=21;break;case 20:throw e.p=20,e.v,_="Error parsing remote client configuration from storage. Plugins will not be initialized.",b.consoleWarning(_),_;case 21:b._refireCoreEvents=!1,b.handleClientConfiguration(v,!1),e.n=23;break;case 22:b.isSessionCookieExist()?b.config.remoteClientConfigAllowBlank?(b._refireCoreEvents=!1,b.handleClientConfiguration(void 0,!1)):(b.consoleWarning("supportRemoteClientConfig is enabled but no config received. Plugins will not be initialized."),t&&t.stop()):(t&&t.stop(),b.bus.on("clientRemoteConfiguration",(function(e){e||b.config.remoteClientConfigAllowBlank?(b.handleClientConfiguration(e,!0),t&&t.start()):b.consoleWarning("supportRemoteClientConfig is enabled but no config received. Plugins will not be initialized.")})));case 23:e.n=25;break;case 24:b.config.delayRecording&&!b.gCookieHelper._get(b.env.cookies.delay)?(t&&t.stop(),b.bus.once("initializeDetectorAfterDelay",(function(){try{b.gCookieHelper._set(b.env.cookies.delay,!0)}catch(e){if(!b.gCookieHelper._get(b.env.cookies.delay,!1))try{b.gStorageAccessor._set(b.env.cookies.delay,!0)}catch(e){b.bus.emit("clsDebug","Failed writing ignore_delay to storage. "+e.message)}}b.initPlugins(b._refireCoreEvents),t&&t.start()}))):b.handleClientConfiguration(void 0,!1);case 25:if(b.bus.on(_c.BlackoutEnter,b.onBlackoutEnter),b.bus.on(_c.BlackoutLeave,b.onBlackoutLeave),t.isStopped(!0),b.updateScrollReach(),b.registerPreLoadEvents(),b.addDomReadyEventHandler(),b.bus.on("3rdpartymap:scReport",b.saveThirdPartyMapEvent),b.bus.on("dataLayerMap",b.saveDataLayerMapEvent),b.bus.on("3rdPartyAttribute",b.saveThirdPartyAttributeEvent),b.bus.on("abTesting",b.saveABTesting),b.bus.on("personalizationCampaign",b.savePersonalizationCampaignEvent),b.bus.on("pageNameResolved",b.onPageNameResolved),b.bus.once("encryptionReady",b.onEncryptionReady),b.bus.on("dom:fuseBlown",b.onDomFuseBlown),b.state.preLoaded=!0,b.bus.on("remoteClseConf",(function(e){if(b.integrationId=e,"function"==typeof b.config.onIntegrationCallback)try{b.config.onIntegrationCallback(b.integrationId)}catch(e){i.error("ERROR: while invoking detector onIntegrationCallback. Exception: ",e.stack?e.stack:e.message)}})),b.bus.on("remoteRtoConf",(function(e){b.rto=e})),b.bus.emit("init:preloaded",{_sessionId:b._sessionId,_visitorId:b._visitorId,pageId:b.page.id}),b.addListenersForReEmission(),S=b.global.document.readyState,document.body&&("complete"===S||"interactive"===S&&b.config.initDetectorOnInteractive)?b.onLoad():(L.addEventHandler(window,"load",b.onLoad,!1),b.config.initDetectorOnInteractive&&L.addEventHandler(window,"readystatechange",b.onReadyStateChange,!1)),window.convertize=window.convertize||[],window.convertize.push("integration",{integration:"glassbox",action:"collect"}),"function"==typeof b.config.onReadyCallback)try{b.config.onReadyCallback(b._sessionId,b._visitorId)}catch(e){i.error("ERROR: while invoking detector onReadyCallback. Exception: ",e.stack?e.stack:e.message)}e.n=27;break;case 26:throw e.p=26,T=e.v,i.error("ERROR: while initializing detector. Exception: ",T.stack?T.stack:T.message),w="WARNING[Glassbox-1302]: Failed initializing detector script - "+T.message,console.log(w),b.saveClsDebugErrorEvent("initialize",T),w;case 27:b.config.reportValidationErrors&&b.bus.on("formValidationError",b.saveValidationError);case 28:return e.a(2)}}),e,null,[[19,20],[18,26],[6,12],[2,4]])}))),this.initialiseCorsPlugin=function(){var e=new al(b.bus,b._ajaxUtils.createXMLHTTPObject,b.gStorageAccessor,b.gCookieHelper,new Ol(b.bus,b.gSessionStorageAccessor,b.asStoppable()),new nf(b.bus,b.config,b.gStorageAccessor,b.gCookieHelper),new Ll(b.bus,b),new dl(b.bus,b.gStorageAccessor,b.config.remoteClientConfigAllowBlank),b.asStoppable(),b.config);b.registerPlugin("cors",e),e.initialize(),e.isInit=!0},this.initPlugins=function(e){if(b.bus.emit("init:plugins"),b.state.initPlugins=!0,b.registerPlugins(),e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=af(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(b._corePluginEvents);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.data?b.bus.emit(r.name,r.data):b.bus.emit(r.name)}}catch(e){n.e(e)}finally{n.f()}}},this.initExitIntent=function(){if(!b._exitIntentBound)if(b._exitIntentBound=!0,L.isMobile())L.isHybrid()||L.isBridge()||b.bus.on("exitIntentCheckScroll",(function(){clearTimeout(b.debounceTimeout),b.debounceTimeout=setTimeout((function(){var e=window.scrollY||document.documentElement.scrollTop;e<b.lastScrollTop&&b.lastScrollTop-e>200&&b.bus.emit("exitIntent"),b.lastScrollTop=e}),50)}));else{L.addEventHandler(document.documentElement,"mouseleave",(function(e){e&&e.clientY&&e.clientY<0&&b.bus.emit("exitIntent")}),!1)}},this.handleClientConfiguration=function(e,t){if(!b._handledClientConfiguration){if(b._handledClientConfiguration=!0,e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(b.config[n]=e[n]);b.initPlugins(t)}},this.clientConfigurationHasBeenHandled=function(){return b._handledClientConfiguration},this.addListenersForReEmission=function(){b._refireCoreEvents&&!b._handledClientConfiguration&&(b._corePluginEvents.push({name:"init:preloaded",data:{_sessionId:b._sessionId,_visitorId:b._visitorId,pageId:b.page.id}}),b.bus.once("newSessionSet",(function(){b._corePluginEvents.push({name:"plugin:newSessionSet"})})),b.bus.once("corsReset",(function(){b._corePluginEvents.push({name:"plugin:corsReset"})})),b.bus.once("corsReady",(function(){b._corePluginEvents.push({name:"plugin:corsReady"})})),b.bus.once("updateSafariQueryString",(function(e){b._corePluginEvents.push({name:"plugin:updateSafariQueryString",data:e})})),b.bus.once("init:loaded",(function(){b._corePluginEvents.push({name:"init:loaded"})})),b.bus.once("encryptionReady",(function(){b._corePluginEvents.push({name:"encryptionReady"})})),b.bus.once("init:domready",(function(){b._corePluginEvents.push({name:"init:domready"})})))},this.onEncryptionReady=function(){var e;for(b.state.encryptionReady=!0,e=0;e<b.encryptionPendingEvents.length;e++)b.bus.emit("saveEvent",b.encryptionPendingEvents[e]);b.encryptionPendingEvents=[]},this.onBlackoutEnter=function(e){if(window===b.global.top){var t=b.createEventObject("blackout",L.currentTimestamp(),null);t.value=e,b.saveEvent(t)}},this.onBlackoutLeave=function(){b.savePageUpdate()},this.onReadyStateChange=function(){document.body&&("complete"===document.readyState||"interactive"===document.readyState&&b.config.initDetectorOnInteractive)&&b.onLoad()},this.onLoad=function(){new Hl(L,"onLoad").apply();var e=L.currentTimestamp();b.state.loaded||(L.time("onLoadInitialization",b.config.timingMode),b.documentEvent&&document.title.length>0&&(void 0===b.page.title||0===b.page.title.length)&&(b.page.title=b.getPageTitle(),b.documentEvent.setExtraInfo(le.VISUAL_NAME,b.page.title)),(b.config.forceLogicalSegmentationOnHash||!L.getLocationUrlSplitByHash(b.global).hash)&&b.config.segmentationTriggerBySimpleSelector.length>0&&b.config.segmentationLabelBySimpleSelector.length>0&&(""!==b.config.segmentationLabelByAttribute&&""!==b.config.segmentationTitleByAttribute||""!==b.config.segmentationLabelByAttribute&&b.config.segmentationTitleByInnerText||b.config.segmentationLabelByInnerText&&""!==b.config.segmentationTitleByAttribute||b.config.segmentationLabelByInnerText&&b.config.segmentationTitleByInnerText)&&b.logicalSegmentTracker.init(),b.config.botDetection&&!L.hasTouch()&&b.botDetector.init(),b.state.loaded=!0,b.page.loadTimestamp=e,b.config.performanceDebugEnabled&&b.bus.emit("clsDebug",L.stringFormat("onLoad: Attempting to send performance event via onLoad event. isPerformanceEventSent: {0}",b.isPerformanceEventSent)),b.trySendPerformanceEvent(),b.bus.emit("init:loaded"),b.registerPostLoadEvents(),!b.config.recordScrollReach||b.config.disableScrollReachForIframes&&window.self!==window.top||b.simulateScrollReach(),L.timeEnd("onLoadInitialization",b.config.timingMode))},this.registerPlugins=function(){L.forOwn(b.plugins,(function(e,t){if(!e.isInit){e.initialize(b.bus,b);e.isInit=!0}})),b.pluginsReady=!0},this.registerPreLoadEvents=function(){var e=function(){return b.state.unloading},t=[{type:"beforeunload",interception:b.interceptUnload,target:window,logicalName:"unload",filter:e},{type:"visibilitychange",interception:b.interceptVisibilityChange,target:document},{type:"resize",internallyDispatchAs:"window",target:window,internalOnly:!0},{type:"change",valueExtraction:b.extractElementValue,interception:b.interceptFocusLost,filter:b.filterNonChangableEventsElements,logicalName:"change",target:document},{type:"reset",target:document},{type:"submit",valueExtraction:b.extractElementSource,target:document},{type:"keyup",target:document,internalOnly:!0},{type:"focus",internallyDispatchAs:"element",valueExtraction:b.extractElementValue,interception:b.interceptFocusIn,filter:b.filterNonTypableElements,target:document},{preload:!0,type:"blur",valueExtraction:b.extractElementValue,interception:b.interceptBlur,filter:b.filterNonTypableElements,logicalName:"change",target:document}];b.bus.on("shadow:rootDetected",(function(e){var t={type:b.getChangeEventType(),target:e,valueExtraction:b.extractElementValue,interception:b.interceptFocusLost,filter:b.filterNonChangableEventsElements,logicalName:"change"};b.registerEventBinding(t)})),L.isSafariOnIos()&&(t.push({type:"pagehide",interception:b.interceptPagehide,target:window,logicalName:"unload",filter:e}),L.isHybridIOS()&&t.push({type:"resize",internallyDispatchAs:"window",target:b.global.visualViewport})),b.page.hasTouch?(t.push({type:"touchstart",interception:b.interceptTouchStart,target:document}),t.push({type:L.isHybridAndroid()?"touchmove":"touchend",interception:b.interceptClickEnd,target:document})):(t.push({type:b.env.mouseEvents.down,interception:b.interceptClickStart,target:document,logicalName:"mousedown"}),t.push({type:b.env.mouseEvents.up,interception:b.interceptClickEnd,target:document}),L.isMobile()||(t.push({type:"dragstart",interception:b.interceptDragStart,target:document}),t.push({type:"dragend",interception:b.interceptDragEnd,target:document}))),b.config.recordMouseMoves&&t.push({type:"mousemove",valueExtraction:b.extractMouseMoveValue,encodeValue:!1,interception:b._interceptMouseMove,dontSendElement:!0,target:document}),b.config.recordHovers&&t.push({type:"mouseover",encodeValue:!1,filter:b.filterHovers,interception:b.interceptMouseOver,target:document}),b.config.recordScrolls&&t.push({type:"scroll",debounceBy:b.config.debounceScrolls,valueExtraction:b.extractScrollValue,interception:b.interceptScroll,target:document}),b.config.recordScrollReach&&t.push({type:"scroll",logicalName:"scrollReach",debounceBy:b.config.debounceScrollReach,valueExtraction:b.extractScrollReach,filter:b.filterScrollElements,interception:b.interceptScrollReach,target:document});var n=L.getMouseEnterTarget();n!==document&&n!==window||t.push({type:"mouseenter",interception:b.interceptMouseEnter,target:n}),b._shouldListenToKeyEvents()&&(t.push({type:"keydown",interception:b.interceptKeyboard,target:document}),t.push({type:"keypress",interception:b.interceptKeyboard,target:document})),b.config.domRecordEnabled&&(b.bus.on("pageSnapshot:save",b.savePageSnapshotEvent),b.bus.on("pageUpdate",b.savePageUpdate)),b.config.resourcesRecordEnabled&&b.bus.on("saveResourceEvent",b.saveResourceDataEvent),b.config.versionResources&&!b.config.resourceTimingRecordEnabled&&b.bus.on("saveResourceUrls",b.saveResourceUrlsEvent),b.config.resourcesRecordAllowCors&&b.bus.on("saveCorsDeniedEvent",b.saveCorsDeniedDataEvent),b.config.clientAttributesEnabled&&b.bus.on("clientAttribute",b.saveClientAttributeEvent),b.config.resourceTimingRecordEnabled&&(new du).apply(b.config.resourceTimingRecordEnabledByChance,b.gStorageAccessor,b.gCookieHelper,"performanceRecord",b.config.saveChancesByCookie)&&b.bus.on("resourcesWaterfall",b.savePerformanceDataEvent),b.bus.on("webVitals",b.saveWebVitalsEvent),b.config.domFormAnalysisReporting&&b.bus.on("formAnalysis",b.saveFormAnalysisEvent),b.page.hasTimingAPI&&!b.config.recordAjaxCallsAnyway||(b.bus.on("ajax:load",b.recordAjaxResource),b.bus.on("ajax:error",b.recordAjaxResource)),-1!==b.config.ajaxRecordSessionLimit&&b.bus.on("ajax:limitReached",b.ajaxLimitReached),b.bus.on("devToolsVisibilityChanged",b.saveDevToolsChangeEvent),b.bus.on("domTampered",b.saveDomTamperedEvent),b.bus.on("ajax:loadend",b.saveAjaxRequestEvent),b.bus.on("clipboardEvent",b.interceptClipboardEvent),b.bus.on("ajax:reportStats",b.saveAjaxStatsEvent),b.bus.on("segmentChanged",(function(e){b.saveSegmentChangedEvent(e),b.firstClickFired=!1})),b.bus.on("lastSegment",b.saveLastSegmentEvent),b.bus.on("titleChanged",b.saveTitleChanged),b.bus.on("botDetection",b.saveBotDetectionEvent),b.bus.on("reporter:idle",b.saveIdleEvent),b.bus.on("customEvent",b.saveCustomEvent),b.bus.on("customMapEvent",b.saveCustomMapEvent),b.bus.on("pageError",b.onPageError),b.bus.on("consoleWarn",b.onConsoleMessage),b.bus.on("consoleInfo",b.onConsoleMessage),b.bus.on("parentWindowInfo",b.onParentInfo),b.bus.on("reportStruggle",b.saveStruggle),b.bus.on("reportVoC",b.saveVoc),b.bus.on("reportVocV2",b.saveVocV2),b.bus.on("vocIdentifiers",b.saveVocIdentifiers),b.bus.on("invalidateSession",b._onInvalidateSession),b.config.recordIonScrolls&&b.bus.on("domMutation",b._checkForIonContent),b.bindPageEvents(t)},this._checkForIonContent=function(){document.querySelectorAll('ion-content:not([scroll-events="true"]):not([scroll-y="false"])').forEach((function(e){var t,n,r,o,i=(null===(t=e.shadowRoot)||void 0===t?void 0:t.querySelector("main"))||(null===(n=e.shadowRoot)||void 0===n?void 0:n.querySelector(".inner-scroll"));!i&&e.scrollY&&((i=1===e.children.length?e.children[0]:e.children[1]).hasAttribute("scrollEvents")&&"true"===i.getAttribute("scrollEvents")||i.setAttribute("scrollEvents","true")),i&&!e.hasAttribute("scroll-events")&&((null===(r=i.className)||void 0===r?void 0:r.indexOf("inner-scroll"))>-1||(null===(o=i.className)||void 0===o?void 0:o.indexOf("scroll-"))>-1)&&(e.setAttribute("scroll-events","true"),b._initIonScroll(e,i))}))},this._initIonScroll=function(e,t){var n=b.createHandler({type:"ionScroll",logicalName:"scroll",debounceBy:b.config.debounceScrolls,valueExtraction:b.extractScrollValue,filter:b.filterScrollElements,interception:b.interceptScroll,target:t});L.addEventHandler(e,"ionScroll",n,!0)},this.saveIdleEvent=function(e){var t=L.currentTimestamp(),n=b.createEventObject("idle",t,null);n.value=t-e.idleBaseTime,n.setExtraInfo(le.TIME_SINCE_LAST_EVENT,t-e.latestEventTime),b.saveEvent(n)},this.saveBotDetectionEvent=function(e){var t=b.createEventObject("botDetection",L.currentTimestamp(),null);t.value=e,t.shouldEncodeValue=!1,b.saveEvent(t)},this.registerPostLoadEvents=function(){var e=[];e.length>0&&b.bindPageEvents(e)},this.bindPageEvents=function(e){L.time("bindPageEvents",b.config.timingMode),L.forEach(e,(function(e){b.registerEventBinding(e)})),L.timeEnd("bindPageEvents",b.config.timingMode)},this.registerEventBinding=function(e){var t=e.target||b.global.document.body;if(!L.isUndefined(t)&&null!=t)try{b.handleElementsEvents(t,e)}catch(t){i.error("Failed binding '"+e.type+"'. Error: "+t.message,t),b.global.console&&console.error(t)}},this.handleElementsEvents=function(e,t){var n=t.type;if(L.contains(b.env.eventTypes,n))if(L.isEventSupported(n)){var r=b.createHandler(t);b.config.dontAttachBlurListenerWithCapture&&"blur"===n?L.addEventHandler(e,n,r,!1):L.addEventHandler(e,n,r,!0),b.bindings.registered.push({type:n,el:e,handler:r})}else b.bindings.unsupportedEventTypes.push(n)},this.createHandler=function(e){var t=function(t){if("mousemove"!==t.type&&Ou.bounceAll(t.type),b.handleDOMEvent(t,e),"beforeunload"!==t.type)return!0};if((e.debounceBy||0)>0){var n=Ou[e.type];n&&(t=n(t,b.bus,e.debounceBy,e).debouncedHandler)}return t},this.handleDOMEvent=function(e,t){try{if(e=e||b.global.event,!(L.isUndefined(e._cls_handled)||!0!==e._cls_handled||t&&"scrollReach"===t.logicalName))return;b.userInterActionsEvents[e.type]&&b.bus.emit("userInteraction",{type:"userInteraction"}),e._cls_handled=!0,L.time("handleDOMEvent_"+e.type,b.config.timingMode);var n=L.extractElementFromEvent(e),r=L.getElementId(n);b.config.ignorableElementIds&&L.contains(b.config.ignorableElementIds,r)||b.handleEvent(e,n,t,b._aggregatingElements),L.timeEnd("handleDOMEvent_"+e.type,b.config.timingMode)}catch(t){i.error("ERROR: while handling "+e.type+" DOM event ",e," Exception: ",t.stack?t.stack:t.message),b.saveClsDebugErrorEvent("handleDOMEvent",t,"event type="+e.type)}},this.assignSelectorInfo=function(e,t){var n=b.selectorResolver.getSelectorInfo(e),r=b.cssSelectorResolver.getSelectorInfo(e);t.selectorExpression=n.selector||b.env.encoding.rootSelector,t.cssSelector=r,n.hostSelectorPath&&t.setExtraInfo(le.HOST_SELECTOR_PATH,n.hostSelectorPath),b.config.domFormAnalysisReporting&&e&&("INPUT"===e.tagName||"SELECT"===e.tagName)&&t.setExtraInfo(on.prototype.IS_INPUT_ELEMENT,!0)},this.handleEvent=function(t,n,r,o){if(b.config.maxAggregateLookup>-1&&["pointerdown","mousedown","touchstart"].indexOf(t.type)>-1&&!o[n.nodeName]&&(n=L.getAggregatedClickElement(n,b.config.maxAggregateLookup,o)),r.internallyDispatchAs&&b.bus.emit(r.internallyDispatchAs+":"+r.type,n),!L.isFunction(r.filter)||!r.filter(n,t)){var i=L.currentTimestamp(),a=t.type;L.time("handleEvent_"+a,b.config.timingMode);var s=b.createEventObject(a,i,n);s.domEvent=t;var c=!L.isUndefined(r.dontSendElement)&&!0===r.dontSendElement;if("mousemove"===a&&b.config.ignoreSelectorOnMouseMove||(b.assignSelectorInfo(n,s),s.selectorExpression=c?b.env.encoding.rootSelector:s.selectorExpression),s.binding=r,L.isUndefined(r.encodeValue)||!1!==r.encodeValue||(s.shouldEncodeValue=!1),b.extractValue(s,r),b.extractExternalId(s,n),b.interceptReport(s,r),b.config.reportVisualNames&&s.report&&!c&&!s.extraInfo.visualName){var u;if(b.config.reportVisualNames&&b.config.visualName.eventsToCalcDistance[s.type]){var l=s.getExtraInfo(le.COORDINATE_ATTR);u=b.extractVisualName(n&&"SLOT"===n.tagName?n:s.element,l.x,l.y)}else u=b.extractVisualName(n&&"SLOT"===n.tagName?n:s.element);u&&s.setExtraInfo(le.VISUAL_NAME,u)}e.autoMaskingSignaled&&(s.setExtraInfo(le.AUTO_MASKING,e.autoMaskingSignaled),e.autoMaskingSignaled=null),r.internalOnly||b.saveEvent(s),"unload"===s.type&&b.gSessionStorageAccessor._set("unloaded",!0),b.bus.emit("event:"+s.type,s),L.timeEnd("handleEvent"+a,b.config.timingMode)}},this.createEventObject=function(e,t,n){var r=new on(e,t,n,b.page.id,b.page.url);return b.segmentManager.visitEvent(r),"about:blank"===r.referrer?r.referrer="https://www.aboutblankiframe.com":b.config.protocolsToSwitch&&(r.referrer=L.replaceProtocol(r.referrer)),r},this.onDomReady=function(){b.page.timing.contentInteractiveTime=performance.now(),b.state.domReady=!0,b.bus.emit("init:domready")},this.addDomReadyEventHandler=function(){"interactive"===document.readyState||"complete"===document.readyState?b.onDomReady():L.addEventHandler(window,"DOMContentLoaded",b.onDomReady,!0)},this.extractValue=function(e,t){try{if(!L.isUndefined(t.valueExtraction)){var n=t.valueExtraction(e.domEvent,e.element);L.isUndefined(n)||null==n||(e.value=n)}}catch(t){i.error("Failed extracting value for event "+e.type+" - "+t.name+": "+t.message,t),"clsdebug"!==e.type&&b.saveClsDebugErrorEvent("extractValue",t,"event type="+e.type)}},this.extractExternalId=function(e,t){if(t&&L.isElement(t)){var n=b.externalIdResolver.resolve(t);n&&e.setExtraInfo(le.EXTERNAL_ID,n)}},this.interceptReport=function(e,t){if(!L.isUndefined(t.interception))try{e.report=t.interception(e)}catch(t){i.error("Failed intercepting "+e.type+" event: "+t.message,t,e),"clsdebug"!==e.type&&b.saveClsDebugErrorEvent("interceptReport",t,"event type="+e.type)}},this.addEvent=function(e){b.config.debugMode&&b.reports.events.push(e)},this.getFocusInEventType=function(){return L.isOldIE()?"focusin":"focus"},this.getChangeEventType=function(){return L.isOldIE()?"onfocusout"in document?"focusout":"blur":"change"},this.startFocusTiming=function(e){var t=L.currentTimestamp(),n=b.state.lastFocusData.startTime;b.state.lastFocusData={element:e,startTime:t,prevFocusStartTime:n}},this.endFocusTiming=function(e){if(b.state.lastFocusData.element===e){var t=L.currentTimestamp();b.state.lastFocusData.focusTime=t-b.state.lastFocusData.startTime}},this.filterNonTypableElements=function(e,t){return null===e||(b.isChangebleElement(e)&&("focus"===t.type||"focusin"===t.type?b.startFocusTiming(e):"blur"===t.type&&b.endFocusTiming(e)),!b.isTypableElement(e))},this.filterNonChangableEventsElements=function(e,t){return null===e||null===t||(b.isChangebleElement(e)&&b.endFocusTiming(e),"change"!==t.type&&!b.isChangebleElement(e))},this.interceptFocusIn=function(e){return b.checkTypedContentHasChangedAndUpdate(e),!1},this.interceptFocusLost=function(e){return null!==e&&null!==e.element&&(b.state.lastFocusData.focusTime&&e.setExtraInfo(le.FOCUS_TIME_ATTR,b.state.lastFocusData.focusTime),b.bus.emit("event:elementChange",e),!!b.isSelectableElement(e.element)||b.checkTypedContentHasChangedAndUpdate(e))},this.interceptBlur=function(e){return b.state.lastFocusData.focusTime&&e.setExtraInfo(le.FOCUS_TIME_ATTR,b.state.lastFocusData.focusTime),b.bus.emit("event:elementChange",e),b.checkTypedContentHasChangedAndUpdate(e)},this.checkTypedContentHasChangedAndUpdate=function(e){var t="focus"===e.type||"focusin"===e.type,n="blur"===e.type||"focusout"===e.type,r=e.selectorExpression,o=e.element.value;if(null===o||L.isUndefined(o))return!1;var i={text:o,markAutoComplete:!1},a=b.state.typableElementsLRUMap._set(r,i),s=L.isUndefined(a);if(s&&n)return!1;if(t&&!s&&a.text!==o&&o.toLocaleLowerCase().indexOf(a.text.toLocaleLowerCase())>=0&&(i.markAutoComplete=!0),n&&!s&&a.markAutoComplete){var c=b.state.lastFocusData.prevFocusStartTime;if(!L.isUndefined(c)&&L.isNumber(c)&&b.state.lastFocusData.element===e.element){var u=L.currentTimestamp()-c;e.setExtraInfo(le.FOCUS_TIME_ATTR,u)}else e.setExtraInfo(le.FOCUS_TIME_ATTR,-1);return e.setExtraInfo(le.AUTO_COMPLETE_ATTR,!0),!0}return s||a.text!==o},this.isMouseEvent=function(e){return e===b.env.mouseEvents.down||e===b.env.mouseEvents.up},this.isTouchEvent=function(e){return"touchstart"===e||"touchend"===e||"touchmove"===e},this.interceptMouseEnter=function(e){if(b.state.mouseEnterReported)return!1;var t=L.getCoordinate(e.domEvent);return e.setExtraInfo(le.COORDINATE_ATTR,t),b._removeEventBinding("mouseenter"),b.state.mouseEnterReported=!0,!b.page.hasTouch||b.touchDetected||L.isMobile()||(b.switchTouchToMouse(),b.page.hasTouch=!1),!0},this.switchTouchToMouse=function(){b._removeEventBinding("touchstart"),L.isHybridAndroid()?b._removeEventBinding("touchmove"):b._removeEventBinding("touchend");var e=[{type:b.env.mouseEvents.down,interception:b.interceptClickStart,target:document,logicalName:"mousedown"},{type:b.env.mouseEvents.up,interception:b.interceptClickEnd,target:document}];b.bindPageEvents(e)},this.filterHovers=function(e){try{if("undefined"==typeof jQuery||L.isUndefined(jQuery)||L.isUndefined(jQuery._data))return!0;for(var t=e,n=1,r=L.isNumber(b.config.mhDeepLevel)?b.config.mhDeepLevel:1;null!==t&&t!==document.body&&n<=r;){var o=jQuery._data(t,"events");if(o&&o.mouseover&&o.mouseover.length>0)return b.config.mhDebug,b.addHoverElement(t),!0;n++,t=t.parentElement}}catch(t){i.error("Exception while extracting hover information for element : ",e,t.message,t),b.saveClsDebugErrorEvent("filterHovers",t,"element="+(e?e.nodeName:"null"))}return!0},this.addHoverElement=function(e){b.state.hover.hoverElementList.length<b.config.mhMaxInMemeoryHovers&&(b.state.hover.hoverElementList.push(e),b.state.hover.hoverStartTimestamp=L.currentTimestamp())},this.cleanHoverElements=function(){b.config.mhDebug,b.state.hover.hoverElementList=[],b.state.hover.hoverStartTimestamp=0},this.filterResize=function(){return L.isOldIE()},this.interceptResize=function(e){var t=L.isSafariOnIos()&&L.isHybridIOS()?L.getVisualViewportSize():L.getWindowSize(b.global),n=L.getScreenSize(),r=!1;return null===t||null===b.page.windowSize||b.page.windowSize.width===t.width&&b.page.windowSize.height===t.height||(b.page.windowSize=t,r=!0),null===n||null===b.page.screenSize||b.page.screenSize.width===n.width&&b.page.screenSize.height===n.height||(b.page.screenSize=n,r=!0),b.global.devicePixelRatio!==b.state.dpr&&(b.global.devicePixelRatio>b.state.dpr?e.setExtraInfo(le.ZOOM,b.zoomType.IN):e.setExtraInfo(le.ZOOM,b.zoomType.OUT),b.state.dpr=b.global.devicePixelRatio),e.value={},e.value.dpr=b.state.dpr,e.value.window=b.page.windowSize,e.value.screen=b.page.screenSize,r},this.interceptMouseOver=function(){return!1},this.interceptClickStart=function(e){if(!b.config.ignoreClicksInsideElement||!e.element.closest(b.config.ignoreClicksInsideElement)){if(b.botDetector.isActive()&&b.isMouseEvent(e.type)&&b.botDetector.notifyMouseAction(e.domEvent),b.config.recordHovers&&b.saveHoverEvent(),b.state.clickStart=b._createClickDetailsObject(e),b.config.reportVisualNames&&e.report){var t;if(b.config.visualName&&b.config.visualName.eventsToCalcDistance[e.type]){var n=b.state.clickStart.coordinate;t=b.extractVisualName(e.element,n.x,n.y)}else t=b.extractVisualName(e.element);t&&(b.state.clickStart.extraInfo.visualName=t)}return!0===b.config.observeRightClick&&2===e.domEvent.button?b.state.clickStartType="rightclick":b.state.clickStartType="mousedown",!1}},this.interceptTouchStart=function(e){if(b.touchDetected=!0,b.state.clickStartType="touchstart",b.state.clickStart=b._createClickDetailsObject(e),b.config.reportVisualNames&&e.report){var t;if(b.config.visualName&&b.config.visualName.eventsToCalcDistance[e.type]){var n=b.state.clickStart.coordinate;t=b.extractVisualName(e.element,n.x,n.y)}else t=b.extractVisualName(e.element);t&&(b.state.clickStart.extraInfo.visualName=t)}return!1},this.interceptClickEnd=function(e){b.botDetector.isActive()&&b.isMouseEvent(e.type)&&b.botDetector.notifyMouseAction(e.domEvent);var t,n=!1,r=b.state.clickStart,o=b._createClickDetailsObject(e),i="touchend"===e.type&&r&&o.elPosition&&o.elPosition.left&&Math.abs(parseInt(o.elPosition.left,10)-(parseInt(r.elPosition.left,10)||0))>b.config.minDragPixels||o.elPosition&&o.elPosition.right&&Math.abs(parseInt(o.elPosition.right,10)-(parseInt(r.elPosition.right,10)||0))>b.config.minDragPixels||o.elPosition&&o.elPosition.top&&Math.abs(parseInt(o.elPosition.top,10)-(parseInt(r.elPosition.top,10)||0))>b.config.minDragPixels||o.elPosition&&o.elPosition.bottom&&Math.abs(parseInt(o.elPosition.bottom,10)-(parseInt(r.elPosition.bottom,10)||0))>b.config.minDragPixels,a=b.config.recordSwipe&&L.isMobile()&&!i&&"touchend"===e.type&&r&&Math.abs(o.coordinate.x-r.coordinate.x)>b.config.minDragPixels&&Math.abs(o.coordinate.y-r.coordinate.y)<20;if(i||a)e.extraInfo.visualName&&delete e.extraInfo.visualName,b.handleDrag(e,r,o,a),n=!0;else if(r){if(L.isMobile()){var s=Math.abs(o.coordinate.x-r.coordinate.x),c=Math.abs(o.coordinate.y-r.coordinate.y),u=Math.abs(o.coordinate.clientX-r.coordinate.clientX),l=Math.abs(o.coordinate.clientY-r.coordinate.clientY),d=b.config.minDragPixels;if(s>d||c>d||u>d||l>d)return!1}var f;if(e.type=b.state.clickStartType,e.value=r,r.el)f=r.el.className?r.el.className:r.el.parentElement?r.el.parentElement.className:"",b.state.toggleClick?(L.arrayValueContainedInString(b.config.ignoreDomUpdateOnClickClassList,f.animVal||f)&&(e.skipMutation=!0),b.state.toggleClick=!1):e.timestamp=r.timestamp,L.arrayValueContainedInString(b.config.toggleTimestampOnClickClassList,f.animVal||f)&&(b.state.toggleClick=!0),(!L.isAttachedToDOM(r.el)||r.isVisible&&!L.isElementShown(r.el))&&(e.elementRemoved=!0);e.selectorExpression=r.selector,e.cssSelector=r.cssSelector,e.element=r.el,e.setExtraInfo(le.COORDINATE_ATTR,b.state.clickStart.coordinate),e.setExtraInfo(le.IS_FIRST_CLICK,!b.firstClickFired),b.firstClickFired||(b.firstClickFired=!0),e.setExtraInfo(le.IS_CLICKABLE,L.isClickable(e.element)),e.setExtraInfo(le.BUTTON,e.domEvent.button),L.isUndefined(e.element)||(t=L.getElementXYCoordinates(e.element))&&e.setExtraInfo(le.SYNC_COORDINATE,t),L.isHybrid()&&e.addHybridActionDataItem("start",{x:b.state.clickStart.coordinate.x,y:b.state.clickStart.coordinate.y}),r.extraInfo.visualName&&e.setExtraInfo(le.VISUAL_NAME,r.extraInfo.visualName);var p="rightclick"===b.state.clickStartType?"rightclick":"event:click";b.bus.emit(p,e),e.rageSequence&&e.indexInRage&&(e.setExtraInfo(le.RAGE_SEQUENCE,e.rageSequence),e.setExtraInfo(le.INDEX_IN_RAGE,e.indexInRage)),n=!0}return b.state.clickStart=void 0,b.state.clickStartType=void 0,n},this.interceptDragStart=function(e){return b.state.clickStart=b._createClickDetailsObject(e),b.state.clickStartType="mousedown",!1},this.interceptDragEnd=function(e){var t=b.state.clickStart,n=b._createClickDetailsObject(e);return b.handleDrag(e,t,n,!1),!0},this.handleDrag=function(e,t,n,r){var o={duration:t.timestamp?n.timestamp-t.timestamp:-1,start:t.coordinate,end:n.coordinate};if(e.type=r?"swipe":"drag",e.value=o,!r&&!L.isUndefined(e.element)){var i=L.getElementXYCoordinates(t.el);i&&e.setExtraInfo(le.SYNC_COORDINATE,i)}L.isHybrid()&&(e.addHybridActionDataItem("start",{x:t.coordinate.x,y:t.coordinate.y}),e.addHybridActionDataItem("end",{x:n.coordinate.x,y:n.coordinate.y}))},this.interceptPagehide=function(e){b.isUnloaded||b.interceptUnload(e)},this.interceptUnload=function(e){if(!b.isPerformanceEventSent&&window.performance&&window.performance.timing&&"number"==typeof window.performance.timing.loadEventEnd)if(0!==window.performance.timing.loadEventEnd){var t=L.currentTimestamp()-b.page.initializationTimestamp;b.savePerformanceEvent(t),b.bus.emit("clsDebug","interceptUnload: Send performance event before unload")}else b.bus.emit("clsDebug","interceptUnload: Performance event could not be sent, the page did not finish loading");b.isUnloaded=!0;L.time("unload");var n=performance.now()-b.page.timing.contentInteractiveTime;b.page.timing.contentInteractiveTime&&n<5e3&&b.saveClsDebugErrorEvent("detector.js",{name:"fast unload",message:"Unload happened at "+n/1e3+" second"},""),b.state.unloading=!0,b.segmentManager.onUnload();var r=L.currentTimestamp();b.page.hasTimingAPI||b.gSessionStorageAccessor._set("lastReferrer",$t.encodeNumber(r)+"_"+b.env.Base64.encode(b.page.urlWithoutHash));var o=r-b.page.initializationTimestamp;return e.setExtraInfo(le.FOCUS_TIME_ATTR,o),e.setExtraInfo(le.SCROLL_REACH,Math.round(b.state.maxScrollReach)),b.debugHelper.visitUnloadEvent(e),L.timeEnd("unload"),e.timestamp=r,b.config.passTabIdViaWinName&&b.gSessionStorageAccessor._get("btabid")&&(b.global.name?b.saveClsDebugErrorEvent("detector.js",{name:"tabId",message:"window.name was already in use by someone else on this website"},""):b.global.name="gb.btabid="+b.gSessionStorageAccessor._get("btabid")+";cls_s="+b._sessionId),!0},this.interceptVisibilityChange=function(e){!L.isSafari()&&!L.isMobile()||"hidden"!==document.visibilityState||b.isUnloaded?b.state.unloading=!1:b.interceptUnload(e),L.isSafari()&&b.state.visibilityChanges.push({visibility:document.visibilityState,timestamp:L.currentTimestamp()}),b.isUnloaded=!1},this.updateScrollReach=function(e){var t;(t=e&&"ionScroll"===e.binding.type?L.getCurrentScrollReach(e.domEvent.detail):L.getCurrentScrollReach())&&(b.state.maxScrollReach=Math.max(b.state.maxScrollReach,t))},this.interceptScroll=function(e){return!("ionScroll"!==e.binding.type&&"#document"!==e.element.nodeName&&"BODY"!==e.element.nodeName&&!["auto","scroll"].includes(getComputedStyle(e.element).overflowY))&&(b.updateScrollReach(e),b.bus.emit("exitIntentCheckScroll"),!0)},this.updateScrollReachValues=function(e){e.value&&e.value.top&&(b.scrollReach.height=e.value.height,b.scrollReach.top=Math.max(b.scrollReach.top,e.value.top),b.scrollReach.domElementsCount=e.value.domElementsCount)},this.shouldReportScrollReach=function(e){return!(!e.value.top&&0!==e.value.top||!(b.scrollReach.height!==e.value.height||b.scrollReach.top<e.value.top))&&(Math.abs(b.scrollReach.top)>b.config.scrollReachMaxTop&&b.bus.emit("clsDebug","scroll reach top value exceeded, top value = "+b.scrollReach.top),b.updateScrollReachValues(e),!0)},this.interceptScrollReach=function(e){if(b.config.disableScrollReachForIframes&&window.self!==window.top)return!1;var t=!1;return!e.value||"#document"!==e.element.nodeName&&"BODY"!==e.element.nodeName&&!["auto","scroll"].includes(getComputedStyle(e.element).overflowY)||(!b.scrollReach.isInfinite&&L.isInfiniteScrollDetected(b,e)?(b.scrollReach.isInfinite=!0,b.updateScrollReachValues(e),t=!0):b.shouldReportScrollReach(e)&&(t=!0),e.value.isInfinite=b.scrollReach.isInfinite),t},this.filterScrollElements=function(e){return!(null!=e&&"MARQUEE"!==e.nodeName)},this._interceptMouseMove=function(e){return e.lastSingleMoveTimestamp=e.timestamp,e.setExtraInfo(le.FOCUS_TIME_ATTR,0),!0},this._createClickDetailsObject=function(e){var t={coordinate:L.getCoordinate(e.domEvent),el:e.element,selector:e.selectorExpression,cssSelector:e.cssSelector,timestamp:e.timestamp,extraInfo:e.extraInfo,isVisible:L.isElementShown(e.element)};return L.isMobile()&&(t.elPosition={left:e.element.style?e.element.style.left:"",right:e.element.style?e.element.style.right:"",top:e.element.style?e.element.style.top:"",bottom:e.element.style?e.element.style.bottom:""}),t},this._shouldListenToKeyEvents=function(){return b.config.recordEnterForInputs||b.recordAutoCompleteRelatedChars()},this.recordAutoCompleteRelatedChars=function(){return void 0===b.acCharsSupport&&(b.acCharsSupport=b.config.recordTypingAll||b.config.supportNativeAutoComplete||b.config.recordTypingForAttrs&&b.config.recordTypingForAttrs.length>0||b.config.recordTypingForClasses&&b.config.recordTypingForClasses.length>0||b.config.recordTypingForIDs&&b.config.recordTypingForIDs.length>0),b.acCharsSupport},this._resolveKeyData=function(e){var t=e.domEvent,n=e.element.value,r=e.element,o=t.keyCode||t.charCode;e.value={unicode:o};var i=b.gValueCensor.isCensored(r);return"keypress"===e.type?13!==o&&8!==o&&9!==o&&("0"!==t.charCode&&(i?(e.value={unicode:42},!0):(L.isUndefined(n)||null===n||(e.value.content=n+String.fromCharCode(o)),!0))):"keydown"===e.type&&(o>=37&&o<=40||13===o||9===o?(i||(e.value.content=e.element.value),!0):8!==o||L.isUndefined(n)||null===n||i?!(!b.config.replayTypingBySelector||!b.isPrintableChar(e.domEvent.key,o))&&(i?(e.value={unicode:42},!0):(e.value.content=e.domEvent.key,!0)):(e.value.content=n.length>0?n.substring(0,n.length-1):"",!0))},this.shouldRecordTypedChar=function(e,t){for(var n=new gl(b.global.document),r=0;r<t.length;r++)if(n.matches(e,t[r]))return!0;return!1},this.isPrintableChar=function(e,t){return!(t<32)&&/^[a-zA-Z0-9!"#$%&'()*+,.\/\\:;<=>?@\[\] ^_`{|}~-]$/i.test(e)},this.interceptKeyboard=function(e){var t=e.element;if(!(t&&("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName||"BUTTON"===t.nodeName||"SELECT"===t.nodeName)))return!1;var n,r=e.domEvent.keyCode||e.domEvent.charCode,o=13===r||9===r;if(o&&b.saveChangeEvent(),e.shouldEncodeValue=!1,b.shouldRecordTypedChar(e.element,b.config.replayTypingBySelector)&&b.isPrintableChar(e.domEvent.key,r)){var i=b._resolveKeyData(e);return b.savePageUpdate(),i}if(o&&b.config.recordEnterForInputs)return b._resolveKeyData(e);if(b.config.supportNativeAutoComplete&&(t.hasAttribute("autocomplete")||t.hasAttribute("aria-autocomplete")&&"none"!==t.getAttribute("aria-autocomplete")||t.hasAttribute("class")&&L.hasClassName(t,"autocomplete")))return b._resolveKeyData(e);if(b.config.recordTypingAll)return b._resolveKeyData(e);if(b.config.recordTypingForAttrs&&b.config.recordTypingForAttrs.length>0)for(n=0;n<b.config.recordTypingForAttrs.length;n++)if(t.hasAttribute(b.config.recordTypingForAttrs[n]))return b._resolveKeyData(e);if(t.hasAttribute("class")&&b.config.recordTypingForClasses&&b.config.recordTypingForClasses.length>0)for(n=0;n<b.config.recordTypingForClasses.length;n++)if(L.hasOneOfClassNames(t,b.config.recordTypingForClasses))return b._resolveKeyData(e);var a=L.getElementId(t);if(a&&b.config.recordTypingForIDs&&b.config.recordTypingForIDs.length>0)for(n=0;n<b.config.recordTypingForIDs.length;n++)if(a===b.config.recordTypingForIDs[n])return b._resolveKeyData(e);return!1},this.saveChangeEvent=function(){if(b.state.lastFocusData.element&&b.isChangebleElement(b.state.lastFocusData.element)){var e=b.state.lastFocusData.element,t=b.createEventObject("change",L.currentTimestamp(),e);b.assignSelectorInfo(e,t),b.extractValue(t,{valueExtraction:b.extractElementValue}),b.interceptFocusLost(t)&&b.saveEvent(t)}},this.recordAjaxResource=function(e){b.addResource("ajax",e.url,e.timestamp)},this.addResource=function(e,t,n){var r=new qc(e,t,n);return b.reports.resources.push(r),b.bus.emit("timingResource",r),r},this.saveEvent=function(e){if(!b.blackoutManager.isUnderBlackout()||"idle"===e.type&&("idle"!==e.type||b.config.blackoutIdleReporting)){if(b.state.stopped){if(!b._sessionBreach)return;e.sessionBreach=!0}"abTesting"!==e.type&&b.aBTestingEvents.length&&e.setExtraInfo(le.ABEVENTS,b.aBTestingEvents),new Set(["glassvoxOpen","glassvoxResponse","glassvoxComplete"]).has(e.type)&&b._addExtraVocDataIfApplicable(e);var t=b.renameEventType(e);b.addEvent(e),Hc.setRegisteredDebugInfoOnEvent(e),b.config.debugMode&&(e.report||b.config.traceMode)&&b.shouldLog(e.type)&&b.logEvent(e,t),e.report&&(b.state.encryptionReady?b.bus.emit("saveEvent",e):b.encryptionPendingEvents.push(e))}},this.shouldLog=function(e){return"mousemove"===e?!b.config.suppressMouseMovesDebug||b.config.mmDebug:"scroll"!==e||b.config.scrollDebug},this.renameEventType=function(e){var t=e.type;return L.isUndefined(e.binding)||L.isUndefined(e.binding.logicalName)||"drag"===e.type||(e.type=e.binding.logicalName),t},this.logEvent=function(e,t){if(b.config.debugMode){var n=["saving event: "+(e.type===t?e.type:e.type+"("+t+")")+" selector: "+(e.selectorExpression||"")];n.push("{value="),n.push(e.value||"NONE"),e.extraInfo&&(n.push("{ extraInfo="),n.push(e.extraInfo)),n.push("}")}},this.saveDocumentLoadEvent=function(e){var t=b.createEventObject("document",e,null);b.page.url=b.gUriMasker.mask(b.page.url),b.page.urlWithoutHash=b.gUriMasker.mask(b.page.urlWithoutHash),t.value=b.page,t.shouldEncodeValue=!1,b.minValidWindowSize=b.config.minValidWindowSize||100,b.page.screenSize=au.captureScreenSize(t),b.page.windowSize=au.captureWindowSize(t,b.minValidWindowSize,b.config.ignoreHeightRatio),b.page.title=b.getPageTitle(),b.page.title&&t.setExtraInfo(le.VISUAL_NAME,b.page.title),void 0!==Fu&&t.setExtraInfo(le.WINDOW_DEPTH,Fu.tryGetCurrentDepth(window)),t.setExtraInfo(le.HISTORY_LENGTH,b.global.history.length),b.pageInfo&&t.setExtraInfo(le.DEBUG_PAGE_SN,""+b.pageInfo.pageSn);var n=L.generateTabId(window,b.env,b.bus,b.config);t.setExtraInfo(le.DEBUG_BROWSER_TAB_ID,""+n),b.config.mobileHybridId&&t.setExtraInfo(le.MOBILE_HYBRID_ID,b.config.mobileHybridId),b.config.debounceScrolls&&t.setExtraInfo(le.SCROLL_DEBOUNCED,!0),b.ect&&t.setExtraInfo(le.EFFECTIVE_CONNECTION_TYPE,b.ect),b.documentEvent=t,b.debugHelper.visitLoadEvent(t),b.documentEventHook?b.documentEventHook(t,b.onParentHandshakeDone):b.onParentHandshakeDone()},this.trySendPerformanceEvent=function(){b.state.loaded&&b.state.handshakeDone?b.acquirePerformanceTiming():b.config.performanceDebugEnabled&&b.bus.emit("clsDebug",L.stringFormat("trySendPerformanceEvent: Check to run acquirePerformanceTiming failed.  state.loaded: {0}, state.handshakeDone: {1}",b.state.loaded,b.state.handshakeDone))},this.onParentHandshakeDone=function(){b.state.handshakeDone=!0,b.documentEvent&&(b.saveEvent(b.documentEvent),b.bus.emit("event:document")),b.config.performanceDebugEnabled&&b.bus.emit("clsDebug",L.stringFormat("onParentHandshakeDone: Attempting to send performance event via saveDocumentLoadEvent. isPerformanceEventSent: {0}",b.isPerformanceEventSent)),b.trySendPerformanceEvent()},this.savePageUpdate=function(e){var t=b.createEventObject("pageUpdate",e||L.currentTimestamp(),null);b.saveEvent(t)},this.onPageError=function(e){if(!e.eventLimitExceeded){var t=e.error;-1!==b.config.errorMessageMaxSize&&(e.error=L.trimToSizeInBytes(t,b.config.errorMessageMaxSize));var n=b.createEventObject("error",L.currentTimestamp(),null);n.value=e.error,n.shouldEncodeValue=!0,b.saveEvent(n)}},this.onConsoleMessage=function(e){if(!e.eventLimitExceeded){var t=b.createEventObject(e.eventName,L.currentTimestamp(),null);t.value=e[e.eventName],t.shouldEncodeValue=!0,b.saveEvent(t)}},this.saveTitleChanged=function(e){var t=b.createEventObject("titleChanged",L.currentTimestamp(),null);t.value=b.getPageTitle(e),b.bus.emit("setNewTitle",t.value),t.shouldEncodeValue=!0,b.saveEvent(t)},this.saveSegmentChangedEvent=function(e){var t=b.createEventObject("segmentChanged",e.eventTime,null);t.subPage=e.hash,t.value=e,t.shouldEncodeValue=!1,b.saveEvent(t),b.plugins.domRecordingPlugin&&b.plugins.domRecordingPlugin.isStarted()&&(void 0===b.config.waitForSegmentRender&&void 0===b.config.waitForSegmentTitle||b.config.waitForSegmentRender<0&&b.config.waitForSegmentTitle<0?setTimeout((function(){b.savePageUpdate(e.eventTime+1)}),0):b.savePageUpdate(e.eventTime+1))},this.saveLastSegmentEvent=function(e){var t=b.createEventObject("lastSegment",L.currentTimestamp(),null);t.value=e,t.shouldEncodeValue=!1,b.saveEvent(t)},this.savePageSnapshotEvent=function(t){var n=b.useCurrentTimeForPagesnapshot?L.currentTimestamp():b.page.initializationTimestamp,r=b.createEventObject("pageSnapshot",n,null);r.value=t,r.shouldEncodeValue=!1;var o=window.performance&&b.global.performance.timing;o&&r.setExtraInfo(le.NAVIGATION_TIMING,JSON.parse(JSON.stringify(o))),e.autoMaskingSignaled&&(r.setExtraInfo(le.AUTO_MASKING,e.autoMaskingSignaled),e.autoMaskingSignaled=null),b.page.snapshotFuseData&&r.setExtraInfo(le.SNAPSHOT_FUSE,JSON.stringify(b.page.snapshotFuseData)),r.setExtraInfo(le.SNAPSHOT_TYPE,b.snapshotType),b.plugins.mobileEventsPlugin&&b.config.recordOrientation&&r.setExtraInfo(on.prototype.ORIENTATION,90===b.plugins.mobileEventsPlugin.getOrientation()?"h":"v"),b.saveEvent(r)},this.saveDevToolsChangeEvent=function(e){var t=b.createEventObject("devToolsVisibilityChanged",L.currentTimestamp(),null);t.value=e.value,b.saveEvent(t)},this.saveDomTamperedEvent=function(e){var t=b.createEventObject("domTampered",L.currentTimestamp(),null);if(t.element=e.element,void 0!==e.newText&&t.setExtraInfo(le.CURRENT_VALUE,e.newText),void 0!==e.prevText&&t.setExtraInfo(le.OLD_VALUE,e.prevText),b.config.reportVisualNames){var n=b.extractVisualName(e.element);n&&t.setExtraInfo(le.VISUAL_NAME,n)}b.assignSelectorInfo(e.element,t),b.saveEvent(t)},this.saveStruggle=function(e){var t=b.createEventObject("webStruggle",L.currentTimestamp(),null);if(e.errors){var n=e.errors.join(";");t.setExtraInfo(le.ERROR_DATA,n)}if(e.elementSelector)t.selectorExpression=e.elementSelector.selector||b.env.encoding.rootSelector,t.cssSelector=e.cssSelector||b.env.encoding.rootCssSelector,e.elementSelector.hostSelectorPath&&e.setExtraInfo(le.HOST_SELECTOR_PATH,e.elementSelector.hostSelectorPath);else if(t.element=e.element,b.assignSelectorInfo(e.element,t),b.config.reportVisualNames&&e.relatedEvent){var r;if(b.config.visualName&&b.config.visualName.eventsToCalcDistance[e.relatedEvent.type]){var o=e.relatedEvent.getExtraInfo(le.COORDINATE_ATTR);r=b.extractVisualName(e.element,o.x,o.y)}else r=b.extractVisualName(e.element);r&&t.setExtraInfo(le.VISUAL_NAME,r)}t.value=e.dataToEncode,t.shouldEncodeValue=!1,b.saveEvent(t)},this.saveVoc=function(e){var t=b.createEventObject("voc",L.currentTimestamp(),null);b.config.sendTopURL&&(e.topUrl=b.page.topUrl),t.value=e,b.saveEvent(t)},this.saveVocV2=function(e){var t=b.createEventObject("vocV2",L.currentTimestamp(),null);b.config.sendTopURL&&(e.topUrl=b.page.topUrl),t.value=e,b.saveEvent(t)},this.saveVocIdentifiers=function(e){var t=b.createEventObject("vocIdentifiers",L.currentTimestamp(),null);t.value=e,b.saveEvent(t)},this.saveAjaxRequestEvent=function(e){var t=b.createEventObject("ajaxRequest",e.startedAt||L.currentTimestamp(),null);e.ajaxUrls=b.ajaxUrls,t.value=e,t.selectorExpression=e.lastFocusedSelectorInfo?e.lastFocusedSelectorInfo.selector:b.env.encoding.rootSelector,t.cssSelector=e.lastFocusedCSSSelectorInfo?e.lastFocusedCSSSelectorInfo:b.env.encoding.rootCssSelector,e.lastFocusedSelectorInfo&&e.lastFocusedSelectorInfo.hostSelectorPath&&t.setExtraInfo(le.HOST_SELECTOR_PATH,e.lastFocusedSelectorInfo.hostSelectorPath),e.containOnlyMetaData&&t.setExtraInfo(le.METADATA_ONLY,!0),t.shouldEncodeValue=!1,b.saveEvent(t)},this.ajaxLimitReached=function(){var e=b.createEventObject("ajaxLimitReached",L.currentTimestamp(),null);b.saveEvent(e)},this.saveAjaxStatsEvent=function(e){var t=b.createEventObject("ajaxStats",L.currentTimestamp(),null);t.value=e,t.shouldEncodeValue=!1,b.saveEvent(t)},this.interceptClipboardEvent=function(e){var t=e.data,n=b.createEventObject("clipboard",t.timestamp,null);if(t.sourceData){var r=b.selectorResolver.getSelectorInfo(t.sourceData.element);t.sourceData.selector=r.selector||b.env.encoding.rootSelector,r.hostSelectorPath&&(t.sourceData[le.HOST_SELECTOR_PATH]=r.hostSelectorPath);var o=b.extractVisualName(t.sourceData.element);o&&n.setExtraInfo(le.VISUAL_NAME,o),delete t.sourceData.element}delete t.timestamp;var i=b.extractVisualName(e.element);i&&n.setExtraInfo(le.VISUAL_NAME,i),b.assignSelectorInfo(e.element,n),t.element&&delete t.element,n.value=t,n.shouldEncodeValue=!1,b.saveEvent(n)},this.clsDebugFromEvent=function(e){b.saveClsDebugErrorEvent(e.source||"",e.error,e.context)},this.saveClsDebugErrorEvent=function(e,t,n){var r=b.formatClsDebugMessage(e,t,n);if(0!==r.length){var o=b.createEventObject("clsdebug",L.currentTimestamp(),null);o.value=r,b.saveEvent(o)}},this.onPageAttributes=function(e){L.forEach(e,(function(e){b.page.attributes[e.name]=e.value}))},this.formatClsDebugMessage=function(e,t,n){if(b.state.clsDebugCounter>=b.config.clsDebugMaxReports)return"";b.state.clsDebugCounter++;var r=t?t.stack?t.stack:t.name+": "+t.message:"";return"CLS Error in "+e+" "+(n?"{"+n+"} ":"")+((r=L.truncateStr(r,b.config.clsDebugCharsLimit,!0)).length>0?": "+r:"")},this.saveValidationError=function(e){if(!L.isDuplicateError(e,b,b.config.removeDuplicateValidationErrors)){b.config.maskFormValidationErrors&&(e.message=js.censorValueOf(e.message,null,b.config.formValidationMaskingChar,null));var t=e.message;-1!==b.config.errorMessageMaxSize&&(e.message=L.trimToSizeInBytes(t,b.config.errorMessageMaxSize));var n=b.createEventObject("formValidationError",L.currentTimestamp(),null);n.element=e.element,n.value=e.message,b.assignSelectorInfo(e.element,n);var r=b.extractVisualName(e.element);r&&n.setExtraInfo(le.VISUAL_NAME,r),b.saveEvent(n)}},this.saveHoverEvent=function(){var e=b.createEventObject("hover",b.state.hover.hoverStartTimestamp,null);if(0!==b.state.hover.hoverElementList.length){b.config.mhDebug;var t=b.state.hover.hoverElementList;b.cleanHoverElements();var n,r,o,i={},a=[];for(n=t.length-1;n>=0;n--)if(o=t[n],i[r=b.selectorResolver.getSelectorInfo(o).selector||b.env.encoding.rootSelector])b.config.mhDebug;else if(i[r]=!0,a.push(r),a.length>=b.config.mhMaxListSize){b.config.mhDebug;break}e.value=t,e.shouldEncodeValue=!1,b.saveEvent(e)}else b.config.mhDebug},this.saveCustomEvent=function(e){b.canRecordCustomEvents&&b.handleCustomEvent("custom",e)},this.saveCustomMapEvent=function(e){b.canRecordCustomEvents&&b.handleCustomEvent("customMap",e)},this.handleCustomEvent=function(e,t){var n=b.createEventObject(e,L.currentTimestamp(),null);n.value=t,!L.isUndefined(t.domEl)&&L.isDOMElement(t.domEl)&&(n.element=t.domEl,b.assignSelectorInfo(t.domEl,n)),n.shouldEncodeValue=!1,b.saveEvent(n)},this.saveThirdPartyMapEvent=function(e){if(b.canRecordCustomEvents){var t=b.createEventObject("thirdpartymap",L.currentTimestamp(),null);t.value=e.value,e.type&&t.setExtraInfo(le.TP_INTEGRATION_TYPE,e.type),e.element&&(t.element=e.element,b.assignSelectorInfo(e.element,t)),t.shouldEncodeValue=!1,b.saveEvent(t)}},this.saveDataLayerMapEvent=function(e){var t=b.createEventObject("dataLayerMap",L.currentTimestamp(),null);t.value=e.value,t.shouldEncodeValue=!1,b.saveEvent(t)},this.saveThirdPartyAttributeEvent=function(e){var t=b.createEventObject("thirdPartyAttribute",L.currentTimestamp(),null);t.value=e,t.shouldEncodeValue=!1,b.saveEvent(t)},this.onDomFuseBlown=function(e){b.page.snapshotEmitted||(b.page.snapshotFuseData=e)},this.onPageNameResolved=function(e){b.page.name=e},this.saveABTesting=function(e){for(var t=b.createEventObject("abTesting",L.currentTimestamp(),null),n=0;n<e.offers.length;++n)b.aBTestingEvents.push(e.offers[n]);t.setExtraInfo(le.PROVIDER_NAME,e.provider),t.value=e.offers,t.shouldEncodeValue=!1,b.saveEvent(t)},this.savePersonalizationCampaignEvent=function(e){var t=b.createEventObject("personalizationCampaign",L.currentTimestamp(),null);t.setExtraInfo(le.PROVIDER_NAME,e.provider),t.value=e.value,t.shouldEncodeValue=!1,b.saveEvent(t)},this.saveResourceDataEvent=function(e){var t=b.createEventObject("resourceContent",L.currentTimestamp(),null);t.value=e,t.shouldEncodeValue=!1,b.saveEvent(t)},this.saveResourceUrlsEvent=function(e){var t=b.createEventObject("resourceUrls",L.currentTimestamp(),null);t.value=e,t.shouldEncodeValue=!1,b.saveEvent(t)},this.saveCorsDeniedDataEvent=function(e){var t=b.createEventObject("corsDeniedResource",L.currentTimestamp(),null);t.value=e,b.saveEvent(t)},this.saveClientAttributeEvent=function(e){if(b.canRecordCustomEvents){var t=b.createEventObject("clientAttribute",L.currentTimestamp(),null);t.value=e,t.shouldEncodeValue=!1,b.saveEvent(t)}},this.saveWebVitalsEvent=function(e){var t=b.createEventObject("webVitals",L.currentTimestamp(),null);t.value=e.webVitalsData,t.setExtraInfo(le.EFFECTIVE_CONNECTION_TYPE,e.ect),t.setExtraInfo(le.RTT,e.rtt),t.shouldEncodeValue=!1,b.saveEvent(t)},this.saveFormAnalysisEvent=function(e){var t=b.createEventObject("formAnalysis",L.currentTimestamp(),null);t.value=e,t.shouldEncodeValue=!1,b.saveEvent(t)},this.savePerformanceDataEvent=function(e){var t=b.createEventObject("resourcesWaterfall",L.currentTimestamp(),null);t.value={version:e.version,causedBy:e.causedBy,performance:e.pagePerformance,resources:e.resource},t.setExtraInfo(le.EFFECTIVE_CONNECTION_TYPE,e.ect),t.setExtraInfo(le.RTT,e.rtt),t.shouldEncodeValue=!1,b.saveEvent(t)},this.initializePageDetails=function(){L.time("initializePageDetails",b.config.timingMode);var e=b.page;e.initializationTimestamp=L.currentTimestamp(),e.id=L.uuid(),e.frame=b.global.self!==top,e.frame&&(e.referrerWithoutHash=L.getReferrerUrlWithoutHash(b.global));var t=L.getLocationUrlSplitByHash(b.global);e.url=t.url,e.urlWithoutHash=t.withoutHash,e.topUrl=t.url,e.hash=t.hash,e.hasTouch=L.hasTouch(),e.hasTimingAPI=L.hasTimingAPI(b.global),e.title=b.getPageTitle(),L.timeEnd("initializePageDetails",b.config.timingMode)},this.getPageTitle=function(e){var t=L.truncateStr(e||document.title,b.config.titleCharsLimit,!0);return b.config.maskTitle&&(t=L.transformTextSegments(t,(function(e){return js.censorValueOf(e,null,b.config.titleMaskingChar,null)}))),t},this.savePerformanceEvent=function(e){var t=b.createEventObject("performance",L.currentTimestamp(),b.global.document),n=!1,r=!1;try{b.global.performance&&b.global.performance.timing&&(n=!0,t.value={perf:{timing:JSON.parse(JSON.stringify(b.global.performance.timing))},browserTime:e},b.global.performance.navigation&&(t.value.perf.navigation={redirectCount:b.global.performance.navigation.redirectCount,type:b.global.performance.navigation.type}),b.page.title&&t.setExtraInfo(le.VISUAL_NAME,b.page.title),b.page.name&&t.setExtraInfo(le.PAGE_NAME,b.page.name),b.ect&&t.setExtraInfo(le.EFFECTIVE_CONNECTION_TYPE,b.ect),t.shouldEncodeValue=!1,b.saveEvent(t),r=!0)}catch(e){b.bus.emit("clsDebug",L.stringFormat("savePerformanceEvent errored. performance object available: {0}, isPerformanceEventSent: {1}. ",n,b.isPerformanceEventSent)+e.message)}!r&&n||(n||b.bus.emit("clsDebug","savePerformanceEvent: performance object was not available. Possibly deprecated from browser"),b.isPerformanceEventSent=!0)},this.acquirePerformanceTiming=function(){if(0===b.global.performance.timing.loadEventEnd)b.global.setTimeout(b.acquirePerformanceTiming,b.config.acquirePerformanceTimingTimeout);else{var e=L.currentTimestamp()-b.page.initializationTimestamp;b.savePerformanceEvent(e)}},this.isSessionCookieExist=function(){return b.isSessionIdExist},this.setClientCookies=function(e,t,n){var r=new gu(b.gUnboundStorageAccessor,b.bus,b.gCookieHelper,b.env,e,t,b.config.visitorDaysToExpiration,n).apply();if(r.isSessionIdExist&&(b.isSessionIdExist=!0),b.bus.emit("sessionCookieSet"),b._handledClientConfiguration||!b._refireCoreEvents||b.config.enableSessionizingByCors||b._corePluginEvents.push({name:"plugin:sessionCookieSet"}),!n&&b.gDomainHelper.isCorsReporting()&&r.changed){var o=b.plugins.cors;o&&o.onCookieChanged(t)}r._visitorId&&(b._visitorId=r._visitorId),b._sessionId=r._sessionId,r._clse&&(b._clse=r._clse),r._rto&&(b.rto=r._rto)},this.setIds=function(e,t){e&&t?(b._sessionId=e,b._visitorId=t,b.setClientCookies({_sessionId:e,_visitorId:t},!1,!0),b.bus.emit("session:setIds",{_sessionId:e,_visitorId:t})):e?(b._sessionId=e,b.setClientCookies({_sessionId:e},!0,!0),b.bus.emit("session:setIds",{_sessionId:e})):(b._visitorId=t,b.setClientCookies({_visitorId:t}),b.bus.emit("session:setIds",{_visitorId:t}))},this.onParentInfo=function(e){var t={_sessionId:e._sessionId,_visitorId:e._visitorId};e.integrationId&&(t._clse=e.integrationId),b.setClientCookies(t,!1,!1),e.topUrl&&(b.page.topUrl=e.topUrl)},this._onInvalidateSession=function(){b._mobileBridgeContext=new Zd(b.global),b.bus.emit("forceFlush"),b.setClientCookies(b.pickExplicitCookieData(),!0),b.gCookieHelper._set(b.env.cookies.delay,0,-1),b.page.id=L.uuid(),b.page.snapshotEmitted=!1,b.page.snapshotFuseData=void 0,b.bus.emit("session:new",{_sessionId:b._sessionId,_visitorId:b._visitorId,pageId:b.page.id,pageName:b.page.name,rto:b.rto})},this.registerPlugin=function(e,t){b.plugins[e]=t},this._removeEventBinding=function(e){for(var t=-1,n=0;n<b.bindings.registered.length;n++){var r=b.bindings.registered[n];r.type===e&&(L.removeEventHandler(r.el,e,r.handler),t=n)}t>=0&&b.bindings.registered.splice(t,1)},this.removeBindings=function(){L.forEach(b.bindings.registered,(function(e){L.removeEventHandler(e.el,e.type,e.handler)})),b.bindings.registered=[],b.bindings.unsupportedEventTypes=[]},this.asStoppable=function(){return{isStopped:function(e){return e&&(b.state.stopped="true"===b.gStorageAccessor._get("stopped")),b.state.stopped},start:function(){return b.config.delayRecording&&!b.gCookieHelper._get(b.env.cookies.delay)?(console.info("Recording is delayed. Ignoring start command"),!1):!b.config.supportRemoteClientConfig||b.config.remoteClientConfigAllowBlank||b.gStorageAccessor._get("client_conf")?b.gSessionStorageAccessor._get("session_breach")?(console.info("[Glassbox] Cannot start recording due to session quota breach"),!1):!!b.state.stopped&&(b.state.stopped=!1,b.bus.emit("recordingStarted"),b.gStorageAccessor.remove("stopped"),!0):(console.info("Recording is stopped. Waiting for client configuration"),!1)},stop:function(){return!b.state.stopped&&(b.state.stopped=!0,b.bus.emit("recordingStopped"),b.gStorageAccessor._set("stopped","true"),!0)}}},this.consoleWarning=function(e){L.isIE()?console.log(e):console.log("%c "+e,"color: white; background: red")},this._hasExtraVocData=function(){return!!(b._publicDataBridge&&b._publicDataBridge.extraVocData&&Object.keys(b._publicDataBridge.extraVocData).length>0)},this._addExtraVocDataIfApplicable=function(e){if(b._hasExtraVocData())for(var t in e.value.extraData||(e.value.extraData={}),b._publicDataBridge.extraVocData)e.value.extraData[t]=b._publicDataBridge.extraVocData[t]},this.simulateScrollReach=function(){if(document.documentElement&&document.documentElement.scrollTop>=0&&document.documentElement.scrollHeight>=0){void 0===b.onLoadScrollReachRetryCount&&(b.onLoadScrollReachRetryCount=0);var e=b.config.onLoadScrollReachHeightThreshold,t=b.config.onLoadScrollReachRetryInterval,n=screen.height*e;if(window.innerHeight<n&&b.onLoadScrollReachRetryCount<b.config.onLoadScrollReachMaxRetries)return b.onLoadScrollReachRetryCount++,void setTimeout((function(){b.simulateScrollReach()}),t);b.onLoadScrollReachRetryCount=0;var r=b.createEventObject("scrollReach",L.currentTimestamp(),document);r.value={top:document.documentElement.scrollTop,height:document.documentElement.scrollHeight,domElementsCount:document.getElementsByTagName("*").length,innerHeight:window.innerHeight,isInfinite:b.scrollReach.isInfinite},b.updateScrollReachValues(r),b.shouldReportScrollReach(r)&&b.saveEvent(r)}},this.env=m,this.config=y,this.bus=n,this._sessionId=void 0,this._visitorId=void 0,this.integrationId=void 0,this.rto=void 0,this.isSessionIdExist=void 0,this.global=t,new Zc(this,r),this.gValueCensor=r,this.gStorageAccessor=o,this.gUnboundStorageAccessor=a,this.gSessionStorageAccessor=s,this.gCookieHelper=u,this.gDomainHelper=l,this.externalIdResolver=new nu({byAttribute:y.externalIdAttr,byClassPrefix:y.externalIdByClassesOnPrefix,byGbId:y.externalIdUseGbId}),this.debugHelper=new ku(y,"string"==typeof h?h:"unknown"),this.page={snapshotEmitted:!1,snapshotFuseData:void 0,timing:{},attributes:{}},this.encryptionPendingEvents=[],this.bindings={registered:[],unsupportedEventTypes:[]},this.plugins={},this.pluginsReady=!1,this.reports={events:[],resources:[]},this.state=tl,this.state.dpr=this.global.devicePixelRatio,this.scrollId=0,this.scrollReach={top:0,height:null,isInfinite:!1},this.lastScrollTop=0,this.debounceTimeout=void 0,this.snapshotType="regular",this.touchDetected=!1,this.firstClickFired=!1,this.ajaxUrls=new zu(20),this.historyManager=new bc(window,this.bus,this.global.history),this.blackoutManager=new Cc(window,this.bus,y.blackoutWhenLocationContains),this._mobileBridgeContext=g,this._publicDataBridge=v,this.zoomType={IN:1,OUT:2},this.version=this.env.detectorVersion,this.aBTestingEvents=[],this.logicalSegmentTracker=new Pc(this,this.bus,document,new Ms(this.bus),{triggerBySimpleSelector:y.segmentationTriggerBySimpleSelector,labelBySimpleSelector:y.segmentationLabelBySimpleSelector,labelByAttribute:y.segmentationLabelByAttribute,labelByInnerText:y.segmentationLabelByInnerText,titleByAttribute:y.segmentationTitleByAttribute,titleByInnerText:y.segmentationTitleByInnerText,segmentationPrefix:y.segmentationPrefix,parallelMechanism:y.segmentationParallelMechanism,initialLabelSelector:y.segmentationInitialLabelSelector,forceTryEnterSegment:y.segmentationForceTryEnterSegment,waitForSegmentRender:y.waitForSegmentRender,segmentationForceAddingListeners:y.segmentationForceAddingListeners}),this.segmentManager=new Nc(document,this.bus,new el(this.bus,c,{spaLoadTimeLimit:y.spaLoadTimeLimit,recordSpaLoadTime:y.recordSpaLoadTime,interceptAjax:y.interceptAjax,framesetRecordEnabled:y.framesetRecordEnabled,htmlObjectRecordEnabled:y.htmlObjectRecordEnabled}),d,this.getPageTitle(),{ignoreWhenLocationContains:y.segmentationIgnoreWhenLocationContains,decodeUri:y.decodeUri,waitForSegmentRender:y.waitForSegmentRender,waitForSegmentTitle:y.waitForSegmentTitle,sendSegmentTitle:y.sendSegmentTitle,captureQueryStringParamsOnSegmentChange:y.captureQueryStringParamsOnSegmentChange,segmentationAlwaysSendTitleChange:y.segmentationAlwaysSendTitleChange,segmentationPrefix:y.segmentationPrefix,ignoreSegmentLoadEnd:y.ignoreSegmentLoadEnd,captureQueryStringParamsAsDataOnSegmentChange:y.captureQueryStringParamsAsDataOnSegmentChange}),this.isPerformanceEventSent=!1,this.isUnloaded=!1,this.userInterActionsEvents=L.immutableSet("mousedown","pointerdown","touchstart","keydown"),this.botDetector=new Fc(document,this.bus,this.env,o,L,i,yl),this.pageInfo=new Su(window,this.bus,this.global.top!==window,this.gSessionStorageAccessor),this.gUriMasker=d,this.selectorResolver=f,this.cssSelectorResolver=p,new Lu(this),this.bus.on("clsDebugError",this.clsDebugFromEvent),this._refireCoreEvents=this.config.supportRemoteClientConfig||this.config.delayRecording&&!this.gCookieHelper._get(this.env.cookies.delay,!1),this._corePluginEvents=[],this._handledClientConfiguration=!1,this._exitIntentBound=!1,this._ajaxUtils=new Gi(this,this.env,y.reportPreferSendBeaconAPI,y.clientAttributesEnabled||y.interceptThirdPartyAttributes,y.cordovaSdkReporting),this.previousValidationErrorData={message:"",element:{_gbid:""}},this.useCurrentTimeForPagesnapshot=!1,this._sessionBreach=!1,this.bus.on("quotaBreach",(function(){b._sessionBreach=!0})),this.bus.on("recordingStarted",(function(){b._sessionBreach=!1})),this._fingerprint=Kd,this.fingerprintIsUsed=!1,this._aggregatingElements=L.immutableSet.apply(null,this.config.aggregatingElements||[]),this._aggregatingElements["GB-SIDE-NAVIGATION-MENU-ITEM"]=!0}return function(e,t,n){return t&&ff(e.prototype,t),n&&ff(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(e,null,[{key:"onAutoMaskingApplied",value:function(t,n){e.autoMaskingSignaled=n}}])}();function hf(e){return hf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hf(e)}function gf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vf(r.key),r)}}function yf(e,t,n){return t&&gf(e.prototype,t),n&&gf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function vf(e){var t=function(e,t){if("object"!=hf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=hf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==hf(t)?t:t+""}var bf=yf((function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isCensored=function(e,t){var n=t?e.parentElement:e;return!!o.valueCensorPrefixBySelector.length&&o.checkSelector(n,o.valueCensorPrefixBySelector)},this.censor=function(e,t){return o.isCensored(e,t)?e._gbValuesToMask?o._censorUtils.censorValueOf(e.value,o._options.valueCensorUnmaskedSuffixLength,o._options.valueCensorPrefixChar,e._gbValuesToMask):o._censorUtils.censorValueOf(e.value,o._options.valueCensorUnmaskedSuffixLength,o._options.valueCensorPrefixChar):e.value},this.isAvailable=function(){return!0},this._selectorValidator=t,this._censorUtils=n,this._options=r,this.valueCensorPrefixBySelector=[],this.createValidSelectorsArray=function(e,t){var n;for(n=0;n<e.length;++n)o._selectorValidator.validateSelector(e[n])&&t.push(e[n])},r.valueCensorPrefixBySelector.length&&this.createValidSelectorsArray(r.valueCensorPrefixBySelector,this.valueCensorPrefixBySelector),this.checkSelector=function(e,t){var n;for(n=0;n<t.length;++n)if(e&&e.nodeType===window.Node.ELEMENT_NODE&&L.elementMatches(e,t[n]))return t[n]}}));function _f(e){return _f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_f(e)}function Sf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ef(r.key),r)}}function wf(e,t,n){return t&&Sf(e.prototype,t),n&&Sf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ef(e){var t=function(e,t){if("object"!=_f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_f(t)?t:t+""}var Cf=wf((function e(t,n,r,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var a=new Ms(r),s=i.valueMaskingMode===o.censorMode.WhiteList,c=i.ccForceMaskContainer?new Us(r):{markOwnerAndInputs:function(){}};this.handlers=[],this.fallbackHandlers=[],this.handlers.push(new As(js,[new Gs(i.dontMaskAutocompletePassword).apply,new Js({enabled:i.ccAutoMask,byContent:i.ccAutoMaskByContent,byAttributes:i.ccAutoMaskFields,keepLastDigits:i.ccAutoMaskKeepLastDigits,ccAutoMaskNumberInString:i.ccAutoMaskNumberInString,ccAutoMaskMode:i.ccAutoMaskMode}).apply,new tc(new ac({valueMaskByCategories:i.valueMaskByCategories,valueMaskingCharNumeric:i.valueMaskingCharNumeric,valueMaskingCharNumericLike:i.valueMaskingCharNumericLike,valueMaskingChar:i.valueMaskingChar}).getScheme()).apply],(function(e,t,n){"cc"===t&&c.markOwnerAndInputs(e,n),mf.onAutoMaskingApplied(e,t,r)}),i)),this.fallbackHandlers.push(void 0),this.handlers.push(new pc(r,js,a,{valueCensorIds:s?i.maskWhitelistValueById:[],valueCensorClasses:s?i.maskWhitelistValueByClass:[],valueCensorSimpleSelector:s?i.valueWhitelistMaskSimpleSelector:[],valueCensorIgnoreAttribute:i.valueMaskIgnoreAttribute,valueMaskingChar:i.valueMaskingChar})),this.fallbackHandlers.push(void 0),t.isEncryptionConfigured()&&(this.handlers.push(new Es(r,n,o.censorMode,"cls_encrypt",{name:"encryption",valueCensorshipMode:i.valueEncryptionMode,valueCensorIds:i.valueEncryptById,valueCensorClasses:i.valueEncryptByClass,autoCensorPredicate:void 0,valueMaskingChar:i.valueMaskingChar,valueMaskNonEditableInputTypes:i.valueMaskNonEditableInputTypes},a)),this.fallbackHandlers.push(new Es(r,js,o.censorMode,"cls_encrypt",{name:"masking_fallback",valueCensorshipMode:i.valueEncryptionMode,valueCensorIds:i.valueEncryptById,valueCensorClasses:i.valueEncryptByClass,valueCensorIgnoreAttribute:i.valueMaskIgnoreAttribute,valueMaskingChar:i.valueMaskingChar,valueMaskNonEditableInputTypes:i.valueMaskNonEditableInputTypes},a))),this.handlers.push(new Es(r,js,o.censorMode,"cls_mask",{name:"masking",valueCensorshipMode:i.valueMaskingMode,valueCensorIds:s?i.maskWhitelistValueById:i.maskBlacklistValueById,valueCensorClasses:s?i.maskWhitelistValueByClass:i.maskBlacklistValueByClass,valueCensorSimpleSelectors:s?i.valueWhitelistMaskSimpleSelector:i.valueBlacklistMaskSimpleSelector,valueCensorIgnoreAttribute:i.valueMaskIgnoreAttribute,valueMaskingChar:i.valueMaskingChar,valueMaskNonEditableInputTypes:i.valueMaskNonEditableInputTypes},a)),this.fallbackHandlers.push(void 0),i.valueCensorPrefixBySelector.length&&(this.handlers.push(new bf(a,js,{valueCensorPrefixBySelector:i.valueCensorPrefixBySelector,valueCensorUnmaskedSuffixLength:i.valueCensorUnmaskedSuffixLength,valueCensorPrefixChar:i.valueCensorPrefixChar})),this.fallbackHandlers.push(void 0))}));function Tf(e){return Tf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tf(e)}function kf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,If(r.key),r)}}function If(e){var t=function(e,t){if("object"!=Tf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Tf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Tf(t)?t:t+""}var Af=["domInit:preloaded","frame:port"],Pf={},xf=function(){return function(e,t,n){return t&&kf(e.prototype,t),n&&kf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._on=function(e,t,r,o){void 0===o&&(o=0),Af.indexOf(e)>=0&&Pf[e]&&t.apply(r||null,Pf[e]),(n._events[e]=n._events[e]||[]).push([t,r,o]),n._events[e].sort(n._compare)},this._once=function(e,t,r,o){void 0===o&&(o=0),Af.indexOf(e)>=0&&Pf[e]?t.apply(r||null,Pf[e]):((n._events[e]=n._events[e]||[]).push([t,r,o,!0]),n._events[e].sort(n._compare))},this._off=function(e,t){e||(n._events={});for(var r=n._events[e]||n._empty,o=r.length=t?r.length:0;o--;)t==r[o][0]&&r.splice(o,1)},this._emit=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var o=t[0];Af.indexOf(o)>=0&&(Pf[o]=t.slice(1)||n._empty.slice());for(var i,a=n._events[o]||n._empty,s=a.length>0?a.slice(0,a.length):a,c=0;i=s[c];)i[0].apply(i[1],n._empty.slice.call(t,1)),i[3]?(n._events[o].splice(c,1),s.splice(c,1)):c++},this._isListenToEvent=function(e){return(n._events[e]||[]).length>0},this._events={},this._empty=[],(t=t||this).on=this._on,t.once=this._once,t.off=this._off,t.emit=this._emit,t.isListenToEvent=this._isListenToEvent}),[{key:"_compare",value:function(e,t){return e[2]<t[2]?-1:e[2]>t[2]?1:0}}])}();function Rf(e){return Rf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rf(e)}function Of(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Mf(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mf(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Mf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Nf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jf(r.key),r)}}function jf(e){var t=function(e,t){if("object"!=Rf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Rf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Rf(t)?t:t+""}var Df=function(){return function(e,t,n){return t&&Nf(e.prototype,t),n&&Nf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._throwSyntaxError=function(e){throw new SyntaxError("Illegal ajax predicate syntax: "+e)},this._stripNameAndArg=function(e){var t=e.indexOf("(");if(t>-1){var r,o=-1,i=1;for(r=t+1;r<e.length;r++)if("("===e.charAt(r)&&i++,")"===e.charAt(r)&&0===--i){o=r;break}return-1===o&&n._throwSyntaxError("Missing closing ')'."),[e.substring(0,t).toLowerCase().trim(),e.substring(t+1,o).trim()]}return[e.toLowerCase()]},this.create=function(e){if(!e)return n._creators.never();var t=n._stripNameAndArg(e);return n._creators[t[0]]||n._throwSyntaxError("Unsupported predicate type '"+t[0]+"'."),n._creators[t[0]](t[1])},this._documentTLD=L.getUpperLevelDomain(t);var r=this;this._creators={always:function(){return function(){return!0}},never:function(){return function(){return!1}},fqdn:function(){return function(e){var n=L.extractHostname(e.url);return!n||n===t}},tld:function(){return function(e){var t=L.extractHostname(e.url);return!t||L.getUpperLevelDomain(t)===r._documentTLD}},statusgte:function(e){e||r._throwSyntaxError("Missing required argument 'status'.");var t=parseInt(e);return function(e){return void 0===e.status||e.status>=t}},urimatches:function(e){e||r._throwSyntaxError("Missing required argument 'pattern'.");var t=new RegExp(e);return function(e){return!1!==t.test(e.url)}},hostmatches:function(e){e||r._throwSyntaxError("Missing required argument 'pattern'.");var t=new RegExp(e),n=window.location.hostname;return function(e){var r=L.extractHostname(e.url),o=document.querySelector("base"),i=o?L.extractHostname(o.href):null;return r=r||i||n,!1!==t.test(r)}},not:function(e){e||r._throwSyntaxError("Missing required arguments.");var t=r._parsePredicateList(e);return 1!==t.length&&r.throwSyntaxError("Expecting single argument."),function(e){return!t[0](e)}},and:function(e){e||r._throwSyntaxError("Missing required arguments.");var t=r._parsePredicateList(e);return function(e){var n,r=Of(t);try{for(r.s();!(n=r.n()).done;){if(!(0,n.value)(e))return!1}}catch(e){r.e(e)}finally{r.f()}return!0}},or:function(e){e||r._throwSyntaxError("Missing required arguments.");var t=r._parsePredicateList(e);return function(e){var n,r=Of(t);try{for(r.s();!(n=r.n()).done;){if((0,n.value)(e))return!0}}catch(e){r.e(e)}finally{r.f()}return!1}}},this._creators.true=this._creators.always,this._creators.false=this._creators.never}),[{key:"_parsePredicateList",value:function(e){var t,n,r=[],o=(e||"").split(",");for(t=0;t<o.length;t++)n=this._stripNameAndArg(o[t].trim()),this._creators[n[0]]||this._throwSyntaxError("Unsupported predicate type '"+n[0]+"'."),r.push(this._creators[n[0]](n[1]));return r}}])}();function Lf(e){return Lf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lf(e)}function Bf(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ff(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ff(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Ff(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Uf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Hf(r.key),r)}}function Vf(e,t,n){return t&&Uf(e.prototype,t),n&&Uf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Hf(e){var t=function(e,t){if("object"!=Lf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Lf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lf(t)?t:t+""}var Wf=Vf((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._hasBadlyConfiguredRule=function(e){var t,n=Bf(r._predicatesOfBadlyConfiguredRules);try{for(n.s();!(t=n.n()).done;){if((0,t.value)(e))return!0}}catch(e){n.e(e)}finally{n.f()}return!1},this._checkPredicate=function(e,t){var n,o=[],i=Bf(r._rules[t]);try{for(i.s();!(n=i.n()).done;){var a=n.value;a.predicate(e)&&o.push(a.transformations)}}catch(e){i.e(e)}finally{i.f()}return o},this._newJsonMaskingReplacer=function(e,t){return function(n,r){var o,i=r,a=Bf(t);try{for(a.s();!(o=a.n()).done;){i=o.value.jsonField(n,i,e)}}catch(e){a.e(e)}finally{a.f()}return i}},this._addRule=function(e,t,n){try{e.push({predicate:t,transformations:{jsonField:r._contentMaskerFactory.jsonField(n),pattern:r._contentMaskerFactory.pattern(n)}})}catch(e){i.error("Error while processing AJAX masking rule. Please check rules transformation configuration.",e),r._predicatesOfBadlyConfiguredRules.push(t)}},this._setMaskingStatus=function(e,t,n){e.masking&&(e.masking[t]=n)},this.init=function(e){try{var t,n=Bf(r._options.responseRules);try{for(n.s();!(t=n.n()).done;){var o=t.value;r._addRule(r._rules.response,e.create(o.predicate),o.transformations)}}catch(e){n.e(e)}finally{n.f()}var a,s=Bf(r._options.requestRules);try{for(s.s();!(a=s.n()).done;){var c=a.value;r._addRule(r._rules.request,e.create(c.predicate),c.transformations)}}catch(e){s.e(e)}finally{s.f()}}catch(e){r._initOk=!1,i.error("Error while initializing AJAX masking settings. Please check rules predicates configuration.",e)}},this.maskText=function(e,t,n,o){if(!n)return"";try{if(!r._initOk||r._hasBadlyConfiguredRule(e))return r._setMaskingStatus(e,t,"bad-config"),r._CONST_MASKING_ERROR;var a=r._checkPredicate(e,t);if(a.length){var s,c={},u=Bf(a);try{for(u.s();!(s=u.n()).done;){n=s.value.pattern(n,c)}}catch(e){u.e(e)}finally{u.f()}c.masked&&r._setMaskingStatus(e,t,"masked")}return n.length>o&&-1!==o&&(n="".concat(t.toUpperCase(),"_BODY_EXCEEDS_MAX_ALLOWED_LENGTH_SET_IN_DETECTOR")),n}catch(n){return r._setMaskingStatus(e,t,"error"),i.error("Error during textual ajax content masking.",n),r._CONST_MASKING_ERROR}},this.getJsonContent=function(e,t,n,o){if(!n)return"";try{if(!r._initOk||r._hasBadlyConfiguredRule(e))return e.masking&&r._setMaskingStatus(e,t,"bad-config"),r._CONST_MASKING_ERROR;var a="string"==typeof n,s={},c=r._checkPredicate(e,t),u=a?n:JSON.stringify(n);if(!c.length&&-1===o)return u;var l=a?JSON.parse(u):n,d="";return d="response"===t&&-1!==o&&u.length>o?"RESPONSE_BODY_EXCEEDS_MAX_ALLOWED_LENGTH_SET_IN_DETECTOR":"request"===t&&-1!==o&&u.length>o?"REQUEST_BODY_EXCEEDS_MAX_ALLOWED_LENGTH_SET_IN_DETECTOR":JSON.stringify(l,r._newJsonMaskingReplacer(s,c)),s.masked&&r._setMaskingStatus(e,t,"masked"),d}catch(a){return a.message.indexOf("not valid JSON")>0?r.maskText(e,t,n,o):(r._setMaskingStatus(e,t,"error"),i.error("Error during json ajax content masking.",a),r._CONST_MASKING_ERROR)}},this._CONST_MASKING_ERROR="MASKING ERROR",this._contentMaskerFactory=t,this._options=L.optionsWithDefaults(n,{requestRules:[],responseRules:[]}),this._initOk=!0,this._predicatesOfBadlyConfiguredRules=[],this._rules={request:[],response:[]}}));function zf(e){return zf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zf(e)}function Gf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Kf(r.key),r)}}function qf(e,t,n){return t&&Gf(e.prototype,t),n&&Gf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Kf(e){var t=function(e,t){if("object"!=zf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=zf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zf(t)?t:t+""}var Yf=qf((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._stringToRegex=function(e,t){return new RegExp(e,"pattern"===t?"g":"")},this._replacer=function(e,t){return js.censorValueOf(t,0,e)},this._transformationsByType=function(e,n){var r,o=[];for(r=0;r<e.length;++r)e[r].type.toLowerCase()===n&&(e[r].replace?o.push({search:t._stringToRegex(e[r].search,n),replace:e[r].replace,deepSearch:e[r].deepSearch?t._stringToRegex(e[r].deepSearch):void 0}):o.push({search:t._stringToRegex(e[r].search,n),replaceChar:e[r].replaceChar||"*",deepSearch:e[r].deepSearch?t._stringToRegex(e[r].deepSearch):void 0}));return o},this.jsonField=function(e){var n=t._transformationsByType(e,"jsonfield");return function(e,t,r){var o,i,a,s,c=function(){if((i=n[o]).search.test(e)){if(a=t+"",r&&(r.masked=!0),i.deepSearch){var s=null,c=-1,u=-1,l=!1,d=function(e,t){try{if(t<0||t>=e.length)return-1;for(var n=0,r=t;r<e.length;){if("{"===e[r])n++;else if("}"===e[r]&&0===--n)return r;r++}return-1}catch(e){return console.error("Error finding matching braces:",e),-1}},f=a.indexOf("{");if(-1!==f){var p=d(a,f);if(-1!==p){var m=function(e,t,n){try{if(t<0||n<0||t>=e.length||n>=e.length||t>n)return{success:!1,error:"Invalid start or end indices"};var r=e.slice(t,n+1);return{success:!0,content:JSON.parse(r),start:t,end:n}}catch(e){return{success:!1,error:e.message}}}(a,f,p);m.success&&(s=m.content,c=m.start,u=m.end)}}if(!s&&(l=a.includes('\\"'))){for(var h,g=/\{[^}]+\}/g;null!==(h=g.exec(a));)try{var y=h[0].replace(/\\"/g,'"');if(s=JSON.parse(y)){c=h.index,u=h.index+h[0].length-1;break}}catch(e){}if(!s){for(var v=[],b=0;-1!==(b=a.indexOf("{",b));)v.push(b),b++;for(var _=0,S=v;_<S.length;_++){var w=S[_],E=d(a,w);if(-1!==E)try{for(var C=a.slice(w,E+1),T=[C,C.replace(/\\"/g,'"'),C.replace(/\\"/g,'"').replace(/\\\\/g,"\\")],k=0,I=T;k<I.length;k++){var A=I[k];try{if(s=JSON.parse(A)){c=w,u=E;break}}catch(e){}}if(s)break}catch(e){}}}}if(s){var P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;try{if(t>5)return;if(!e||"object"!==zf(e))return;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n))try{if(i.deepSearch.test(n)){var r=e[n];e[n]=i.replace?i.replace:js.censorValueOf(r+"",0,i.replaceChar)}else"object"===zf(e[n])&&null!==e[n]&&P(e[n],t+1)}catch(e){console.error("Error masking field ".concat(n,":"),e)}}catch(e){console.error("Error in maskDeepField:",e)}};P(s);var x=JSON.stringify(s);if(l){var R=x.replace(/"/g,'\\"');return{v:a.slice(0,c)+R+a.slice(u+1)}}return{v:a.slice(0,c)+x+a.slice(u+1)}}return a.includes("{")||a.includes("}")?{v:i.replace?i.replace:js.censorValueOf(a,0,i.replaceChar)}:{v:t}}return{v:i.replace?i.replace:js.censorValueOf(a,0,i.replaceChar)}}};for(o=0;o<n.length;++o)if(s=c())return s.v;return t}},this.pattern=function(e){var n=t._transformationsByType(e,"pattern");return function(e,r){var o;for(o=0;o<n.length;++o)e=n[o].replace?e.replace(n[o].search,n[o].replace):e.replace(n[o].search,(function(e){return t._replacer(n[o].replaceChar||"*",e)})),r&&(r.masked=!0);return e}}}));function Xf(e){return Xf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xf(e)}function Jf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qf(r.key),r)}}function Zf(e,t,n){return t&&Jf(e.prototype,t),n&&Jf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qf(e){var t=function(e,t){if("object"!=Xf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Xf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xf(t)?t:t+""}var $f=Zf((function e(t,n,r,o,i,a){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._getAjaxCall=function(e,t,n,r,o,i){var a={};return a.startedAt=e.startTime,a.endedAt=e.endTime,a.url=Hp.safeEncodeURI(e.url),a.method=e.method,a.requestContent=null,n&&(a.requestContent="string"==typeof e.requestContent?e.requestContent:null),a.requestHeaders=null,t&&(a.requestHeaders=s._getEffectiveRequestHeaders(e)||(e.requestContent?"Content-Type: text/plain;charset=utf-8":null)),a.responseHeaders=r,a.responseContent=o,a.responseCompressed=i,a.api=e.api,a.sn=e.sn,a},this._getCompressedResponse=function(e){return e?H.pako.gzip(e):null},this._isSameDomain=function(e,t){return L.extractHostname(e)===t||L.isHostRelativeUrl(e)||L.getUpperLevelDomain(e)===L.getUpperLevelDomain(t)},this._getEffectiveRequestHeaders=function(e){var t=e.requestHeaders||[];if(s._captureRequestCookie&&s._isSameDomain(e.url,window.location.host))try{var n=s._document.cookie;n&&t.push("cookie: "+n)}catch(e){}return e.masking&&e.masking.request&&t.push("X-Glassbox-JSMasking: "+e.masking.request),t.join("\r\n")},this.onLoadEnd=function(e){if(delete s._sentRequests[e.uuid],!e.recordingLimitExceeded){var t=s.canRecordAPICalls&&s._predicateResponseBody(e),n=s.canRecordAPICalls&&(t||s._predicateResponseHeaders(e)),r=s.canRecordAPICalls&&s._predicateRequestBody(e);if(!(s.canRecordAPICalls&&(r||s._predicateRequestHeaders(e))||n||s._predicateMetadata(e)))return!1;t?e.captureContent(s.onloadEndSend):s.onloadEndSend(e,null)}},this.onloadEndSend=function(e,t){var n=s.canRecordAPICalls&&s._predicateResponseBody(e),r=s.canRecordAPICalls&&(n||s._predicateResponseHeaders(e)),o=s.canRecordAPICalls&&s._predicateRequestBody(e),i=s.canRecordAPICalls&&(o||s._predicateRequestHeaders(e)),a=n&&e.hasGzipContentEncoding();a&&(t=s._getCompressedResponse(t));var c=s._getAjaxCall(e,i,o,r?e.fixHeaders():null,t,a);c.lastFocusedSelectorInfo=e.lastFocusedSelectorInfo,c.lastFocusedCSSSelectorInfo=e.lastFocusedCSSSelectorInfo,c.status=e.status,c.statusText=e.statusText,c.aborted=e.aborted,c.resContentType=e.resContentType,c.reqContentType=e.reqContentType||"text/plain;charset=utf-8",c.requestLength=e.requestLength,c.contentLength=e.contentLength,c.ttfb=e.ttfb,c.downTime=e.downloadTime,c.realDownTime=e.downloadTime,c.pageWasHiddenDuringRequest=e.pageWasHiddenDuringRequest,i||o||r||t||(c.containOnlyMetaData=!0),setTimeout((function(){s._bus.emit("ajax:loadend",c)}),0)},this.initConfig=function(e){var t=!1;s._config.ajaxRecordMetadata&&(s._predicateMetadata=e.create(s._config.ajaxRecordMetadata),t=!0),s._config.ajaxRecordResponseHeaders&&(s._predicateResponseHeaders=e.create(s._config.ajaxRecordResponseHeaders),t=!0),s._config.ajaxRecordResponseBody&&(s._predicateResponseBody=e.create(s._config.ajaxRecordResponseBody),t=!0),s._config.ajaxRecordRequestHeaders&&(s._predicateRequestHeaders=e.create(s._config.ajaxRecordRequestHeaders),t=!0),s._config.ajaxRecordRequestBody&&(s._predicateRequestBody=e.create(s._config.ajaxRecordRequestBody),t=!0),t&&(s._bus.on("ajax:onLoadEnd",s.onLoadEnd,s),s._bus.on("ajax:onLoad",s.onLoad,s),s._bus.on("ajax:onError",s.onError,s),s._bus.on("ajax:onSend",s.onSend,s))},this.onLoad=function(e){e.recordingLimitExceeded||s._bus.emit("ajax:load",s._getAjaxCall(e))},this.onError=function(e){e.recordingLimitExceeded||s._bus.emit("ajax:error",s._getAjaxCall(e))},this.onSend=function(e){if(s._limitChecker.allow()){s._sentRequests[e.uuid]=e;var t=s._getAjaxCall(e);e.requestContent&&(t.data=e.requestContent)}else e.recordingLimitExceeded=!0},this._window=t,this._document=n,this._bus=r,this._limitChecker=o,this._config=i,this._customStorage=a,this._nextSn=function(){var e=0;return function(){return e++}}(),this._sentRequests={},this._captureRequestCookie=this._config.ajaxCaptureRequestCookie||!1;var c=this;this.canRecordAPICalls=!0;var u=(this._customStorage||new b(this._bus,this._window._gbSessionStorage,{keysPrefix:H.Storage.BoundKeyPrefix}))._get("api_breach");"true"!==u&&!0!==u||(this.canRecordAPICalls=!1,this._bus.emit("clsDebug","apiCallBreach activate from session storage")),this._bus.on("event:unload",(function(){var e;for(e in c._sentRequests)Object.prototype.hasOwnProperty.call(c._sentRequests,e)&&(c._sentRequests[e].status=0,c.onLoadEnd(c._sentRequests[e]))}),null,-1),this._bus.on("apiCallBreach",(function(){c.canRecordAPICalls=!1})),this._bus.on("apiCallBreachCanceled",(function(){c.canRecordAPICalls=!0}));this._predicateMetadata=this._predicateResponseHeaders=this._predicateResponseBody=this._predicateRequestHeaders=this._predicateRequestBody=function(){return!1}}));function ep(e){return ep="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ep(e)}function tp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,np(r.key),r)}}function np(e){var t=function(e,t){if("object"!=ep(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ep(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ep(t)?t:t+""}var rp=function(){return function(e,t,n){return t&&tp(e.prototype,t),n&&tp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,n,r,o){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._window=t,this._bus=n,this._config=o,this._ajaxStats={},this._tld=L.getUpperLevelDomain(r),this._segment=this._window.location.pathname,this._bus.on("segmentChanged",(function(e){i._segment=e.current})),this._statusgteValue=this._getStatusgteValue(),this._bus.on("event:unload",(function(){L.isEmpty(i._ajaxStats)||i._bus.emit("ajax:reportStats",i._prepareEventData(i._ajaxStats))})),this._predicateStats=function(){return!1}}),[{key:"_getStatusgteValue",value:function(){var e=(this._config.ajaxRecordStats||"").toLowerCase().match(/statusgte\s*\((\s*\d+\s*)\)/);if(e){var t=e[1];return parseInt(t)}}},{key:"_removeStatsEntry",value:function(e){delete this._ajaxStats[this._getEntryKey(e)]}},{key:"_prepareEventData",value:function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(e[t]);return n}},{key:"_getStatsEntry",value:function(e){return this._ajaxStats[this._getEntryKey(e)]}},{key:"_setStatsEntry",value:function(e,t){this._ajaxStats[this._getEntryKey(e)]=t}},{key:"_isSameTopLevelDomain",value:function(e){return 0===e.indexOf("/")||this._tld===L.getUpperLevelDomain(e)}},{key:"_statsCollectLoadEnd",value:function(e,t,n){t&&(e.fields.responseContentType=t),n&&(e.fields.requestContentType=n)}},{key:"_addOrUpdateCounters",value:function(e,t,n){var r=e.duration||0,o=parseInt(e.contentLength)||0,i=this._estimatedSizeOf(e.requestContent)||0,a=e.ttfb||0,s=e.downloadTime||0,c=t[n];c||(c={count:0,sumDuration:0,sumResponseBytes:0,sumRequestBytes:0,sumTtfb:0,sumDownloadTime:0}),++c.count,r=this._checkForNonNumber(r,"duration",e.url),o=this._checkForNonNumber(o,"resContentLength",e.url),i=this._checkForNonNumber(i,"requestLength",e.url),a=this._checkForNonNumber(a,"ttfb",e.url),s=this._checkForNonNumber(s,"downloadTime",e.url),c.sumDuration=c.sumDuration+r,c.sumResponseBytes=c.sumResponseBytes+o,c.sumRequestBytes=c.sumRequestBytes+i,c.sumTtfb=c.sumTtfb+a,c.sumDownloadTime=c.sumDownloadTime+s,t[n]=c}},{key:"_checkForNonNumber",value:function(e,t,n){return"number"!=typeof e||window.isNaN(e)?(this._bus.emit("clsDebug","AjaxStatsTracker","non number found in stats",{value:e,fieldName:t,url:n}),0):e}},{key:"_estimatedSizeOf",value:function(e){return e?"string"==typeof e?e.length:void 0!==e.byteLength?e.byteLength:e instanceof Blob?e.size:0:0}},{key:"_collectAndCalcHash",value:function(e,t){if(!e)return 0;var n=0;return this._config.ajaxStatsQueryParams.forEach((function(r){e[r]&&(t[r]=e[r],n=31*(n=31*n+L.hashcode(r))+L.hashcode(e[r]))})),n}},{key:"_getEntryKey",value:function(e){return"".concat(e.url.split("?")[0],"_").concat(e.method,"_").concat(e.segment,"_").concat(e.queryHash)}},{key:"initConfig",value:function(e){try{this._config.ajaxRecordStats&&(this._predicateStats=e.create(this._config.ajaxRecordStats),this._bus.on("ajax:onSend",this.onSend,this),this._bus.on("ajax:onLoadEnd",this.onLoadEnd,this))}catch(e){i.error("Error while parsing Ajax predicates from configuration. interception disabled. error:"+e)}}},{key:"onSend",value:function(e){if(this._predicateStats(e)){var t={},n=this._config.ajaxStatsQueryParams&&L.parseQuery(e.url.split("?")[1]);e.queryHash=this._collectAndCalcHash(n,t),e.segment=this._segment;var r=this._getStatsEntry(e);if(!r){var o=L.validateHref(this._window.location.href),i=L.extractHostname(e.url)||this._window.location.hostname,a=L.extractPath(e.url.split("?")[0]);r={fields:{segment:this._segment,sameTLD:this._isSameTopLevelDomain(i),method:e.method,hostname:i,path:a,refHost:L.extractHostname(o),refPath:L.extractPath(o.split("?")[0]),api:e.api},counters:{},queryParams:t},this._setStatsEntry(e,r)}}}},{key:"onLoadEnd",value:function(e){var t=this._getStatsEntry(e);if(t){if("number"==typeof this._statusgteValue&&e.status<this._statusgteValue)return void this._removeStatsEntry(e);var n=e.resContentType,r=e.reqContentType,o=e.status;0===o&&(o=e.aborted?1:o),this._addOrUpdateCounters(e,t.counters,o),this._statsCollectLoadEnd(t,n,r)}}}])}();function op(e){return op="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},op(e)}function ip(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ap(r.key),r)}}function ap(e){var t=function(e,t){if("object"!=op(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=op(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==op(t)?t:t+""}var sp=function(){return function(e,t,n){return t&&ip(e.prototype,t),n&&ip(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._bus=t,this._config=n}),[{key:"initConfig",value:function(){(this._config.interceptThirdPartyAttributes||this._config.struggleCaptureAjaxErrors||this._config.recordSpaLoadTime||this._config.interceptABTesting||this._config.struggleCaptureDeadClick||this._config.enableOptimizelyIntegration)&&(this._bus.on("ajax:onSend",this.onSend,this),this._bus.on("ajax:onLoadEnd",this.onLoadEnd,this),this._bus.on("ajax:onError",this.onError,this))}},{key:"onSend",value:function(e){this._bus.emit("ajax:send",e)}},{key:"onLoadEnd",value:function(e){this._bus.emit("ajax:end",e)}},{key:"onError",value:function(e){this._bus.emit("ajax:loadError",e)}}])}(),cp={hookProto:function(e){var t={};return{setHookBefore:function(n,r){var o=e[n];return!!o&&(e[n]=function(){try{r.apply(this,arguments)}catch(e){i.error("error during method '"+n+"' hook invocation. error: "+e.message,e)}return o.apply(this,arguments)},t[n]=o,!0)},setHookAfter:function(n,r,o){var a=e[n];return!!a&&(e[n]=function(){var e=a.apply(this,arguments);try{var t;o?(arguments.length?(t=Array.prototype.slice.call(arguments)).push(e):t=[e],r.apply(this,t)):r.apply(this,arguments)}catch(e){i.error("error during method '"+n+"' hook invocation. error: "+e.message,e)}return e},t[n]=a,!0)},hookSetPropertyAfter:function(n,r){var o=Object.getOwnPropertyDescriptor(e,n)?Object.getOwnPropertyDescriptor(e,n).set:null;return!!o&&(Object.defineProperty(e,n,{set:function(){o.apply(this,arguments);try{r.apply(this,arguments)}catch(e){i.error("error during method '"+n+"' hook invocation. error: "+e.message,e)}}}),t[n]=o,!0)},revert:function(){var n;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}}}},up=cp;function lp(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof s?r:s,u=Object.create(c.prototype);return dp(u,"_invoke",function(n,r,o){var i,s,c,u=0,l=o||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return i=t,s=0,c=e,f.n=n,a}};function p(n,r){for(s=n,c=r,t=0;!d&&u&&!o&&t<l.length;t++){var o,i=l[t],p=f.p,m=i[2];n>3?(o=m===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=n<2&&p<i[1])?(s=0,f.v=r,f.n=i[1]):p<m&&(o=n<3||i[0]>r||r>m)&&(i[4]=n,i[5]=r,f.n=m,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,l,m){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&p(l,m),s=l,c=m;(t=s<2?e:c)||!d;){i||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==a)break}catch(t){i=e,s=1,c=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function c(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(dp(t={},r,(function(){return this})),t),d=u.prototype=s.prototype=Object.create(l);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,dp(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,dp(d,"constructor",u),dp(u,"constructor",c),c.displayName="GeneratorFunction",dp(u,o,"GeneratorFunction"),dp(d),dp(d,o,"Generator"),dp(d,r,(function(){return this})),dp(d,"toString",(function(){return"[object Generator]"})),(lp=function(){return{w:i,m:f}})()}function dp(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}dp=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){dp(e,t,(function(e){return this._invoke(t,n,e)}))};i("next",0),i("throw",1),i("return",2)}},dp(e,t,n,r)}function fp(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function pp(e){return pp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pp(e)}function mp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gp(r.key),r)}}function hp(e,t,n){return t&&mp(e.prototype,t),n&&mp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function gp(e){var t=function(e,t){if("object"!=pp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=pp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pp(t)?t:t+""}var yp=hp((function e(t,n,r,o,i,a,s,c,u,l,d,f,p,m,h){var g=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._isTextualBody=function(e){return!e||e.includes("json")||e.includes("text")},this._streamToString=function(e){var t=e.getReader(),n=new TextDecoder,r="";return t.read().then((function e(o){var i=o.value;return o.done?Promise.resolve(r):(r+=n.decode(i,{stream:!0}),t.read().then(e))}))},this._fetchStart=function(e,t){try{var n="object"===pp(e[0])?e[0].url||""+e[0]:e[0],r="object"===pp(e[1])?e[1]:"object"===pp(e[0])?e[0]:{};if(r.body instanceof ReadableStream&&(r=r.clone()),g._shouldIntercept(n,t)){var o=g._window.document.activeElement?g._selectorResolver.getSelectorInfo(g._window.document.activeElement):null,i=g._window.document.activeElement?g._cssSelectorResolver.getSelectorInfo(g._window.document.activeElement):H.encoding.rootCssSelector,a=new g._FetchAdapter(g._uriMasker.mask(n),r,g._utils.uuid(),g._utils.currentTimestamp(),o,i);return r.body instanceof ReadableStream?g._streamToString(r.body).then((function(e){g._collectRequestBody(a,e)})).catch((function(e){g._logger.error("Error processing stream: "+e.message)})):g._collectRequestBody(a,r.body),a}}catch(e){g._logger.error("Error while processing fetch request. Error: "+e.message,e)}},this._collectRequestBody=function(e,t){t&&g._isTextualBody(e.reqContentType)&&(e.reqContentType&&e.reqContentType.includes("json")?e.requestContent=g._ajaxMasker.getJsonContent(e,"request",t,g._ajaxRequestBodyMaxLength):e.requestContent=g._ajaxMasker.maskText(e,"request",t,g._ajaxRequestBodyMaxLength),e.requestLength=e.requestContent.length),g._consumer("onSend",e),g._consumer("onLoadStart",e)},this._doComplete=function(e){"notSupported"!==g._utils.getPerformanceResourceEntry(e.url,e)||g._emittedClsDebug||(g._emittedClsDebug=!0,g._events.emit("clsDebug","Performance API not supported during extraction of TTFB and DT")),g._consumer("onLoadEnd",e)},this._processCompleted=function(e){-1!==g._timeoutForResourceData?setTimeout((function(){return g._doComplete(e)}),g._timeoutForResourceData):g._doComplete(e)},this._fetchError=function(e,t){e.status=0,e.statusText=t.stack,e.duration=g._utils.currentTimestamp()-e.startTime,e.endTime=g._utils.currentTimestamp(),g._processCompleted(e)},this._fetchLoaded=function(e,t){e.resHeaders=t.headers,e.endTime=g._utils.currentTimestamp(),e.duration=e.endTime-e.startTime,e.status=t.status,e.statusText=t.statusText,e.resContentType=t.headers.get("Content-Type"),e.contentLength=t.headers.get("Content-Length"),e.responseText=null},this.initialize=function(){if(!g._window.fetch)return!1;var e,t;if(-1!==g._timeoutForResourceData&&(g._timeoutForResourceData=Math.min(g._timeoutForResourceData,100)),g._isForceHooking){var n=Object.getOwnPropertyDescriptor(window,"fetch");n&&!n.value&&(t=L.extractFromIframe("window"),e=t.fetch)}if(e){var r=Object.getOwnPropertyDescriptor(t,"fetch");Object.defineProperties(window,{fetch:r})}else e=window.fetch;var o=g;return window.fetch=function(){var t=!1;arguments.length>1&&arguments[1]&&arguments[1].cls_own&&(t=arguments[1].cls_own,delete arguments[1],arguments.length=1);var n=o._fetchStart(arguments,t);return n?Promise.resolve(e.apply(window,arguments).then(function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){fp(i,r,o,a,s,"next",e)}function s(e){fp(i,r,o,a,s,"throw",e)}a(void 0)}))}}(lp().m((function e(t){var r,i,a,s,c;return lp().w((function(e){for(;;)switch(e.n){case 0:if(e.p=0,t.bodyUsed){e.n=5;break}if(r=t.clone(),o._fetchLoaded(n,r),i=r.headers.get("Content-Type"),o._isTextualBody(i)){e.n=1;break}o._processCompleted(n),e.n=5;break;case 1:return e.p=1,e.n=2,r.text();case 2:a=e.v,i&&i.includes("json")?n.responseText=o._ajaxMasker.getJsonContent(n,"response",a,o._ajaxResponseBodyMaxLength):n.responseText=o._ajaxMasker.maskText(n,"response",a,o._ajaxResponseBodyMaxLength),e.n=4;break;case 3:e.p=3,s=e.v,o._logger.error("Error processing fetch response body:",s),o._events.emit("clsDebug","Error processing fetch response body");case 4:return e.p=4,o._processCompleted(n),e.f(4);case 5:e.n=7;break;case 6:e.p=6,c=e.v,o._logger.error("Error while processing fetch request.",c);case 7:return e.a(2,t)}}),e,null,[[1,3,4,5],[0,6]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return o._fetchError(n,e),Promise.reject(e)}))):e.apply(o._window,arguments)},!0},this._window=t,this._events=n,this._utils=r,this._consumer=o,this._selectorResolver=i,this._cssSelectorResolver=a,this._uriMasker=s,this._shouldIntercept=c,this._ajaxMasker=u,this._timeoutForResourceData=l,this._ajaxResponseBodyMaxLength=p,this._ajaxRequestBodyMaxLength=m,this._emittedClsDebug=!1,this._FetchAdapter=d,this._logger=f,this._isForceHooking=h}));function vp(e){return vp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vp(e)}function bp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Sp(r.key),r)}}function _p(e,t,n){return t&&bp(e.prototype,t),n&&bp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Sp(e){var t=function(e,t){if("object"!=vp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=vp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vp(t)?t:t+""}var wp=_p((function e(t,n,r,o,i,a,s){var c=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hasGzipContentEncoding=function(){return null!==/content-encoding:\sgzip/gi.exec(c.resHeaders||"")},this.readBlobStream=function(e,t){var n=new FileReader;n.onload=function(n){e.response=e._ajaxMasker.getJsonContent(e,"response",JSON.parse(n.target.result),e.ajaxResponseBodyMaxLength),t(e,null,e.response)},n.readAsText(e.response)},this.captureContent=function(e){return c.responseType&&"blob"===c.responseType.toLowerCase()&&c.resContentType&&-1!==c.resContentType.indexOf("json")?c.readBlobStream(c,e):"json"===c.responseType||c.resContentType&&-1!==c.resContentType.indexOf("json")||c.ajaxResBodyOctetTypeFix&&c.resContentType&&c.resContentType.indexOf("application/octet-stream")>-1?(c.response=c._ajaxMasker.getJsonContent(c,"response",c.response,c.ajaxResponseBodyMaxLength),e(c,c.response)):"string"==typeof c.response?(c.response=c._ajaxMasker.maskText(c,"response",c.response,c.ajaxResponseBodyMaxLength),e(c,c.response)):"application/pdf"===c.resContentType&&"arraybuffer"===c.responseType.toLowerCase()?e(c,null,"This is a PDF file, content removed."):e(c,null,"Unknown response, content type:"+c.resContentType+" response type:"+c.responseType)},this.fixHeaders=function(){var e=(c.resHeaders||"").replace(/transfer-encoding:\schunked/gi,"X-Glassbox-Orig-Transfer-Encoding: chunked");return e=e.replace(/content-length:/gi,"X-Glassbox-Orig-Content-Length:"),c.masking.response&&(e=e.trim(),e+="\r\nX-Glassbox-JSMasking: "+c.masking.response+"\r\n"),e},this.onCompleted=function(e){var t=L.currentTimestamp();c.consumed=!0,c.status=e.status,c.statusText=e.statusText,c.resHeaders=e.getAllResponseHeaders(),c.resContentType=e.getResponseHeader("Content-Type"),c.contentLength=e.getResponseHeader("Content-Length"),c.duration=t-c.startTime,c.endTime=t,c.responseType=e.responseType,c.response=e.response,c.responseText=e.responseType&&"text"!==e.responseType?void 0:e.responseText},this.uuid=o,this.requestHeaders=[],this.method=n,this.url=t,this.async=r,this.api="xhr",this._ajaxMasker=i,this.masking={},this.sn=Hp.nextSn(),this.ajaxResponseBodyMaxLength=a,this.ajaxResBodyOctetTypeFix=s}));function Ep(e){return Ep="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ep(e)}function Cp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kp(r.key),r)}}function Tp(e,t,n){return t&&Cp(e.prototype,t),n&&Cp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function kp(e){var t=function(e,t){if("object"!=Ep(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ep(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ep(t)?t:t+""}var Ip=Tp((function e(t,n,r,o,i,a,s,c,u,l,d,f,p){var m=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize=function(){-1!==m._timeoutForResourceData&&(m._timeoutForResourceData=Math.min(m._timeoutForResourceData,100));var e=m;if(m._supportAjaxOnProgressEvents()){var t=m._hookedProto.setHookBefore("open",(function(){e._xhrOpenHook(this,arguments)}))&&m._hookedProto.setHookBefore("send",(function(){e._xhrSendHook(this,arguments)}))&&m._hookedProto.setHookBefore("abort",(function(){e._xhrAbortHook(this,arguments)}))&&m._hookedProto.setHookBefore("setRequestHeader",(function(){e._xhrSetRequestHeaderHook(this,arguments)}));return!!t||(m._hookedProto.revert(),!1)}return!1},this._supportAjaxOnProgressEvents=function(){return"onloadend"in new XMLHttpRequest},this._isTextualBody=function(e){return!e||e.indexOf("json")>=0||e.indexOf("text")>=0},this.doComplete=function(e){"notSupported"!==L.getPerformanceResourceEntry(e.adapter.url,e.adapter)||m._emittedClsDebug||(m._emittedClsDebug=!0,m._events.emit("clsDebug","Performance API not supported during extraction of TTFB and DT")),m._consumer("onLoadEnd",e.adapter)},this._processCompletedXhr=function(e){e.adapter.consumed||(e.adapter.onCompleted(e),-1!==m._timeoutForResourceData?setTimeout((function(){return m.doComplete(e)}),m._timeoutForResourceData):m.doComplete(e))},this._onload=function(e){m._consumer("onLoad",e.adapter)},this._onerror=function(e){m._consumer("onError",e.adapter)},this._onloadstart=function(e){e.adapter.startTime=L.currentTimestamp(),e.adapter.lastFocusedSelectorInfo=m._window.document.activeElement?m._selectorResolver.getSelectorInfo(m._window.document.activeElement):null,e.adapter.lastFocusedCSSSelectorInfo=m._window.document.activeElement?m._cssSelectorResolver.getSelectorInfo(m._window.document.activeElement):H.encoding.rootCssSelector,m._consumer("onLoadStart",e.adapter)},this._filterForHiddenVisibilityChanges=function(e,t){return tl.visibilityChanges.filter((function(n){return n.timestamp>e&&n.timestamp<t&&"hidden"===n.visibility}))},this._onloadend=function(e){if(e.adapter){if(e.adapter.pageVisibilityAtEnd=tl.visibilityChanges.length?tl.visibilityChanges[tl.visibilityChanges.length-1]:"visible",tl.visibilityChanges.length){var t=m._filterForHiddenVisibilityChanges(e.adapter.startTime,L.currentTimestamp());e.adapter.pageWasHiddenDuringRequest=t.length>0}m._processCompletedXhr(e)}},this._xhrOpenHook=function(e,t){var n=m;var r="object"===Ep(t[1])?t[1].toString():t[1];m._shouldIntercept(r,e.cls_own)&&(r=m._uriMasker.mask(r),e.adapter=new wp(r,t[0],t[2],L.uuid(),m._ajaxMasker,m._ajaxResponseBodyMaxLength,m._ajaxResBodyOctetTypeFix),e.addEventListener("load",(function(){n._onload(this)}),!1),e.addEventListener("error",(function(){n._onerror(this)}),!1),e.addEventListener("loadstart",(function(){n._onloadstart(this)}),!1),e.addEventListener("loadend",(function(){n._onloadend(this)}),!1))},this._xhrSendHook=function(e,t){if(e.adapter){if(t[0]&&("string"==typeof t[0]||t.length>0&&m._isTextualBody(e.adapter.reqContentType))){var n=t[0];n=e.adapter.reqContentType&&e.adapter.reqContentType.indexOf("json")>=0?m._ajaxMasker.getJsonContent(e.adapter,"request",n,m._ajaxRequestBodyMaxLength):m._ajaxMasker.maskText(e.adapter,"request",n,m._ajaxRequestBodyMaxLength),e.adapter.requestContent=n,e.adapter.requestLength=n.length}m._consumer("onSend",e.adapter)}},this._xhrAbortHook=function(e){e.adapter&&(e.status?m._processCompletedXhr(e):(e.adapter.aborted=!0,m._consumer("onAbort",e.adapter)))},this._xhrSetRequestHeaderHook=function(e,t){e.adapter&&t[1]&&(e.adapter.requestHeaders.push(t[0]+": "+t[1]),"content-type"===t[0].toLowerCase()&&(e.adapter.reqContentType=t[1]))},this._window=t,this._events=n,this._consumer=r,this._selectorResolver=o,this._cssSelectorResolver=i,this._uriMasker=a,this._shouldIntercept=s,this._hookedProto=c.hookProto(XMLHttpRequest.prototype),this._ajaxMasker=u,this._timeoutForResourceData=l,this._ajaxResponseBodyMaxLength=d,this._ajaxRequestBodyMaxLength=f,this._emittedClsDebug=!1,this._ajaxResBodyOctetTypeFix=p}));function Ap(e){return Ap="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ap(e)}function Pp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Rp(r.key),r)}}function xp(e,t,n){return t&&Pp(e.prototype,t),n&&Pp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rp(e){var t=function(e,t){if("object"!=Ap(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ap(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ap(t)?t:t+""}var Op=xp((function e(t,n,r,o){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._readAjaxCount=function(){return parseInt(i._storage._get(i._storageKey)||"0")},this.allow=function(){var e=i._readAjaxCount(),t=++e<=i._maxAjaxCalls;return t||i._limitReachedEmitted||(i._events.emit("ajax:limitReached"),i._limitReachedEmitted=!0),i._storage._set(i._storageKey,e),t},this._events=n,this._storage=r,this._maxAjaxCalls=o,this._storageKey="xhr.cnt",this._limitReachedEmitted=o<=this._readAjaxCount()}));function Mp(e){return Mp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mp(e)}function Np(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Dp(r.key),r)}}function jp(e,t,n){return t&&Np(e.prototype,t),n&&Np(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Dp(e){var t=function(e,t){if("object"!=Mp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Mp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Mp(t)?t:t+""}var Lp=jp((function e(t,n,r,o,i,a){var s=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hasGzipContentEncoding=function(){if(s.resHeaders)for(var e=s.resHeaders.entries(),t=e.next();!t.done;){if("content-encoding"===t.value[0].toLowerCase()&&"gzip"===t.value[1].toLowerCase())return!0;t=e.next()}return!1},this.captureContent=function(e){return e(s,s.responseText)},this.fixHeaders=function(){if(!s.resHeaders||!s.resHeaders.forEach)return"";var e="";return s.resHeaders.forEach((function(t,n){"transfer-encoding"===n.toLowerCase()&&"chunked"===t.toLowerCase()||(e="content-length"===n.toLowerCase()?e+"X-Glassbox-Orig-Content-Length: "+t+"\r\n":e+n+": "+t+"\r\n")})),s.masking.response&&(e+="X-Glassbox-JSMasking: "+s.masking.response+"\r\n"),e},this.api="fetch",this.url=t,this.startTime=o,this.lastFocusedSelectorInfo=i,this.lastFocusedCSSSelectorInfo=a,this.uuid=r,this._init=n||{},this.method=n.method,this.requestHeaders=[],this.masking={},this.sn=Hp.nextSn(),this._init.headers&&"function"==typeof this._init.headers.toString&&"[object Headers]"===this._init.headers.toString())for(var c=this._init.headers.entries(),u=c.next();!u.done;)this.requestHeaders.push(u.value[0]+": "+u.value[1]),"content-type"===u.value[0].toLowerCase()&&(this.reqContentType=u.value[1]),u=c.next();else if(this._init.headers){var l=Object.getPrototypeOf(this._init.headers)===Object.prototype||null===Object.getPrototypeOf(this._init.headers);for(var d in this._init.headers)(l||Object.hasOwn&&Object.hasOwn(this._init.headers,d)||Object.prototype.hasOwnProperty.call(this._init.headers,d))&&(this.requestHeaders.push(d+": "+this._init.headers[d]),"content-type"===d.toLowerCase()&&(this.reqContentType=this._init.headers[d]))}}));function Bp(e){return Bp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bp(e)}function Fp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Up(r.key),r)}}function Up(e){var t=function(e,t){if("object"!=Bp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Bp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Bp(t)?t:t+""}var Vp=0,Hp=function(){return function(e,t,n){return t&&Fp(e.prototype,t),n&&Fp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,n,r,o,i,a,s,c,u){var l=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.callReceivers=function(e,t){l._bus.emit("ajax:"+e,t)},this._reportURI=s.reportURI,this._blacklist=c,this._uriMasker=a,this._selectorResolver=r,this._cssSelectorResolver=o,this._documentHost=i,this._bus=n,this._config=s,this._limitChecker=-1!==s.ajaxRecordSessionLimit?new Op(t,n,u,s.ajaxRecordSessionLimit):{allow:function(){return!0}},this._ajaxMasker=new Wf(new Yf,{requestRules:s.ajaxMaskRequestBody,responseRules:s.ajaxMaskResponseBody}),this._allReceivers=[new $f(t,t.document,n,this._limitChecker,s),new rp(t,n,this._documentHost,s),new sp(n,s)]}),[{key:"shouldIntercept",value:function(e,t){if(!e||t||L.startsWith(e,"data:")||e.indexOf(this._reportURI)>=0)return!1;for(var n=e.toLowerCase(),r=0;r<this._blacklist.length;r++)if(n.indexOf(this._blacklist[r])>=0)return!1;return!0}},{key:"_intercept",value:function(){var e;this._config.interceptFetch&&(e=new yp(window,this._bus,L,this.callReceivers,this._selectorResolver,this._cssSelectorResolver,this._uriMasker,this.shouldIntercept.bind(this),this._ajaxMasker,this._config.ajaxTimeoutForResourceData,Lp,i,this._config.ajaxResponseBodyMaxLength,this._config.ajaxRequestBodyMaxLength,this._config.forceHookFetch).initialize());var t=new Ip(window,this._bus,this.callReceivers,this._selectorResolver,this._cssSelectorResolver,this._uriMasker,this.shouldIntercept.bind(this),up,this._ajaxMasker,this._config.ajaxTimeoutForResourceData,this._config.ajaxResponseBodyMaxLength,this._config.ajaxRequestBodyMaxLength,this._config.ajaxResBodyOctetTypeFix).initialize();return!(!e&&!t)}},{key:"initialize",value:function(){try{var e=new Df(this._documentHost);this._ajaxMasker.init(e);for(var t=0;t<this._allReceivers.length;++t)this._allReceivers[t].initConfig(e)}catch(e){return i.error("Error while parsing Ajax predicates from configuration. interception disabled. error:".concat(e)),!1}return this._intercept()}}],[{key:"safeEncodeURI",value:function(e){try{return e===decodeURI(e)?encodeURI(e):e.replace(/\s/g,"%20")}catch(t){return encodeURI(e)}}},{key:"nextSn",value:function(){return Vp++}}])}();function Wp(e){return Wp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wp(e)}function zp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qp(r.key),r)}}function Gp(e,t,n){return t&&zp(e.prototype,t),n&&zp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function qp(e){var t=function(e,t){if("object"!=Wp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Wp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Wp(t)?t:t+""}var Kp=Gp((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.resolve=function(){var e,t;for(e=0;e<r._selectors.length;e++)if(r._validityMap[r._selectors[e]])try{if(t=r._document.querySelector(r._selectors[e]))return t.textContent}catch(t){r._validityMap[r._selectors[e]]=!1}},this._document=t,this._options=n||{},this._selectors=n.selectors||[],this._validityMap=L.immutableSet.apply(null,this._selectors)}));function Yp(e){return Yp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yp(e)}function Xp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zp(r.key),r)}}function Jp(e,t,n){return t&&Xp(e.prototype,t),n&&Xp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zp(e){var t=function(e,t){if("object"!=Yp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Yp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Yp(t)?t:t+""}var Qp=Jp((function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._resolvePageName=function(){var e=o._pageNameResolver.resolve();e&&(o._currentPageName=e,o._stats.pageNameCurrent=o._currentPageName,o._bus.emit("pageNameResolved",o._currentPageName))},this._resolveParentPageName=function(e){e.parentPageName&&(o._currentPageName=e.parentPageName,o._stats.pageNameCurrent=o._currentPageName,o._bus.emit("pageNameResolved",o._currentPageName))},this.initialize=function(){return!0},this._document=t,this._bus=n,this._options=L.optionsWithDefaults(r,{pageNameEnabled:!1}),this._currentPageName=void 0,this._stats={},this._options.pageNameEnabled?(this._stats.pageName="enabled",this._pageNameResolver=new Kp(t,{selectors:this._options.pageNameByElements}),this._bus.once("init:loaded",this._resolvePageName),this._bus.on("frame:load",this._resolvePageName),this._bus.on("parentWindowInfo",this._resolveParentPageName)):this._stats.pageName="disabled",this.stats=function(){return o._stats}}));function $p(e){return $p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$p(e)}function em(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nm(r.key),r)}}function tm(e,t,n){return t&&em(e.prototype,t),n&&em(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function nm(e){var t=function(e,t){if("object"!=$p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$p(t)?t:t+""}var rm=tm((function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"object"===("undefined"==typeof console?"undefined":$p(console))){var n,r=function(e,t){if("function"==typeof console[e]){var n=console[e];console[e]=function(){var r=Array.prototype.slice.call(arguments);n.apply(console,r),t(r,e)}}};for(n in t)r(n,t[n])}}));function om(e){return om="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},om(e)}function im(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,sm(r.key),r)}}function am(e,t,n){return t&&im(e.prototype,t),n&&im(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function sm(e){var t=function(e,t){if("object"!=om(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=om(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==om(t)?t:t+""}var cm=am((function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._predicate=function(e,t){return-1===o._state[e].recordedLimit?o._hasNotReachedLimit():o._hasNotReachedLimit(t,e)},this._hasNotReachedLimit=function(e,t){if(!e)return!0;var n=e.substring(0,30);return o._state[t].toCount[n]=(o._state[t].toCount[n]||0)+1,o._state[t].toCount[n]<=o._state[t].recordedLimit},this._safeEmitEvent=function(e,t){var n,r={},i=!o._predicate(t,e);if(r.eventLimitExceeded=i,"error"===t||"pageError"===(null===(n=o._types[t])||void 0===n?void 0:n.eventName))r.error=e,o._bus.emit("pageError",r);else{var a=o._types[t].eventName;r[a]=i?e+o._reachedEventLimitMessage:e,r.eventName=a,(-1===o._state[t].recordedLimit||o._stats[t].limitExceeded+o._stats[t].emitted<=o._state[t].recordedLimit)&&o._bus.emit(a,r)}i?o._stats[t].emitted++:o._stats[t].limitExceeded++},this._onError=function(e){var t="";"string"==typeof e.message&&(t+=e.message),"string"==typeof e.url?t+="; URL: "+e.url:"string"==typeof e.filename&&(t+="; FILE: "+e.filename),"number"==typeof e.lineno&&(t+="; L: "+e.lineno),"number"==typeof e.colno&&(t+="; C: "+e.colno);try{e.error&&"object"==om(e.error)&&e.error.toString().indexOf("[object Object]")>-1&&(t+="; obj: "+JSON.stringify(e.error))}catch(e){o._bus.emit("clsDebug","error trying to stringify error object "+e.message)}t&&o._checkAllowedByConfig(t,"error")&&(o._stats.error.interceptedConsole++,o._safeEmitEvent(t,"error"))},this._onCSPViolation=function(e){var t="";e.blockedURI&&(t+="blockedURI: "+e.blockedURI+"; "),e.columnNumber&&(t+="columnNumber: "+e.columnNumber+"; "),e.disposition&&(t+="disposition: "+e.disposition+"; "),e.documentURI&&(t+="documentURI: "+e.documentURI+"; "),e.effectiveDirective&&(t+="effectiveDirective: "+e.effectiveDirective+"; "),e.lineNumber&&(t+="lineNumber: "+e.lineNumber+"; "),e.originalPolicy&&(t+="originalPolicy: "+e.originalPolicy+"; "),e.referrer&&(t+="referrer: "+e.referrer+"; "),e.sample&&(t+="sample: "+e.sample+"; "),e.sourceFile&&(t+="sourceFile: "+e.sourceFile+"; "),e.statusCode&&(t+="statusCode: "+e.statusCode+"; "),e.violatedDirective&&(t+="violatedDirective: "+e.violatedDirective+"; "),t&&o._checkAllowedByConfig(t,"csp")&&(o._stats.csp.interceptedConsole++,o._safeEmitEvent("Content-Security-Policy violation: "+t,"csp"))},this._onConsoleMessage=function(e,t){if("object"===om(e[0])&&0===e[0].toString().indexOf("["))try{e[0]=JSON.stringify(e[0])}catch(n){}if(o._checkAllowedByConfig(e[0],t)){o._stats[t].interceptedConsole++;var n=(e||[]).join(" ").trim();n?o._safeEmitEvent(n,t):o._bus.emit("clsDebug","empty console message of type "+t+" was fired")}},this._checkAllowedByConfig=function(e,t){var n,r,i=!1,a=!1;return void 0!==o._config[o._types[t].whiteList]&&o._config[o._types[t].whiteList].length>0&&(n=o._messageContains(e,o._config[o._types[t].whiteList]),i=!0),void 0!==o._config[o._types[t].blackList]&&o._config[o._types[t].blackList].length>0&&(r=o._messageContains(e,o._config[o._types[t].blackList]),a=!0),!i&&!a||i&&a&&n&&!r||a&&!i&&!r||i&&!a&&n},this._messageContains=function(e,t){return t.some((function(t){return new RegExp("^"+t.replace(/\*/g,"(.*)"),"g").test(e)}))},this.initialize=function(){o._config.recordErrors&&L.addEventHandler(o._target,"error",o._onError),!0===o._config.recordConsoleErrors&&new rm({error:o._onConsoleMessage}),!0===o._config.recordConsoleWarn&&new rm({warn:o._onConsoleMessage}),!0===o._config.recordConsoleInfo&&new rm({info:o._onConsoleMessage}),L.isIE()||!0!==o._config.recordCSPViolations||L.addEventHandler(window,"securitypolicyviolation",o._onCSPViolation)},this.stats=function(){return o._stats},this._config=r||{},this._bus=n,this._target=t,this._reachedEventLimitMessage=" [MESSAGE LIMIT REACHED]",this._MAX_RECORDINGS=10,this._recordedErrorLimit=this._config.maxRecordedCountPerError||-1,this._recordedWarnLimit=this._config.maxRecordedCountPerWarning>this._MAX_RECORDINGS?this._MAX_RECORDINGS:this._config.maxRecordedCountPerWarning||-1,this._recordedInfoLimit=this._config.maxRecordedCountPerInfo>this._MAX_RECORDINGS?this._MAX_RECORDINGS:this._config.maxRecordedCountPerInfo||-1,this._recordedCSPLimit=this._config.maxRecordedCountPerCSP>this._MAX_RECORDINGS?this._MAX_RECORDINGS:this._config.maxRecordedCountPerCSP||-1,this._stats={error:{interceptedConsole:0,limitExceeded:0,emitted:0},warn:{interceptedConsole:0,limitExceeded:0,emitted:0},info:{interceptedConsole:0,limitExceeded:0,emitted:0},csp:{interceptedConsole:0,limitExceeded:0,emitted:0}},this._state={error:{recordedLimit:this._recordedErrorLimit,toCount:{}},warn:{recordedLimit:this._recordedWarnLimit,toCount:{}},info:{recordedLimit:this._recordedInfoLimit,toCount:{}},csp:{recordedLimit:this._recordedCSPLimit,toCount:{}}},this._types={warn:{whiteList:"recordConsoleWarnWhitelist",blackList:"recordConsoleWarnBlacklist",eventName:"consoleWarn"},info:{whiteList:"recordConsoleInfoWhitelist",blackList:"recordConsoleInfoBlacklist",eventName:"consoleInfo"},error:{whiteList:"recordConsoleErrorWhitelist",blackList:"recordConsoleErrorBlacklist",eventName:"pageError"},csp:{whiteList:"recordCSPWhitelist",blackList:"recordCSPBlacklist",eventName:"pageError"}}}));function um(e){return um="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},um(e)}function lm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fm(r.key),r)}}function dm(e,t,n){return t&&lm(e.prototype,t),n&&lm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function fm(e){var t=function(e,t){if("object"!=um(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=um(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==um(t)?t:t+""}var pm=dm((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){(t||window||this).pako=function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,(function(e){var n=t[a][1][e];return o(n||e)}),u,u.exports,e,t,n,r)}return n[a].exports}for(var i=void 0,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){var r=e("./zlib/deflate"),o=e("./utils/common"),i=e("./utils/strings"),a=e("./zlib/messages"),s=e("./zlib/zstream"),c=Object.prototype.toString,u=0,l=4,d=0,f=1,p=2,m=-1,h=0,g=8;function y(e){if(!(this instanceof y))return new y(e);this.options=o.assign({level:m,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==d)throw new Error(a[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var u;if(u="string"==typeof t.dictionary?i.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=r.deflateSetDictionary(this.strm,u))!==d)throw new Error(a[n]);this._dict_set=!0}}function v(e,t){var n=new y(t);if(n.push(e,!0),n.err)throw n.msg||a[n.err];return n.result}function b(e,t){return(t=t||{}).raw=!0,v(e,t)}function _(e,t){return(t=t||{}).gzip=!0,v(e,t)}y.prototype.push=function(e,t){var n,a,s=this.strm,m=this.options.chunkSize;if(this.ended)return!1;a=t===~~t?t:!0===t?l:u,"string"==typeof e?s.input=i.string2buf(e):"[object ArrayBuffer]"===c.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new o.Buf8(m),s.next_out=0,s.avail_out=m),(n=r.deflate(s,a))!==f&&n!==d)return this.onEnd(n),this.ended=!0,!1;0!==s.avail_out&&(0!==s.avail_in||a!==l&&a!==p)||("string"===this.options.to?this.onData(i.buf2binstring(o.shrinkBuf(s.output,s.next_out))):this.onData(o.shrinkBuf(s.output,s.next_out)))}while((s.avail_in>0||0===s.avail_out)&&n!==f);return a===l?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===d):a!==p||(this.onEnd(d),s.avail_out=0,!0)},y.prototype.onData=function(e){this.chunks.push(e)},y.prototype.onEnd=function(e){e===d&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=y,n.deflate=v,n.deflateRaw=b,n.gzip=_},{"./utils/common":2,"./utils/strings":3,"./zlib/deflate":6,"./zlib/messages":7,"./zlib/zstream":9}],2:[function(e,t,n){var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!==um(n))throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,n,r,o){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),o);else for(var i=0;i<r;i++)e[o+i]=t[n+i]},flattenChunks:function(e){var t,n,r,o,i,a;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),o=0,t=0,n=e.length;t<n;t++)i=e[t],a.set(i,o),o+=i.length;return a}},i={arraySet:function(e,t,n,r,o){for(var i=0;i<r;i++)e[o+i]=t[n+i]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,o)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,i))},n.setTyped(r)},{}],3:[function(e,t,n){var r=e("./common"),o=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch(e){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){i=!1}for(var a=new r.Buf8(256),s=0;s<256;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function c(e,t){if(t<65537&&(e.subarray&&i||!e.subarray&&o))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",a=0;a<t;a++)n+=String.fromCharCode(e[a]);return n}a[254]=a[254]=1,n.string2buf=function(e){var t,n,o,i,a,s=e.length,c=0;for(i=0;i<s;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<s&&56320==(64512&(o=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(o-56320),i++),c+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(c),a=0,i=0;a<c;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<s&&56320==(64512&(o=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(o-56320),i++),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|63&n):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},n.buf2binstring=function(e){return c(e,e.length)},n.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,o=t.length;n<o;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,r,o,i,s=t||e.length,u=new Array(2*s);for(r=0,n=0;n<s;)if((o=e[n++])<128)u[r++]=o;else if((i=a[o])>4)u[r++]=65533,n+=i-1;else{for(o&=2===i?31:3===i?15:7;i>1&&n<s;)o=o<<6|63&e[n++],i--;i>1?u[r++]=65533:o<65536?u[r++]=o:(o-=65536,u[r++]=55296|o>>10&1023,u[r++]=56320|1023&o)}return c(u,r)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+a[e[n]]>t?n:t}},{"./common":2}],4:[function(e,t,n){function r(e,t,n,r){for(var o=65535&e,i=e>>>16&65535,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{i=i+(o=o+t[r++]|0)|0}while(--a);o%=65521,i%=65521}return o|i<<16}t.exports=r},{}],5:[function(e,t,n){function r(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}var o=r();function i(e,t,n,r){var i=o,a=r+n;e^=-1;for(var s=r;s<a;s++)e=e>>>8^i[255&(e^t[s])];return-1^e}t.exports=i},{}],6:[function(e,t,n){var r,o=e("../utils/common"),i=e("./trees"),a=e("./adler32"),s=e("./crc32"),c=e("./messages"),u=0,l=1,d=3,f=4,p=5,m=0,h=1,g=-2,y=-3,v=-5,b=-1,_=1,S=2,w=3,E=4,C=0,T=2,k=8,I=9,A=15,P=8,x=286,R=30,O=19,M=2*x+1,N=15,j=3,D=258,L=D+j+1,B=32,F=42,U=69,V=73,H=91,W=103,z=113,G=666,q=1,K=2,Y=3,X=4,J=3;function Z(e,t){return e.msg=c[t],t}function Q(e){return(e<<1)-(e>4?9:0)}function $(e){for(var t=e.length;--t>=0;)e[t]=0}function ee(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(o.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function te(e,t){i._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ee(e.strm)}function ne(e,t){e.pending_buf[e.pending++]=t}function re(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function oe(e,t,n,r){var i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,o.arraySet(t,e.input,e.next_in,i,n),1===e.state.wrap?e.adler=a(e.adler,t,i,n):2===e.state.wrap&&(e.adler=s(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)}function ie(e,t){var n,r,o=e.max_chain_length,i=e.strstart,a=e.prev_length,s=e.nice_match,c=e.strstart>e.w_size-L?e.strstart-(e.w_size-L):0,u=e.window,l=e.w_mask,d=e.prev,f=e.strstart+D,p=u[i+a-1],m=u[i+a];e.prev_length>=e.good_match&&(o>>=2),s>e.lookahead&&(s=e.lookahead);do{if(u[(n=t)+a]===m&&u[n+a-1]===p&&u[n]===u[i]&&u[++n]===u[i+1]){i+=2,n++;do{}while(u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&i<f);if(r=D-(f-i),i=f-D,r>a){if(e.match_start=t,a=r,r>=s)break;p=u[i+a-1],m=u[i+a]}}}while((t=d[t&l])>c&&0!==--o);return a<=e.lookahead?a:e.lookahead}function ae(e){var t,n,r,i,a,s=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=s+(s-L)){o.arraySet(e.window,e.window,s,s,0),e.match_start-=s,e.strstart-=s,e.block_start-=s,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=s?r-s:0}while(--n);t=n=s;do{r=e.prev[--t],e.prev[t]=r>=s?r-s:0}while(--n);i+=s}if(0===e.strm.avail_in)break;if(n=oe(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=j)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+j-1])&e.hash_mask,e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<j)););}while(e.lookahead<L&&0!==e.strm.avail_in)}function se(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(ae(e),0===e.lookahead&&t===u)return q;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,te(e,!1),0===e.strm.avail_out))return q;if(e.strstart-e.block_start>=e.w_size-L&&(te(e,!1),0===e.strm.avail_out))return q}return e.insert=0,t===f?(te(e,!0),0===e.strm.avail_out?Y:X):(e.strstart>e.block_start&&(te(e,!1),e.strm.avail_out),q)}function ce(e,t){for(var n,r;;){if(e.lookahead<L){if(ae(e),e.lookahead<L&&t===u)return q;if(0===e.lookahead)break}if(n=0,e.lookahead>=j&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+j-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-L&&(e.match_length=ie(e,n)),e.match_length>=j)if(r=i._tr_tally(e,e.strstart-e.match_start,e.match_length-j),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=j){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+j-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(te(e,!1),0===e.strm.avail_out))return q}return e.insert=e.strstart<j-1?e.strstart:j-1,t===f?(te(e,!0),0===e.strm.avail_out?Y:X):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?q:K}function ue(e,t){for(var n,r,o;;){if(e.lookahead<L){if(ae(e),e.lookahead<L&&t===u)return q;if(0===e.lookahead)break}if(n=0,e.lookahead>=j&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+j-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=j-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-L&&(e.match_length=ie(e,n),e.match_length<=5&&(e.strategy===_||e.match_length===j&&e.strstart-e.match_start>4096)&&(e.match_length=j-1)),e.prev_length>=j&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-j,r=i._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-j),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=o&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+j-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=j-1,e.strstart++,r&&(te(e,!1),0===e.strm.avail_out))return q}else if(e.match_available){if((r=i._tr_tally(e,0,e.window[e.strstart-1]))&&te(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return q}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=i._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<j-1?e.strstart:j-1,t===f?(te(e,!0),0===e.strm.avail_out?Y:X):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?q:K}function le(e,t){for(var n,r,o,a,s=e.window;;){if(e.lookahead<=D){if(ae(e),e.lookahead<=D&&t===u)return q;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=j&&e.strstart>0&&(r=s[o=e.strstart-1])===s[++o]&&r===s[++o]&&r===s[++o]){a=e.strstart+D;do{}while(r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&o<a);e.match_length=D-(a-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=j?(n=i._tr_tally(e,1,e.match_length-j),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(te(e,!1),0===e.strm.avail_out))return q}return e.insert=0,t===f?(te(e,!0),0===e.strm.avail_out?Y:X):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?q:K}function de(e,t){for(var n;;){if(0===e.lookahead&&(ae(e),0===e.lookahead)){if(t===u)return q;break}if(e.match_length=0,n=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(te(e,!1),0===e.strm.avail_out))return q}return e.insert=0,t===f?(te(e,!0),0===e.strm.avail_out?Y:X):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?q:K}function fe(e,t,n,r,o){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=o}function pe(e){e.window_size=2*e.w_size,$(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=j-1,e.match_available=0,e.ins_h=0}function me(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=k,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*M),this.dyn_dtree=new o.Buf16(2*(2*R+1)),this.bl_tree=new o.Buf16(2*(2*O+1)),$(this.dyn_ltree),$(this.dyn_dtree),$(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(N+1),this.heap=new o.Buf16(2*x+1),$(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*x+1),$(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function he(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=T,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?F:z,e.adler=2===t.wrap?0:1,t.last_flush=u,i._tr_init(t),m):Z(e,g)}function ge(e){var t=he(e);return t===m&&pe(e.state),t}function ye(e,t){return e&&e.state?2!==e.state.wrap?g:(e.state.gzhead=t,m):g}function ve(e,t,n,r,i,a){if(!e)return g;var s=1;if(t===b&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>I||n!==k||r<8||r>15||t<0||t>9||a<0||a>E)return Z(e,g);8===r&&(r=9);var c=new me;return e.state=c,c.strm=e,c.wrap=s,c.gzhead=null,c.w_bits=r,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=i+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+j-1)/j),c.window=new o.Buf8(2*c.w_size),c.head=new o.Buf16(c.hash_size),c.prev=new o.Buf16(c.w_size),c.lit_bufsize=1<<i+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new o.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=t,c.strategy=a,c.method=n,ge(e)}function be(e,t){return ve(e,t,k,A,P,C)}function _e(e,t){var n,o,a,c;if(!e||!e.state||t>p||t<0)return e?Z(e,g):g;if(o=e.state,!e.output||!e.input&&0!==e.avail_in||o.status===G&&t!==f)return Z(e,0===e.avail_out?v:g);if(o.strm=e,n=o.last_flush,o.last_flush=t,o.status===F)if(2===o.wrap)e.adler=0,ne(o,31),ne(o,139),ne(o,8),o.gzhead?(ne(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),ne(o,255&o.gzhead.time),ne(o,o.gzhead.time>>8&255),ne(o,o.gzhead.time>>16&255),ne(o,o.gzhead.time>>24&255),ne(o,9===o.level?2:o.strategy>=S||o.level<2?4:0),ne(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(ne(o,255&o.gzhead.extra.length),ne(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(e.adler=s(e.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=U):(ne(o,0),ne(o,0),ne(o,0),ne(o,0),ne(o,0),ne(o,9===o.level?2:o.strategy>=S||o.level<2?4:0),ne(o,J),o.status=z);else{var y=k+(o.w_bits-8<<4)<<8;y|=(o.strategy>=S||o.level<2?0:o.level<6?1:6===o.level?2:3)<<6,0!==o.strstart&&(y|=B),y+=31-y%31,o.status=z,re(o,y),0!==o.strstart&&(re(o,e.adler>>>16),re(o,65535&e.adler)),e.adler=1}if(o.status===U)if(o.gzhead.extra){for(a=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>a&&(e.adler=s(e.adler,o.pending_buf,o.pending-a,a)),ee(e),a=o.pending,o.pending!==o.pending_buf_size));)ne(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>a&&(e.adler=s(e.adler,o.pending_buf,o.pending-a,a)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=V)}else o.status=V;if(o.status===V)if(o.gzhead.name){a=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>a&&(e.adler=s(e.adler,o.pending_buf,o.pending-a,a)),ee(e),a=o.pending,o.pending===o.pending_buf_size)){c=1;break}c=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,ne(o,c)}while(0!==c);o.gzhead.hcrc&&o.pending>a&&(e.adler=s(e.adler,o.pending_buf,o.pending-a,a)),0===c&&(o.gzindex=0,o.status=H)}else o.status=H;if(o.status===H)if(o.gzhead.comment){a=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>a&&(e.adler=s(e.adler,o.pending_buf,o.pending-a,a)),ee(e),a=o.pending,o.pending===o.pending_buf_size)){c=1;break}c=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,ne(o,c)}while(0!==c);o.gzhead.hcrc&&o.pending>a&&(e.adler=s(e.adler,o.pending_buf,o.pending-a,a)),0===c&&(o.status=W)}else o.status=W;if(o.status===W&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&ee(e),o.pending+2<=o.pending_buf_size&&(ne(o,255&e.adler),ne(o,e.adler>>8&255),e.adler=0,o.status=z)):o.status=z),0!==o.pending){if(ee(e),0===e.avail_out)return o.last_flush=-1,m}else if(0===e.avail_in&&Q(t)<=Q(n)&&t!==f)return Z(e,v);if(o.status===G&&0!==e.avail_in)return Z(e,v);if(0!==e.avail_in||0!==o.lookahead||t!==u&&o.status!==G){var b=o.strategy===S?de(o,t):o.strategy===w?le(o,t):r[o.level].func(o,t);if(b!==Y&&b!==X||(o.status=G),b===q||b===Y)return 0===e.avail_out&&(o.last_flush=-1),m;if(b===K&&(t===l?i._tr_align(o):t!==p&&(i._tr_stored_block(o,0,0,!1),t===d&&($(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),ee(e),0===e.avail_out))return o.last_flush=-1,m}return t!==f?m:o.wrap<=0?h:(2===o.wrap?(ne(o,255&e.adler),ne(o,e.adler>>8&255),ne(o,e.adler>>16&255),ne(o,e.adler>>24&255),ne(o,255&e.total_in),ne(o,e.total_in>>8&255),ne(o,e.total_in>>16&255),ne(o,e.total_in>>24&255)):(re(o,e.adler>>>16),re(o,65535&e.adler)),ee(e),o.wrap>0&&(o.wrap=-o.wrap),0!==o.pending?m:h)}function Se(e){var t;return e&&e.state?(t=e.state.status)!==F&&t!==U&&t!==V&&t!==H&&t!==W&&t!==z&&t!==G?Z(e,g):(e.state=null,t===z?Z(e,y):m):g}function we(e,t){var n,r,i,s,c,u,l,d,f=t.length;if(!e||!e.state)return g;if(2===(s=(n=e.state).wrap)||1===s&&n.status!==F||n.lookahead)return g;for(1===s&&(e.adler=a(e.adler,t,f,0)),n.wrap=0,f>=n.w_size&&(0===s&&($(n.head),n.strstart=0,n.block_start=0,n.insert=0),d=new o.Buf8(n.w_size),o.arraySet(d,t,f-n.w_size,n.w_size,0),t=d,f=n.w_size),c=e.avail_in,u=e.next_in,l=e.input,e.avail_in=f,e.next_in=0,e.input=t,ae(n);n.lookahead>=j;){r=n.strstart,i=n.lookahead-(j-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+j-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--i);n.strstart=r,n.lookahead=j-1,ae(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=j-1,n.match_available=0,e.next_in=u,e.input=l,e.avail_in=c,n.wrap=s,m}r=[new fe(0,0,0,0,se),new fe(4,4,8,4,ce),new fe(4,5,16,8,ce),new fe(4,6,32,32,ce),new fe(4,4,16,16,ue),new fe(8,16,32,32,ue),new fe(8,16,128,128,ue),new fe(8,32,128,256,ue),new fe(32,128,258,1024,ue),new fe(32,258,258,4096,ue)],n.deflateInit=be,n.deflateInit2=ve,n.deflateReset=ge,n.deflateResetKeep=he,n.deflateSetHeader=ye,n.deflate=_e,n.deflateEnd=Se,n.deflateSetDictionary=we,n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":2,"./adler32":4,"./crc32":5,"./messages":7,"./trees":8}],7:[function(e,t,n){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],8:[function(e,t,n){var r=e("../utils/common"),o=4,i=0,a=1,s=2;function c(e){for(var t=e.length;--t>=0;)e[t]=0}var u=0,l=1,d=2,f=3,p=258,m=29,h=256,g=h+1+m,y=30,v=19,b=2*g+1,_=15,S=16,w=7,E=256,C=16,T=17,k=18,I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],A=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],x=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],R=512,O=new Array(2*(g+2));c(O);var M=new Array(2*y);c(M);var N=new Array(R);c(N);var j=new Array(p-f+1);c(j);var D=new Array(m);c(D);var L,B,F,U=new Array(y);function V(e,t,n,r,o){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=o,this.has_stree=e&&e.length}function H(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function W(e){return e<256?N[e]:N[256+(e>>>7)]}function z(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function G(e,t,n){e.bi_valid>S-n?(e.bi_buf|=t<<e.bi_valid&65535,z(e,e.bi_buf),e.bi_buf=t>>S-e.bi_valid,e.bi_valid+=n-S):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function q(e,t,n){G(e,n[2*t],n[2*t+1])}function K(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function Y(e){16===e.bi_valid?(z(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function X(e,t){var n,r,o,i,a,s,c=t.dyn_tree,u=t.max_code,l=t.stat_desc.static_tree,d=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,m=t.stat_desc.max_length,h=0;for(i=0;i<=_;i++)e.bl_count[i]=0;for(c[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<b;n++)(i=c[2*c[2*(r=e.heap[n])+1]+1]+1)>m&&(i=m,h++),c[2*r+1]=i,r>u||(e.bl_count[i]++,a=0,r>=p&&(a=f[r-p]),s=c[2*r],e.opt_len+=s*(i+a),d&&(e.static_len+=s*(l[2*r+1]+a)));if(0!==h){do{for(i=m-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[m]--,h-=2}while(h>0);for(i=m;0!==i;i--)for(r=e.bl_count[i];0!==r;)(o=e.heap[--n])>u||(c[2*o+1]!==i&&(e.opt_len+=(i-c[2*o+1])*c[2*o],c[2*o+1]=i),r--)}}function J(e,t,n){var r,o,i=new Array(_+1),a=0;for(r=1;r<=_;r++)i[r]=a=a+n[r-1]<<1;for(o=0;o<=t;o++){var s=e[2*o+1];0!==s&&(e[2*o]=K(i[s]++,s))}}function Z(){var e,t,n,r,o,i=new Array(_+1);for(n=0,r=0;r<m-1;r++)for(D[r]=n,e=0;e<1<<I[r];e++)j[n++]=r;for(j[n-1]=r,o=0,r=0;r<16;r++)for(U[r]=o,e=0;e<1<<A[r];e++)N[o++]=r;for(o>>=7;r<y;r++)for(U[r]=o<<7,e=0;e<1<<A[r]-7;e++)N[256+o++]=r;for(t=0;t<=_;t++)i[t]=0;for(e=0;e<=143;)O[2*e+1]=8,e++,i[8]++;for(;e<=255;)O[2*e+1]=9,e++,i[9]++;for(;e<=279;)O[2*e+1]=7,e++,i[7]++;for(;e<=287;)O[2*e+1]=8,e++,i[8]++;for(J(O,g+1,i),e=0;e<y;e++)M[2*e+1]=5,M[2*e]=K(e,5);L=new V(O,I,h+1,g,_),B=new V(M,A,0,y,_),F=new V(new Array(0),P,0,v,w)}function Q(e){var t;for(t=0;t<g;t++)e.dyn_ltree[2*t]=0;for(t=0;t<y;t++)e.dyn_dtree[2*t]=0;for(t=0;t<v;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*E]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function $(e){e.bi_valid>8?z(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function ee(e,t,n,o){$(e),o&&(z(e,n),z(e,~n)),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function te(e,t,n,r){var o=2*t,i=2*n;return e[o]<e[i]||e[o]===e[i]&&r[t]<=r[n]}function ne(e,t,n){for(var r=e.heap[n],o=n<<1;o<=e.heap_len&&(o<e.heap_len&&te(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!te(t,r,e.heap[o],e.depth));)e.heap[n]=e.heap[o],n=o,o<<=1;e.heap[n]=r}function re(e,t,n){var r,o,i,a,s=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],o=e.pending_buf[e.l_buf+s],s++,0===r?q(e,o,t):(q(e,(i=j[o])+h+1,t),0!==(a=I[i])&&G(e,o-=D[i],a),q(e,i=W(--r),n),0!==(a=A[i])&&G(e,r-=U[i],a))}while(s<e.last_lit);q(e,E,t)}function oe(e,t){var n,r,o,i=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,c=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=b,n=0;n<c;n++)0!==i[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):i[2*n+1]=0;for(;e.heap_len<2;)i[2*(o=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[o]=0,e.opt_len--,s&&(e.static_len-=a[2*o+1]);for(t.max_code=u,n=e.heap_len>>1;n>=1;n--)ne(e,i,n);o=c;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],ne(e,i,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,i[2*o]=i[2*n]+i[2*r],e.depth[o]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,i[2*n+1]=i[2*r+1]=o,e.heap[1]=o++,ne(e,i,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],X(e,t),J(i,u,e.bl_count)}function ie(e,t,n){var r,o,i=-1,a=t[1],s=0,c=7,u=4;for(0===a&&(c=138,u=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)o=a,a=t[2*(r+1)+1],++s<c&&o===a||(s<u?e.bl_tree[2*o]+=s:0!==o?(o!==i&&e.bl_tree[2*o]++,e.bl_tree[2*C]++):s<=10?e.bl_tree[2*T]++:e.bl_tree[2*k]++,s=0,i=o,0===a?(c=138,u=3):o===a?(c=6,u=3):(c=7,u=4))}function ae(e,t,n){var r,o,i=-1,a=t[1],s=0,c=7,u=4;for(0===a&&(c=138,u=3),r=0;r<=n;r++)if(o=a,a=t[2*(r+1)+1],!(++s<c&&o===a)){if(s<u)do{q(e,o,e.bl_tree)}while(0!==--s);else 0!==o?(o!==i&&(q(e,o,e.bl_tree),s--),q(e,C,e.bl_tree),G(e,s-3,2)):s<=10?(q(e,T,e.bl_tree),G(e,s-3,3)):(q(e,k,e.bl_tree),G(e,s-11,7));s=0,i=o,0===a?(c=138,u=3):o===a?(c=6,u=3):(c=7,u=4)}}function se(e){var t;for(ie(e,e.dyn_ltree,e.l_desc.max_code),ie(e,e.dyn_dtree,e.d_desc.max_code),oe(e,e.bl_desc),t=v-1;t>=3&&0===e.bl_tree[2*x[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function ce(e,t,n,r){var o;for(G(e,t-257,5),G(e,n-1,5),G(e,r-4,4),o=0;o<r;o++)G(e,e.bl_tree[2*x[o]+1],3);ae(e,e.dyn_ltree,t-1),ae(e,e.dyn_dtree,n-1)}function ue(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return i;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return a;for(t=32;t<h;t++)if(0!==e.dyn_ltree[2*t])return a;return i}c(U);var le=!1;function de(e){le||(Z(),le=!0),e.l_desc=new H(e.dyn_ltree,L),e.d_desc=new H(e.dyn_dtree,B),e.bl_desc=new H(e.bl_tree,F),e.bi_buf=0,e.bi_valid=0,Q(e)}function fe(e,t,n,r){G(e,(u<<1)+(r?1:0),3),ee(e,t,n,!0)}function pe(e){G(e,l<<1,3),q(e,E,O),Y(e)}function me(e,t,n,r){var i,a,c=0;e.level>0?(e.strm.data_type===s&&(e.strm.data_type=ue(e)),oe(e,e.l_desc),oe(e,e.d_desc),c=se(e),i=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=i&&(i=a)):i=a=n+5,n+4<=i&&-1!==t?fe(e,t,n,r):e.strategy===o||a===i?(G(e,(l<<1)+(r?1:0),3),re(e,O,M)):(G(e,(d<<1)+(r?1:0),3),ce(e,e.l_desc.max_code+1,e.d_desc.max_code+1,c+1),re(e,e.dyn_ltree,e.dyn_dtree)),Q(e),r&&$(e)}function he(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(j[n]+h+1)]++,e.dyn_dtree[2*W(t)]++),e.last_lit===e.lit_bufsize-1}n._tr_init=de,n._tr_stored_block=fe,n._tr_flush_block=me,n._tr_tally=he,n._tr_align=pe},{"../utils/common":2}],9:[function(e,t,n){function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=r},{}]},{},[1])(1)}(0,void 0!==t?t:{})}));function mm(e){return mm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mm(e)}function hm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ym(r.key),r)}}function gm(e,t,n){return t&&hm(e.prototype,t),n&&hm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ym(e){var t=function(e,t){if("object"!=mm(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=mm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mm(t)?t:t+""}var vm=gm((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._isParentMeta=function(e){var t;return!!r._config.noMetaTagInSelector&&(null===(t=L.parentNode(e))||void 0===t||null===(t=t.nodeName)||void 0===t?void 0:t.indexOf("META"))>-1},this._getElementNameWithClasses=function(e,t){if(r._isRoot(e)&&!r._isParentMeta(e))return t?r._env.encoding.rootSelector:e.nodeName;var n=r._encodeNodeName(e.nodeName,t),o=r._getSiblingIndex(e);if(null!==o)return r._encodeElementNameAndSiblingIndex(n,o,t);if(r._env.useClassesInSelectors){var i=L.getClassList(e);if(i.length>0){for(var a=n,s=0;s<i.length;s++)a+="."+i[s];return a}}return n},this._getSiblingIndex=function(e){if(!L.parentNode(e))return null;var t=L.childNodes(L.parentNode(e));if(t.length<2)return null;for(var n=e.nodeName,r=[],o=0;o<t.length;o+=1)t[o].nodeName===n&&r.push(t[o]);if(r.length<2)return null;for(var i=0;i<r.length;i+=1)if(r[i]===e)return i;return null},this._getElementNameWithId=function(e,t,n){var o=L.getElementId(e);return(o&&-1!==o.indexOf("~")||-1!==o.indexOf("*")||-1!==o.indexOf(" "))&&(o=r._replaceSpecialChars(o)),t?r._encodeNodeName(e.nodeName,n)+"#"+o:"#"+o},this._addToHeadIfFound=function(e,t){var n=mm(t);"string"!==n&&"number"!==n||e.unshift(t)},this._encodeElementNameAndSiblingIndex=function(e,t,n){var r=e;return n||(r+=":eq"),r+"("+t+")"},this._encodeNodeName=function(e,t){return t?Yt.encodeNodeName(e):e},this._isRoot=function(e){var t=e.nodeName;return"HTML"===t||"BODY"===t||r._isParentMeta(e)},this._replaceSpecialChars=function(e){return e.replace(/~/g,r._specialChar.tilda).replace(/\*/g,r._specialChar.asterisks).replace(/ /g,r._specialChar.space)},this._hasFormAncestor=function(e){for(var t=L.parentNode(e);null!==t;){if(void 0===t&&console.log("hasFormAncestor undefined node: ",e),"FORM"===t.nodeName)return!0;t=L.parentNode(t)}return!1},this._getElementWithAttribute=function(e,t,n){var o="["+t+"='"+e.getAttribute(t)+"']";return-1===o.indexOf("~")&&-1===o.indexOf("*")&&-1===o.indexOf(" ")||(o=r._replaceSpecialChars(o)),r._encodeNodeName(e.nodeName,n)+o},this._checkAllowUseId=function(e,t){if(0===r._config.noIdSelectorsForClassNames.length&&0===r._config.noIdSelectorsForIDs.length&&0===r._config.noIdSelectorsForAttrs.length)return!0;var n,o=L.getClassList(e);for(n=0;n<r._config.noIdSelectorsForClassNames.length;n++)if(L.indexOf(o,r._config.noIdSelectorsForClassNames[n])>=0)return!1;for(n=0;n<r._config.noIdSelectorsForAttrs.length;n++)if(e.hasAttribute(r._config.noIdSelectorsForAttrs[n]))return!1;for(n=0;n<r._config.noIdSelectorsForIDs.length;n++){var i=r._config.noIdSelectorsForIDs[n];if(i&&t.indexOf(i)>=0)return!1}return!0},this.getSelectorInfo=function(e,t,n){t=void 0!==t?t:r._env.encodeSelectors,n=n||{useId:!0};var o=r._config.useIdSelectors&&n.useId;if(null===e||L.isUndefined(e)||!L.isElement(e))return{selector:r._env.encoding.rootSelector};if(e.name&&r._config.preferNamesInFormSelectors&&r._hasFormAncestor(e))return{selector:r._getElementWithAttribute(e,"name",t)};if(o){var i=L.getElementId(e);if(i&&!L.isDuplicateElementId(i,r._config.duplicateIdCheck)&&r._checkAllowUseId(e,i))return{selector:r._getElementNameWithId(e,!0,t)}}if(e.name&&r._config.useNameInFormSelectors&&r._hasFormAncestor(e))return{selector:r._getElementWithAttribute(e,"name",t)};if(n.identifyingAttribute&&e.hasAttribute(n.identifyingAttribute))return{selector:r._getElementWithAttribute(e,n.identifyingAttribute,t)};for(var a=[r._getElementNameWithClasses(e,t)],s=e,c=t?"*":">";L.parentNode(s)&&!r._isRoot(s);)if(1===(s=L.parentNode(s)).nodeType){var u=L.getElementId(s);if(u&&o&&!L.isDuplicateElementId(u,r._config.duplicateIdCheck)&&r._checkAllowUseId(s,u))return r._addToHeadIfFound(a,r._getElementNameWithId(s,!1)),{selector:a.join(c)};var l=r._getElementNameWithClasses(s,t);if(r._addToHeadIfFound(a,l),s===parent)return{selector:a.join(c)}}return{selector:a.join(c)}},this.getConfig=function(){return r._config},this._env=t,this._config=n,this._specialChar={tilda:"_clstil",asterisks:"_clsast",space:"_clsspc"}}));function bm(e){return bm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bm(e)}function _m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wm(r.key),r)}}function Sm(e,t,n){return t&&_m(e.prototype,t),n&&_m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function wm(e){var t=function(e,t){if("object"!=bm(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=bm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bm(t)?t:t+""}var Em=Sm((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getSelectorInfo=function(e,t,r){if(!e||"function"!=typeof e.getRootNode)return{selector:n._selectorResolver.getSelectorInfo(e,t,r).selector};for(var o=[],i={},a=new Set,s=!1;e&&!a.has(e);)a.add(e),o.unshift(n._selectorResolver.getSelectorInfo(e,t,r).selector),s=e._customElement,e=n._config.recordNonNativeShadowAsElementContainer||n.isDisconnectRoot(e)?void 0:(e.getRootNode()||{}).host;if(o.length)if(s){var c=void 0!==t?t:H.encodeSelectors;i.selector=o.join(c?"*"+Ht.DIV+"*":">div>")}else i.selector=o.splice(o.length-1)[0],o.length&&(i.hostSelectorPath=o.join(","));return i},this.isDisconnectRoot=function(e){return!e.isConnected&&e.getRootNode()&&e.getRootNode().host===e},this._selectorResolver=t,this._config=this._selectorResolver.getConfig()}));function Cm(e){return Cm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cm(e)}function Tm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Im(r.key),r)}}function km(e,t,n){return t&&Tm(e.prototype,t),n&&Tm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Im(e){var t=function(e,t){if("object"!=Cm(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Cm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Cm(t)?t:t+""}var Am=km((function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.apply=function(){return o._config.recordShadowDom&&void 0!==Em&&(o._window.ShadowRoot||L.arrayValueContainedInString(o._config.forceShadowDomTrackingWhenUrlContains,o._window.location.href))?new Em(new vm(o._env,o._config)):new vm(o._env,o._config)},this._window=t,this._env=n,this._config=r}));function Pm(e){return Pm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pm(e)}function xm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Om(r.key),r)}}function Rm(e,t,n){return t&&xm(e.prototype,t),n&&xm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Om(e){var t=function(e,t){if("object"!=Pm(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Pm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pm(t)?t:t+""}var Mm=Rm((function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mask=function(e){var t=e.split("#");return o.maskSection(t[0])+(t.length>1?"#"+o.maskSection(t[1]):"")},t&&t.length&&(t=L.arrayToLowerCase(t)),this.queryParamsToMask=t,n&&n.length&&(n=L.arrayToLowerCase(n)),this.urlPathToMask=n,this.queryParamsToMaskMap=L.immutableSet.apply(null,t),this.urlPathToMaskMap=L.immutableSet.apply(null,n),this._options=r||{},this.maskSection=function(e){if(!o.queryParamsToMask.length&&!o.urlPathToMask.length||!e)return e;var t,n=e.split("?");if(n[0]&&Object.keys(o.urlPathToMaskMap).length>0){var r=n[0].split("/");for(t=1;t<r.length;t++)o.urlPathToMaskMap[r[t].toLowerCase()]&&r[t+1]&&(r[t+1]=js.censorValueOf(r[t+1],null,o._options.urlMaskingChar));n[0]=r.join("/")}if(!n[1])return n[0]+(e.indexOf("?")===e.length-1?"?":"");var i,a,s,c=[],u=n[1].split("&");for(t=0;t<u.length;t++)(i=u[t].split("=")).length>1?(a=i[0],s=o.queryParamsToMaskMap[a.toLowerCase()]?js.censorValueOf(i[1],null,o._options.queryMaskingChar):i[1],c.push(a+"="+s)):c.push(u[t]);return n[0]+"?"+c.join("&")}}));function Nm(e){return Nm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nm(e)}function jm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Lm(r.key),r)}}function Dm(e,t,n){return t&&jm(e.prototype,t),n&&jm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lm(e){var t=function(e,t){if("object"!=Nm(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Nm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Nm(t)?t:t+""}var Bm=Dm((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.setListener=function(e){t._listener=e},this.clonerHook=function(e,n){t._listener&&t._listener(e,n)},this._listener=void 0}));function Fm(e){return Fm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fm(e)}function Um(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Hm(r.key),r)}}function Vm(e,t,n){return t&&Um(e.prototype,t),n&&Um(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Hm(e){var t=function(e,t){if("object"!=Fm(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Fm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Fm(t)?t:t+""}var Wm=Vm((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.censorValueOf=function(e){var t,n=r._encryptionManager.getEncryptionKey();return t=r._encryptionManager.AES_CBC.encrypt(new Uint8Array(L.strToUTF8Bytes(e)),n,!0),H.encryptionPrefix+H.Base64.bytesToBase64(t,!0)+"_"},this.isAvailable=function(){return r._encryptionManager.canUseEncryption()},this._encryptionManager=n}));function zm(e){return zm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zm(e)}function Gm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||qm(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qm(e,t){if(e){if("string"==typeof e)return Km(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Km(e,t):void 0}}function Km(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ym(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Jm(r.key),r)}}function Xm(e,t,n){return t&&Ym(e.prototype,t),n&&Ym(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Jm(e){var t=function(e,t){if("object"!=zm(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=zm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zm(t)?t:t+""}var Zm=Xm((function e(t,n,r,o,i,a,s,c,u){var l=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._source=t,this._stopppable=n,this._bus=r,this._config=o,this._time=i,this._recordingInitialized=!1,this._cookieHelper=a,this._mobileBridgeContext=s,this._env=c,this._publicDataBridge=u;var d=function(e){for(var t={config:l._source.config,page:l._source.page,plugins:l._source.plugins,blackoutManager:l._source.blackoutManager,version:l._source.version,triggerMessage:l._source.triggerMessage,sessionId:l._source._sessionId,visitorId:l._source._visitorId,clse:l._source.integrationId,rto:l._source.rto},n=0,r=Object.entries(t);n<r.length;n++){var o=Gm(r[n],2),i=o[0],a=o[1];a&&(e[i]=a)}return e},f=L.shallowExtend(this._config.debugMode?t:{},{triggerCustomEvent:function(e,t,n,r){if(!e||"string"!=typeof e){return{status:"failure",message:"bad argument: 'eventName' is expected to be non empty string."}}return l._bus.emit("customEvent",{name:""+e,val:""+t,domEl:n,sendDomUpdate:r}),{status:"success",message:""}},triggerCustomEventMap:function(e,t,n){if(!e||"string"!=typeof e){return{status:"failure",message:"bad argument: 'eventName' is expected to be non empty string."}}if(!t||"object"!==zm(t)||0===Object.keys(t).length){return{status:"failure",message:"bad argument: 'eventValue' is expected to be an object."}}return l._bus.emit("customMapEvent",{name:""+e,val:t,domEl:n}),{status:"success",message:""}},trigger3rdPartyMap:function(e){l._bus.emit("api:captureObject",e)},isRecording:function(){return!(n&&n.isStopped())},startRecording:function(){n&&n.start()},stopRecording:function(){n&&n.stop()},initializeRecording:function(){l._config.delayRecording?l._mobileBridgeContext&&l._mobileBridgeContext.config&&!1===l._mobileBridgeContext.config.recordingEnabled?console.log("Will not initialize recording. MobileBridge instructed not to record."):l._recordingInitialized||l._cookieHelper._get(l._env.cookies.delay)?console.log("Recording already initialized"):(l._recordingInitialized=!0,console.log("Initializing recording..."),l._bus.emit("initializeDetectorAfterDelay")):console.log("delayRecording is disabled")},invalidateSession:function(){l._source.fingerprintIsUsed?console.log("Fingerprint is used, same _cls_s and same _cls_v will be generated. Ignoring invalidate command."):!l._config.delayRecording||l._cookieHelper._get(l._env.cookies.delay)?(l._bus.emit("invalidateSession"),d(f)):console.log("Recording is delayed. Ignoring invalidateSession command")},flush:function(){l._bus.emit("forceFlush"),l._bus.emit("iFramesForceFlush")},triggerABTestingEvent:function(e,t,n,r,o){e&&r&&o&&t&&n?"string"==typeof e&&"string"==typeof r&&"string"==typeof o&&"string"==typeof t&&"string"==typeof n?l._bus.emit("abTesting",{provider:e,offers:[{variantId:r,variantName:o,experimentId:t,experimentName:n}]}):console.log("Type mismatch - should be String."):console.log("Missing one or more arguments. Expected format: provider, experimentId, experimentName, variantId, variantName")},waitForObjectOnPage:function(e,t,n){try{L.waitForObjDefined(e,t,(function(){try{n()}catch(e){l._bus.emit("clsDebug","callback function bad implementation in waitForObjectOnPage API: "+e.message)}}))}catch(e){l._bus.emit("clsDebug","bad implementation for waitForObjectOnPage API: "+e.message)}},getSessionReplayLink:function(e,n,r){var o,i,a,s,c,u=arguments.length>3&&void 0!==arguments[3]&&arguments[3],d=e||l._config.gbconsoledomain;if(!d)return"glassbox console domain was not configured or passed via call to getSessionReplayLink";var f=l._time();return u?(a=Math.floor((f-792e5)/1e5),n&&r?(i=r.replace(/-/g,""),c="https://".concat(d,"/s/").concat(n,":").concat(i,"/").concat(a)):(i=t._sessionId.replace(/-/g,""),c="https://".concat(d,"/s/").concat(i,"/").concat(a))):(o=n||"cls_s",i=r||t._sessionId,a=f-792e5,s=f+792e5,c="https://".concat(d,"/webinterface/webui/#/sessions/").concat(o,":").concat(i,"/replay?from=").concat(a,"&till=").concat(s)),c},getSessionReplayLinkByMultipleAttributes:function(){for(var e,n="",r=l._time()-792e5,o=l._time()+792e5,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];if(a[0]){if(a.length%2!=1)return"Invalid arguments number when calling getSessionReplayLinkByMultipleAttributes";for(e=1;e<a.length;e+=2)n+=" AND "+a[e].trim()+":"+a[e+1].trim();return"https://"+a[0]+"/webinterface/webui/#/sessions/cls_s:"+t._sessionId+n+"/replay?from="+r+"&till="+o}return"glassbox console domain was not passed via call to getSessionReplayLinkByMultipleAttributes"},sendVocData:function(e){l._bus.emit("vocGetData",e)},extraVocData:function(e){var t=function(e){return"object"===zm(e)&&1===Object.keys(e).length},n="Must include a key/value style object or array of key/value style objects";if(l._publicDataBridge.extraVocData||(l._publicDataBridge.extraVocData={}),!e||"object"!==zm(e))return n;if(Array.isArray(e)){if(0===e.length)return n;var r,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=qm(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(e);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(!t(i))return n;var a=Gm(Object.entries(i)[0],2),s=a[0],c=a[1];l._publicDataBridge.extraVocData[s]=c}}catch(e){o.e(e)}finally{o.f()}}else{if(!t(e))return n;var u=Gm(Object.entries(e)[0],2),d=u[0],f=u[1];l._publicDataBridge.extraVocData[d]=f}}});return this._bus.on("parentWindowInfo",(function(e){f&&e&&(f.sessionId=e._sessionId,f.visitorId=e._visitorId)})),this._bus.on("session:setIds",(function(e){f&&e._sessionId&&(f.sessionId=e._sessionId),f&&e._visitorId&&(f.visitorId=e._visitorId)})),this._bus.on("remoteClseConf",(function(e){f&&e&&(f.clse=e)})),this._bus.on("remoteRtoConf",(function(e){f&&e&&(f.rto=e)})),this._bus.once("init:loaded",(function(){return d(f)})),d(f)}));function Qm(e){return Qm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qm(e)}function $m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eh(r.key),r)}}function eh(e){var t=function(e,t){if("object"!=Qm(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Qm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Qm(t)?t:t+""}var th=function(){return function(e,t,n){return t&&$m(e.prototype,t),n&&$m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}),[{key:"shouldDisable",value:function(e,t){if(void 0!==e[t])return void 0!==e.console&&"function"==typeof e.console.log&&console.log("WARNING[Glassbox-1301]: detector script has been loaded more than once. Please fix to have a single detector loading. (Extra script loading will be ignored)"),!0;try{e._gbLocalStorage=e.localStorage}catch(e){"SecurityError"===e.name&&console.log("[Glassbox] localStorage is not available.")}try{e._gbSessionStorage=e.sessionStorage}catch(e){"SecurityError"===e.name&&console.log("[Glassbox] sessionStorage is not available.")}return!e._cls_config||!e._cls_config.noStorageRecDisable||e._gbLocalStorage&&e._gbSessionStorage?void 0===e.NodeFilter||!(!e._cls_config||!e._cls_config.disableDetector)&&(e._cls_config={},!0):(console.warn("[Glassbox] Recording has been disabled because browser storage is not available (are cookies disabled?)"),!0)}}])}();function nh(e){return nh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nh(e)}function rh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ih(r.key),r)}}function oh(e,t,n){return t&&rh(e.prototype,t),n&&rh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ih(e){var t=function(e,t){if("object"!=nh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nh(t)?t:t+""}var ah=oh((function e(){var t,n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nextId=(t=0,function(){return++t}),this._ensureId=function(e){var t=e._gbid;return t||(t=n._nextId(),e._gbid=t),t},this.idOf=function(e,t){return e?t?e._gbid:n._ensureId(e):null},this.selectorFor=function(e){return{selector:""+n._ensureId(e)}},this._gbId="_gbid",this.GB_ID_FIELD_NAME=this._gbId}));function sh(e){return sh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sh(e)}function ch(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,uh(r.key),r)}}function uh(e){var t=function(e,t){if("object"!=sh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=sh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==sh(t)?t:t+""}var lh=function(){return function(e,t,n){return t&&ch(e.prototype,t),n&&ch(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._removeInvalidClasses=function(e){var t,n=[],r=/\s/;e=e||[];for(var o=0;o<e.length;o++)t=e[o],r.test(t)?L.isIE()?console.log("Error: the following configuration value contains spaces: "+t):console.log("%c Error: the following configuration value contains spaces: "+t,"color: white; background: red"):n.push(t);return n},this._prepareDomMaskingSelector=function(t,n,o,i,a,s){var c,u,l=[],d=[];if(o)for(c=0;c<o.length;c++)d.push(o[c]);if(t)for(c=0;c<t.length;c++)1===(l=(u=L.gbCssEscape(window,t[c])).split("\\*")).length?d.push("#"+u):2===l.length||3===l.length?d.push(e.prepareWildCardSelector(l,"id")):r._selectorValidator.printErrorMsg("more than two wildcards in id list");if(n)for(c=0;c<n.length;c++)1===(l=(u=L.gbCssEscape(window,n[c])).split("\\*")).length?d.push("."+u):2===l.length||3===l.length?d.push(e.prepareWildCardSelector(l,"class")):r._selectorValidator.printErrorMsg("more than two wildcards in class list");if(0===d.length)return s&&a?(d.push("["+a+"]"),d):null;if(i)return d.map((function(e){var t=e.split("][");return 2===t.length?":not("+t[0]+"]):not(["+t[1]+")":":not("+e+")"})).join("");var f=a?r._addIgnoreAttribute(d,a,s):d.join(",");return r._selectorValidator.validateSelector(f)?f:null},this._prepareAttributeMaskingSelector=function(e,t,n){if(0===e.length||0===t.length)return null;var o,i,a=[];for(o=0;o<t.length;o++)for(i=0;i<e.length;i++)a.push(t[o]+"["+e[i]+"]");return n?r._addIgnoreAttribute(a,n,!1):a.join(",")},this._addIgnoreAttribute=function(e,t,n){var r;return 1===e.length?n?(e.push("["+t+"]"),r=e.join(",")):(e[0]=e[0]+":not(["+t+"])",r=e):r=n?e.push("["+t+"]").join(","):e.join(":not(["+t+"]),"),r},this.isAttributeMasked=function(e,t){return!(!r._maskedAttributesTags[e.tagName]||!(r._maskedAttributes[t]||r._maskDataAttributes&&0===t.indexOf("data-"))||e.hasAttribute&&e.hasAttribute(r._ignoreMaskByAttribute))},this.isDomMasked=function(e,t){for(var n=arguments.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];var a,s,c,u,l=o;for(a=0;a<l.length;a++){if(c=!!(s=r._selectorsByMaskingType[l[a]].selector)&&t.follow(e,s,r.isCrossShadow),u=r._selectorsByMaskingType[l[a]].doInvert,c)return!u;if(u)return!0}return!!u},this.createContextUpdater=function(e){var t=!!window.ShadowRoot,n=r._domMaskingMode===r._env.censorMode.WhiteList,o={},i=[],a=function(e,t,n){i.push(e+"_"+t),n.maskText=t};return{onStart:function(t,n){var i=e.idOf(t);if(a(i,!r._unmaskableTags[t.tagName]&&r.isDomMasked(t,at.SELF_OR_ANY_PARENT,it.TEXT),n),t.querySelectorAll){var s=r._selectorsByMaskingType[it.TEXT].selector;if(s){var c,u=t.querySelectorAll(s);for(c=0;c<u.length;c++)o[e.idOf(u[c])]=!0}}},onEnterElement:function(s,c){var u="true"===i[i.length-1].split("_")[1],l=e.idOf(s);if(t&&s instanceof window.ShadowRoot&&s.querySelectorAll){var d=r._selectorsByMaskingType[it.TEXT].selector;if(d){var f,p=s.querySelectorAll(d);for(f=0;f<p.length;f++)o[e.idOf(p[f])]=!0}}if(o[l]){var m=!n&&!r._unmaskableTags[s.tagName];if(m!==u)return a(l,m,c),!0}return!!(u&&r._unmaskableTags[s.tagName]||u&&s.hasAttribute&&s.hasAttribute(r._ignoreMaskByAttribute))&&(a(l,!1,c),!0)},onLeaveElement:function(t,n){var r=e.idOf(t);(i.indexOf(r+"_true")>-1||i.indexOf(r+"_false")>-1)&&(i.pop(),n.maskText="true"===i[i.length-1].split("_")[1])},onEnd:function(){o={},i=[]}}},this._env=t,this._selectorValidator=new Ms,(n=n||{}).valueMaskClasses=this._removeInvalidClasses(n.valueMaskClasses),n.domMaskClasses=this._removeInvalidClasses(n.domMaskClasses);var o=n.domMaskingMode===t.censorMode.WhiteList,i=n.valueMaskingMode===t.censorMode.WhiteList;this.isCrossShadow=n.recordShadowDom,this._domMaskingMode=n.domMaskingMode,this._maskedAttributes=L.immutableSet.apply(null,n.domMaskedAttributes),this._maskedAttributesTags=L.immutableSet.apply(null,(n.domMaskAttributesTags||[]).map((function(e){return e.toUpperCase()}))),this._maskDataAttributes=!!n.domMaskDataAttributes,this._ignoreMaskByAttribute=n.domMaskIgnoreAttribute,this._selectorsByMaskingType={},this._selectorsByMaskingType[it.TEXT]={selector:this._prepareDomMaskingSelector(n.domMaskIds,n.domMaskClasses,n.domMaskSimpleSelector,!1,n.domMaskIgnoreAttribute,o),doInvert:this._domMaskingMode===t.censorMode.WhiteList},this._selectorsByMaskingType[it.OMIT]={selector:this._prepareDomMaskingSelector(n.domOmitIds,n.domOmitClasses),doInvert:!1},this._selectorsByMaskingType[it.VALUE_ATTRIBUTE]={selector:"input"+this._prepareDomMaskingSelector(n.valueMaskIds,["cls_mask"].concat(n.valueMaskClasses||[]),!1,i,n.valueMaskIgnoreAttribute,o),doInvert:!1},this._selectorsByMaskingType[it.ATTRIBUTE]={selector:this._prepareAttributeMaskingSelector(n.domMaskedAttributes||[],n.domMaskAttributesTags||[],n.domMaskIgnoreAttribute,o),doInvert:!1},this._unmaskableTags=L.immutableSet("TITLE","SCRIPT")}),null,[{key:"prepareWildCardSelector",value:function(e,t){return""===e[0]?3===e.length&&""===e[2]?"["+t+"*='"+e[1]+"']":"["+t+"$='"+e[1]+"']":""===e[1]?"["+t+"^='"+e[0]+"']":"["+t+"^='"+e[0]+"']["+t+"$='"+e[1]+"']"}}])}();function dh(e){return dh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dh(e)}function fh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mh(r.key),r)}}function ph(e,t,n){return t&&fh(e.prototype,t),n&&fh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function mh(e){var t=function(e,t){if("object"!=dh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=dh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==dh(t)?t:t+""}var hh=ph((function e(n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.create=function(){var e=t.valueMaskingMode===r._env.censorMode.WhiteList,n=t.domMaskingMode===r._env.censorMode.WhiteList;return new lh(r._env,{valueMaskingMode:t.valueMaskingMode,valueMaskIds:e?t.maskWhitelistValueById:t.maskBlacklistValueById,valueMaskClasses:e?t.maskWhitelistValueByClass:t.maskBlacklistValueByClass,valueMaskIgnoreAttribute:t.valueMaskIgnoreAttribute,domMaskingMode:t.domMaskingMode,domMaskIds:n?t.domWhitelistMaskContentById:t.domBlacklistMaskContentById,domMaskClasses:n?t.domWhitelistMaskContentByClass:t.domBlacklistMaskContentByClass,domOmitIds:t["domMaskOmitById "]||t.domOmitById,domOmitClasses:t["domMaskOmitByClass "]||t.domOmitByClass,domMaskedAttributes:t.domMaskedAttributes,domMaskDataAttributes:t.domMaskDataAttributes,domMaskAttributesTags:t.domMaskAttributesByTag,domMaskIgnoreAttribute:t.domMaskIgnoreAttribute,domMaskSimpleSelector:n?t.domWhitelistMaskSimpleSelector:t.domBlacklistMaskSimpleSelector,recordShadowDom:t.recordShadowDom},new Ms)},this._env=n}));function gh(e){return gh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gh(e)}function yh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bh(r.key),r)}}function vh(e,t,n){return t&&yh(e.prototype,t),n&&yh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function bh(e){var t=function(e,t){if("object"!=gh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=gh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gh(t)?t:t+""}var _h=vh((function e(t,n,r,o,a){var s,c,u,l=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._getAttributeValue=function(e,t){return l._masker&&l._masker.isAttributeMasked(e,t)?js.censorValueOf(L.getAttributeForElement(e,t)):L.getAttributeForElement(e,t)},this._extractVisualName=function(e,t,n){var r=null;if(!e||!L.isElement(e))return r;if(L.contains(l._visualNameConfig.filterNamingByTagName,e.tagName.toLocaleLowerCase()))return r;var o="";return(r=L.getAttributeForElement(e,l._visualNameConfig.CLS_NAME_ATTR))&&(o="by data-gb-name"),r||(r=L.getAttributeForElement(e,l._cls_name_attr_old))&&(o="by cls_vname"),!r&&l._visualNameConfig.by.title&&(r=l._getAttributeValue(e,"title"))&&(o="by title"),!r&&l._visualNameConfig.by.alt&&(r=l._getAttributeValue(e,"alt"))&&(o="by alt"),!r&&l._visualNameConfig.by.ariaLabel&&(r=l._getAttributeValue(e,"aria-label"))&&(o="by aria-label"),r||!l._visualNameConfig.by.inputConsts&&!l._visualNameConfig.by.inputButtonsValue||(r=l._getInputNames(e))&&(o="by input specific"),!r&&l._visualNameConfig.by.name&&(r=l._getAttributeValue(e,"name"))&&(o="by name"),!r&&l._visualNameConfig.by.inlineText&&(r=l._getInlineText(e,t,n,0))&&(o="by #text"),!r&&l._visualNameConfig.by.id&&l._idAsVisualNameAllowed(e)&&(r=l._getAttributeValue(e,"id"))&&(o="by id"),!r&&l._visualNameConfig.by.placeholder&&(r=l._getAttributeValue(e,"placeholder"))&&(o="by placeholder"),!r&&l._visualNameConfig.by.parent&&(r=l._getVNByParent(e))&&(o="by parent"),!r&&l._visualNameConfig.by.child&&(r=l._getVNByChild(e,t,n))&&(o="by child"),r&&r.length>l._effectiveLimit&&(r=r.slice(0,l._effectiveLimit).concat("...")),l._debug&&l._logger.trace("VISUAL NAME: (on "+e.tagName+" "+(e.type?e.type:"")+") "+o+" - "+r),r},this._scope=t||{},this._masker=n,this._encryptor=a,this._config=r||{},this._logger=o||i,this._cls_name_attr_old="cls_vname",this._visualNameConfig=this._config.visualName,this._debug=this._config.visualNameDebug||!1,this._effectiveLimit=this._config.visualNameLimit>0?Math.min(this._config.visualNameLimit,this._config.visualName.maxLimit):this._config.visualName.maxLimit,this._wrapperElements=L.immutableSet.apply(null,this._visualNameConfig.wrapperElementList||[]),this._valueMaskNonEditableInputTypes=L.immutableSet.apply(null,L.arrayToLowerCase(this._config.valueMaskNonEditableInputTypes||[])),this._isTooFarFromElement=function(e,t,n){if(l._visualNameConfig.maxDistance>0){var r=e.getClientRects();if(r.length)for(var o=0;o<r.length;o++)if(r[o].left-t<l._visualNameConfig.maxDistance&&t-r[o].right<l._visualNameConfig.maxDistance&&n-r[o].bottom<l._visualNameConfig.maxDistance&&r[o].top-n<l._visualNameConfig.maxDistance)return!1}return!0},this._idAsVisualNameAllowed=(s=r.noIdSelectorsForClassNames||[],c=r.noIdSelectorsForIDs||[],u=r.noIdSelectorsForAttrs||[],function(e){if(0===s.length&&0===c.length&&0===u.length)return!0;var t,n=e.getAttribute("id");if(n)for(t=0;t<c.length;t++){var r=c[t];if(r&&n.indexOf(r)>=0)return!1}var o=L.getClassList(e);for(t=0;t<s.length;t++)if(L.indexOf(o,s[t])>=0)return!1;for(t=0;t<u;t++)if(e.hasAttribute(u[t]))return!1;return!0}),this._getVNByChild=function(e,t,n){if(!L.contains(l._visualNameConfig.elementListToCheckChild,e.tagName.toLocaleLowerCase()))return null;var r;if(1===e.childElementCount){var o=e.firstElementChild;if(t&&n&&l._isTooFarFromElement(o,t,n))return null;r=l._getAttributeValue(o,"title")||l._getAttributeValue(o,"alt")||l._getAttributeValue(o,"aria-label")||l._getAttributeValue(o,"name")||l._getAttributeValue(o,"id")}return r||null},this._getVNByParent=function(e){if(!L.contains(l._visualNameConfig.elementListToCheckParent,e.tagName.toLocaleLowerCase()))return null;var t=null,n=e.parentElement;return!n||"a"!==n.tagName.toLocaleLowerCase()&&"button"!==n.tagName.toLocaleLowerCase()||(t=l._getAttributeValue(n,"title")||l._getAttributeValue(n,"alt")||l._getAttributeValue(n,"aria-label")||l._getAttributeValue(n,"name")||l._getAttributeValue(n,"id")),t||null},this._tryGetWrappingElement=function(e){for(var t=l._visualNameConfig.maxParentLevel+1;e&&t--;){if(l._wrapperElements[e.tagName])return e;e=L.parentNode(e)}return null},this._getInlineText=function(e,t,n,r){var o=e.tagName;if("TD"===o)return null;if("TEXTAREA"!==o){var i=L.getAttributeForElement(e,"class");if(i&&L.contains(l._visualNameConfig.filterInlineTextByClassName,i))return null;var a,s=null,c=!1;if("SLOT"===o&&L.assignedNodes(e)){var u,d=L.assignedNodes(e);for(u=0;u<d.length;++u)if(d[u].nodeType===window.Node.TEXT_NODE&&d[u].data.trim()){s=d[u].parentElement,c=!0;break}}if(l._visualNameConfig.by.labelTag&&"LABEL"===e.tagName&&(s=e),"SPAN"!==o&&"DIV"!==o||(1===e.childElementCount?(a=e.firstElementChild)&&"A"===a.tagName&&0===a.childElementCount&&(s=a):e.innerText&&(s=e)),s||(s=l._tryGetWrappingElement(e)),s||0!==e.childElementCount||(s=e),s||1===e.childElementCount&&(0!==(a=e.firstElementChild).childElementCount||t&&n&&l._isTooFarFromElement(a,t,n)||(s=e)),s)try{var f,p="";if(c&&L.childNodes(s)&&L.childNodes(s).length>1)for(var m=L.childNodes(s),h=0;h<m.length;++h)m[h].nodeType===s.TEXT_NODE&&m[h].data.trim()?p+=l._masker?l._masker.isMasked(m[h],c):m[h].data:"SPAN"===m[h].tagName&&m[h].innerText.trim()&&(p+=l._masker?l._masker.isMasked(m[h],!1):m[h].data);else l._masker?(f=l._masker.extractedInnerText(c,s),p=l._masker.isMasked(s,!1)):p=s.innerText,p!==f&&void 0!==f||l._encryptor&&l._encryptor.isDomEncrypted(s,at.SELF_OR_ANY_PARENT)&&(p="");if(!p){var g=L.parentNode(s);g&&"BODY"!==g.tagName&&r<l._config.maxVisualNamelookUp&&(g=g.host?g.host:g,++r,p=l._getInlineText(g,t,n,r))}return p.trim().replace(/\n/g," ")}catch(e){}return null}},this._shouldMaskNonEditableInputTypes=function(e){return l._valueMaskNonEditableInputTypes[e]},this._getInputNames=function(e){var t;if("INPUT"===e.tagName){var n=e.type.toLocaleLowerCase();if("button"!==n&&"submit"!==n&&"reset"!==n||!l._visualNameConfig.by.inputButtonsValue||(t=l._shouldMaskNonEditableInputTypes(n)?js.censorValueOf(e.value):e.value),!t&&l._visualNameConfig.by.inputConsts)switch(n){case"password":t="Password";break;case"button":case"submit":case"image":t="Submit";break;case"file":t="Choose File";break;case"reset":t="Reset"}}return t&&(t=t.trim()),t||null},t.extractVisualName=this._extractVisualName}));function Sh(e){return Sh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sh(e)}function wh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ch(r.key),r)}}function Eh(e,t,n){return t&&wh(e.prototype,t),n&&wh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ch(e){var t=function(e,t){if("object"!=Sh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Sh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Sh(t)?t:t+""}var Th=Eh((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._prepareMaskingSelector=function(e){if(0===e.length)return null;var t=e.join(",");return r._selectorValidator.validateSelector(t)?t:null},this.isDomMasked=function(e,t){return t.follow(e,r._maskingSelector)},this.createContextUpdater=function(e){var t=r,n={},o=[];function i(e,t,n){o.push(e+"_"+t),n.regexMaskText=t}return{onStart:function(r,o){if(i(e.idOf(r),!t._unMaskableTags[r.tagName]&&t.isDomMasked(r,at.SELF_OR_ANY_PARENT),o),r.querySelectorAll&&t._maskingSelector)for(var a=r.querySelectorAll(t._maskingSelector),s=0;s<a.length;s++)n[e.idOf(a[s])]=!0},onEnterElement:function(r,a){var s="true"===o[o.length-1].split("_")[1],c=e.idOf(r);if(n[c]){var u=!t._unMaskableTags[r.tagName];if(u!==s)return i(c,u,a),!0}return!(!s||!t._unMaskableTags[r.tagName])&&(i(c,!1,a),!0)},onLeaveElement:function(t,n){var r=e.idOf(t);(o.indexOf(r+"_true")>-1||o.indexOf(r+"_false")>-1)&&(o.pop(),n.regexMaskText="true"===o[o.length-1].split("_")[1])},onEnd:function(){n={},o=[]}}},this._selectorValidator=t,this._maskingSelector=this._prepareMaskingSelector(n.domMaskContentByRegex),this._unMaskableTags=L.immutableSet("TITLE","SCRIPT")}));function kh(e){return kh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kh(e)}function Ih(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ph(r.key),r)}}function Ah(e,t,n){return t&&Ih(e.prototype,t),n&&Ih(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ph(e){var t=function(e,t){if("object"!=kh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=kh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==kh(t)?t:t+""}var xh=Ah((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isMasked=function(e,t){var n=r.extractedInnerText(t,e);if("A"===e.nodeName&&r._domMasker.isDomMasked(e,at.SELF_OR_ANY_CHILD,it.TEXT)||r._domMasker.isDomMasked(e,at.SELF_OR_ANY_PARENT,it.TEXT))return js.censorValueOf(n);if("blacklist"===r._config.domMaskingMode&&r._blacklistTagNames.has(e.nodeName)&&r._domMasker.isDomMasked(e,at.SELF_OR_ANY_CHILD,it.TEXT)||r._domMasker.isDomMasked(e,at.SELF_OR_ANY_PARENT,it.TEXT))return js.censorValueOf(n);if(r._domRegexMasker){if("A"===e.nodeName&&r._domRegexMasker.isDomMasked(e,at.SELF_OR_ANY_CHILD)||r._domRegexMasker.isDomMasked(e,at.SELF_OR_ANY_PARENT))return js.censorValueUsingRegex(n,r._config.domRegexPatternForMasking,r._config.domRegexMaskingChar);if("blacklist"===r._config.domMaskingMode&&"BUTTON"===e.nodeName&&r._domRegexMasker.isDomMasked(e,at.SELF_OR_ANY_CHILD)||r._domRegexMasker.isDomMasked(e,at.SELF_OR_ANY_PARENT))return js.censorValueUsingRegex(n,r._config.domRegexPatternForMasking,r._config.domRegexMaskingChar)}return n},this.extractedInnerText=function(e,t){return e?t.data:t.innerText.replace(/\n/g," ")},this.isAttributeMasked=function(e,t){return r._domMasker.isAttributeMasked(e,t)},this._config=n,this._domMasker=t,n.domRegexPatternForMasking.length&&n.domMaskContentByRegex.length&&(this._domRegexMasker=new Th(new Ms,{domMaskContentByRegex:n.domMaskContentByRegex,domRegexPatternForMasking:n.domRegexPatternForMasking,domRegexMaskingChar:n.domRegexMaskingChar})),this._blacklistTagNames=new Set(["BUTTON","SPAN","DIV","LI"])}));function Rh(e){return Rh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rh(e)}function Oh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Nh(r.key),r)}}function Mh(e,t,n){return t&&Oh(e.prototype,t),n&&Oh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nh(e){var t=function(e,t){if("object"!=Rh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Rh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Rh(t)?t:t+""}var jh,Dh=Mh((function e(t,n,r,o,i){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._receiveMessage=function(e){e.data&&a._callbacksByEvent[e.data.name]&&a._callbacksByEvent[e.data.name](e.data.data)},this._addCallback=function(e,t){a._callbacksByEvent[e]=t},this._sendMessage=function(e,t){a._window.postMessage({name:e,data:t||{}})},this._sendInitData=function(){a._sendMessage("GBD_initData",{detectorConfig:a._config,version:a._detector.version})},this._sendEvent=function(e){a._sendMessage("GBX_EventLog",e.toJSON())},this.initialize=function(){document.querySelector("meta[name='gb-extension']")&&(a._bus.on("extensionEvent",a._sendEvent,null,-1),a._sendInitData())},this.removeListener=function(){a._window.removeEventListener("message",a._receiveMessage,!1)},this._window=t,this._detector=n,this._bus=r,this._selectorResolver=o,this._config=i,this._callbacksByEvent={},this._window.addEventListener("message",this._receiveMessage,!1),this._addCallback("GBX_Inspection",(function(){a._detector.extensionInspectMode=!0})),this._addCallback("GBX_StopInspection",(function(){a._detector.extensionInspectMode=!1}))}));function Lh(e){return Lh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lh(e)}function Bh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Uh(r.key),r)}}function Fh(e,t,n){return t&&Bh(e.prototype,t),n&&Bh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Uh(e){var t=function(e,t){if("object"!=Lh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Lh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lh(t)?t:t+""}var Vh=Fh((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));function Hh(e){return Hh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hh(e)}function Wh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zh(r.key),r)}}function zh(e){var t=function(e,t){if("object"!=Hh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Hh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Hh(t)?t:t+""}jh=Vh,Vh.getArrayDelimiter=function(){return void 0!==H&&H.detectorScript&&H.detectorScript.getAttribute("data-clsarraydelim")||","},Vh.toBoolean=function(e){if("TRUE"===e.toUpperCase())return!0;if("FALSE"===e.toUpperCase())return!1;throw"cannot parse boolean from '"+e+"'"},Vh.toNumber=function(e){var t=-1===e.indexOf(".")?parseInt(e):parseFloat(e);if(isNaN(t))throw"cannot parse number from '"+e+"'";return t},Vh.toString=function(e){return e},Vh.toFunction=function(e){return e},Vh.toStringArray=function(e){return null==e?[]:e.split(jh.getArrayDelimiter())};var Gh=function(){return function(e,t,n){return t&&Wh(e.prototype,t),n&&Wh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}),null,[{key:"isArray",value:function(e){return(Array.isArray?Array.isArray(e):e instanceof Array)?null:"array is expected"}},{key:"elementsOfType",value:function(e,t){for(var n=0;n<t.length;n++)if(Hh(t[n])!==e)return"array element type mismatch. expected:"+e+" actual:"+Hh(t[n]);return null}},{key:"and",value:function(){var e=arguments;return function(t){for(var n=0;n<e.length;n++){var r=e[n](t);if(null!=r)return r}return null}}}])}();function qh(e){return qh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qh(e)}function Kh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Yh(r.key),r)}}function Yh(e){var t=function(e,t){if("object"!=qh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qh(t)?t:t+""}var Xh=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.add=function(e,n,r,o,i,a){t[i.toLowerCase()]={type:e,nullable:n,parser:r,name:i,required:a,validator:o},a&&t._requiredFields.push(i)},this.requiredFieldsMask=function(){for(var e={},n=0;n<t._requiredFields.length;n++)e[t._requiredFields[n]]=!0;return e},this.ignore=function(e){t[e.toLowerCase()]={name:e,ignore:!0}},this._requiredFields=[]}return function(e,t,n){return t&&Kh(e.prototype,t),n&&Kh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(e,null,[{key:"newBuilder",value:function(){var t=new e;return{bool:function(e,n){return t.add("boolean",!1,Vh.toBoolean,null,e,n),this},num:function(e,n){return t.add("number",!1,Vh.toNumber,null,e,n),this},str:function(e,n){return t.add("string",!0,Vh.toString,null,e,n),this},strarray:function(e,n){return t.add("object",!0,Vh.toStringArray,Gh.and(Gh.isArray,(function(e){return Gh.elementsOfType("string",e)})),e,n),this},numarray:function(e,n){return t.add("object",!0,Vh.toStringArray,Gh.and(Gh.isArray,(function(e){return Gh.elementsOfType("number",e)})),e,n),this},objarray:function(e,n){return t.add("object",!0,Vh.toStringArray,Gh.and(Gh.isArray,(function(e){return Gh.elementsOfType("object",e)})),e,n),this},ignore:function(e){return t.ignore(e),this},func:function(e,n){return t.add("function",!0,Vh.toFunction,null,e,n),this},build:function(){return t}}}}])}(),Jh=Xh.newBuilder().ignore("injectionTime").ignore("visualName").ignore("detectionScriptURI").str("reportURI",!0).strarray("extraReportURIs",!1).str("reportUriGBCU",!1).str("configPath",!1).bool("recordMouseMoves",!1).bool("recordScrolls",!1).bool("recordIonScrolls",!1).bool("recordScrollReach",!1).num("scrollReachMaxTop",!1).bool("recordErrors",!1).bool("reportValidationErrors",!1).bool("domFormValidationTracking",!1).num("domFormValidationRedComponentMin",!1).num("domFormValidationRedComponentDelta",!1).strarray("domFormValidationSubmissionIds",!1).strarray("domFormValidationSubmissionSelectors",!1).strarray("domFormValidationIgnorableText",!1).strarray("domFormValidationIgnorableTextRegex",!1).strarray("domFormValidationAdditionalTagNames",!1).strarray("domFormValidationIgnorableTags",!1).strarray("domFormValidationIgnorePagesPredicates",!1).strarray("domFormValidationCheckUrls",!1).strarray("domFormValidationTitlesToCheck",!1).strarray("domFormValidationCheckAfterPageLoad",!1).strarray("domFormValidationErrorRelatedText",!1).num("domFormValidationMutationDelay",!1).num("idleEventTimeInterval",!1).bool("botDetection",!1).bool("recordHovers",!1).bool("reportByPost",!1).bool("reportByFetch",!1).num("maxPostReportSize",!1).num("reportPostInterval",!1).bool("reportPostRetry",!1).num("reportMaxRetries",!1).num("reportAbortAfter",!1).bool("reportUseWorker",!1).bool("reportInitializeWorkerAsBlob",!1).num("maxAggregateLookup",!1).strarray("aggregatingElements",!1).bool("DOMBeaconImg",!1).num("reportInterval",!1).num("maxReportSize",!1).strarray("maskList",!1).strarray("maskWhitelistValueById",!1).strarray("maskBlacklistValueById",!1).strarray("maskClassList",!1).strarray("maskWhitelistValueByClass",!1).strarray("maskBlacklistValueByClass",!1).strarray("valueWhitelistMaskSimpleSelector",!1).strarray("valueBlacklistMaskSimpleSelector",!1).str("valueMaskIgnoreAttribute",!1).bool("maskTitle",!1).strarray("encryptionList",!1).strarray("encryptionClassList",!1).strarray("valueEncryptById",!1).strarray("valueEncryptByClass",!1).str("externalIdAttr",!1).bool("externalIdUseGbId",!1).str("valueMaskingCharNumericLike",!1).str("valueMaskingCharNumeric",!1).strarray("valueMaskByCategories",!1).bool("dontMaskAutocompletePassword",!1).str("domMaskingChar",!1).str("valueMaskingChar",!1).str("attributeMaskingChar",!1).str("ccMaskingChar",!1).str("vocMaskingChar",!1).str("titleMaskingChar",!1).str("domEncryptorMaskingChar",!1).str("urlMaskingChar",!1).str("queryMaskingChar",!1).str("formValidationMaskingChar",!1).strarray("valueCensorPrefixBySelector",!1).num("valueCensorUnmaskedSuffixLength",!1).str("valueCensorPrefixChar",!1).bool("useIdSelectors",!1).bool("useNameInFormSelectors",!1).bool("preferNamesInFormSelectors",!1).strarray("noIdSelectorsForClassNames",!1).strarray("noIdSelectorsForIDs",!1).strarray("noIdSelectorsForAttrs",!1).bool("noMetaTagInSelector",!1).bool("SCIntegration",!1).strarray("SCIntegrationURLsContainList",!1).strarray("SCIntegrationKeyList",!1).bool("SCIntegrationCheckPayload",!1).bool("SCIntegrationAjaxListen",!1).bool("SCIntegrationInterceptSendBeacon",!1).bool("interceptThirdPartyAttributes",!1).strarray("interceptThirdPartyAttributesDefaultUrlsPatterns",!1).bool("interceptABTesting",!1).bool("interceptAdobeABEvent",!1).str("abTestingGlobalObject",!1).bool("enableOptimizelyIntegration",!1).bool("enableABTastyIntegration",!1).bool("enableAdobeAnalyticsIntegration",!1).str("adobeRsid",!1).str("adobeEVarNumber",!1).num("adobeAPIMaxAttempts",!1).bool("enableGoogleAnalyticsIntegration",!1).numarray("googleDimensionIndex",!1).strarray("googleMeasurementId",!1).num("googleAPIMaxAttempts",!1).strarray("googleDropdownClassList",!1).strarray("ignoreDomUpdateOnClickClassList",!1).strarray("toggleTimestampOnClickClassList",!1).bool("interceptGAABTesting",!1).bool("reportAllResourcesLoad",!1).bool("reportExternalResources",!1).strarray("ignoreReportResourcesByTagNames",!1).num("reportMaxConcurrency",!1).num("reportTimingBetweenBeacons",!1).strarray("recordMFEAsAjax",!1).num("recordMFEAsAjaxTimeout",!1).str("externalReporterObject",!1).bool("debugMode",!1).bool("traceMode",!1).bool("suppressMouseMovesDebug",!1).bool("visualNameDebug",!1).num("maxVisualNamelookUp",!1).bool("timingMode",!1).num("minDragPixels",!1).bool("reportVisualNames",!1).num("titleCharsLimit",!1).num("maxTimeForIdleEvent",!1).num("validationValueForRenderTime",!1).bool("reportDebugInfo",!1).strarray("reportEventsImmediately",!1).str("externalIdByClassesOnPrefix",!1).bool("recordSwipe",!1).bool("supportNativeAutoComplete",!1).bool("recordEnterForInputs",!1).bool("recordTypingAll",!1).strarray("recordTypingForAttrs",!1).strarray("recordTypingForClasses",!1).strarray("recordTypingForIDs",!1).strarray("replayTypingBySelector",!1).num("mmMaxMovesWithUnload",!1).num("mmMaxMovesInEventNoTimes",!1).num("mmMaxMovesInEventWithTimes",!1).num("mmMinStallingMoveTime",!1).num("mmMaxInMemoryMoves",!1).bool("mmDebug",!1).bool("ignoreSelectorOnMouseMove",!1).num("mhDeepLevel",!1).num("mhMaxListSize",!1).num("mhMaxInMemeoryHovers",!1).bool("mhDebug",!1).num("minStallingScrollTime",!1).bool("scrollDebug",!1).bool("clsDebug",!1).num("clsDebugCharsLimit",!1).num("clsDebugMaxReports",!1).bool("disable3rdPartyInterceptClsDebug",!1).bool("netgearSendDebugInfo",!1).bool("reportFailures",!1).num("maxFailedBeaconCount",!1).func("failedBeaconCountBreachCallback",!1).bool("domRecordEnabled",!1).bool("recordShadowDom",!1).bool("domRecordInnerBody",!1).bool("recordNonNativeShadowAsElementContainer",!1).strarray("renderSlotsInCustomElements",!1).strarray("forceShadowDomTrackingWhenUrlContains",!1).bool("domOmitInvisibleElements",!1).strarray("domNewPageTriggers",!1).strarray("pageSnapshotTriggers",!1).num("domStartAfter",!1).strarray("snapshotImmediatePages",!1).num("minVisibleElementOpacity",!1).num("domUpdateEveryWsMsgIn",!1).bool("isWsSupportOpener",!1).bool("isWsSendCustom",!1).bool("domForceUpdateOnClick",!1).bool("flushEventsOnClick",!1).num("domRecordEnabledByChance",!1).bool("saveChancesByCookie",!1).str("domReportURI",!1).bool("domCompress",!1).strarray("domNewPageAjaxTriggers",!1).strarray("domIgnoredFormElements",!1).str("ignoreClicksInsideElement",!1).bool("domIncludeSelectorOnUpdate",!1).bool("domIncludeCSSSelector",!1).bool("semiDomEnabled",!1).bool("domRecordCssRules",!1).bool("domRecordCssProps",!1).bool("domCaptureCssText",!1).num("domCaptureCssTextInterval",!1).num("domCaptureCssTextTermination",!1).strarray("domTrackStyleChanges",!1).num("domTrackStyleChangesInterval",!1).strarray("domCompressRepetitiveElements",!1).bool("fixChromeBackgroundClipCSS",!1).bool("recordAnimation",!1).bool("domPreciseStyleSheetCloning",!1).bool("removeCustomElementsDefinitionFromStyle",!1).bool("domRecordStyleAttributes",!1).bool("domThrottleChanges",!1).strarray("ignorableElementIds",!1).bool("recordAjaxCallsAnyway",!1).bool("truncateEventsWithUnload",!1).bool("mmRecordTimes",!1).num("mmDiluteMinPixels",!1).bool("reportHybrid",!1).str("customTLD",!1).num("enabledByChance",!1).strarray("domCloningBannedIds",!1).strarray("domCloningBannedClasses",!1).str("reportEncoding",!1).bool("reportCompress",!1).bool("cordovaSdkReporting",!1).str("maskingMode",!1).str("valueMaskingMode",!1).strarray("valueMaskNonEditableInputTypes",!1).str("domMaskingMode",!1).str("encryptionMode",!1).str("valueEncryptionMode",!1).strarray("reportAddUriParams",!1).bool("recordConsoleErrors",!1).num("errorMessageMaxSize",!1).strarray("domMaskContentById",!1).strarray("domBlacklistMaskContentById",!1).strarray("domWhitelistMaskContentById",!1).strarray("domMaskContentByClass",!1).strarray("domBlacklistMaskContentByClass",!1).strarray("domWhitelistMaskContentByClass",!1).strarray("domOmitById",!1).strarray("domOmitByClass",!1).strarray("domOmitObjectElementsByType",!1).strarray("domOmitBySelector",!1).strarray("domMaskOmitById",!1).strarray("domMaskOmitByClass",!1).strarray("domIgnoreChangesById",!1).strarray("domIgnoreChangesByClass",!1).strarray("domIgnoreChangesByTag",!1).strarray("domMaskedAttributes",!1).bool("domMaskDataAttributes",!1).strarray("domMaskAttributesByTag",!1).str("domMaskIgnoreAttribute",!1).strarray("domMaskSimpleSelector",!1).strarray("domBlacklistMaskSimpleSelector",!1).strarray("domWhitelistMaskSimpleSelector",!1).strarray("domMaskContentByRegex",!1).strarray("domRegexPatternForMasking",!1).str("domRegexMaskingChar",!1).strarray("domOmitAnalyticsIframes",!1).strarray("tagsToCheckLength",!1).num("tagMaxLength",!1).strarray("domEncryptById",!1).strarray("domEncryptByClass",!1).str("encryptionPublicKey",!1).str("encryptionKeyId",!1).num("encryptionTimeout",!1).bool("reportPreferSendBeaconAPI",!1).bool("reportLastPageEventsViaBeaconAPI",!1).num("struggleUncompletedFormMinFields",!1).bool("domKeepComments",!1).str("domKeepScriptMatching",!1).num("domExpireSnapshotAfter",!1).bool("sendDocumentLoadAfterSnapshotExpired",!1).num("clearExpiredEventsAfter",!1).bool("clearExpiredBeacons",!1).bool("reportCorsForceSafelistedHeaders",!1).bool("reportDisableCors",!1).bool("xhrBypassOnReadyStateChange",!1).bool("enableSessionizingByCors",!1).bool("useFingerprint",!1).num("fingerprintApiTimeout",!1).num("fingerprintIncludeUniqueIdentifier",!1).bool("fingerprintSupportReturningUser",!1).num("thirdPartyCookieDetectionTimeout",!1).str("reportEndpoint",!1).num("incognitoDetectionTimeout",!1).bool("checkOptOutUsingCors",!1).strarray("reportCorsTakeNativeCookies",!1).str("clsByNativeCookie",!1).str("clsByAdobe",!1).num("visitorDaysToExpiration",!1).bool("resetCorsOnNativeCookieChange",!1).strarray("maskCookies",!1).strarray("maskQueryParameters",!1).strarray("maskUrlPath",!1).strarray("reportStorageBackedForUA",!1).bool("reportViaTopWindow",!1).bool("reportAddUriParamAPI",!1).bool("storageBackedReporting",!1).bool("externalReporting",!1).bool("domOmitAfterUnload",!1).bool("duplicateIdCheck",!1).strarray("domPartialWhenLocationContains",!1).strarray("domFilterAttributes",!1).strarray("domIgnoreAttributes",!1).bool("domIgnoreSameValueAttributesModification",!1).num("domIgnoreLargeMutationsChunks",!1).strarray("domRemoveAttributes",!1).bool("removeUnnamedAttributesByTags",!1).bool("domRecordAbsoluteResourcesURLs",!1).strarray("protocolsToSwitch",!1).bool("domRemoveDuplicatedSlashResourcesUrl",!1).strarray("blackoutWhenLocationContains",!1).bool("iframesAutoInject",!1).bool("injectIframesAboutBlank",!1).bool("searchIframesInShadowDom",!1).str("iframesAutoInjectMode",!1).bool("iframesRecordEnabled",!1).bool("framesetRecordEnabled",!1).bool("htmlObjectRecordEnabled",!1).num("iframesPageUpdateDebounceMs",!1).bool("iframeUseIndependentConfigs",!1).str("iframesParentOrigin",!1).num("iframesHandshakeTimeout",!1).bool("iframeWaitForHandshake",!1).bool("iframesDebugEnabled",!1).bool("iframesSkipHidden",!1).bool("iframesDisableNotifications",!1).bool("iframesDirectChannel",!1).num("iframeVisibilityMaxLevels",!1).strarray("iframesDirectChannelWhenUriContains",!1).strarray("iframesSkipWhenLocationContains",!1).strarray("iframesBlackoutWhenLocationContains",!1).bool("blackoutIdleReporting",!1).bool("reportIncludeReferrer",!1).str("mobileHybridId",!1).bool("interceptAjax",!1).bool("interceptFetch",!1).bool("ajaxDebug",!1).bool("ajaxHashRecurrentUrls",!1).bool("ajaxResBodyOctetTypeFix",!1).str("ajaxRecordMetadata",!1).str("ajaxRecordResponseBody",!1).num("ajaxResponseBodyMaxLength",!1).num("ajaxRequestBodyMaxLength",!1).num("maxAjaxDownloadTime",!1).str("ajaxRecordResponseHeaders",!1).str("ajaxRecordRequestBody",!1).str("ajaxRecordRequestHeaders",!1).str("ajaxRecordStats",!1).strarray("ajaxStatsQueryParams",!1).num("ajaxRecordSessionLimit",!1).bool("ajaxCaptureRequestCookie",!1).num("ajaxTimeoutForResourceData",!1).objarray("ajaxMaskRequestBody",!1).objarray("ajaxMaskResponseBody",!1).bool("reportCreateSubSessionCookie",!1).bool("resourcesRecordEnabled",!1).bool("resourceRecordCssOnly",!1).bool("resourcesRecordAllowCors",!1).num("resourcesRecordCount",!1).num("resourcesRecordChance",!1).bool("electResourcesOnClear",!1).strarray("resourceIgnoreWhenUrlContains",!1).bool("resourceTimingRecordEnabled",!1).num("resourceTimingRecordEnabledByChance",!1).bool("versionResources",!1).num("versionResourcesEnabledByChance",!1).num("webVitalsReportTimeout",!1).num("webVitalsMaxFCP",!1).num("webVitalsMaxLCP",!1).bool("resourceTimingRecordAjax",!1).num("resourceBufferCheckTime",!1).num("maxResourcesBeforeFlush",!1).num("resourceBufferIncreaseBy",!1).bool("isCheckResourceBuffer",!1).bool("clientAttributesEnabled",!1).bool("ClientAttributesOnUserInteraction",!1).ignore("triggerActions",!1).bool("pageAttributesEnabled",!1).bool("allowMultiplePageNames",!1).num("clientAttributeMaxLength",!1).num("clientAttributeFuseWaitTime",!1).num("clientAttributeMaxMutations",!1).bool("domIE11ForceMutationObserver",!1).bool("domForceIEMutationEventsHandler",!1).bool("domForceMutationEventsHandler",!1).str("detectorTagId",!1).bool("cookieAssignFQDN",!1).num("cookieTLDSegmentCount",!1).bool("enableSecureCookie",!1).str("sessionIdByQueryParam",!1).str("visitorIdByQueryParam",!1).str("clseByQueryParam",!1).bool("decodeSessionDataQueryParams",!1).str("domIdentifyingAttribute",!1).bool("sendStateInfo",!1).bool("supportRemoteClientConfig",!1).bool("remoteClientConfigAllowBlank",!1).bool("supportGlassvoxRemoteConfigOnAllPages",!1).bool("delayRecording",!1).num("debounceScrolls",!1).num("debounceScrollReach",!1).bool("domHashTokens",!1).bool("ccAutoMask",!1).bool("ccAutoMaskByContent",!1).bool("ccAutoMaskNumberInString",!1).str("ccAutoMaskMode",!1).strarray("ccAutoMaskFields",!1).num("ccAutoMaskKeepLastDigits",!1).bool("ccForceMaskContainer",!1).str("domTokenizationVersion",!1).strarray("captureGlobalObjects",!1).str("dataLayerPath",!1).strarray("dataLayerBlockList",!1).bool("dataLayerCaptureEmptyStrings",!1).bool("captureDataLayerArrayPushes",!1).str("dataLayerArrayName",!1).bool("dedupeDataLayerValues",!1).bool("collectDataLayerOnlyOnFirstPage",!1).bool("sendDatalayerPushUsingCustomEvent",!1).bool("dataLayerValuesBlockList",!1).strarray("dataLayerIncludeList",!1).strarray("dataLayerValuesIncludeList",!1).bool("captureGlobalObjectsEmptyStrings",!1).bool("captureGlobalObjectsOnSegmentChange",!1).bool("useFullPathForObjectCapturing",!1).bool("domIEForceStyleCopyByRules",!1).bool("domFormValidationAllowFormLevel",!1).num("domFormValidationTraverseParentsForVisibility",!1).strarray("domFormValidationTextByRGB",!1).bool("html5FormValidation",!1).bool("jQueryFormValidationEnabled",!1).bool("domFormAnalysisReporting",!1).bool("removeDuplicateValidationErrors",!1).bool("maskFormValidationErrors",!1).strarray("segmentationTriggerBySimpleSelector",!1).strarray("segmentationLabelBySimpleSelector",!1).str("segmentationLabelByAttribute",!1).bool("segmentationLabelByInnerText",!1).str("segmentationTitleByAttribute",!1).bool("segmentationTitleByInnerText",!1).bool("segmentationAlwaysSendTitleChange",!1).str("segmentationPrefix",!1).str("segmentationIgnoreWhenLocationContains",!1).bool("segmentationParallelMechanism",!1).str("segmentationInitialLabelSelector",!1).bool("segmentationForceTryEnterSegment",!1).bool("segmentationForceAddingListeners",!1).bool("forceLogicalSegmentationOnHash",!1).num("waitForSegmentRender",!1).num("waitForSegmentTitle",!1).bool("ignoreSegmentLoadEnd",!1).bool("sendSegmentTitle",!1).bool("recordSpaLoadTime",!1).num("spaLoadTimeLimit",!1).bool("collectStruggles",!1).bool("collectFormStruggles",!1).strarray("formStruggleZigzagIgnoreFormsWithText",!1).bool("formStruggleZigzagIgnorePrepopulated",!1).strarray("formStruggleZigzagFormSelectors",!1).num("struggleMaxLongFocusTime",!1).num("struggleRageClickInterval",!1).num("struggleRageClickMinCount",!1).strarray("struggleRageClickIgnoreBySelector",!1).strarray("struggleDeadClickIgnoreBySelector",!1).strarray("struggleDeadClickIgnoreByTagNames",!1).bool("struggleCaptureDeadClick",!1).num("struggleDeadClickInterval",!1).bool("struggleCaptureDeadClickOnDisabledElements",!1).strarray("struggleRightClickIgnoreBySelector",!1).strarray("struggleRightClickIgnoreByTagNames",!1).bool("struggleCaptureRightClick",!1).num("struggleRightClickInterval",!1).bool("struggleCaptureErrorClick",!1).num("struggleErrorClickInterval",!1).strarray("struggleErrorClickBlacklist",!1).bool("ajaxStruggleIgnoreCancel",!1).strarray("ajaxStruggleExcludedUrls",!1).bool("struggleCaptureAjaxErrors",!1).bool("struggleCaptureBlankPage",!1).str("struggleCaptureBlankPageTargetsSelector",!1).bool("domTamperingDetectionEnabled",!1).num("domTamperingGraceTime",!1).strarray("domTamperingIgnorePages",!1).strarray("domTamperingIgnorableTags",!1).bool("devToolsDetectionEnabled",!1).str("devToolsDetectionMessage",!1).num("devToolsDetectionWorkerTimeout",!1).num("devToolsDetectionCallbackTimeout",!1).bool("devToolsDebuggerBasedDetection",!1).bool("domThrottleChanges",!1).bool("domThrottleChangesIE11Only",!1).num("visualNameLimit",!1).num("maxRecordedCountPerError",!1).num("maxRecordedCountPerWarning",!1).num("maxRecordedCountPerInfo",!1).num("maxRecordedCountPerCSP",!1).bool("recordCSPViolations",!1).bool("recordConsoleWarn",!1).bool("recordConsoleInfo",!1).strarray("recordConsoleWarnWhitelist",!1).strarray("recordConsoleInfoWhitelist",!1).strarray("recordConsoleErrorWhitelist",!1).strarray("recordCSPWhitelist",!1).strarray("recordConsoleWarnBlacklist",!1).strarray("recordConsoleInfoBlacklist",!1).strarray("recordConsoleErrorBlacklist",!1).strarray("recordCSPBlacklist",!1).bool("reinstateNativeMutationObserver",!1).bool("initialObserverFirst",!1).strarray("importNodeWhenUrlContains",!1).bool("initialObserverFirst",!1).bool("observeRightClick",!1).bool("useExtension",!1).str("forceRenderingFixForUA",!1).strarray("forceRenderingFixForMultipleUA",!1).bool("pageNameResolvingEnabled",!1).strarray("pageNameResolvingByElements",!1).num("domFuseDuration",!1).num("domFuseElementCount",!1).num("domFuseDurationIE",!1).num("domFuseElementCountIE",!1).strarray("removeBase64ImageDataTagNames",!1).num("delayDomMutationEvent",!1).strarray("domDelayAddedNodesByClass",!1).num("handleAttributeMutationsAsChunks",!1).bool("ignoreMutationsOnNotAttachedElements",!1).bool("startMutationObserverOnLoad",!1).bool("removeBase64Fonts",!1).bool("enableAdoptedCss",!1).bool("adoptedStylesRemoveFontsFace",!1).strarray("ignoreAdoptedForElements",!1).bool("checkForHtmlOnly",!1).strarray("snapshotWaitForElement",!1).bool("snapshotWaitForElementMustShown",!1).bool("snapshotAsync",!1).num("visitorAsyncMaxChunkTime",!1).strarray("allowWaitForElementsUrls",!1).num("delaySnapshotAfterElementFound",!1).num("waitForElementTime",!1).num("minAreaTocountElementAsShown",!1).bool("checkVisibility",!1).num("reTakeSnapshotAfterTime",!1).str("gbconsoledomain",!1).bool("collectVoc",!1).bool("sendTopURL",!1).ignore("vocObjectMap").bool("collectUsabillaVoc",!1).bool("waitForUsabillaObj",!1).str("interceptUsabillaUrl",!1).bool("decodeUri",!1).bool("decodeUri",!1).bool("isDetectorDom",!1).bool("enableSessionCamApi",!1).bool("enableEncodeSnapshotReferrer",!1).bool("passTabIdViaWinName",!1).num("infiniteScrollDetectionWaitTime",!1).num("infiniteScrollDetectionGrowElementsCount",!1).num("infiniteScrollDetectionGrowPixels",!1).bool("setSelectorToAttributes",!1).bool("recordCanvas",!1).num("canvasQuality",!1).bool("initDetectorOnInteractive",!1).bool("recordClipboardEvents",!1).bool("recordClipboardContent",!1).num("clipboardMaxValue",!1).num("clipboardMaxDuration",!1).bool("allowCookies",!1).bool("disablePointerEvents",!1).bool("captureQueryStringParamsOnSegmentChange",!1).bool("captureQueryStringParamsAsDataOnSegmentChange",!0).strarray("suppressEventsAfterSnapshotTimeout",!1).bool("forceHookFetch",!1).func("onReadyCallback",!1).func("onIntegrationCallback",!1).func("onFail",!1).bool("dontAttachBlurListenerWithCapture",!1).bool("shouldReadClientAttributeOnCors",!1).bool("noStorageRecDisable",!1).bool("interceptDialogShowModal",!1).bool("setDefaultPssn",!1).bool("recordOrientation",!1).num("resizeDebounceTime",!1).bool("addBaseDomainToRelativeUrls",!1).bool("validateUrls").bool("validateCookies").bool("interceptAdobeSdkVariables",!1).num("minValidWindowSize",!1).bool("ignoreHeightRatio",!1).num("acquirePerformanceTimingTimeout",!1).bool("performanceDebugEnabled",!1).bool("domChildListUpdateExistingElements",!1).strarray("domChildListUpdateExistingElementsList",!1).bool("autoCreateDoctype",!1).build();function Zh(e){return Zh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zh(e)}function Qh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eg(r.key),r)}}function $h(e,t,n){return t&&Qh(e.prototype,t),n&&Qh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function eg(e){var t=function(e,t){if("object"!=Zh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Zh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Zh(t)?t:t+""}var tg=$h((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));function ng(e){return ng="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ng(e)}function rg(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ig(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function og(e){return function(e){if(Array.isArray(e))return ag(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ig(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ig(e,t){if(e){if("string"==typeof e)return ag(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ag(e,t):void 0}}function ag(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function sg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cg(r.key),r)}}function cg(e){var t=function(e,t){if("object"!=ng(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ng(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ng(t)?t:t+""}tg.parse=function(e,t,n,r,o){var i=function(e){return"function"!=typeof String.prototype.trim?e.replace(/^\s+|\s+$/g,""):e.trim()};e=e||{};for(var a=null!=n?n.split(t):[],s=0;s<a.length;s++){var c=a[s].split("=");if(2===c.length){var u,l=i(c[0]),d=i(c[1]),f=e[l.toLowerCase()];f?void 0===(u=f.parser)&&(u=Vh.toString):u=Vh.toString;try{r[l]=u(d)}catch(e){o&&o("'"+l+"': "+e)}}}};var ug=function(){return function(e,t,n){return t&&sg(e.prototype,t),n&&sg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(n,r,o){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),H.detectorScript){var i=H.detectorScript.getAttribute("data-clsdelim")||";",a=H.detectorScript.getAttribute("data-clsconfig");a&&tg.parse(Jh,i,a,t,(function(){}))}var s=n._cls_config||n._config||{};if(n&&n!==n.top&&n._cls_config_forced&&n._cls_config_forced.iframeUseIndependentConfigs){var c=L.shallowExtend({},n._cls_config_forced);this._copyOwnProperties(s),this._copyOwnProperties(c)}else this._copyOwnProperties(s),this._copyOwnProperties(n._cls_config_forced);for(var u=["glassvoxOpen","glassvoxResponse","glassvoxClose","glassvoxComplete"],l=0;l<u.length;l++)t.reportEventsImmediately.indexOf(u[l])<0&&t.reportEventsImmediately.push(u[l]);this._applyDefaultProtocols(),this._applyBackwardComp(),t.reportAddUriParamAPI&&(t.reportAddUriParams=t.reportAddUriParams||[],t.reportAddUriParams.push("api")),t.visualName&&t.visualName.eventsToCalcDistance&&t.visualName.eventsToCalcDistance.length&&(t.visualName.eventsToCalcDistance=L.immutableSet.apply(null,t.visualName.eventsToCalcDistance)),this._determineStorageBackedReporting(n),this._handleExternalReporting(n),this._copyOwnProperties(o.config,o.override)}),[{key:"_checkSetNative",value:function(){return!!Set.toString().includes("[native code]")}},{key:"_applyDefaultProtocols",value:function(){var e=["file://","file:///","capacitor://","ionic://"];if(this._checkSetNative())t.protocolsToSwitch=og(new Set([].concat(og(t.protocolsToSwitch),e)));else{var n,r=[],o=rg(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;r.includes(i)||r.push(i)}}catch(e){o.e(e)}finally{o.f()}if(t.protocolsToSwitch&&Array.isArray(t.protocolsToSwitch)){var a,s=rg(t.protocolsToSwitch);try{for(s.s();!(a=s.n()).done;){var c=a.value;r.includes(c)||r.push(c)}}catch(e){s.e(e)}finally{s.f()}}t.protocolsToSwitch=r}}},{key:"_copyOwnProperties",value:function(e,n){var r;for(r in n=n||function(e,t){return{key:e,value:t}},e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=n(r,e[r],t);"googleDimensionIndex"!==o.key&&"googleMeasurementId"!==o.key||o.value instanceof Array||(o.value=[].concat(o.value)),"visualName"===o.key?t[o.key]=L.visualNameConfigMerge(t[o.key],e[o.key]):t[o.key]=o.value}}},{key:"_applyBackwardComp",value:function(){function n(){for(var e=0;e<arguments.length;e++)if(arguments[e]&&arguments[e].length)return!0;return!1}t.domPreciseStyleSheetCloning=t.domPreciseStyleSheetCloning||!!t.domIEForceStyleCopyByRules,t.reportPostRetry=t.reportPostRetry||!!t.postRetry,void 0!==t.decodUri&&(t.decodeUri=t.decodUri),(void 0!==e.g&&e.g===e.g.top&&t.maskingMode||n(t.domMaskContentById,t.domMaskContentByClass,t.domMaskSimpleSelector,t.maskList,t.maskClassList))&&(n(t.domBlacklistMaskContentById,t.domWhitelistMaskContentById,t.domBlacklistMaskContentByClass,t.domWhitelistMaskContentByClass,t.domBlacklistMaskSimpleSelector,t.domWhitelistMaskSimpleSelector,t.maskBlacklistValueById,t.maskWhitelistValueById,t.maskBlacklistValueByClass,t.maskWhitelistValueByClass)&&(L.isIE()?console.log("Bad configuration mix detected - combining old and new masking settings! To ensure compatibility, the deprecated masking version will be applied."):console.log("%c Bad configuration mix detected - combining old and new masking settings! To ensure compatibility, the deprecated masking version will be applied.","color: white; background: red"),t.isMixMasking=!0),t.valueMaskingMode=t.maskingMode?t.maskingMode:t.valueMaskingMode||H.censorMode.BlackList,t.domBlacklistMaskContentById=t.domMaskContentById||[],t.domWhitelistMaskContentById=t.domMaskContentById||[],t.domBlacklistMaskContentByClass=t.domMaskContentByClass||[],t.domWhitelistMaskContentByClass=t.domMaskContentByClass||[],t.domBlacklistMaskSimpleSelector=t.domMaskSimpleSelector||[],t.domWhitelistMaskSimpleSelector=t.domMaskSimpleSelector||[],t.maskBlacklistValueById=t.maskList||[],t.maskWhitelistValueById=t.maskList||[],t.maskBlacklistValueByClass=t.maskClassList||[],t.maskWhitelistValueByClass=t.maskClassList||[]),t.valueMaskingMode=t.valueMaskingMode||H.censorMode.WhiteList,t.domPreciseStyleSheetCloning=t.domPreciseStyleSheetCloning||!!t.domIEForceStyleCopyByRules,t.reportPostRetry=t.reportPostRetry||!!t.postRetry,t.forceRenderingFixForMultipleUA=0===t.forceRenderingFixForMultipleUA.length&&void 0!==t.forceRenderingFixForUA?[t.forceRenderingFixForUA]:t.forceRenderingFixForMultipleUA}},{key:"_determineStorageBackedReporting",value:function(e){var n,r=t.reportToStorageAfterUnload,o=t.reportPreferSendBeaconAPI&&"function"!=typeof navigator.sendBeacon;if(!r&&t.reportStorageBackedForUA&&!o)for(n=0;n<t.reportStorageBackedForUA.length;n++)try{if(new RegExp(t.reportStorageBackedForUA[n],"gi").exec(e.navigator.userAgent)){r=!0;break}}catch(e){}r&&(t.storageBackedReporting=!0)}},{key:"_handleExternalReporting",value:function(e){t.externalReporterObject&&e[t.externalReporterObject]&&(t.externalReporting=!0,t.reportDisableCors=!0,t.reportUseWorker&&(t.reportUseWorker=!1))}}])}();function lg(e){return lg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lg(e)}function dg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pg(r.key),r)}}function fg(e,t,n){return t&&dg(e.prototype,t),n&&dg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function pg(e){var t=function(e,t){if("object"!=lg(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=lg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lg(t)?t:t+""}var mg=fg((function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._onAjaxEnd=function(e){e.url.indexOf(o._options.interceptUsabillaUrl)>-1&&e.status<400&&e.status>0&&setTimeout((function(){o._window.usabilla_live&&o._startListen()}),100)},this._startListen=function(){if(!o._isListen){o._isListen=!0,o._originUsabillaFunc=o._window.usabilla_live,o._window.usabilla_live(o._wantedEventType,o._handleUsabillaEvent);var e=o;o._window.usabilla_live=function(t,n){if(t!==e._wantedEventType)return e._originUsabillaFunc.apply(null,arguments);e._lastCb=n}}},this._handleUsabillaEvent=function(e,t,n,r,a){try{if("Campaign:Page Switch"===t||"Feedback:Success"===t){var s={source:"usabilla"};"Feedback:Success"===t?s.userData=a||{}:"Campaign:Page Switch"===t&&(s.userData=a.data||{},s.userData.id=n),a.type&&(s.userData.type=a.type),s.userData.action=t,o._bus.emit("vocGetData",s)}if(o._lastCb){for(var c=arguments.length,u=new Array(c>5?c-5:0),l=5;l<c;l++)u[l-5]=arguments[l];o._lastCb.apply(null,u)}}catch(e){i.error("something went wrong while tried to parse usabilla event")}},this._window=t,this._bus=n,this._options=r,this._originUsabillaFunc=void 0,this._lastCb=void 0,this._isListen=!1,this._wantedEventType="setEventCallback",t.usabilla_live?this._startListen():(r.waitForUsabillaObj&&L.waitForObjDefined(t,"usabilla_live",this._startListen),r.interceptUsabillaUrl&&n.on("ajax:end",this._onAjaxEnd))}));function hg(e){return hg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hg(e)}function gg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vg(r.key),r)}}function yg(e,t,n){return t&&gg(e.prototype,t),n&&gg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function vg(e){var t=function(e,t){if("object"!=hg(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=hg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==hg(t)?t:t+""}var bg=yg((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._handleMedalliaEvent=function(e){try{var t={source:"medallia",userData:{}};if(t.userData.Form_ID=e.detail.Form_ID,e.detail&&e.detail.Content){for(var n=0;n<e.detail.Content.length;n++){var o=e.detail.Content[n].unique_name,a=e.detail.Content[n].value;"string"!=typeof a&&"number"!=typeof a||(t.userData[o]=a)}r._bus.emit("vocGetData",t)}}catch(e){i.error("vocMedallia error: ",e),r._bus.emit("clsDebug","vocMedallia error: "+e.message)}},this._medalliaCustomJsEventName="MDigital_Submit_Feedback",this._bus=n,t.addEventListener(this._medalliaCustomJsEventName,this._handleMedalliaEvent)}));function _g(e){return _g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_g(e)}function Sg(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return wg(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wg(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function wg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Eg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Tg(r.key),r)}}function Cg(e,t,n){return t&&Eg(e.prototype,t),n&&Eg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tg(e){var t=function(e,t){if("object"!=_g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_g(t)?t:t+""}var kg=Cg((function e(t,n,r){var o=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._emitVocIdentifiers=function(){o._participatedInHandShake=!0,o._bus.emit("vocIdentifiers",{vendor:o._window._gbDataCollector.source,responseId:o._window._gbRid,surveyId:o._window._gbSid})},this._processValuesAccordingToType=function(e,t,n,r){var i;for(i=0;i<e.length;i++)r.push({a:o._convertValueAccordingToType(e[i].a,t),q:e[i].q,t:n})},this._prepareVocEventV2=function(e,t,n){var r=t.userData;for(var i in r.data=[],e)n[i]&&("email"===i?r.email=o._convertValueAccordingToType(e[i][0].a,n[i]):"id"===i?r[n[i].name]=o._convertValueAccordingToType(e[i][0].a,n[i]):o._processValuesAccordingToType(e[i],n[i],i,r.data));o._shouldSendVocEvent&&(o._shouldSendVocEvent=!1,o._bus.emit("reportVocV2",t))},this._prepareVocEvent=function(e,t,n){for(var r in e.userData)if(n[r]&&void 0===t.userData[n[r].name]){var i=o._convertValueAccordingToType(e.userData[r],n[r]);void 0!==i&&""!==i&&(t.userData[n[r].name]=i,o._shouldSendVocEvent=!0)}o._shouldSendVocEvent&&(o._shouldSendVocEvent=!1,o._bus.emit("reportVoC",t))},this._handleVocData=function(e){try{if(!(e&&e.source&&o._voaConversionMapping[e.source]))return;var t={source:e.source,userData:{}},n=o._voaConversionMapping[e.source];"qualtrics"===e.source&&window._cls_config&&window._cls_config.vocObjectMapV2?o._prepareVocEventV2(e.userData,t,n):o._prepareVocEvent(e,t,n)}catch(e){o._bus.emit("clsDebug","error handling voc data. message:"+e.message)}},this._handleVocConfiguration=function(e){if(!o._voaConversionMapping&&e.vocConfig&&(o._voaConversionMapping=e.vocConfig,o._pending.length)){var t,n=Sg(o._pending);try{for(n.s();!(t=n.n()).done;){var r=t.value;o._handleVocData(r)}}catch(e){n.e(e)}finally{n.f()}}!o._maskingChar&&e.vocMaskingChar&&(o._maskingChar=e.vocMaskingChar)},this._convertValueAccordingToType=function(e,t){if(e&&(o._shouldSendVocEvent=!0),"int"===t.type){var n=parseInt(e);if(isNaN(n))return;return n}return"bool"===t.type?"boolean"==typeof e?e:"true"===e:void 0===e?void 0:o._maskVariable(""+e,t)},this._maskVariable=function(e,t){return t.maskingRegex?js.censorValueUsingRegex(e,t.maskingRegex,o._maskingChar):e},this._checkMapToContinue=function(e){o._voaConversionMapping?o._handleVocData(e):o._pending.push(e)},this.initialize=function(){o._bus.on("newRemoteConfig",o._handleVocConfiguration),o._bus.on("vocGetData",o._checkMapToContinue),o._options.collectUsabillaVoc&&new mg(o._window,o._bus,o._options),o._options.collectMedalliaVoc&&new bg(o._window,o._bus)},this._window=t,this._bus=n,this._options=r,this._voaConversionMapping=r.vocObjectMapInterface,this._maskingChar=r.vocMaskingChar,this._pending=[],this._shouldSendVocEvent=!1,this._window._gbDataCollector){if(!this._window._gbRid||!this._window._gbSid)return void this._bus.emit("clsDebug","Info: Missing _gbRid / _gbSid. vocIdentifiers event will not be sent");t!==t.top?(this._bus.on("iframesHandshakeDone",this._emitVocIdentifiers),this._participatedInHandShake=!1):this._bus.once("init:loaded",this._emitVocIdentifiers),this._bus.on("event:unload",(function(){o._participatedInHandShake||o._bus.emit("clsDebug","vocIdentifiers event did not receive the parent window cls_s")}))}}));function Ig(e){return Ig="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ig(e)}function Ag(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xg(r.key),r)}}function Pg(e,t,n){return t&&Ag(e.prototype,t),n&&Ag(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function xg(e){var t=function(e,t){if("object"!=Ig(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ig(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ig(t)?t:t+""}var Rg=Pg((function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._sendCustomDataEvent=function(e,t){e&&"string"==typeof e&&o._events.emit("customEvent",{name:""+e,val:""+t})},this._startSession=function(){o._stoppable&&o._stoppable.start()},this._endSession=function(e){o._stoppable&&o._stoppable.stop()&&(o._detector.invalidateSession(),e&&o._stoppable.start())},this._sessionId=function(){return o._detector._sessionId},this._registerFields=function(){},this._registeredFieldsGetValue=function(){return""},this._getFieldValue=function(){return""},this._getSessionCamUserId=function(){return""},this._createVirtualPageLoad=function(e){if("string"!=typeof e)return!1;0===o._virtualPageLoadStack.length&&o._virtualPageLoadStack.push(o._detector.page.url);var t=L.currentTimestamp(),n=o._virtualPageLoadStack[o._virtualPageLoadStack.length-1];o._events.emit("segmentChanged",{type:"path",current:e,last:n,lastDwell:t-o._lastTimeStamp}),o._virtualPageLoadStack.push(e),o._lastTimeStamp=t},this._closeVirtualPage=function(e){var t,n=L.currentTimestamp(),r=o._virtualPageLoadStack[o._virtualPageLoadStack.length-1];o._virtualPageLoadStack.length<=1||(e?(t=o._virtualPageLoadStack[0],o._virtualPageLoadStack=[]):(o._virtualPageLoadStack.pop(),t=o._virtualPageLoadStack[o._virtualPageLoadStack.length-1]),o._events.emit("segmentChanged",{type:"path",current:t,last:r,lastDwell:n-o._lastTimeStamp}),o._lastTimeStamp=n)},this._detector=t,this._stoppable=n,this._events=r,this._virtualPageLoadStack=[],this._lastTimeStamp=L.currentTimestamp(),this.sendCustomDataEvent=this._sendCustomDataEvent,this.startSession=this._startSession,this.endSession=this._endSession,this.sessionId=this._sessionId,this.registerFields=this._registerFields,this.registeredFieldsGetValue=this._registeredFieldsGetValue,this.getFieldValue=this._getFieldValue,this.getSessionCamUserId=this._getSessionCamUserId,this.createVirtualPageLoad=this._createVirtualPageLoad,this.closeVirtualPage=this._closeVirtualPage}));function Og(e){return Og="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Og(e)}function Mg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jg(r.key),r)}}function Ng(e,t,n){return t&&Mg(e.prototype,t),n&&Mg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function jg(e){var t=function(e,t){if("object"!=Og(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Og(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Og(t)?t:t+""}var Dg=Ng((function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getSelectorInfo=function(e){if(!o._enabled)return H.encoding.rootCssSelector;try{if(!(e instanceof Element))return;for(var t,n,r=[];e.nodeType===Node.ELEMENT_NODE&&"HTML"!==e.nodeName;){var a=e.nodeName.toLowerCase();if(e.id){n="#"+e.id,r.push(n);break}n=a;var s=e,c=1,u=!0,l=!1;if(s.previousElementSibling)for(;s=s.previousElementSibling;)c++,s.nodeName.toLowerCase()===n&&(l=!0,e.className!==s.className&&e.className||(u=!1));else if(s.nextElementSibling)for(;s=s.nextElementSibling;)s.nodeName.toLowerCase()===n&&(l=!0,e.className!==s.className&&e.className||(u=!1));if(u){if(l&&e.className&&"function"==typeof e.className.split){var d="",f=e.className.split(" ");for(t=0;t<f.length;t++)d+="."+f[t];n+=d}}else n+=":nth-child("+c+")";r.push(n),e=L.parentNode(e)}return(r=r.reverse()).join(" > ")}catch(e){return i.error("Failed extracting CSS selector. Error "+e.message,e),o._events.emit("clsDebug","Failed extracting CSS selector. Error: "+e.message),H.encoding.rootCssSelector}},this._window=t,this._events=n,this._enabled=r}));function Lg(e){return Lg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lg(e)}function Bg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ug(r.key),r)}}function Fg(e,t,n){return t&&Bg(e.prototype,t),n&&Bg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ug(e){var t=function(e,t){if("object"!=Lg(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Lg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lg(t)?t:t+""}var Vg=Fg((function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._prepareDomEncryptionSelector=function(e,t){var n,r=[];if(e)for(n=0;n<e.length;n++)r.push("#"+e[n]);if(t)for(n=0;n<t.length;n++)r.push("."+t[n]);if(0===r.length)return null;var i=r.join(",");return o._selectorValidator.validateSelector(i)?i:null},this.isDomEncrypted=function(e,t){return t.follow(e,o._encryptionSelector)},this.encrypt=function(e){if(o._shouldFallback)return L.transformTextSegments(e,(function(){return o._maskingUtils.censorValueOf(e,null,o._domEncryptorMaskingChar)}));if(!o._encryptionUtils.isAvailable())return o._shouldFallback=!0,i.error("encryption not available, switching to fallback."),o._events.emit("clsDebug","encryption not available, switching to fallback"),L.transformTextSegments(e,(function(){return o._maskingUtils.censorValueOf(e,null,o._domEncryptorMaskingChar)}));try{return o._encryptionUtils.censorValueOf(e)}catch(t){return i.error("failed encrypting text, switching to fallback: "+t.message,t),o._events.emit("clsDebug","Error: failed encrypting text. Switching to fallback"),o._shouldFallback=!0,L.transformTextSegments(e,(function(){return o._maskingUtils.censorValueOf(e,null,o._domEncryptorMaskingChar)}))}},this.createContextUpdater=function(e){var t=o,n={},r=[];function i(e,t){r.push(e),t.encryptText=e}return{onStart:function(r,o){if(i(!t._unEncryptableTags[r.tagName]&&t.isDomEncrypted(r,at.SELF_OR_ANY_PARENT),o),r.querySelectorAll){var a=t._encryptionSelector;if(a){var s,c=r.querySelectorAll(a);for(s=0;s<c.length;s++)n[e.idOf(c[s])]=!0}}},onEnterElement:function(o,a){var s=r[r.length-1],c=e.idOf(o);if(n[c]){var u=!t._unEncryptableTags[o.tagName];if(u!==s)return i(u,a),!0}return!(!s||!t._unEncryptableTags[o.tagName])&&(i(!1,a),!0)},onLeaveElement:function(e,t){r.pop(),t.encryptText=r[r.length-1]},onEnd:function(){n={},r=[]}}},this._options=r||{},this._selectorValidator=new Ms(t),this._encryptionSelector=this._prepareDomEncryptionSelector(r.domEncryptIds,r.domEncryptClasses),this._unEncryptableTags=L.immutableSet("TITLE","SCRIPT"),this._encryptionUtils=n,this._maskingUtils=js,this._events=t,this._shouldFallback=!1,this._domEncryptorMaskingChar=r.domEncryptorMaskingChar}));function Hg(e){return Hg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hg(e)}function Wg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Gg(r.key),r)}}function zg(e,t,n){return t&&Wg(e.prototype,t),n&&Wg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gg(e){var t=function(e,t){if("object"!=Hg(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Hg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Hg(t)?t:t+""}var qg=zg((function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.CSS&&t.CSS.escape)return t.CSS.escape;t.CSS||(t.CSS={}),t.CSS.escape=function(e){if(0===arguments.length)throw new TypeError("`CSS.escape` requires an argument.");for(var t,n=String(e),r=n.length,o=-1,i="",a=n.charCodeAt(0);++o<r;)0!=(t=n.charCodeAt(o))?i+=t>=1&&t<=31||127==t||0==o&&t>=48&&t<=57||1==o&&t>=48&&t<=57&&45==a?"\\"+t.toString(16)+" ":(0!=o||1!=r||45!=t)&&(t>=128||45==t||95==t||t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122)?n.charAt(o):"\\"+n.charAt(o):i+="ï¿½";return i}}));function Kg(e){return Kg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kg(e)}function Yg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xg(r.key),r)}}function Xg(e){var t=function(e,t){if("object"!=Kg(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Kg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Kg(t)?t:t+""}var Jg=function(){return function(e,t,n){return t&&Yg(e.prototype,t),n&&Yg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.runPolyfill(t)}),[{key:"runPolyfill",value:function(e){void 0===e.Symbol?e.Symbol={iterator:"@@iterator",toStringTag:"@@toStringTag",toPrimitive:"@@toPrimitive"}:(void 0===e.Symbol.iterator&&(e.Symbol.iterator="@@iterator"),void 0===e.Symbol.toStringTag&&(e.Symbol.toStringTag="@@toStringTag"),void 0===e.Symbol.toPrimitive&&(e.Symbol.toPrimitive="@@toPrimitive"));var t=e.Symbol.iterator;void 0===Array.prototype[t]&&(Array.prototype[t]=function(){var e=0,t=this;return{next:function(){return e<t.length?{value:t[e++],done:!1}:{done:!0}}}}),void 0===String.prototype[t]&&(String.prototype[t]=function(){var e=0,t=this;return{next:function(){return e<t.length?{value:t.charAt(e++),done:!1}:{done:!0}}}}),void 0!==e.NodeList&&void 0===e.NodeList.prototype[t]&&(e.NodeList.prototype[t]=Array.prototype[t]),void 0!==e.HTMLCollection&&void 0===e.HTMLCollection.prototype[t]&&(e.HTMLCollection.prototype[t]=Array.prototype[t]),void 0===e.Promise&&function(){function t(e){var t=this;function n(e){0===t.state&&(t.state=2,t.value=e,t.notify())}t.state=0,t.value=void 0,t.deferred=[];try{e((function(e){0===t.state&&(t.state=1,t.value=e,t.notify())}),n)}catch(e){n(e)}}t.prototype.then=function(e,n){var r=this;return new t((function(t,o){r.deferred.push({onFulfilled:e,onRejected:n,resolve:t,reject:o}),r.notify()}))},t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(e){return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))},t.prototype.notify=function(){var e=this;0!==e.state&&setTimeout((function(){e.deferred.forEach((function(t){e.handle(t)})),e.deferred=[]}),0)},t.prototype.handle=function(e){var t=this;if(1===t.state)if("function"==typeof e.onFulfilled)try{var n=e.onFulfilled(t.value);e.resolve(n)}catch(t){e.reject(t)}else e.resolve(t.value);else if(2===t.state)if("function"==typeof e.onRejected)try{var r=e.onRejected(t.value);e.resolve(r)}catch(t){e.reject(t)}else e.reject(t.value)},t.resolve=function(e){return e&&"function"==typeof e.then?e:new t((function(t){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.all=function(e){return new t((function(n,r){if(0===e.length)return n([]);var o=e.length,i=new Array(e.length);function a(e){return function(t){i[e]=t,0===--o&&n(i)}}for(var s=0;s<e.length;s++)t.resolve(e[s]).then(a(s),r)}))},t.race=function(e){return new t((function(n,r){for(var o=0;o<e.length;o++)t.resolve(e[o]).then(n,r)}))},e.Promise=t}(),void 0!==e.Set&&void 0===e.Set.prototype[t]&&(e.Set.prototype[t]=function(){var e=[];this.forEach((function(t){e.push(t)}));var t=0;return{next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0}}}}),void 0!==e.Map&&void 0===e.Map.prototype[t]&&(e.Map.prototype[t]=function(){var e=[];this.forEach((function(t,n){e.push([n,t])}));var t=0;return{next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0}}}}),e.Object.entries||(e.Object.entries=function(e){for(var t=Object.keys(e),n=t.length,r=new Array(n);n--;)r[n]=[t[n],e[t[n]]];return r}),e.Object.values||(e.Object.values=function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(e[n]);return t}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),String.prototype.includes||(String.prototype.includes=function(e,t){return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=!t||t<0?0:+t,this.substring(t,t+e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e}),String.prototype.repeat||(String.prototype.repeat=function(e){if(null==this)throw new TypeError("can't convert "+this+" to object");var t=""+this;if((e=+e)!=e&&(e=0),e<0)throw new RangeError("repeat count must be non-negative");if(e==1/0)throw new RangeError("repeat count must be less than infinity");if(e=Math.floor(e),0==t.length||0==e)return"";if(t.length*e>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");var n=t.length*e;for(e=Math.floor(Math.log(e)/Math.log(2));e;)t+=t,e--;return t+=t.substring(0,n-t.length)}),String.prototype.padStart||(String.prototype.padStart=function(e,t){return e|=0,t=String(void 0!==t?t:" "),this.length>=e?String(this):((e-=this.length)>t.length&&(t+=t.repeat(e/t.length)),t.slice(0,e)+String(this))}),String.prototype.padEnd||(String.prototype.padEnd=function(e,t){return e|=0,t=String(void 0!==t?t:" "),this.length>e?String(this):((e-=this.length)>t.length&&(t+=t.repeat(e/t.length)),String(this)+t.slice(0,e))}),Array.prototype.includes||(Array.prototype.includes=function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0===r)return!1;var o=0|t,i=Math.max(o>=0?o:r-Math.abs(o),0);function a(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}for(;i<r;){if(a(n[i],e))return!0;i++}return!1}),Array.prototype.find||(Array.prototype.find=function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],o=0;o<n;){var i=t[o];if(e.call(r,i,o,t))return i;o++}}),Array.prototype.findIndex||(Array.prototype.findIndex=function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],o=0;o<n;){var i=t[o];if(e.call(r,i,o,t))return o;o++}return-1}),String.prototype.replaceAll||(String.prototype.replaceAll=function(e,t){return e instanceof RegExp?this.replace(e,t):this.split(e).join(t)}),Object.fromEntries||(Object.fromEntries=function(e){if(!e||!e[Symbol.iterator])throw new Error("Object.fromEntries requires an iterable");for(var t={},n=0;n<e.length;n++){var r=e[n];if(Object(r)!==r)throw new TypeError("Iterator value "+r+" is not an entry object");t[r[0]]=r[1]}return t}),Object.assign||(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t}),Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches&&t.matches(e))return t;if(t.msMatchesSelector&&t.msMatchesSelector(e))return t;t=t.parentElement}return null}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1}),Array.from||(Array.from=function(e){if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var t=arguments[1],n=arguments[2],r=void 0!==t;if(r&&"function"!=typeof t)throw new TypeError("Array.from: when provided, the second argument must be a function");var o,i=Object(e),a=[],s=0,c="undefined"!=typeof window?window:void 0!==c?c:this,u=i[void 0!==c.Symbol?c.Symbol.iterator:"@@iterator"];if("function"==typeof u){for(var l,d=u.call(i);!(l=d.next()).done;)o=l.value,a[s]=r?t.call(n,o,s):o,s++;a.length=s}else{var f=i.length>>>0;for(a=new Array(f);s<f;)o=i[s],a[s]=r?t.call(n,o,s):o,s++;a.length=f}return a}),e.fetch||(e.fetch=function(e,t){return new Promise((function(n,r){var o=new XMLHttpRequest,i="string"==typeof e?e:e.url,a=t&&t.method||"GET",s=t&&t.headers||{},c=t&&t.body||null,u=t&&t.credentials||"omit";if(o.open(a,i,!0),"include"===u&&(o.withCredentials=!0),s&&"function"==typeof s.forEach)s.forEach((function(e,t){o.setRequestHeader(t,e)}));else if(s)for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&o.setRequestHeader(l,s[l]);o.onload=function(){for(var e={},t=o.getAllResponseHeaders().split("\r\n"),i=0;i<t.length;i++){var a=t[i].split(": ");a[0]&&(e[a[0].toLowerCase()]=a[1])}var s={ok:o.status>=200&&o.status<300,status:o.status,statusText:o.statusText,headers:{get:function(t){return e[t.toLowerCase()]}},text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(JSON.parse(o.responseText))}};s.ok?n(s):r(new TypeError("Network response was not ok"))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request timed out"))},o.send(c)}))}),e.Headers||(e.Headers=function(e){this.map={};var t=this;if(e)if("function"==typeof e.forEach)e.forEach((function(e,n){t.append(n,e)}));else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.append(n,e[n])},e.Headers.prototype.append=function(e,t){e=e.toLowerCase(),this.map[e]||(this.map[e]=[]),this.map[e].push(t)},e.Headers.prototype.delete=function(e){delete this.map[e.toLowerCase()]},e.Headers.prototype.get=function(e){var t=this.map[e.toLowerCase()];return t?t[0]:null},e.Headers.prototype.has=function(e){return Object.prototype.hasOwnProperty.call(this.map,e.toLowerCase())},e.Headers.prototype.set=function(e,t){this.map[e.toLowerCase()]=[t]},e.Headers.prototype.forEach=function(e,t){for(var n in this.map)if(Object.prototype.hasOwnProperty.call(this.map,n))for(var r=0;r<this.map[n].length;r++)e.call(t,this.map[n][r],n,this)}),e.Request||(e.Request=function(t,n){n=n||{},this.url="string"==typeof t?t:t.url,this.method=n.method||"GET",this.headers=n.headers||new e.Headers,this.body=n.body||null,this.mode=n.mode||"cors",this.credentials=n.credentials||"omit",this.cls_own=n.cls_own||!1});var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(n),o=String.fromCharCode,i=function(e){var t=e.length,n=t%4,i=(t>0?r[e.charAt(0)]<<18:0)|(t>1?r[e.charAt(1)]<<12:0)|(t>2?r[e.charAt(2)]<<6:0)|(t>3?r[e.charAt(3)]:0),a=[o(i>>>16),o(i>>>8&255),o(255&i)];return a.length-=[0,0,2,1][n],a.join("")},a=function(e){var t=[0,2,1][e.length%3],r=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[n.charAt(r>>>18),n.charAt(r>>>12&63),t>=2?"=":n.charAt(r>>>6&63),t>=1?"=":n.charAt(63&r)].join("")};"function"!=typeof e.btoa&&(e.btoa=function(e){return e.replace(/[\s\S]{1,3}/g,a)}),"function"!=typeof e.atob&&(e.atob=function(e){return e.replace(/[\s\S]{1,4}/g,i)})}}])}();function Zg(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof s?r:s,u=Object.create(c.prototype);return Qg(u,"_invoke",function(n,r,o){var i,s,c,u=0,l=o||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return i=t,s=0,c=e,f.n=n,a}};function p(n,r){for(s=n,c=r,t=0;!d&&u&&!o&&t<l.length;t++){var o,i=l[t],p=f.p,m=i[2];n>3?(o=m===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=n<2&&p<i[1])?(s=0,f.v=r,f.n=i[1]):p<m&&(o=n<3||i[0]>r||r>m)&&(i[4]=n,i[5]=r,f.n=m,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,l,m){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&p(l,m),s=l,c=m;(t=s<2?e:c)||!d;){i||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==a)break}catch(t){i=e,s=1,c=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function c(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(Qg(t={},r,(function(){return this})),t),d=u.prototype=s.prototype=Object.create(l);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Qg(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,Qg(d,"constructor",u),Qg(u,"constructor",c),c.displayName="GeneratorFunction",Qg(u,o,"GeneratorFunction"),Qg(d),Qg(d,o,"Generator"),Qg(d,r,(function(){return this})),Qg(d,"toString",(function(){return"[object Generator]"})),(Zg=function(){return{w:i,m:f}})()}function Qg(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Qg=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){Qg(e,t,(function(e){return this._invoke(t,n,e)}))};i("next",0),i("throw",1),i("return",2)}},Qg(e,t,n,r)}function $g(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function ey(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){$g(i,r,o,a,s,"next",e)}function s(e){$g(i,r,o,a,s,"throw",e)}a(void 0)}))}}function ty(e){var t;if(null!=e&&null!==(t=e.userAgentData)&&void 0!==t&&t.getHighEntropyValues){var n,r=null===(n=e.userAgentData.platform)||void 0===n?void 0:n.toLowerCase();if("windows"===r)return function(e){return ny.apply(this,arguments)}(e.userAgentData);if("macos"===r)return function(e){return ry.apply(this,arguments)}(e.userAgentData)}return Promise.resolve(function(e){var t=e.indexOf("iPhone OS")>=0,n=e.indexOf("iPad")>=0,r=e.indexOf("Android")>=0,o=!n&&!n&&e.indexOf("Mac OS X")>=0;if(r)return function(e){var t=oy(e,/Android.+?(\d+)/);return t?"a".concat(t):void 0}(e);if(t)return function(e){var t=oy(e,/iPhone OS.+?(\d+)_\d+/);return t?"i".concat(t):void 0}(e);if(n)return function(e){var t=oy(e,/CPU OS.+?(\d+)_\d+/);return t?"i".concat(t):void 0}(e);if(o)return function(e){var t=void 0;e.indexOf("Intel Mac OS X 10_15_7")>=0&&e.indexOf("Safari")>=0&&(t=function(e){var t=oy(e,/Version\/(\d+).\d+/),n=parseInt(t,10);if(n<15)return;if(n<=18)return n-3}(e));t||(t=function(e){var t=oy(e,/Intel Mac OS X.+?(\d+).\d+;/);t||(t=oy(e,/Intel Mac OS X.+?(\d+)_\d+/));return t}(e));return t?"m".concat(t):void 0}(e)}(e.userAgent))}function ny(){return(ny=ey(Zg().m((function e(t){var n,r,o;return Zg().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,null==t?void 0:t.getHighEntropyValues(["platformVersion"]);case 1:if(r=e.v,!((o=parseInt(null==r||null===(n=r.platformVersion)||void 0===n?void 0:n.split(".")[0]))>=13)){e.n=2;break}return e.a(2,"w11");case 2:if(!(o>0)){e.n=3;break}return e.a(2,"w10");case 3:return e.a(2)}}),e)})))).apply(this,arguments)}function ry(){return(ry=ey(Zg().m((function e(t){var n,r;return Zg().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,null==t?void 0:t.getHighEntropyValues(["platformVersion"]);case 1:return n=e.v,r=oy(null==n?void 0:n.platformVersion,/(\d+)?\./),e.a(2,r?"m".concat(r):void 0)}}),e)})))).apply(this,arguments)}function oy(e,t){var n=e.match(t);if(n)return n[1]}function iy(e){return iy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iy(e)}function ay(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,sy(r.key),r)}}function sy(e){var t=function(e,t){if("object"!=iy(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=iy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==iy(t)?t:t+""}var cy=function(){return function(e,t,n){return t&&ay(e.prototype,t),n&&ay(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(n,r,o,i,a){var s=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initializePlugins=function(){s.detector&&(s.initializeBeaconReporterPlugin(),s.initializeObjectCapturingPlugin(),s.initializeThirdPartyIntegrationPlugin(),s.initializeAjaxPlugin(),s.initializeWorkerLoaderPlugin(),s.initializeGatewayPlugin(),s.initializeVoC(),s.initializeNamingPlugin(),s.initializeErrorPlugin(),s.initializeGBExtension(),ty(navigator).then((function(e){e&&s.bus.emit("ostype",e)})))},o||!(new th).shouldDisable(r,n))if(new Jg(r),L.assign(t,z),L.assign(t,W),H.detectorVersion=a,new pm(H),new X(H),this.jsVer=a,this.webworker=o,this.global=r,this.detectorName=n,this.bus=new xf,this.mobileBridgeContext=new Zd(r),new ug(r,this.bus,this.mobileBridgeContext),this.publicDataBridge={},this.webworker)new Ji(this.global,this.detectorName,H,t);else{H.detectorScript||t.detectorScriptNameES5&&(H.detectorScript=i.querySelector("script[src*='"+t.detectorScriptNameES5+"']")),H.detectorScript||r!==r.top||console.log("%c ERROR, the detector script could not be identified on the page. This can lead to various functions not working. For example: Iframe Injection, Web Workers, and the External Configuration Manager","color: white; background: red"),this.gUnboundStorageAccessor=new b(this.bus,window._gbLocalStorage,{keysPrefix:H.Storage.UnboundKeyPrefix}),this.gCookieHelper=new ja(i,this.bus,this.gUnboundStorageAccessor,{domainBy:t.cookieAssignFQDN?"fqdn":"tld",tldSegmentCount:t.cookieTLDSegmentCount,reportURI:t.reportURI,allowCookies:t.allowCookies});var c=this.gCookieHelper;if(this.gStorageAccessor=new xa(this.bus,window._gbLocalStorage,{keysPrefix:H.Storage.BoundKeyPrefix,sessionIdFunc:function(){return c._get(H.cookies.session)}}),new qg(self),this.gDomainHelper=new Ua(i,t.reportURI,t.cookieAssignFQDN),this.gSessionStorageAccessor=new b(this.bus,window._gbSessionStorage,{keysPrefix:H.Storage.BoundKeyPrefix,sessionIdFunc:function(){return c._get(H.cookies.session)}}),this.selectorResolver=new Am(window,H,t).apply(),this.cssSelectorResolver=new Dg(window,this.bus,t.domIncludeCSSSelector),this.gEncryptionManager=new Ga(window,this.bus,H,this.gStorageAccessor,ds,t,{publicKey:t.encryptionPublicKey,keyId:t.encryptionKeyId,timeout:t.encryptionTimeout}),new Ja(this.gEncryptionManager),this.gEncryptionUtils=new Wm(window,this.gEncryptionManager),this.gValueCensor=new gs(window,new Cf(this.gEncryptionManager,this.gEncryptionUtils,this.bus,H,t)),this.gNodeCache=new ah,this.gUriMasker=new Mm(t.maskQueryParameters,t.maskUrlPath,{urlMaskingChar:t.urlMaskingChar,queryMaskingChar:t.queryMaskingChar}),this.gDomCloningHook=new Bm,this.ajaxUtils=new Gi(self,H,t.reportPreferSendBeaconAPI,t.clientAttributesEnabled||t.interceptThirdPartyAttributes,t.cordovaSdkReporting),this.domEncryptor=new Vg(this.bus,this.gEncryptionUtils,{domEncryptIds:t.domEncryptById,domEncryptClasses:t.domEncryptByClass,domEncryptorMaskingChar:t.domEncryptorMaskingChar}),this.domRegexMasker=void 0,this.bus.on("newRemoteConfig",(function(e){s.remoteConfig=e})),this.detector=new mf(r,this.bus,this.gValueCensor,this.gStorageAccessor,this.gUnboundStorageAccessor,this.gSessionStorageAccessor,this.gNodeCache,this.gCookieHelper,this.gDomainHelper,this.gUriMasker,this.selectorResolver,this.cssSelectorResolver,H,this.jsVer,this.mobileBridgeContext,t,this.publicDataBridge),p.detector=this.detector,this.detector){var u;u=new xh(new hh(H).create(),t),new _h(this.detector,u,t,void 0,this.domEncryptor)}!this.webworker&&DetectorDomBootstrap&&(this.domBoot=new DetectorDomBootstrap(r,i,this.detector,this.bus,n,this.gDomainHelper,this.gCookieHelper,this.gStorageAccessor,this.gUnboundStorageAccessor,this.selectorResolver,this.cssSelectorResolver,this.gEncryptionManager,this.ajaxUtils,this.gNodeCache))}}),[{key:"init",value:function(){this.initialiezed=!0;try{this.bus.once("init:plugins",this.initializePlugins)}catch(e){}this.domBoot&&this.domBoot.init();var e=this.detector;if(e){this.global[this.detectorName]=new Zm(this.detector,this.detector.asStoppable(),this.bus,t,L.currentTimestamp,this.gCookieHelper,this.mobileBridgeContext,H,this.publicDataBridge),t.enableSessionCamApi&&(this.global.sessionCamRecorder=new Rg(this.global[this.detectorName],this.detector.asStoppable(),this.bus));try{this.global.Zone&&this.global.Zone.root&&"function"==typeof this.global.Zone.root.wrap?this.global.Zone.root.wrap(e.initialize).call(e):e.initialize()}catch(e){t&&t.onFail&&t.onFail(e);var n="ERROR: while initializing detector: "+(e.stack?e.stack:e.message);i&&i.log||console&&console.log&&console.log(n)}}}},{key:"initializeObjectCapturingPlugin",value:function(){L.time("initializeObjectCapturingPlugin",t.timingMode),this.detector.registerPlugin("ObjectCapture",new No(window,this.bus,!this.detector.isSessionCookieExist(),{domRecordEnabled:t.domRecordEnabled,captureGlobalObjectsOnSegmentChange:t.captureGlobalObjectsOnSegmentChange,paths:t.captureGlobalObjects||[],captureEmptyStrings:t.captureGlobalObjectsEmptyStrings,useFullPath:t.useFullPathForObjectCapturing,dataLayerPath:t.dataLayerPath,dataLayerBlockList:t.dataLayerBlockList||[],dataLayerValuesBlockList:t.dataLayerValuesBlockList||[],dataLayerIncludeList:t.dataLayerIncludeList||[],dataLayerValuesIncludeList:t.dataLayerValuesIncludeList||[],dataLayerCaptureEmptyStrings:!!t.dataLayerCaptureEmptyStrings,captureDataLayerArrayPushes:t.captureDataLayerArrayPushes,dataLayerArrayName:t.dataLayerArrayName,dedupeDataLayerValues:t.dedupeDataLayerValues,collectDataLayerOnlyOnFirstPage:t.collectDataLayerOnlyOnFirstPage,sendDatalayerPushUsingCustomEvent:t.sendDatalayerPushUsingCustomEvent})),L.timeEnd("initializeObjectCapturingPlugin",t.timingMode)}},{key:"initializeWorkerLoaderPlugin",value:function(){L.time("initializeWorkerLoaderPlugin",t.timingMode),this.detector.registerPlugin("workerLoader",new Ri(this.global,this.bus,this.gDomainHelper,this.gEncryptionManager,H,t)),L.timeEnd("initializeWorkerLoaderPlugin",t.timingMode)}},{key:"initializeThirdPartyIntegrationPlugin",value:function(){(t.interceptThirdPartyAttributes||t.SCIntegration&&(t.SCIntegrationURLsContainList||[]).length&&(t.SCIntegrationKeyList||[]).length||t.interceptAjax&&t.interceptABTesting||t.enableOptimizelyIntegration||t.enableAdobeAnalyticsIntegration||t.enableGoogleAnalyticsIntegration||t.interceptGAABTesting||t.enableABTastyIntegration)&&(L.time("initializeThirdPartyIntegrationPlugin",t.timingMode),this.detector.registerPlugin("SCIntegration",new ki(window,document,this.bus,up,{interceptThirdPartyAttributes:t.interceptThirdPartyAttributes,SCIntegration:t.SCIntegration,SCIntegrationURLsContainList:t.SCIntegrationURLsContainList,SCIntegrationKeyList:t.SCIntegrationKeyList,interceptABTesting:t.interceptABTesting,interceptAdobeABEvent:t.interceptAdobeABEvent,interceptAjax:t.interceptAjax,enableOptimizelyIntegration:t.enableOptimizelyIntegration,abTestingGlobalObject:t.abTestingGlobalObject,enableAdobeAnalyticsIntegration:t.enableAdobeAnalyticsIntegration,adobeRsid:t.adobeRsid,adobeEVarNumber:t.adobeEVarNumber,adobeAPIMaxAttempts:t.adobeAPIMaxAttempts,enableGoogleAnalyticsIntegration:t.enableGoogleAnalyticsIntegration,googleDimensionIndex:t.googleDimensionIndex,googleAPIMaxAttempts:t.googleAPIMaxAttempts,gaMeasurementId:t.googleMeasurementId,interceptGAABTesting:t.interceptGAABTesting,enableABTastyIntegration:t.enableABTastyIntegration,isCheckPayload:t.SCIntegrationCheckPayload,isListenToAnalyticsAjax:t.SCIntegrationAjaxListen,interceptSendBeacon:t.SCIntegrationInterceptSendBeacon,interceptThirdPartyAttributesDefaultUrlsPatterns:t.interceptThirdPartyAttributesDefaultUrlsPatterns})),L.timeEnd("initializeThirdPartyIntegrationPlugin",t.timingMode))}},{key:"initializeBeaconReporterPlugin",value:function(){L.time("initializeBeaconReporterPlugin",t.timingMode),this.detector.registerPlugin("reporter",new go(this.bus,t,this.gEncryptionManager,this.gDomainHelper,this.gCookieHelper,H,this.detector,this.ajaxUtils)),L.timeEnd("initializeBeaconReporterPlugin",t.timingMode)}},{key:"initializeGatewayPlugin",value:function(){L.time("initializeGatewayPlugin",t.timingMode),this.detector.registerPlugin("gatewayPlugin",new ka(window,this.bus,H,t.reportPreferSendBeaconAPI,this.gUnboundStorageAccessor,this.gSessionStorageAccessor,this.gCookieHelper)),L.timeEnd("initializeGatewayPlugin",t.timingMode)}},{key:"initializeAjaxPlugin",value:function(){t.interceptAjax&&(L.time("initializeAjaxPlugin",t.timingMode),this.detector.registerPlugin("ajaxInterceptor",new Hp(window,this.bus,this.selectorResolver,this.cssSelectorResolver,document.location.host,this.gUriMasker,t,["adrum","dynatrace","appdynamics.com","tealeaf","/retail/discountinternet/portal/coex.asmx/keepalive","oauth/cc"],this.gStorageAccessor)),L.timeEnd("initializeAjaxPlugin",t.timingMode))}},{key:"initializeNamingPlugin",value:function(){L.time("initializeNamingPlugin",t.timingMode),this.detector.registerPlugin("naming",new Qp(document,this.bus,{pageNameEnabled:t.pageNameResolvingEnabled,pageNameByElements:t.pageNameResolvingByElements||[]})),L.timeEnd("initializeNamingPlugin",t.timingMode)}},{key:"initializeErrorPlugin",value:function(){L.time("initializeErrorPlugin",t.timingMode),this.detector.registerPlugin("errors",new cm(window,this.bus,t)),L.timeEnd("initializeErrorPlugin",t.timingMode)}},{key:"initializeGBExtension",value:function(){t.useExtension&&L.isChromeDesktop()&&(L.time("initializeGBExtension",t.timingMode),this.detector.registerPlugin("extensionManager",new Dh(window,this.detector,this.bus,this.selectorResolver,t)),L.timeEnd("initializeGBExtension",t.timingMode))}},{key:"initializeVoC",value:function(){t.collectVoc&&(L.time("initializeVoc",t.timingMode),this.detector.registerPlugin("VoCIntegration",new kg(window,this.bus,{vocObjectMapInterface:t.vocObjectMap||t.vocObjectMapV2,collectUsabillaVoc:t.collectUsabillaVoc,waitForUsabillaObj:t.waitForUsabillaObj,interceptUsabillaUrl:t.interceptUsabillaUrl,collectMedalliaVoc:t.collectMedalliaVoc,vocMaskingChar:t.vocMaskingChar})),L.timeEnd("initializeVoc",t.timingMode))}}])}(),uy=new cy("_detector","undefined"!=typeof window?window:self,"undefined"==typeof window,"undefined"!=typeof document?document:void 0,"[Local_version_prod_es5]");"undefined"!=typeof window&&uy.init.call(uy);uy.detector}();